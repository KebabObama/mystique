(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55838,(e,t,n)=>{"use strict";var r=e.r(71645),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,l=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function a(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,c=r[1];return s(function(){o.value=n,o.getSnapshot=t,a(o)&&c({inst:o})},[e,n,t]),l(function(){return a(o)&&c({inst:o}),e(function(){a(o)&&c({inst:o})})},[e]),u(n),n};n.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},2239,(e,t,n)=>{"use strict";t.exports=e.r(55838)},72136,e=>{"use strict";e.s(["authClient",()=>K],72136);var t=Object.defineProperty,n=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(e,n,r)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,u=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&s(e,n,t[n]);if(o)for(var n of o(t))l.call(t,n)&&s(e,n,t[n]);return e},a=(e,t)=>n(e,r(t)),c=class extends Error{constructor(e,t,n){super(t||e.toString(),{cause:n}),this.status=e,this.statusText=t,this.error=n}},f=async(e,t)=>{var n,r,o,i,l,s;let u=t||{},a={onRequest:[null==t?void 0:t.onRequest],onResponse:[null==t?void 0:t.onResponse],onSuccess:[null==t?void 0:t.onSuccess],onError:[null==t?void 0:t.onError],onRetry:[null==t?void 0:t.onRetry]};if(!t||!(null==t?void 0:t.plugins))return{url:e,options:u,hooks:a};for(let c of(null==t?void 0:t.plugins)||[]){if(c.init){let r=await (null==(n=c.init)?void 0:n.call(c,e.toString(),t));u=r.options||u,e=r.url}a.onRequest.push(null==(r=c.hooks)?void 0:r.onRequest),a.onResponse.push(null==(o=c.hooks)?void 0:o.onResponse),a.onSuccess.push(null==(i=c.hooks)?void 0:i.onSuccess),a.onError.push(null==(l=c.hooks)?void 0:l.onError),a.onRetry.push(null==(s=c.hooks)?void 0:s.onRetry)}return{url:e,options:u,hooks:a}},d=class{shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}constructor(e){this.options=e}},p=class{shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}constructor(e){this.options=e}},h=async e=>{let t={},n=async e=>"function"==typeof e?await e():e;if(null==e?void 0:e.auth){if("Bearer"===e.auth.type){let r=await n(e.auth.token);if(!r)return t;t.authorization="Bearer ".concat(r)}else if("Basic"===e.auth.type){let r=n(e.auth.username),o=n(e.auth.password);if(!r||!o)return t;t.authorization="Basic ".concat(btoa("".concat(r,":").concat(o)))}else if("Custom"===e.auth.type){let r=n(e.auth.value);if(!r)return t;t.authorization="".concat(n(e.auth.prefix)," ").concat(r)}}return t},v=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function y(e){if(void 0===e)return!1;let t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}function g(e){try{return JSON.parse(e)}catch(t){return e}}function m(e){return"function"==typeof e}async function T(e){let t=new Headers(null==e?void 0:e.headers);for(let[n,r]of Object.entries(await h(e)||{}))t.set(n,r);if(!t.has("content-type")){let n=y(null==e?void 0:e.body)?"application/json":null;n&&t.set("content-type",n)}return t}var E=class e extends Error{constructor(t,n){super(n||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,e.prototype)}};async function b(e,t){let n=await e["~standard"].validate(t);if(n.issues)throw new E(n.issues);return n.value}var R=["get","post","put","patch","delete"],w=async(e,t)=>{var n,r,o,i,l,s,h,E;let{hooks:O,url:_,options:S}=await f(e,t),A=function(e){if(null==e?void 0:e.customFetchImpl)return e.customFetchImpl;if("undefined"!=typeof globalThis&&m(globalThis.fetch))return globalThis.fetch;if("undefined"!=typeof window&&m(window.fetch))return window.fetch;throw Error("No fetch implementation found")}(S),x=new AbortController,U=null!=(n=S.signal)?n:x.signal,L=function(e,t){let{baseURL:n,params:r,query:o}=t||{query:{},params:{},baseURL:""},i=e.startsWith("http")?e.split("/").slice(0,3).join("/"):n||"";if(e.startsWith("@")){let t=e.toString().split("@")[1].split("/")[0];R.includes(t)&&(e=e.replace("@".concat(t,"/"),"/"))}i.endsWith("/")||(i+="/");let[l,s]=e.replace(i,"").split("?"),u=new URLSearchParams(s);for(let[e,t]of Object.entries(o||{}))null!=t&&u.set(e,String(t));if(r)if(Array.isArray(r))for(let[e,t]of l.split("/").filter(e=>e.startsWith(":")).entries()){let n=r[e];l=l.replace(t,n)}else for(let[e,t]of Object.entries(r))l=l.replace(":".concat(e),String(t));(l=l.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(l=l.slice(1));let a=u.toString();return(a=a.length>0?"?".concat(a).replace(/\+/g,"%20"):"",i.startsWith("http"))?new URL("".concat(l).concat(a),i):"".concat(i).concat(l).concat(a)}(_,S),C=function(e){if(!(null==e?void 0:e.body))return null;let t=new Headers(null==e?void 0:e.headers);if(y(e.body)&&!t.has("content-type")){for(let[t,n]of Object.entries(null==e?void 0:e.body))n instanceof Date&&(e.body[t]=n.toISOString());return JSON.stringify(e.body)}return e.body}(S),P=await T(S),I=function(e,t){var n;if(null==t?void 0:t.method)return t.method.toUpperCase();if(e.startsWith("@")){let r=null==(n=e.split("@")[1])?void 0:n.split("/")[0];return R.includes(r)?r.toUpperCase():(null==t?void 0:t.body)?"POST":"GET"}return(null==t?void 0:t.body)?"POST":"GET"}(_,S),j=a(u({},S),{url:L,headers:P,body:C,method:I,signal:U});for(let e of O.onRequest)if(e){let t=await e(j);t instanceof Object&&(j=t)}("pipeTo"in j&&"function"==typeof j.pipeTo||"function"==typeof(null==(r=null==t?void 0:t.body)?void 0:r.pipe))&&!("duplex"in j)&&(j.duplex="half");let{clearTimeout:N}=function(e,t){let n;return!(null==e?void 0:e.signal)&&(null==e?void 0:e.timeout)&&(n=setTimeout(()=>null==t?void 0:t.abort(),null==e?void 0:e.timeout)),{abortTimeout:n,clearTimeout:()=>{n&&clearTimeout(n)}}}(S,x),B=await A(j.url,j);N();let M={response:B,request:j};for(let e of O.onResponse)if(e){let n=await e(a(u({},M),{response:(null==(o=null==t?void 0:t.hookOptions)?void 0:o.cloneResponse)?B.clone():B}));n instanceof Response?B=n:n instanceof Object&&(B=n.response)}if(B.ok){if("HEAD"===j.method)return{data:"",error:null};let e=function(e){let t=e.headers.get("content-type"),n=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";let r=t.split(";").shift()||"";return v.test(r)?"json":n.has(r)||r.startsWith("text/")?"text":"blob"}(B),n={data:"",response:B,request:j};if("json"===e||"text"===e){let e=await B.text(),t=null!=(i=j.jsonParser)?i:g;n.data=await t(e)}else n.data=await B[e]();for(let e of((null==j?void 0:j.output)&&j.output&&!j.disableValidation&&(n.data=await b(j.output,n.data)),O.onSuccess))e&&await e(a(u({},n),{response:(null==(l=null==t?void 0:t.hookOptions)?void 0:l.cloneResponse)?B.clone():B}));return(null==t?void 0:t.throw)?n.data:{data:n.data,error:null}}let D=null!=(s=null==t?void 0:t.jsonParser)?s:g,k=await B.text(),q=function(e){try{return JSON.parse(e),!0}catch(e){return!1}}(k),H=q?await D(k):null,W={response:B,responseText:k,request:j,error:a(u({},H),{status:B.status,statusText:B.statusText})};for(let e of O.onError)e&&await e(a(u({},W),{response:(null==(h=null==t?void 0:t.hookOptions)?void 0:h.cloneResponse)?B.clone():B}));if(null==t?void 0:t.retry){let n=function(e){if("number"==typeof e)return new d({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new d(e);case"exponential":return new p(e);default:throw Error("Invalid retry strategy")}}(t.retry),r=null!=(E=t.retryAttempt)?E:0;if(await n.shouldAttemptRetry(r,B)){for(let e of O.onRetry)e&&await e(M);let o=n.getDelay(r);return await new Promise(e=>setTimeout(e,o)),await w(e,a(u({},t),{retryAttempt:r+1}))}}if(null==t?void 0:t.throw)throw new c(B.status,B.statusText,q?H:k);return{data:null,error:a(u({},H),{status:B.status,statusText:B.statusText})}},O=e.i(47167);let _=Object.create(null),S=e=>{var t,n;return(null==(t=globalThis.process)?void 0:t.env)||(null==(n=globalThis.Deno)?void 0:n.env.toObject())||globalThis.__env__||(e?_:globalThis)},A=new Proxy(_,{get(e,t){var n;return null!=(n=S()[t])?n:_[t]},has:(e,t)=>t in S()||t in _,set:(e,t,n)=>(S(!0)[t]=n,!0),deleteProperty(e,t){if(!t)return!1;let n=S(!0);return delete n[t],!0},ownKeys:()=>Object.keys(S(!0))});function x(e,t){var n,r,o;return void 0!==O.default&&O.default.env?null!=(n=O.default.env[e])?n:t:"undefined"!=typeof Deno?null!=(r=Deno.env.get(e))?r:t:"undefined"!=typeof Bun&&null!=(o=Bun.env[e])?o:t}void 0!==O.default&&O.default.env,Object.freeze({get BETTER_AUTH_SECRET(){return x("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return x("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return x("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return x("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return x("NODE_ENV","development")},get PACKAGE_VERSION(){return x("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return x("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}});let U={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:24,putty:4,st:4,"rxvt-unicode-24bit":24,terminator:24,"xterm-kitty":24},L=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:24,DRONE:8,GITEA_ACTIONS:24,GITHUB_ACTIONS:24,GITLAB_CI:8,TRAVIS:8})),C=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/],P={reset:"\x1b[0m",bright:"\x1b[1m",dim:"\x1b[2m",fg:{black:"\x1b[30m",red:"\x1b[31m",green:"\x1b[32m",yellow:"\x1b[33m",blue:"\x1b[34m",magenta:"\x1b[35m",cyan:"\x1b[36m",white:"\x1b[37m"}},I=["info","success","warn","error","debug"],j={info:P.fg.blue,success:P.fg.green,warn:P.fg.yellow,error:P.fg.red,debug:P.fg.magenta};(e=>{var t;let n=(null==e?void 0:e.disabled)!==!0,r=null!=(t=null==e?void 0:e.level)?t:"error",o=(null==e?void 0:e.disableColors)!==void 0?!e.disableColors:1!==function(){if(void 0!==x("FORCE_COLOR"))switch(x("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return 24;default:return 1}if(void 0!==x("NODE_DISABLE_COLORS")&&""!==x("NODE_DISABLE_COLORS")||void 0!==x("NO_COLOR")&&""!==x("NO_COLOR")||"dumb"===x("TERM"))return 1;if(x("TMUX"))return 24;if("TF_BUILD"in A&&"AGENT_NAME"in A)return 4;if("CI"in A){for(let{0:e,1:t}of L)if(e in A)return t;return"codeship"===x("CI_NAME")?8:1}if("TEAMCITY_VERSION"in A)return null!==/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(x("TEAMCITY_VERSION"))?4:1;switch(x("TERM_PROGRAM")){case"iTerm.app":if(!x("TERM_PROGRAM_VERSION")||null!==/^[0-2]\./.exec(x("TERM_PROGRAM_VERSION")))return 8;return 24;case"HyperTerm":case"MacTerm":return 24;case"Apple_Terminal":return 8}if("truecolor"===x("COLORTERM")||"24bit"===x("COLORTERM"))return 24;if(x("TERM")){if(null!==/truecolor/.exec(x("TERM")))return 24;if(null!==/^xterm-256/.exec(x("TERM")))return 8;let e=x("TERM").toLowerCase();if(U[e])return U[e];if(C.some(t=>null!==t.exec(e)))return 4}return x("COLORTERM")?4:1}(),i=function(t,i){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!n||!(I.indexOf(t)<=I.indexOf(r)))return;let s=((e,t,n)=>{let r=new Date().toISOString();return n?"".concat(P.dim).concat(r).concat(P.reset," ").concat(j[e]).concat(e.toUpperCase()).concat(P.reset," ").concat(P.bright,"[Better Auth]:").concat(P.reset," ").concat(t):"".concat(r," ").concat(e.toUpperCase()," [Better Auth]: ").concat(t)})(t,i,o);if(!e||"function"!=typeof e.log)return void("error"===t?console.error(s,...l):"warn"===t?console.warn(s,...l):console.log(s,...l));e.log("success"===t?"info":t,i,...l)};return{...Object.fromEntries(I.map(e=>[e,function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let[o,...l]=n;return i(e,o,l)}])),get level(){return r}}})();class N extends Error{constructor(e,t){super(e),this.name="BetterAuthError",this.message=e,this.cause=t,this.stack=""}}function B(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/api/auth";if(function(e){try{let t=new URL(e).pathname.replace(/\/+$/,"")||"/";return"/"!==t}catch(t){throw new N("Invalid base URL: ".concat(e,". Please provide a valid base URL."))}}(e))return e;let n=e.replace(/\/+$/,"");return t&&"/"!==t?(t=t.startsWith("/")?t:"/".concat(t),"".concat(n).concat(t)):n}let M=[],D=0,k=0,q=e=>{let t=[],n={get:()=>(n.lc||n.listen(()=>{})(),n.value),lc:0,listen:e=>(n.lc=t.push(e),()=>{for(let t=D+4;t<M.length;)M[t]===e?M.splice(t,4):t+=4;let r=t.indexOf(e);~r&&(t.splice(r,1),--n.lc||n.off())}),notify(e,r){k++;let o=!M.length;for(let o of t)M.push(o,n.value,e,r);if(o){for(D=0;D<M.length;D+=4)M[D](M[D+1],M[D+2],M[D+3]);M.length=0}},off(){},set(e){let t=n.value;t!==e&&(n.value=e,n.notify(t))},subscribe(e){let t=n.listen(e);return e(n.value),t},value:e};return n},H=(e,t)=>((e,t,n,r)=>(e.events=e.events||{},e.events[n+10]||(e.events[n+10]=r(t=>{e.events[n].reduceRight((e,t)=>(t(e),e),{shared:{},...t})})),e.events[n]=e.events[n]||[],e.events[n].push(t),()=>{let r=e.events[n],o=r.indexOf(t);r.splice(o,1),r.length||(delete e.events[n],e.events[n+10](),delete e.events[n+10])}))(e,n=>{let r=t(n);r&&e.events[6].push(r)},5,t=>{let n=e.listen;e.listen=function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return e.lc||e.active||(e.active=!0,t()),n(...o)};let r=e.off;return e.events[6]=[],e.off=()=>{r(),setTimeout(()=>{if(e.active&&!e.lc){for(let t of(e.active=!1,e.events[6]))t();e.events[6]=[]}},1e3)},()=>{e.listen=n,e.off=r}}),W="undefined"==typeof window,F={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},G=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,V={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0},Y=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/,$={id:"redirect",name:"Redirect",hooks:{onSuccess(e){var t,n;if((null==(t=e.data)?void 0:t.url)&&(null==(n=e.data)?void 0:n.redirect)&&"undefined"!=typeof window&&window.location&&window.location)try{window.location.href=e.data.url}catch(e){}}}};var J=e.i(71645);let K=function(e){var t,n;let{pluginPathMethods:r,pluginsActions:o,pluginsAtoms:i,$fetch:l,$store:s,atomListeners:c}=((e,t)=>{var n,r,o,i,l,s,c,f;let d,p="credentials"in Request.prototype,h=null!=(s=function(e,t,n,r){if(e)return B(e,t);if(!1!==r){let e=A.BETTER_AUTH_URL||A.NEXT_PUBLIC_BETTER_AUTH_URL||A.PUBLIC_BETTER_AUTH_URL||A.NUXT_PUBLIC_BETTER_AUTH_URL||A.NUXT_PUBLIC_AUTH_URL||("/"!==A.BASE_URL?A.BASE_URL:void 0);if(e)return B(e,t)}let o=null==n?void 0:n.headers.get("x-forwarded-host"),i=null==n?void 0:n.headers.get("x-forwarded-proto");if(o&&i)return B("".concat(i,"://").concat(o),t);if(n){let e=function(e){try{return new URL(e).origin}catch(e){return null}}(n.url);if(!e)throw new N("Could not get origin from request. Please provide a valid base URL.");return B(e,t)}if("undefined"!=typeof window&&window.location)return B(window.location.origin,t)}(null==e?void 0:e.baseURL,null==e?void 0:e.basePath,void 0,t))?s:"/api/auth",v=(null==e||null==(n=e.plugins)?void 0:n.flatMap(e=>e.fetchPlugins).filter(e=>void 0!==e))||[],y={id:"lifecycle-hooks",name:"lifecycle-hooks",hooks:{onSuccess:null==e||null==(r=e.fetchOptions)?void 0:r.onSuccess,onError:null==e||null==(o=e.fetchOptions)?void 0:o.onError,onRequest:null==e||null==(i=e.fetchOptions)?void 0:i.onRequest,onResponse:null==e||null==(l=e.fetchOptions)?void 0:l.onResponse}},{onSuccess:g,onError:m,onRequest:T,onResponse:E,...R}=(null==e?void 0:e.fetchOptions)||{},O=(d={baseURL:h,...p?{credentials:"include"}:{},method:"GET",jsonParser:e=>e?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{strict:!0};return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{strict:n=!1,warnings:r=!1,reviver:o,parseDates:i=!0}=t;if("string"!=typeof e)return e;let l=e.trim();if(l.length>0&&'"'===l[0]&&l.endsWith('"')&&!l.slice(1,-1).includes('"'))return l.slice(1,-1);let s=l.toLowerCase();if(s.length<=9&&s in V)return V[s];if(!G.test(l)){if(n)throw SyntaxError("[better-json] Invalid JSON");return e}if(Object.entries(F).some(e=>{let[t,n]=e,o=n.test(l);return o&&r&&console.warn("[better-json] Detected potential prototype pollution attempt using ".concat(t," pattern")),o})&&n)throw Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(l,(e,t)=>{if("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t){r&&console.warn('[better-json] Dropping "'.concat(e,'" key to prevent prototype pollution'));return}if(i&&"string"==typeof t){let e=function(e){let t=Y.exec(e);if(!t)return null;let[,n,r,o,i,l,s,u,a,c,f]=t,d=new Date(Date.UTC(parseInt(n,10),parseInt(r,10)-1,parseInt(o,10),parseInt(i,10),parseInt(l,10),parseInt(s,10),u?parseInt(u.padEnd(3,"0"),10):0));if(a){let e=(60*parseInt(c,10)+parseInt(f,10))*("+"===a?-1:1);d.setUTCMinutes(d.getUTCMinutes()+e)}return d instanceof Date&&!isNaN(d.getTime())?d:null}(t);if(e)return e}return o?o(e,t):t})}catch(t){if(n)throw t;return e}}(e,t)}(e,{strict:!1}):null,customFetchImpl:fetch,...R,plugins:[y,...R.plugins||[],...(null==e?void 0:e.disableDefaultFetchPlugins)?[]:[$],...v]},async function(e,t){let n,r=a(u(u({},d),t),{plugins:[...(null==d?void 0:d.plugins)||[],(n=d||{},{id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(e,t){var r,o,i,l;let s=(null==(o=null==(r=n.plugins)?void 0:r.find(t=>{var n;return null!=(n=t.schema)&&!!n.config&&(e.startsWith(t.schema.config.baseURL||"")||e.startsWith(t.schema.config.prefix||""))}))?void 0:o.schema)||n.schema;if(s){let n=e;(null==(i=s.config)?void 0:i.prefix)&&n.startsWith(s.config.prefix)&&(n=n.replace(s.config.prefix,""),s.config.baseURL&&(e=e.replace(s.config.prefix,s.config.baseURL))),(null==(l=s.config)?void 0:l.baseURL)&&n.startsWith(s.config.baseURL)&&(n=n.replace(s.config.baseURL,""));let r=s.schema[n];if(r){let n=a(u({},t),{method:r.method,output:r.output});return(null==t?void 0:t.disableValidation)||(n=a(u({},n),{body:r.input?await b(r.input,null==t?void 0:t.body):null==t?void 0:t.body,params:r.params?await b(r.params,null==t?void 0:t.params):null==t?void 0:t.params,query:r.query?await b(r.query,null==t?void 0:t.query):null==t?void 0:t.query})),{url:e,options:n}}}return{url:e,options:t}}})]});if(null==d?void 0:d.catchAllError)try{return await w(e,r)}catch(e){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:e}}}return await w(e,r)}),{$sessionSignal:_,session:S}=function(e){let t=q(!1);return{session:((e,t,n,r)=>{let o=q({data:null,error:null,isPending:!0,isRefetching:!1,refetch:e=>i(e)}),i=e=>{let i="function"==typeof r?r({data:o.get().data,error:o.get().error,isPending:o.get().isPending}):r;n(t,{...i,query:{...null==i?void 0:i.query,...null==e?void 0:e.query},async onSuccess(e){var t;o.set({data:e.data,error:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch}),await (null==i||null==(t=i.onSuccess)?void 0:t.call(i,e))},async onError(e){var t,n;let{request:r}=e,l="number"==typeof r.retry?r.retry:null==(t=r.retry)?void 0:t.attempts,s=r.retryAttempt||0;l&&s<l||(o.set({error:e.error,data:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch}),await (null==i||null==(n=i.onError)?void 0:n.call(i,e)))},async onRequest(e){var t;let n=o.get();o.set({isPending:null===n.data,data:n.data,error:null,isRefetching:!0,refetch:o.value.refetch}),await (null==i||null==(t=i.onRequest)?void 0:t.call(i,e))}}).catch(e=>{o.set({error:e,data:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch})})};e=Array.isArray(e)?e:[e];let l=!1;for(let t of e)t.subscribe(()=>{W||(l?i():H(o,()=>{let e=setTimeout(()=>{l||(i(),l=!0)},0);return()=>{o.off(),t.off(),clearTimeout(e)}}))});return o})(t,"/get-session",e,{method:"GET"}),$sessionSignal:t}}(O),x=(null==e?void 0:e.plugins)||[],U={},L={$sessionSignal:_,session:S},C={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"},P=[{signal:"$sessionSignal",matcher:e=>"/sign-out"===e||"/update-user"===e||e.startsWith("/sign-in")||e.startsWith("/sign-up")||"/delete-user"===e||"/verify-email"===e}];for(let e of x)e.getAtoms&&Object.assign(L,null==(c=e.getAtoms)?void 0:c.call(e,O)),e.pathMethods&&Object.assign(C,e.pathMethods),e.atomListeners&&P.push(...e.atomListeners);let I={notify:e=>{L[e].set(!L[e].get())},listen:(e,t)=>{L[e].subscribe(t)},atoms:L};for(let t of x)t.getActions&&Object.assign(U,null==(f=t.getActions)?void 0:f.call(t,O,I,e));return{get baseURL(){return h},pluginsActions:U,pluginsAtoms:L,pluginPathMethods:C,atomListeners:P,$fetch:O,$store:I}})(void 0),f={};for(let[e,t]of Object.entries(i)){f["use".concat((n=e).charAt(0).toUpperCase()+n.slice(1))]=()=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,J.useRef)(e.get()),{keys:r,deps:o=[e,r]}=t,i=(0,J.useCallback)(t=>{let o=e=>{n.current!==e&&(n.current=e,t())};if(o(e.value),null==r?void 0:r.length){let t;return t=new Set(r).add(void 0),e.listen((e,n,r)=>{t.has(r)&&o(e,n,r)})}return e.listen(o)},o),l=()=>n.current;return(0,J.useSyncExternalStore)(i,l,l)})(t)}return t={...o,...f,$fetch:l,$store:s},function e(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Proxy(function(){},{get(r,o){var i;if("string"!=typeof o||"then"===o||"catch"===o||"finally"===o)return;let l=[...n,o],s=t;for(let e of l)if(s&&"object"==typeof s&&e in s)s=s[e];else{s=void 0;break}return"function"==typeof s?s:"object"==typeof(i=s)&&null!==i&&"get"in i&&"function"==typeof i.get&&"lc"in i&&"number"==typeof i.lc?s:e(l)},apply:async(e,t,o)=>{let s="/"+n.map(e=>e.replace(/[A-Z]/g,e=>"-".concat(e.toLowerCase()))).join("/"),u=o[0]||{},a=o[1]||{},{query:f,fetchOptions:d,...p}=u,h={...a,...d},v=function(e,t,n){let r=t[e],{fetchOptions:o,query:i,...l}=n||{};return r||((null==o?void 0:o.method)?o.method:l&&Object.keys(l).length>0?"POST":"GET")}(s,r,u);return await l(s,{...h,body:"GET"===v?void 0:{...p,...(null==h?void 0:h.body)||{}},query:f||(null==h?void 0:h.query),method:v,async onSuccess(e){var t;if(await (null==h||null==(t=h.onSuccess)?void 0:t.call(h,e)),!c)return;let n=c.filter(e=>e.matcher(s));if(n.length)for(let e of n){let t=i[e.signal];if(!t)return;let n=t.get();setTimeout(()=>{t.set(!n)},10)}}})}})}()}()}]);