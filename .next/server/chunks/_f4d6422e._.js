module.exports=[44988,e=>{"use strict";e.s(["entityKind",()=>t,"is",()=>r]);let t=Symbol.for("drizzle:entityKind");function r(e,r){if(!e||"object"!=typeof e)return!1;if(e instanceof r)return!0;if(!Object.prototype.hasOwnProperty.call(r,t))throw Error(`Class "${r.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let i=Object.getPrototypeOf(e).constructor;if(i)for(;i;){if(t in i&&i[t]===r[t])return!0;i=Object.getPrototypeOf(i)}return!1}Symbol.for("drizzle:hasOwnEntityKind")},7932,e=>{"use strict";e.s(["DefaultLogger",()=>i,"NoopLogger",()=>n]);var t=e.i(44988);class r{static [t.entityKind]="ConsoleLogWriter";write(e){console.log(e)}}class i{static [t.entityKind]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new r}logQuery(e,t){let r=t.map(e=>{try{return JSON.stringify(e)}catch{return String(e)}}),i=r.length?` -- params: [${r.join(", ")}]`:"";this.writer.write(`Query: ${e}${i}`)}}class n{static [t.entityKind]="NoopLogger";logQuery(){}}},49507,22360,e=>{"use strict";let t,r;function i(e,...t){return e(...t)}e.s(["iife",()=>i],49507),e.s(["tracer",()=>n],22360);let n={startActiveSpan:(e,n)=>t?(r||(r=t.trace.getTracer("drizzle-orm","0.44.7")),i((t,r)=>r.startActiveSpan(e,e=>{try{return n(e)}catch(r){throw e.setStatus({code:t.SpanStatusCode.ERROR,message:r instanceof Error?r.message:"Unknown error"}),r}finally{e.end()}}),t,r)):n()}},56325,63411,43233,4775,92352,88274,69e3,18899,e=>{"use strict";e.s(["Column",()=>r],56325);var t=e.i(44988);class r{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static [t.entityKind]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}e.s(["Param",()=>G,"Placeholder",()=>Z,"SQL",()=>K,"StringChunk",()=>z,"View",()=>J,"fillPlaceholders",()=>W,"isDriverValueEncoder",()=>F,"isSQLWrapper",()=>B,"sql",()=>H],18899),e.s(["IndexedColumn",()=>y,"PgColumn",()=>h,"PgColumnBuilder",()=>f],4775);class i{static [t.entityKind]="ColumnBuilder";config;constructor(e,t,r){this.config={name:e,keyAsName:""===e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){""===this.config.name&&(this.config.name=e)}}e.s(["ForeignKeyBuilder",()=>s],63411);let n=Symbol.for("drizzle:Name");class s{static [t.entityKind]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:t,columns:r,foreignColumns:i}=e();return{name:t,columns:r,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new a(e,this)}}class a{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [t.entityKind]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:r}=this.reference(),i=t.map(e=>e.name),s=r.map(e=>e.name),a=[this.table[n],...i,r[0].table[n],...s];return e??`${a.join("_")}_fk`}}var o=e.i(49507);function u(e,t){return`${e[n]}_${t.join("_")}_unique`}e.s(["UniqueConstraintBuilder",()=>l,"uniqueKeyName",()=>u],43233);class l{constructor(e,t){this.name=t,this.columns=e}static [t.entityKind]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new c(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class d{static [t.entityKind]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new l(e,this.name)}}class c{constructor(e,t,r,i){this.table=e,this.columns=t,this.name=i??u(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=r}static [t.entityKind]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function p(e,t,r){for(let i=t;i<e.length;i++){let n=e[i];if("\\"===n){i++;continue}if('"'===n)return[e.slice(t,i).replace(/\\/g,""),i+1];if(!r&&(","===n||"}"===n))return[e.slice(t,i).replace(/\\/g,""),i]}return[e.slice(t).replace(/\\/g,""),e.length]}class f extends i{foreignKeyConfigs=[];static [t.entityKind]="PgColumnBuilder";array(e){return new g(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:r,actions:i})=>(0,o.iife)((r,i)=>{let n=new s(()=>({columns:[e],foreignColumns:[r()]}));return i.onUpdate&&n.onUpdate(i.onUpdate),i.onDelete&&n.onDelete(i.onDelete),n.build(t)},r,i))}buildExtraConfigColumn(e){return new m(e,this.config)}}class h extends r{constructor(e,t){t.uniqueName||(t.uniqueName=u(e,[t.name])),super(e,t),this.table=e}static [t.entityKind]="PgColumn"}class m extends h{static [t.entityKind]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class y{static [t.entityKind]="IndexedColumn";constructor(e,t,r,i){this.name=e,this.keyAsName=t,this.type=r,this.indexConfig=i}name;keyAsName;type;indexConfig}class g extends f{static [t.entityKind]="PgArrayBuilder";constructor(e,t,r){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=r}build(e){let t=this.config.baseBuilder.build(e);return new _(e,this.config,t)}}class _ extends h{constructor(e,t,r,i){super(e,t),this.baseColumn=r,this.range=i,this.size=t.size}size;static [t.entityKind]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=function(e){let[t]=function e(t,r=0){let i=[],n=r,s=!1;for(;n<t.length;){let a=t[n];if(","===a){(s||n===r)&&i.push(""),s=!0,n++;continue}if(s=!1,"\\"===a){n+=2;continue}if('"'===a){let[e,r]=p(t,n+1,!0);i.push(e),n=r;continue}if("}"===a)return[i,n+1];if("{"===a){let[r,s]=e(t,n+1);i.push(r),n=s;continue}let[o,u]=p(t,n,!1);i.push(o),n=u}return[i,n]}(e,1);return t}(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(e,r=!1){let i=e.map(e=>null===e?null:(0,t.is)(this.baseColumn,_)?this.baseColumn.mapToDriverValue(e,!0):this.baseColumn.mapToDriverValue(e));return r?i:function e(t){return`{${t.map(t=>Array.isArray(t)?e(t):"string"==typeof t?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}(i)}}class b extends f{static [t.entityKind]="PgEnumObjectColumnBuilder";constructor(e,t){super(e,"string","PgEnumObjectColumn"),this.config.enum=t}build(e){return new v(e,this.config)}}class v extends h{static [t.entityKind]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}let E=Symbol.for("drizzle:isPgEnum");class S extends f{static [t.entityKind]="PgEnumColumnBuilder";constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new A(e,this.config)}}class A extends h{static [t.entityKind]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}e.s(["Subquery",()=>T,"WithSubquery",()=>w],92352);class T{static [t.entityKind]="Subquery";constructor(e,t,r,i=!1,n=[]){this._={brand:"Subquery",sql:e,selectedFields:t,alias:r,isWith:i,usedTables:n}}}class w extends T{static [t.entityKind]="WithSubquery"}var O=e.i(22360);e.s(["ViewBaseConfig",()=>R],88274);let R=Symbol.for("drizzle:ViewBaseConfig");e.s(["Columns",()=>C,"IsAlias",()=>x,"Schema",()=>I,"Table",()=>M,"getTableName",()=>$,"getTableUniqueName",()=>U],69e3);let I=Symbol.for("drizzle:Schema"),C=Symbol.for("drizzle:Columns"),N=Symbol.for("drizzle:ExtraConfigColumns"),P=Symbol.for("drizzle:OriginalName"),D=Symbol.for("drizzle:BaseName"),x=Symbol.for("drizzle:IsAlias"),L=Symbol.for("drizzle:ExtraConfigBuilder"),k=Symbol.for("drizzle:IsDrizzleTable");class M{static [t.entityKind]="Table";static Symbol={Name:n,Schema:I,OriginalName:P,Columns:C,ExtraConfigColumns:N,BaseName:D,IsAlias:x,ExtraConfigBuilder:L};[n];[P];[I];[C];[N];[D];[x]=!1;[k]=!0;[L]=void 0;constructor(e,t,r){this[n]=this[P]=e,this[I]=t,this[D]=r}}function $(e){return e[n]}function U(e){return`${e[I]??"public"}.${e[n]}`}class j{static [t.entityKind]="FakePrimitiveParam"}function B(e){return null!=e&&"function"==typeof e.getSQL}class z{static [t.entityKind]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new K([this])}}class K{constructor(e){for(let r of(this.queryChunks=e,e))if((0,t.is)(r,M)){let e=r[M.Symbol.Schema];this.usedTables.push(void 0===e?r[M.Symbol.Name]:e+"."+r[M.Symbol.Name])}}static [t.entityKind]="SQL";decoder=q;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return O.tracer.startActiveSpan("drizzle.buildSQL",t=>{let r=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,i){let n=Object.assign({},i,{inlineParams:i.inlineParams||this.shouldInlineParams,paramStartIndex:i.paramStartIndex||{value:0}}),{casing:s,escapeName:a,escapeParam:o,prepareTyping:u,inlineParams:l,paramStartIndex:d}=n;var c=e.map(e=>{if((0,t.is)(e,z))return{sql:e.value.join(""),params:[]};if((0,t.is)(e,Y))return{sql:a(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){let t=[new z("(")];for(let[r,i]of e.entries())t.push(i),r<e.length-1&&t.push(new z(", "));return t.push(new z(")")),this.buildQueryFromSourceParams(t,n)}if((0,t.is)(e,K))return this.buildQueryFromSourceParams(e.queryChunks,{...n,inlineParams:l||e.shouldInlineParams});if((0,t.is)(e,M)){let t=e[M.Symbol.Schema],r=e[M.Symbol.Name];return{sql:void 0===t||e[x]?a(r):a(t)+"."+a(r),params:[]}}if((0,t.is)(e,r)){let t=s.getColumnCasing(e);if("indexes"===i.invokeSource)return{sql:a(t),params:[]};let r=e.table[M.Symbol.Schema];return{sql:e.table[x]||void 0===r?a(e.table[M.Symbol.Name])+"."+a(t):a(r)+"."+a(e.table[M.Symbol.Name])+"."+a(t),params:[]}}if((0,t.is)(e,J)){let t=e[R].schema,r=e[R].name;return{sql:void 0===t||e[R].isAlias?a(r):a(t)+"."+a(r),params:[]}}if((0,t.is)(e,G)){if((0,t.is)(e.value,Z))return{sql:o(d.value++,e),params:[e],typings:["none"]};let r=null===e.value?null:e.encoder.mapToDriverValue(e.value);if((0,t.is)(r,K))return this.buildQueryFromSourceParams([r],n);if(l)return{sql:this.mapInlineParam(r,n),params:[]};let i=["none"];return u&&(i=[u(e.encoder)]),{sql:o(d.value++,r),params:[r],typings:i}}return(0,t.is)(e,Z)?{sql:o(d.value++,e),params:[e],typings:["none"]}:(0,t.is)(e,K.Aliased)&&void 0!==e.fieldAlias?{sql:a(e.fieldAlias),params:[]}:(0,t.is)(e,T)?e._.isWith?{sql:a(e._.alias),params:[]}:this.buildQueryFromSourceParams([new z("("),e._.sql,new z(") "),new Y(e._.alias)],n):e&&"function"==typeof e&&E in e&&!0===e[E]?e.schema?{sql:a(e.schema)+"."+a(e.enumName),params:[]}:{sql:a(e.enumName),params:[]}:B(e)?e.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([e.getSQL()],n):this.buildQueryFromSourceParams([new z("("),e.getSQL(),new z(")")],n):l?{sql:this.mapInlineParam(e,n),params:[]}:{sql:o(d.value++,e),params:[e],typings:["none"]}});let p={sql:"",params:[]};for(let e of c)p.sql+=e.sql,p.params.push(...e.params),e.typings?.length&&(p.typings||(p.typings=[]),p.typings.push(...e.typings));return p}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){let r=e.toString();return"[object Object]"===r?t(JSON.stringify(e)):t(r)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new K.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class Y{constructor(e){this.value=e}static [t.entityKind]="Name";brand;getSQL(){return new K([this])}}function F(e){return"object"==typeof e&&null!==e&&"mapToDriverValue"in e&&"function"==typeof e.mapToDriverValue}let q={mapFromDriverValue:e=>e},V={mapToDriverValue:e=>e};({...q,...V});class G{constructor(e,t=V){this.value=e,this.encoder=t}static [t.entityKind]="Param";brand;getSQL(){return new K([this])}}function H(e,...t){let r=[];for(let[i,n]of((t.length>0||e.length>0&&""!==e[0])&&r.push(new z(e[0])),t.entries()))r.push(n,new z(e[i+1]));return new K(r)}(e=>{e.empty=function(){return new K([])},e.fromList=function(e){return new K(e)},e.raw=function(e){return new K([new z(e)])},e.join=function(e,t){let r=[];for(let[i,n]of e.entries())i>0&&void 0!==t&&r.push(t),r.push(n);return new K(r)},e.identifier=function(e){return new Y(e)},e.placeholder=function(e){return new Z(e)},e.param=function(e,t){return new G(e,t)}})(H||(H={})),(e=>{class r{constructor(e,t){this.sql=e,this.fieldAlias=t}static [t.entityKind]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}}e.Aliased=r})(K||(K={}));class Z{constructor(e){this.name=e}static [t.entityKind]="Placeholder";getSQL(){return new K([this])}}function W(e,r){return e.map(e=>{if((0,t.is)(e,Z)){if(!(e.name in r))throw Error(`No value for placeholder "${e.name}" was provided`);return r[e.name]}if((0,t.is)(e,G)&&(0,t.is)(e.value,Z)){if(!(e.value.name in r))throw Error(`No value for placeholder "${e.value.name}" was provided`);return e.encoder.mapToDriverValue(r[e.value.name])}return e})}let Q=Symbol.for("drizzle:IsDrizzleView");class J{static [t.entityKind]="View";[R];[Q]=!0;constructor({name:e,schema:t,selectedFields:r,query:i}){this[R]={name:e,originalName:e,schema:t,selectedFields:r,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new K([this])}}r.prototype.getSQL=function(){return new K([this])},M.prototype.getSQL=function(){return new K([this])},T.prototype.getSQL=function(){return new K([this])}},4313,e=>{"use strict";e.s(["applyMixins",()=>d,"getColumnNameAndConfig",()=>f,"getTableColumns",()=>c,"getTableLikeName",()=>p,"haveSameKeys",()=>u,"isConfig",()=>h,"mapResultRow",()=>o,"mapUpdateSet",()=>l,"orderSelectedFields",()=>function e(n,a){return Object.entries(n).reduce((n,[o,u])=>{if("string"!=typeof o)return n;let l=a?[...a,o]:[o];return(0,r.is)(u,t.Column)||(0,r.is)(u,i.SQL)||(0,r.is)(u,i.SQL.Aliased)?n.push({path:l,field:u}):(0,r.is)(u,s.Table)?n.push(...e(u[s.Table.Symbol.Columns],l)):n.push(...e(u,l)),n},[])}]);var t=e.i(56325),r=e.i(44988),i=e.i(18899),n=e.i(92352),s=e.i(69e3),a=e.i(88274);function o(e,n,a){let o={},u=e.reduce((e,{path:u,field:l},d)=>{let c;c=(0,r.is)(l,t.Column)?l:(0,r.is)(l,i.SQL)?l.decoder:l.sql.decoder;let p=e;for(let[e,i]of u.entries())if(e<u.length-1)i in p||(p[i]={}),p=p[i];else{let e=n[d],f=p[i]=null===e?null:c.mapFromDriverValue(e);if(a&&(0,r.is)(l,t.Column)&&2===u.length){let e=u[0];e in o?"string"==typeof o[e]&&o[e]!==(0,s.getTableName)(l.table)&&(o[e]=!1):o[e]=null===f&&(0,s.getTableName)(l.table)}}return e},{});if(a&&Object.keys(o).length>0)for(let[e,t]of Object.entries(o))"string"!=typeof t||a[t]||(u[e]=null);return u}function u(e,t){let r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(let[e,t]of r.entries())if(t!==i[e])return!1;return!0}function l(e,n){let a=Object.entries(n).filter(([,e])=>void 0!==e).map(([n,a])=>(0,r.is)(a,i.SQL)||(0,r.is)(a,t.Column)?[n,a]:[n,new i.Param(a,e[s.Table.Symbol.Columns][n])]);if(0===a.length)throw Error("No values to set");return Object.fromEntries(a)}function d(e,t){for(let r of t)for(let t of Object.getOwnPropertyNames(r.prototype))"constructor"!==t&&Object.defineProperty(e.prototype,t,Object.getOwnPropertyDescriptor(r.prototype,t)||Object.create(null))}function c(e){return e[s.Table.Symbol.Columns]}function p(e){return(0,r.is)(e,n.Subquery)?e._.alias:(0,r.is)(e,i.View)?e[a.ViewBaseConfig].name:(0,r.is)(e,i.SQL)?void 0:e[s.Table.Symbol.IsAlias]?e[s.Table.Symbol.Name]:e[s.Table.Symbol.BaseName]}function f(e,t){return{name:"string"==typeof e&&e.length>0?e:"",config:"object"==typeof e?e:t}}function h(e){if("object"!=typeof e||null===e||"Object"!==e.constructor.name)return!1;if("logger"in e){let t=typeof e.logger;return"boolean"===t||"object"===t&&"function"==typeof e.logger.logQuery||"undefined"===t}if("schema"in e){let t=typeof e.schema;return"object"===t||"undefined"===t}if("casing"in e){let t=typeof e.casing;return"string"===t||"undefined"===t}if("mode"in e)return"default"===e.mode&&"planetscale"===e.mode&&void 0===e.mode;if("connection"in e){let t=typeof e.connection;return"string"===t||"object"===t||"undefined"===t}if("client"in e){let t=typeof e.client;return"object"===t||"function"===t||"undefined"===t}return 0===Object.keys(e).length}"undefined"==typeof TextDecoder||new TextDecoder},94093,2847,56923,1727,38257,48209,84259,93486,3090,67751,e=>{"use strict";e.s(["PgTable",()=>tz,"pgTable",()=>tK],94093);var t=e.i(44988),r=e.i(69e3),i=e.i(4313),n=e.i(4775),s=n;class a extends s.PgColumnBuilder{static [t.entityKind]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:t,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class o extends a{static [t.entityKind]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new u(e,this.config)}}class u extends n.PgColumn{static [t.entityKind]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class l extends a{static [t.entityKind]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new d(e,this.config)}}class d extends n.PgColumn{static [t.entityKind]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function c(e,t){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return"number"===n.mode?new o(r):new l(r)}var p=n;class f extends p.PgColumnBuilder{static [t.entityKind]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new h(e,this.config)}}class h extends p.PgColumn{static [t.entityKind]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class m extends p.PgColumnBuilder{static [t.entityKind]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new y(e,this.config)}}class y extends p.PgColumn{static [t.entityKind]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function g(e,t){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return"number"===n.mode?new f(r):new m(r)}e.s(["boolean",()=>E],2847);var _=n;class b extends _.PgColumnBuilder{static [t.entityKind]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new v(e,this.config)}}class v extends _.PgColumn{static [t.entityKind]="PgBoolean";getSQLType(){return"boolean"}}function E(e){return new b(e??"")}var S=n;class A extends S.PgColumnBuilder{static [t.entityKind]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new T(e,this.config)}}class T extends S.PgColumn{static [t.entityKind]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function w(e,t={}){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return new A(r,n)}var O=n;class R extends O.PgColumnBuilder{static [t.entityKind]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new I(e,this.config)}}class I extends O.PgColumn{static [t.entityKind]="PgCidr";getSQLType(){return"cidr"}}function C(e){return new R(e??"")}var N=n;class P extends N.PgColumnBuilder{static [t.entityKind]="PgCustomColumnBuilder";constructor(e,t,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=r}build(e){return new D(e,this.config)}}class D extends N.PgColumn{static [t.entityKind]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function x(e){return(t,r)=>{let{name:n,config:s}=(0,i.getColumnNameAndConfig)(t,r);return new P(n,s,e)}}e.s(["PgDate",()=>j,"PgDateString",()=>z,"date",()=>K],56923);var L=n,k=e.i(18899),M=n;class $ extends M.PgColumnBuilder{static [t.entityKind]="PgDateColumnBaseBuilder";defaultNow(){return this.default(k.sql`now()`)}}class U extends ${static [t.entityKind]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new j(e,this.config)}}class j extends L.PgColumn{static [t.entityKind]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class B extends ${static [t.entityKind]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new z(e,this.config)}}class z extends L.PgColumn{static [t.entityKind]="PgDateString";getSQLType(){return"date"}}function K(e,t){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return n?.mode==="date"?new U(r):new B(r)}var Y=n;class F extends Y.PgColumnBuilder{static [t.entityKind]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new q(e,this.config)}}class q extends Y.PgColumn{static [t.entityKind]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return"string"==typeof e?Number.parseFloat(e):e}}function V(e){return new F(e??"")}var G=n;class H extends G.PgColumnBuilder{static [t.entityKind]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new Z(e,this.config)}}class Z extends G.PgColumn{static [t.entityKind]="PgInet";getSQLType(){return"inet"}}function W(e){return new H(e??"")}var Q=n;class J extends a{static [t.entityKind]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new X(e,this.config)}}class X extends Q.PgColumn{static [t.entityKind]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return"string"==typeof e?Number.parseInt(e):e}}function ee(e){return new J(e??"")}var et=n;class er extends et.PgColumnBuilder{static [t.entityKind]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new ei(e,this.config)}}class ei extends et.PgColumn{static [t.entityKind]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}}function en(e,t={}){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return new er(r,n)}e.s(["PgJson",()=>eo,"json",()=>eu],1727);var es=n;class ea extends es.PgColumnBuilder{static [t.entityKind]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new eo(e,this.config)}}class eo extends es.PgColumn{static [t.entityKind]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}function eu(e){return new ea(e??"")}e.s(["PgJsonb",()=>ec,"jsonb",()=>ep],38257);var el=n;class ed extends el.PgColumnBuilder{static [t.entityKind]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new ec(e,this.config)}}class ec extends el.PgColumn{static [t.entityKind]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}function ep(e){return new ed(e??"")}var ef=n;class eh extends ef.PgColumnBuilder{static [t.entityKind]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new em(e,this.config)}}class em extends ef.PgColumn{static [t.entityKind]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[t,r,i]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(r),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class ey extends ef.PgColumnBuilder{static [t.entityKind]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new eg(e,this.config)}}class eg extends ef.PgColumn{static [t.entityKind]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[t,r,i]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(r),c:Number.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function e_(e,t){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return n?.mode&&"tuple"!==n.mode?new ey(r):new eh(r)}var eb=n;class ev extends eb.PgColumnBuilder{static [t.entityKind]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new eE(e,this.config)}}class eE extends eb.PgColumn{static [t.entityKind]="PgMacaddr";getSQLType(){return"macaddr"}}function eS(e){return new ev(e??"")}var eA=n;class eT extends eA.PgColumnBuilder{static [t.entityKind]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new ew(e,this.config)}}class ew extends eA.PgColumn{static [t.entityKind]="PgMacaddr8";getSQLType(){return"macaddr8"}}function eO(e){return new eT(e??"")}e.s(["PgNumeric",()=>eC,"numeric",()=>eL],48209);var eR=n;class eI extends eR.PgColumnBuilder{static [t.entityKind]="PgNumericBuilder";constructor(e,t,r){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=r}build(e){return new eC(e,this.config)}}class eC extends eR.PgColumn{static [t.entityKind]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return"string"==typeof e?e:String(e)}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class eN extends eR.PgColumnBuilder{static [t.entityKind]="PgNumericNumberBuilder";constructor(e,t,r){super(e,"number","PgNumericNumber"),this.config.precision=t,this.config.scale=r}build(e){return new eP(e,this.config)}}class eP extends eR.PgColumn{static [t.entityKind]="PgNumericNumber";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class eD extends eR.PgColumnBuilder{static [t.entityKind]="PgNumericBigIntBuilder";constructor(e,t,r){super(e,"bigint","PgNumericBigInt"),this.config.precision=t,this.config.scale=r}build(e){return new ex(e,this.config)}}class ex extends eR.PgColumn{static [t.entityKind]="PgNumericBigInt";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function eL(e,t){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t),s=n?.mode;return"number"===s?new eN(r,n?.precision,n?.scale):"bigint"===s?new eD(r,n?.precision,n?.scale):new eI(r,n?.precision,n?.scale)}var ek=n;class eM extends ek.PgColumnBuilder{static [t.entityKind]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new e$(e,this.config)}}class e$ extends ek.PgColumn{static [t.entityKind]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,r]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class eU extends ek.PgColumnBuilder{static [t.entityKind]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new ej(e,this.config)}}class ej extends ek.PgColumn{static [t.entityKind]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function eB(e,t){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return n?.mode&&"tuple"!==n.mode?new eU(r):new eM(r)}var ez=n;function eK(e,t){let r=new DataView(new ArrayBuffer(8));for(let i=0;i<8;i++)r.setUint8(i,e[t+i]);return r.getFloat64(0,!0)}function eY(e){let t=function(e){let t=[];for(let r=0;r<e.length;r+=2)t.push(Number.parseInt(e.slice(r,r+2),16));return new Uint8Array(t)}(e),r=0,i=t[0];r+=1;let n=new DataView(t.buffer),s=n.getUint32(r,1===i);if(r+=4,0x20000000&s&&(n.getUint32(r,1===i),r+=4),(65535&s)==1){let e=eK(t,r),i=eK(t,r+=8);return r+=8,[e,i]}throw Error("Unsupported geometry type")}class eF extends ez.PgColumnBuilder{static [t.entityKind]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new eq(e,this.config)}}class eq extends ez.PgColumn{static [t.entityKind]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return eY(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class eV extends ez.PgColumnBuilder{static [t.entityKind]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new eG(e,this.config)}}class eG extends ez.PgColumn{static [t.entityKind]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let t=eY(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function eH(e,t){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return n?.mode&&"tuple"!==n.mode?new eV(r):new eF(r)}var eZ=n;class eW extends eZ.PgColumnBuilder{static [t.entityKind]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new eQ(e,this.config)}}class eQ extends eZ.PgColumn{static [t.entityKind]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>"string"==typeof e?Number.parseFloat(e):e}function eJ(e){return new eW(e??"")}var eX=n;class e0 extends eX.PgColumnBuilder{static [t.entityKind]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new e1(e,this.config)}}class e1 extends eX.PgColumn{static [t.entityKind]="PgSerial";getSQLType(){return"serial"}}function e4(e){return new e0(e??"")}var e2=n;class e6 extends a{static [t.entityKind]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new e3(e,this.config)}}class e3 extends e2.PgColumn{static [t.entityKind]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>"string"==typeof e?Number(e):e}function e5(e){return new e6(e??"")}var e8=n;class e9 extends e8.PgColumnBuilder{static [t.entityKind]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new e7(e,this.config)}}class e7 extends e8.PgColumn{static [t.entityKind]="PgSmallSerial";getSQLType(){return"smallserial"}}function te(e){return new e9(e??"")}e.s(["text",()=>tn],84259);var tt=n;class tr extends tt.PgColumnBuilder{static [t.entityKind]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new ti(e,this.config)}}class ti extends tt.PgColumn{static [t.entityKind]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function tn(e,t={}){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return new tr(r,n)}e.s(["PgTime",()=>to,"time",()=>tu],93486);var ts=n;class ta extends ${constructor(e,t,r){super(e,"string","PgTime"),this.withTimezone=t,this.precision=r,this.config.withTimezone=t,this.config.precision=r}static [t.entityKind]="PgTimeBuilder";build(e){return new to(e,this.config)}}class to extends ts.PgColumn{static [t.entityKind]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`time${e}${this.withTimezone?" with time zone":""}`}}function tu(e,t={}){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return new ta(r,n.withTimezone??!1,n.precision)}e.s(["PgTimestamp",()=>tc,"PgTimestampString",()=>tf,"timestamp",()=>th],3090);var tl=n;class td extends ${static [t.entityKind]="PgTimestampBuilder";constructor(e,t,r){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=r}build(e){return new tc(e,this.config)}}class tc extends tl.PgColumn{static [t.entityKind]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":` (${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class tp extends ${static [t.entityKind]="PgTimestampStringBuilder";constructor(e,t,r){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=r}build(e){return new tf(e,this.config)}}class tf extends tl.PgColumn{static [t.entityKind]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}}function th(e,t={}){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return n?.mode==="string"?new tp(r,n.withTimezone??!1,n.precision):new td(r,n?.withTimezone??!1,n?.precision)}e.s(["PgUUID",()=>tg,"uuid",()=>t_],67751);var tm=n;class ty extends tm.PgColumnBuilder{static [t.entityKind]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(k.sql`gen_random_uuid()`)}build(e){return new tg(e,this.config)}}class tg extends tm.PgColumn{static [t.entityKind]="PgUUID";getSQLType(){return"uuid"}}function t_(e){return new ty(e??"")}var tb=n;class tv extends tb.PgColumnBuilder{static [t.entityKind]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new tE(e,this.config)}}class tE extends tb.PgColumn{static [t.entityKind]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function tS(e,t={}){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return new tv(r,n)}var tA=n;class tT extends tA.PgColumnBuilder{static [t.entityKind]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new tw(e,this.config)}}class tw extends tA.PgColumn{static [t.entityKind]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function tO(e,t){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return new tT(r,n)}var tR=n;class tI extends tR.PgColumnBuilder{static [t.entityKind]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new tC(e,this.config)}}class tC extends tR.PgColumn{static [t.entityKind]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function tN(e,t){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return new tI(r,n)}var tP=n;class tD extends tP.PgColumnBuilder{static [t.entityKind]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new tx(e,this.config)}}class tx extends tP.PgColumn{static [t.entityKind]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function tL(e,t){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return new tD(r,n)}var tk=n;class tM extends tk.PgColumnBuilder{static [t.entityKind]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new t$(e,this.config)}}class t$ extends tk.PgColumn{static [t.entityKind]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function tU(e,t){let{name:r,config:n}=(0,i.getColumnNameAndConfig)(e,t);return new tM(r,n)}let tj=Symbol.for("drizzle:PgInlineForeignKeys"),tB=Symbol.for("drizzle:EnableRLS");class tz extends r.Table{static [t.entityKind]="PgTable";static Symbol=Object.assign({},r.Table.Symbol,{InlineForeignKeys:tj,EnableRLS:tB});[tj]=[];[tB]=!1;[r.Table.Symbol.ExtraConfigBuilder]=void 0;[r.Table.Symbol.ExtraConfigColumns]={}}let tK=(e,t,i)=>(function(e,t,i,n,s=e){let a=new tz(e,n,s),o="function"==typeof t?t({bigint:c,bigserial:g,boolean:E,char:w,cidr:C,customType:x,date:K,doublePrecision:V,inet:W,integer:ee,interval:en,json:eu,jsonb:ep,line:e_,macaddr:eS,macaddr8:eO,numeric:eL,point:eB,geometry:eH,real:eJ,serial:e4,smallint:e5,smallserial:te,text:tn,time:tu,timestamp:th,uuid:t_,varchar:tS,bit:tO,halfvec:tN,sparsevec:tL,vector:tU}):t,u=Object.fromEntries(Object.entries(o).map(([e,t])=>{t.setName(e);let r=t.build(a);return a[tj].push(...t.buildForeignKeys(r,a)),[e,r]})),l=Object.fromEntries(Object.entries(o).map(([e,t])=>(t.setName(e),[e,t.buildExtraConfigColumn(a)]))),d=Object.assign(a,u);return d[r.Table.Symbol.Columns]=u,d[r.Table.Symbol.ExtraConfigColumns]=l,i&&(d[tz.Symbol.ExtraConfigBuilder]=i),Object.assign(d,{enableRLS:()=>(d[tz.Symbol.EnableRLS]=!0,d)})})(e,t,i,void 0)},75225,49129,e=>{"use strict";e.s(["and",()=>u,"between",()=>E,"eq",()=>a,"exists",()=>b,"gt",()=>c,"gte",()=>p,"ilike",()=>w,"inArray",()=>m,"isNotNull",()=>_,"isNull",()=>g,"like",()=>A,"lt",()=>f,"lte",()=>h,"ne",()=>o,"not",()=>d,"notBetween",()=>S,"notExists",()=>v,"notIlike",()=>O,"notInArray",()=>y,"notLike",()=>T,"or",()=>l],75225);var t=e.i(56325),r=e.i(44988),i=e.i(69e3),n=e.i(18899);function s(e,s){return!(0,n.isDriverValueEncoder)(s)||(0,n.isSQLWrapper)(e)||(0,r.is)(e,n.Param)||(0,r.is)(e,n.Placeholder)||(0,r.is)(e,t.Column)||(0,r.is)(e,i.Table)||(0,r.is)(e,n.View)?e:new n.Param(e,s)}let a=(e,t)=>n.sql`${e} = ${s(t,e)}`,o=(e,t)=>n.sql`${e} <> ${s(t,e)}`;function u(...e){let t=e.filter(e=>void 0!==e);if(0!==t.length)return new n.SQL(1===t.length?t:[new n.StringChunk("("),n.sql.join(t,new n.StringChunk(" and ")),new n.StringChunk(")")])}function l(...e){let t=e.filter(e=>void 0!==e);if(0!==t.length)return new n.SQL(1===t.length?t:[new n.StringChunk("("),n.sql.join(t,new n.StringChunk(" or ")),new n.StringChunk(")")])}function d(e){return n.sql`not ${e}`}let c=(e,t)=>n.sql`${e} > ${s(t,e)}`,p=(e,t)=>n.sql`${e} >= ${s(t,e)}`,f=(e,t)=>n.sql`${e} < ${s(t,e)}`,h=(e,t)=>n.sql`${e} <= ${s(t,e)}`;function m(e,t){return Array.isArray(t)?0===t.length?n.sql`false`:n.sql`${e} in ${t.map(t=>s(t,e))}`:n.sql`${e} in ${s(t,e)}`}function y(e,t){return Array.isArray(t)?0===t.length?n.sql`true`:n.sql`${e} not in ${t.map(t=>s(t,e))}`:n.sql`${e} not in ${s(t,e)}`}function g(e){return n.sql`${e} is null`}function _(e){return n.sql`${e} is not null`}function b(e){return n.sql`exists ${e}`}function v(e){return n.sql`not exists ${e}`}function E(e,t,r){return n.sql`${e} between ${s(t,e)} and ${s(r,e)}`}function S(e,t,r){return n.sql`${e} not between ${s(t,e)} and ${s(r,e)}`}function A(e,t){return n.sql`${e} like ${t}`}function T(e,t){return n.sql`${e} not like ${t}`}function w(e,t){return n.sql`${e} ilike ${t}`}function O(e,t){return n.sql`${e} not ilike ${t}`}function R(e){return n.sql`${e} asc`}function I(e){return n.sql`${e} desc`}e.s(["asc",()=>R,"desc",()=>I],49129)},44902,79822,e=>{"use strict";e.s(["PrimaryKeyBuilder",()=>i],44902);var t=e.i(44988),r=e.i(94093);class i{static [t.entityKind]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new n(e,this.columns,this.name)}}class n{constructor(e,t,r){this.table=e,this.columns=t,this.name=r}static [t.entityKind]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[r.PgTable.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}e.s(["Many",()=>f,"One",()=>p,"createTableRelationsHelpers",()=>_,"extractTablesRelationalConfig",()=>y,"getOperators",()=>h,"getOrderByOperators",()=>m,"mapRelationalRow",()=>function e(r,i,n,s,o=e=>e){let u={};for(let[d,c]of s.entries())if(c.isJson){let s=i.relations[c.tsKey],a=n[d],l="string"==typeof a?JSON.parse(a):a;u[c.tsKey]=(0,t.is)(s,p)?l&&e(r,r[c.relationTableTsKey],l,c.selection,o):l.map(t=>e(r,r[c.relationTableTsKey],t,c.selection,o))}else{let e,r=o(n[d]),i=c.field;e=(0,t.is)(i,a.Column)?i:(0,t.is)(i,l.SQL)?i.decoder:i.sql.decoder,u[c.tsKey]=null===r?null:e.mapFromDriverValue(r)}return u},"normalizeRelation",()=>g],79822);var s=e.i(69e3),a=e.i(56325),o=e.i(75225),u=e.i(49129),l=e.i(18899);class d{constructor(e,t,r){this.sourceTable=e,this.referencedTable=t,this.relationName=r,this.referencedTableName=t[s.Table.Symbol.Name]}static [t.entityKind]="Relation";referencedTableName;fieldName}class c{constructor(e,t){this.table=e,this.config=t}static [t.entityKind]="Relations"}class p extends d{constructor(e,t,r,i){super(e,t,r?.relationName),this.config=r,this.isNullable=i}static [t.entityKind]="One";withFieldName(e){let t=new p(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}}class f extends d{constructor(e,t,r){super(e,t,r?.relationName),this.config=r}static [t.entityKind]="Many";withFieldName(e){let t=new f(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}}function h(){return{and:o.and,between:o.between,eq:o.eq,exists:o.exists,gt:o.gt,gte:o.gte,ilike:o.ilike,inArray:o.inArray,isNull:o.isNull,isNotNull:o.isNotNull,like:o.like,lt:o.lt,lte:o.lte,ne:o.ne,not:o.not,notBetween:o.notBetween,notExists:o.notExists,notLike:o.notLike,notIlike:o.notIlike,notInArray:o.notInArray,or:o.or,sql:l.sql}}function m(){return{sql:l.sql,asc:u.asc,desc:u.desc}}function y(e,r){1===Object.keys(e).length&&"default"in e&&!(0,t.is)(e.default,s.Table)&&(e=e.default);let n={},a={},o={};for(let[u,l]of Object.entries(e))if((0,t.is)(l,s.Table)){let e=(0,s.getTableUniqueName)(l),r=a[e];for(let t of(n[e]=u,o[u]={tsName:u,dbName:l[s.Table.Symbol.Name],schema:l[s.Table.Symbol.Schema],columns:l[s.Table.Symbol.Columns],relations:r?.relations??{},primaryKey:r?.primaryKey??[]},Object.values(l[s.Table.Symbol.Columns])))t.primary&&o[u].primaryKey.push(t);let d=l[s.Table.Symbol.ExtraConfigBuilder]?.(l[s.Table.Symbol.ExtraConfigColumns]);if(d)for(let e of Object.values(d))(0,t.is)(e,i)&&o[u].primaryKey.push(...e.columns)}else if((0,t.is)(l,c)){let e,t=(0,s.getTableUniqueName)(l.table),i=n[t];for(let[n,s]of Object.entries(l.config(r(l.table))))if(i){let t=o[i];t.relations[n]=s,e&&t.primaryKey.push(...e)}else t in a||(a[t]={relations:{},primaryKey:e}),a[t].relations[n]=s}return{tables:o,tableNamesMap:n}}function g(e,r,i){if((0,t.is)(i,p)&&i.config)return{fields:i.config.fields,references:i.config.references};let n=r[(0,s.getTableUniqueName)(i.referencedTable)];if(!n)throw Error(`Table "${i.referencedTable[s.Table.Symbol.Name]}" not found in schema`);let a=e[n];if(!a)throw Error(`Table "${n}" not found in schema`);let o=i.sourceTable,u=r[(0,s.getTableUniqueName)(o)];if(!u)throw Error(`Table "${o[s.Table.Symbol.Name]}" not found in schema`);let l=[];for(let e of Object.values(a.relations))(i.relationName&&i!==e&&e.relationName===i.relationName||!i.relationName&&e.referencedTable===i.sourceTable)&&l.push(e);if(l.length>1)throw i.relationName?Error(`There are multiple relations with name "${i.relationName}" in table "${n}"`):Error(`There are multiple relations between "${n}" and "${i.sourceTable[s.Table.Symbol.Name]}". Please specify relation name`);if(l[0]&&(0,t.is)(l[0],p)&&l[0].config)return{fields:l[0].config.references,references:l[0].config.fields};throw Error(`There is not enough information to infer relation "${u}.${i.fieldName}"`)}function _(e){return{one:function(t,r){return new p(e,t,r,r?.fields.reduce((e,t)=>e&&t.notNull,!0)??!1)},many:function(t,r){return new f(e,t,r)}}}},5672,71783,11909,15428,e=>{"use strict";e.s(["ColumnAliasProxyHandler",()=>a,"TableAliasProxyHandler",()=>o,"aliasedTable",()=>l,"aliasedTableColumn",()=>d,"mapColumnsInAliasedSQLToAlias",()=>c,"mapColumnsInSQLToAlias",()=>p],5672);var t=e.i(56325),r=e.i(44988),i=e.i(18899),n=e.i(69e3),s=e.i(88274);class a{constructor(e){this.table=e}static [r.entityKind]="ColumnAliasProxyHandler";get(e,t){return"table"===t?this.table:e[t]}}class o{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static [r.entityKind]="TableAliasProxyHandler";get(e,i){if(i===n.Table.Symbol.IsAlias)return!0;if(i===n.Table.Symbol.Name||this.replaceOriginalName&&i===n.Table.Symbol.OriginalName)return this.alias;if(i===s.ViewBaseConfig)return{...e[s.ViewBaseConfig],name:this.alias,isAlias:!0};if(i===n.Table.Symbol.Columns){let t=e[n.Table.Symbol.Columns];if(!t)return t;let r={};return Object.keys(t).map(i=>{r[i]=new Proxy(t[i],new a(new Proxy(e,this)))}),r}let o=e[i];return(0,r.is)(o,t.Column)?new Proxy(o,new a(new Proxy(e,this))):o}}class u{constructor(e){this.alias=e}static [r.entityKind]="RelationTableAliasProxyHandler";get(e,t){return"sourceTable"===t?l(e.sourceTable,this.alias):e[t]}}function l(e,t){return new Proxy(e,new o(t,!1))}function d(e,t){return new Proxy(e,new a(new Proxy(e.table,new o(t,!1))))}function c(e,t){return new i.SQL.Aliased(p(e.sql,t),e.fieldAlias)}function p(e,n){return i.sql.join(e.queryChunks.map(e=>(0,r.is)(e,t.Column)?d(e,n):(0,r.is)(e,i.SQL)?p(e,n):(0,r.is)(e,i.SQL.Aliased)?c(e,n):e))}function f(e){return(e.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(e=>e.toLowerCase()).join("_")}function h(e){return(e.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((e,t,r)=>e+(0===r?t.toLowerCase():`${t[0].toUpperCase()}${t.slice(1)}`),"")}function m(e){return e}e.s(["PgDialect",()=>k],15428);class y{static [r.entityKind]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert="snake_case"===e?f:"camelCase"===e?h:m}getColumnCasing(e){if(!e.keyAsName)return e.name;let t=e.table[n.Table.Symbol.Schema]??"public",r=e.table[n.Table.Symbol.OriginalName],i=`${t}.${r}.${e.name}`;return this.cache[i]||this.cacheTable(e.table),this.cache[i]}cacheTable(e){let t=e[n.Table.Symbol.Schema]??"public",r=e[n.Table.Symbol.OriginalName],i=`${t}.${r}`;if(!this.cachedTables[i]){for(let t of Object.values(e[n.Table.Symbol.Columns])){let e=`${i}.${t.name}`;this.cache[e]=this.convert(t.name)}this.cachedTables[i]=!0}}clearCache(){this.cache={},this.cachedTables={}}}e.s(["DrizzleError",()=>g,"DrizzleQueryError",()=>_,"TransactionRollbackError",()=>b],71783);class g extends Error{static [r.entityKind]="DrizzleError";constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}}class _ extends Error{constructor(e,t,r){super(`Failed query: ${e}
params: ${t}`),this.query=e,this.params=t,this.cause=r,Error.captureStackTrace(this,_),r&&(this.cause=r)}}class b extends g{static [r.entityKind]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}var v=e.i(4775),E=e.i(56923),S=e.i(1727),A=e.i(38257),T=e.i(48209),w=e.i(93486),O=e.i(3090),R=e.i(67751),I=e.i(94093),C=e.i(79822),N=e.i(75225),P=e.i(92352),D=e.i(4313);e.s(["PgViewBase",()=>L],11909);var x=i;class L extends x.View{static [r.entityKind]="PgViewBase"}class k{static [r.entityKind]="PgDialect";casing;constructor(e){this.casing=new y(e?.casing)}async migrate(e,t,r){let n="string"==typeof r?"__drizzle_migrations":r.migrationsTable??"__drizzle_migrations",s="string"==typeof r?"drizzle":r.migrationsSchema??"drizzle",a=i.sql`
			CREATE TABLE IF NOT EXISTS ${i.sql.identifier(s)}.${i.sql.identifier(n)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute(i.sql`CREATE SCHEMA IF NOT EXISTS ${i.sql.identifier(s)}`),await t.execute(a);let o=(await t.all(i.sql`select id, hash, created_at from ${i.sql.identifier(s)}.${i.sql.identifier(n)} order by created_at desc limit 1`))[0];await t.transaction(async t=>{for await(let r of e)if(!o||Number(o.created_at)<r.folderMillis){for(let e of r.sql)await t.execute(i.sql.raw(e));await t.execute(i.sql`insert into ${i.sql.identifier(s)}.${i.sql.identifier(n)} ("hash", "created_at") values(${r.hash}, ${r.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[i.sql`with `];for(let[r,n]of e.entries())t.push(i.sql`${i.sql.identifier(n._.alias)} as (${n._.sql})`),r<e.length-1&&t.push(i.sql`, `);return t.push(i.sql` `),i.sql.join(t)}buildDeleteQuery({table:e,where:t,returning:r,withList:n}){let s=this.buildWithCTE(n),a=r?i.sql` returning ${this.buildSelection(r,{isSingleTable:!0})}`:void 0,o=t?i.sql` where ${t}`:void 0;return i.sql`${s}delete from ${e}${o}${a}`}buildUpdateSet(e,t){let r=e[n.Table.Symbol.Columns],s=Object.keys(r).filter(e=>void 0!==t[e]||r[e]?.onUpdateFn!==void 0),a=s.length;return i.sql.join(s.flatMap((e,n)=>{let s=r[e],o=t[e]??i.sql.param(s.onUpdateFn(),s),u=i.sql`${i.sql.identifier(this.casing.getColumnCasing(s))} = ${o}`;return n<a-1?[u,i.sql.raw(", ")]:[u]}))}buildUpdateQuery({table:e,set:t,where:r,returning:n,withList:s,from:a,joins:o}){let u=this.buildWithCTE(s),l=e[I.PgTable.Symbol.Name],d=e[I.PgTable.Symbol.Schema],c=e[I.PgTable.Symbol.OriginalName],p=l===c?void 0:l,f=i.sql`${d?i.sql`${i.sql.identifier(d)}.`:void 0}${i.sql.identifier(c)}${p&&i.sql` ${i.sql.identifier(p)}`}`,h=this.buildUpdateSet(e,t),m=a&&i.sql.join([i.sql.raw(" from "),this.buildFromTable(a)]),y=this.buildJoins(o),g=n?i.sql` returning ${this.buildSelection(n,{isSingleTable:!a})}`:void 0,_=r?i.sql` where ${r}`:void 0;return i.sql`${u}update ${f} set ${h}${m}${y}${_}${g}`}buildSelection(e,{isSingleTable:n=!1}={}){let s=e.length,a=e.flatMap(({field:e},a)=>{let o=[];if((0,r.is)(e,i.SQL.Aliased)&&e.isSelectionField)o.push(i.sql.identifier(e.fieldAlias));else if((0,r.is)(e,i.SQL.Aliased)||(0,r.is)(e,i.SQL)){let t=(0,r.is)(e,i.SQL.Aliased)?e.sql:e;n?o.push(new i.SQL(t.queryChunks.map(e=>(0,r.is)(e,v.PgColumn)?i.sql.identifier(this.casing.getColumnCasing(e)):e))):o.push(t),(0,r.is)(e,i.SQL.Aliased)&&o.push(i.sql` as ${i.sql.identifier(e.fieldAlias)}`)}else(0,r.is)(e,t.Column)&&(n?o.push(i.sql.identifier(this.casing.getColumnCasing(e))):o.push(e));return a<s-1&&o.push(i.sql`, `),o});return i.sql.join(a)}buildJoins(e){if(!e||0===e.length)return;let t=[];for(let[n,a]of e.entries()){0===n&&t.push(i.sql` `);let o=a.table,u=a.lateral?i.sql` lateral`:void 0,l=a.on?i.sql` on ${a.on}`:void 0;if((0,r.is)(o,I.PgTable)){let e=o[I.PgTable.Symbol.Name],r=o[I.PgTable.Symbol.Schema],n=o[I.PgTable.Symbol.OriginalName],s=e===n?void 0:a.alias;t.push(i.sql`${i.sql.raw(a.joinType)} join${u} ${r?i.sql`${i.sql.identifier(r)}.`:void 0}${i.sql.identifier(n)}${s&&i.sql` ${i.sql.identifier(s)}`}${l}`)}else if((0,r.is)(o,i.View)){let e=o[s.ViewBaseConfig].name,r=o[s.ViewBaseConfig].schema,n=o[s.ViewBaseConfig].originalName,d=e===n?void 0:a.alias;t.push(i.sql`${i.sql.raw(a.joinType)} join${u} ${r?i.sql`${i.sql.identifier(r)}.`:void 0}${i.sql.identifier(n)}${d&&i.sql` ${i.sql.identifier(d)}`}${l}`)}else t.push(i.sql`${i.sql.raw(a.joinType)} join${u} ${o}${l}`);n<e.length-1&&t.push(i.sql` `)}return i.sql.join(t)}buildFromTable(e){if((0,r.is)(e,n.Table)&&e[n.Table.Symbol.IsAlias]){let t=i.sql`${i.sql.identifier(e[n.Table.Symbol.OriginalName])}`;return e[n.Table.Symbol.Schema]&&(t=i.sql`${i.sql.identifier(e[n.Table.Symbol.Schema])}.${t}`),i.sql`${t} ${i.sql.identifier(e[n.Table.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:a,fieldsFlat:o,where:u,having:l,table:d,joins:c,orderBy:p,groupBy:f,limit:h,offset:m,lockingClause:y,distinct:g,setOperators:_}){let b,v,E,S=o??(0,D.orderSelectedFields)(a);for(let e of S){let a;if((0,r.is)(e.field,t.Column)&&(0,n.getTableName)(e.field.table)!==((0,r.is)(d,P.Subquery)?d._.alias:(0,r.is)(d,L)?d[s.ViewBaseConfig].name:(0,r.is)(d,i.SQL)?void 0:(0,n.getTableName)(d))&&(a=e.field.table,!c?.some(({alias:e})=>e===(a[n.Table.Symbol.IsAlias]?(0,n.getTableName)(a):a[n.Table.Symbol.BaseName])))){let t=(0,n.getTableName)(e.field.table);throw Error(`Your "${e.path.join("->")}" field references a column "${t}"."${e.field.name}", but the table "${t}" is not part of the query! Did you forget to join it?`)}}let A=!c||0===c.length,T=this.buildWithCTE(e);g&&(b=!0===g?i.sql` distinct`:i.sql` distinct on (${i.sql.join(g.on,i.sql`, `)})`);let w=this.buildSelection(S,{isSingleTable:A}),O=this.buildFromTable(d),R=this.buildJoins(c),I=u?i.sql` where ${u}`:void 0,C=l?i.sql` having ${l}`:void 0;p&&p.length>0&&(v=i.sql` order by ${i.sql.join(p,i.sql`, `)}`),f&&f.length>0&&(E=i.sql` group by ${i.sql.join(f,i.sql`, `)}`);let N="object"==typeof h||"number"==typeof h&&h>=0?i.sql` limit ${h}`:void 0,x=m?i.sql` offset ${m}`:void 0,k=i.sql.empty();if(y){let e=i.sql` for ${i.sql.raw(y.strength)}`;y.config.of&&e.append(i.sql` of ${i.sql.join(Array.isArray(y.config.of)?y.config.of:[y.config.of],i.sql`, `)}`),y.config.noWait?e.append(i.sql` nowait`):y.config.skipLocked&&e.append(i.sql` skip locked`),k.append(e)}let M=i.sql`${T}select${b} ${w} from ${O}${R}${I}${E}${C}${v}${N}${x}${k}`;return _.length>0?this.buildSetOperations(M,_):M}buildSetOperations(e,t){let[r,...i]=t;if(!r)throw Error("Cannot pass undefined values to any set operator");return 0===i.length?this.buildSetOperationQuery({leftSelect:e,setOperator:r}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:r}),i)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:n,rightSelect:s,limit:a,orderBy:o,offset:u}}){let l,d=i.sql`(${e.getSQL()}) `,c=i.sql`(${s.getSQL()})`;if(o&&o.length>0){let e=[];for(let t of o)if((0,r.is)(t,v.PgColumn))e.push(i.sql.identifier(t.name));else if((0,r.is)(t,i.SQL)){for(let e=0;e<t.queryChunks.length;e++){let n=t.queryChunks[e];(0,r.is)(n,v.PgColumn)&&(t.queryChunks[e]=i.sql.identifier(n.name))}e.push(i.sql`${t}`)}else e.push(i.sql`${t}`);l=i.sql` order by ${i.sql.join(e,i.sql`, `)} `}let p="object"==typeof a||"number"==typeof a&&a>=0?i.sql` limit ${a}`:void 0,f=i.sql.raw(`${t} ${n?"all ":""}`),h=u?i.sql` offset ${u}`:void 0;return i.sql`${d}${f}${c}${l}${p}${h}`}buildInsertQuery({table:e,values:t,onConflict:s,returning:a,withList:o,select:u,overridingSystemValue_:l}){let d=[],c=Object.entries(e[n.Table.Symbol.Columns]).filter(([e,t])=>!t.shouldDisableInsert()),p=c.map(([,e])=>i.sql.identifier(this.casing.getColumnCasing(e)));if(u)(0,r.is)(t,i.SQL)?d.push(t):d.push(t.getSQL());else for(let[e,n]of(d.push(i.sql.raw("values ")),t.entries())){let s=[];for(let[e,t]of c){let a=n[e];if(void 0===a||(0,r.is)(a,i.Param)&&void 0===a.value)if(void 0!==t.defaultFn){let e=t.defaultFn(),n=(0,r.is)(e,i.SQL)?e:i.sql.param(e,t);s.push(n)}else if(t.default||void 0===t.onUpdateFn)s.push(i.sql`default`);else{let e=t.onUpdateFn(),n=(0,r.is)(e,i.SQL)?e:i.sql.param(e,t);s.push(n)}else s.push(a)}d.push(s),e<t.length-1&&d.push(i.sql`, `)}let f=this.buildWithCTE(o),h=i.sql.join(d),m=a?i.sql` returning ${this.buildSelection(a,{isSingleTable:!0})}`:void 0,y=s?i.sql` on conflict ${s}`:void 0,g=!0===l?i.sql`overriding system value `:void 0;return i.sql`${f}insert into ${e} ${p} ${g}${h}${y}${m}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:r}){let n=t?i.sql` concurrently`:void 0,s=r?i.sql` with no data`:void 0;return i.sql`refresh materialized view${n} ${e}${s}`}prepareTyping(e){if((0,r.is)(e,A.PgJsonb)||(0,r.is)(e,S.PgJson))return"json";if((0,r.is)(e,T.PgNumeric))return"decimal";if((0,r.is)(e,w.PgTime))return"time";if((0,r.is)(e,O.PgTimestamp)||(0,r.is)(e,O.PgTimestampString))return"timestamp";if((0,r.is)(e,E.PgDate)||(0,r.is)(e,E.PgDateString))return"date";else if((0,r.is)(e,R.PgUUID))return"uuid";else return"none"}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:t})}buildRelationalQueryWithoutPK({fullSchema:e,schema:s,tableNamesMap:a,table:o,tableConfig:u,queryConfig:f,tableAlias:h,nestedQueryRelation:m,joinOn:y}){let _,b=[],v,E,S=[],A,T=[];if(!0===f)b=Object.entries(u.columns).map(([e,t])=>({dbKey:t.name,tsKey:e,field:d(t,h),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let o=Object.fromEntries(Object.entries(u.columns).map(([e,t])=>[e,d(t,h)]));if(f.where){let e="function"==typeof f.where?f.where(o,(0,C.getOperators)()):f.where;A=e&&p(e,h)}let l=[],m=[];if(f.columns){let e=!1;for(let[t,r]of Object.entries(f.columns))void 0!==r&&t in u.columns&&(e||!0!==r||(e=!0),m.push(t));m.length>0&&(m=e?m.filter(e=>f.columns?.[e]===!0):Object.keys(u.columns).filter(e=>!m.includes(e)))}else m=Object.keys(u.columns);for(let e of m){let t=u.columns[e];l.push({tsKey:e,value:t})}let y=[];if(f.with&&(y=Object.entries(f.with).filter(e=>!!e[1]).map(([e,t])=>({tsKey:e,queryConfig:t,relation:u.relations[e]}))),f.extras)for(let[e,t]of Object.entries("function"==typeof f.extras?f.extras(o,{sql:i.sql}):f.extras))l.push({tsKey:e,value:c(t,h)});for(let{tsKey:e,value:n}of l)b.push({dbKey:(0,r.is)(n,i.SQL.Aliased)?n.fieldAlias:u.columns[e].name,tsKey:e,field:(0,r.is)(n,t.Column)?d(n,h):n,relationTableTsKey:void 0,isJson:!1,selection:[]});let g="function"==typeof f.orderBy?f.orderBy(o,(0,C.getOrderByOperators)()):f.orderBy??[];for(let{tsKey:o,queryConfig:u,relation:l}of(Array.isArray(g)||(g=[g]),S=g.map(e=>(0,r.is)(e,t.Column)?d(e,h):p(e,h)),v=f.limit,E=f.offset,y)){let t=(0,C.normalizeRelation)(s,a,l),c=a[(0,n.getTableUniqueName)(l.referencedTable)],p=`${h}_${o}`,f=(0,N.and)(...t.fields.map((e,r)=>(0,N.eq)(d(t.references[r],p),d(e,h)))),m=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:s,tableNamesMap:a,table:e[c],tableConfig:s[c],queryConfig:(0,r.is)(l,C.One)?!0===u?{limit:1}:{...u,limit:1}:u,tableAlias:p,joinOn:f,nestedQueryRelation:l}),y=i.sql`${i.sql.identifier(p)}.${i.sql.identifier("data")}`.as(o);T.push({on:i.sql`true`,table:new P.Subquery(m.sql,{},p),alias:p,joinType:"left",lateral:!0}),b.push({dbKey:o,tsKey:o,field:y,relationTableTsKey:c,isJson:!0,selection:m.selection})}}if(0===b.length)throw new g({message:`No fields selected for table "${u.tsName}" ("${h}")`});if(A=(0,N.and)(y,A),m){let e=i.sql`json_build_array(${i.sql.join(b.map(({field:e,tsKey:t,isJson:n})=>n?i.sql`${i.sql.identifier(`${h}_${t}`)}.${i.sql.identifier("data")}`:(0,r.is)(e,i.SQL.Aliased)?e.sql:e),i.sql`, `)})`;(0,r.is)(m,C.Many)&&(e=i.sql`coalesce(json_agg(${e}${S.length>0?i.sql` order by ${i.sql.join(S,i.sql`, `)}`:void 0}), '[]'::json)`);let n=[{dbKey:"data",tsKey:"data",field:e.as("data"),isJson:!0,relationTableTsKey:u.tsName,selection:b}];void 0!==v||void 0!==E||S.length>0?(_=this.buildSelectQuery({table:l(o,h),fields:{},fieldsFlat:[{path:[],field:i.sql.raw("*")}],where:A,limit:v,offset:E,orderBy:S,setOperators:[]}),A=void 0,v=void 0,E=void 0,S=[]):_=l(o,h),_=this.buildSelectQuery({table:(0,r.is)(_,I.PgTable)?_:new P.Subquery(_,{},h),fields:{},fieldsFlat:n.map(({field:e})=>({path:[],field:(0,r.is)(e,t.Column)?d(e,h):e})),joins:T,where:A,limit:v,offset:E,orderBy:S,setOperators:[]})}else _=this.buildSelectQuery({table:l(o,h),fields:{},fieldsFlat:b.map(({field:e})=>({path:[],field:(0,r.is)(e,t.Column)?d(e,h):e})),joins:T,where:A,limit:v,offset:E,orderBy:S,setOperators:[]});return{tableTsKey:u.tsName,sql:_,selection:b}}}},44482,e=>{"use strict";e.s(["PgDatabase",()=>es],44482);var t=e.i(44988);class r{static [t.entityKind]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}}var i=e.i(5672),n=e.i(56325),s=e.i(18899),a=e.i(92352),o=e.i(88274);class u{static [t.entityKind]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,r){if("_"===r)return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(r===o.ViewBaseConfig)return{...e[o.ViewBaseConfig],selectedFields:new Proxy(e[o.ViewBaseConfig].selectedFields,this)};if("symbol"==typeof r)return e[r];let l=((0,t.is)(e,a.Subquery)?e._.selectedFields:(0,t.is)(e,s.View)?e[o.ViewBaseConfig].selectedFields:e)[r];if((0,t.is)(l,s.SQL.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!l.isSelectionField)return l.sql;let e=l.clone();return e.isSelectionField=!0,e}if((0,t.is)(l,s.SQL)){if("sql"===this.config.sqlBehavior)return l;throw Error(`You tried to reference "${r}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return(0,t.is)(l,n.Column)?this.config.alias?new Proxy(l,new i.ColumnAliasProxyHandler(new Proxy(l.table,new i.TableAliasProxyHandler(this.config.alias,this.config.replaceOriginalName??!1)))):l:"object"!=typeof l||null===l?l:new Proxy(l,new u(this.config))}}var l=e.i(69e3),d=e.i(22360),c=e.i(4313),p=e.i(94093);class f{constructor(e,t){this.name=e,this.value=t}static [t.entityKind]="PgCheckBuilder";brand;build(e){return new h(e,this)}}class h{constructor(e,t){this.table=e,this.name=t.name,this.value=t.value}static [t.entityKind]="PgCheck";name;value}e.i(63411);var m=e.i(4775);class y{constructor(e,t){this.unique=e,this.name=t}static [t.entityKind]="PgIndexBuilderOn";on(...e){return new g(e.map(e=>{if((0,t.is)(e,s.SQL))return e;let r=new m.IndexedColumn(e.name,!!e.keyAsName,e.columnType,e.indexConfig);return e.indexConfig=JSON.parse(JSON.stringify(e.defaultConfig)),r}),this.unique,!1,this.name)}onOnly(...e){return new g(e.map(e=>{if((0,t.is)(e,s.SQL))return e;let r=new m.IndexedColumn(e.name,!!e.keyAsName,e.columnType,e.indexConfig);return e.indexConfig=e.defaultConfig,r}),this.unique,!0,this.name)}using(e,...r){return new g(r.map(e=>{if((0,t.is)(e,s.SQL))return e;let r=new m.IndexedColumn(e.name,!!e.keyAsName,e.columnType,e.indexConfig);return e.indexConfig=JSON.parse(JSON.stringify(e.defaultConfig)),r}),this.unique,!0,this.name,e)}}class g{static [t.entityKind]="PgIndexBuilder";config;constructor(e,t,r,i,n="btree"){this.config={name:i,columns:e,unique:t,only:r,method:n}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new _(this.config,e)}}class _{static [t.entityKind]="PgIndex";config;constructor(e,t){this.config={...e,table:t}}}class b{constructor(e,t){this.name=e,t&&(this.as=t.as,this.for=t.for,this.to=t.to,this.using=t.using,this.withCheck=t.withCheck)}static [t.entityKind]="PgPolicy";as;for;to;using;withCheck;_linkedTable;link(e){return this._linkedTable=e,this}}e.i(44902),e.i(43233);let v=Symbol.for("drizzle:PgViewConfig");var E=e.i(15428),S=e.i(11909);class A{static [t.entityKind]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}class T{static [t.entityKind]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let r,i=!!this.fields;return r=this.fields?this.fields:(0,t.is)(e,a.Subquery)?Object.fromEntries(Object.keys(e._.selectedFields).map(t=>[t,e[t]])):(0,t.is)(e,S.PgViewBase)?e[o.ViewBaseConfig].selectedFields:(0,t.is)(e,s.SQL)?{}:(0,c.getTableColumns)(e),new O({table:e,fields:r,isPartialSelect:i,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}}class w extends A{static [t.entityKind]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:t,isPartialSelect:r,session:i,dialect:n,withList:s,distinct:a}){for(let o of(super(),this.config={withList:s,table:e,fields:{...t},distinct:a,setOperators:[]},this.isPartialSelect=r,this.session=i,this.dialect=n,this._={selectedFields:t,config:this.config},this.tableName=(0,c.getTableLikeName)(e),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{},V(e)))this.usedTables.add(o)}getUsedTables(){return[...this.usedTables]}createJoin(e,r){return(i,n)=>{let d=this.tableName,p=(0,c.getTableLikeName)(i);for(let e of V(i))this.usedTables.add(e);if("string"==typeof p&&this.config.joins?.some(e=>e.alias===p))throw Error(`Alias "${p}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof d&&(this.config.fields={[d]:this.config.fields}),"string"==typeof p&&!(0,t.is)(i,s.SQL))){let e=(0,t.is)(i,a.Subquery)?i._.selectedFields:(0,t.is)(i,s.View)?i[o.ViewBaseConfig].selectedFields:i[l.Table.Symbol.Columns];this.config.fields[p]=e}if("function"==typeof n&&(n=n(new Proxy(this.config.fields,new u({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:n,table:i,joinType:e,alias:p,lateral:r}),"string"==typeof p)switch(e){case"left":this.joinsNotNullableMap[p]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[p]=!0;break;case"cross":case"inner":this.joinsNotNullableMap[p]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[p]=!1}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(e,t){return r=>{let i="function"==typeof r?r(I()):r;if(!(0,c.haveSameKeys)(this.getSelectedFields(),i.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:i}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new u({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new u({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new u({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new u({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),r=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=e:this.config.orderBy=e;return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){let t=[];if(t.push(...V(this.config.table)),this.config.joins)for(let e of this.config.joins)t.push(...V(e.table));return new Proxy(new a.Subquery(this.getSQL(),this.config.fields,e,!1,[...new Set(t)]),new u({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new u({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(e){return this.cacheConfig=void 0===e?{config:{},enable:!0,autoInvalidate:!0}:!1===e?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}}class O extends w{static [t.entityKind]="PgSelect";_prepare(e){let{session:t,config:r,dialect:i,joinsNotNullableMap:n,authToken:s,cacheConfig:a,usedTables:o}=this;if(!t)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:u}=r;return d.tracer.startActiveSpan("drizzle.prepareQuery",()=>{let r=(0,c.orderSelectedFields)(u),l=t.prepareQuery(i.sqlToQuery(this.getSQL()),r,e,!0,void 0,{type:"select",tables:[...o]},a);return l.joinsNotNullableMap=n,l.setToken(s)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>d.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))}function R(e,t){return(r,i,...n)=>{let s=[i,...n].map(r=>({type:e,isAll:t,rightSelect:r}));for(let e of s)if(!(0,c.haveSameKeys)(r.getSelectedFields(),e.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(s)}}(0,c.applyMixins)(O,[r]);let I=()=>({union:C,unionAll:N,intersect:P,intersectAll:D,except:x,exceptAll:L}),C=R("union",!1),N=R("union",!0),P=R("intersect",!1),D=R("intersect",!0),x=R("except",!1),L=R("except",!0);class k{static [t.entityKind]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=(0,t.is)(e,E.PgDialect)?e:void 0,this.dialectConfig=(0,t.is)(e,E.PgDialect)?void 0:e}$with=(e,t)=>{let r=this;return{as:i=>("function"==typeof i&&(i=i(r)),new Proxy(new a.WithSubquery(i.getSQL(),t??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new u({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let t=this;return{select:function(r){return new T({fields:r??void 0,session:void 0,dialect:t.getDialect(),withList:e})},selectDistinct:function(e){return new T({fields:e??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})},selectDistinctOn:function(e,r){return new T({fields:r??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:e}})}}}select(e){return new T({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new T({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new T({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new E.PgDialect(this.dialectConfig)),this.dialect}}var M=S;class ${constructor(e,t){this.name=e,this.schema=t}static [t.entityKind]="PgDefaultViewBuilderCore";config={};with(e){return this.config.with=e,this}}class U extends ${static [t.entityKind]="PgViewBuilder";as(e){"function"==typeof e&&(e=e(new k));let t=new u({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),r=new Proxy(e.getSelectedFields(),t);return new Proxy(new Y({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:r,query:e.getSQL().inlineParams()}}),t)}}class j extends ${static [t.entityKind]="PgManualViewBuilder";columns;constructor(e,t,r){super(e,r),this.columns=(0,c.getTableColumns)((0,p.pgTable)(e,t))}existing(){return new Proxy(new Y({pgConfig:void 0,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new u({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(e){return new Proxy(new Y({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:e.inlineParams()}}),new u({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}}class B{constructor(e,t){this.name=e,this.schema=t}static [t.entityKind]="PgMaterializedViewBuilderCore";config={};using(e){return this.config.using=e,this}with(e){return this.config.with=e,this}tablespace(e){return this.config.tablespace=e,this}withNoData(){return this.config.withNoData=!0,this}}class z extends B{static [t.entityKind]="PgMaterializedViewBuilder";as(e){"function"==typeof e&&(e=e(new k));let t=new u({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),r=new Proxy(e.getSelectedFields(),t);return new Proxy(new q({pgConfig:{with:this.config.with,using:this.config.using,tablespace:this.config.tablespace,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:r,query:e.getSQL().inlineParams()}}),t)}}class K extends B{static [t.entityKind]="PgManualMaterializedViewBuilder";columns;constructor(e,t,r){super(e,r),this.columns=(0,c.getTableColumns)((0,p.pgTable)(e,t))}existing(){return new Proxy(new q({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new u({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(e){return new Proxy(new q({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:e.inlineParams()}}),new u({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}}class Y extends M.PgViewBase{static [t.entityKind]="PgView";[v];constructor({pgConfig:e,config:t}){super(t),e&&(this[v]={with:e.with})}}let F=Symbol.for("drizzle:PgMaterializedViewConfig");class q extends M.PgViewBase{static [t.entityKind]="PgMaterializedView";[F];constructor({pgConfig:e,config:t}){super(t),this[F]={with:e?.with,using:e?.using,tablespace:e?.tablespace,withNoData:e?.withNoData}}}function V(e){return(0,t.is)(e,p.PgTable)?[e[l.Schema]?`${e[l.Schema]}.${e[l.Table.Symbol.BaseName]}`:e[l.Table.Symbol.BaseName]]:(0,t.is)(e,a.Subquery)?e._.usedTables??[]:(0,t.is)(e,s.SQL)?e.usedTables??[]:[]}class G extends r{constructor(e,t,r,i){super(),this.session=t,this.dialect=r,this.config={table:e,withList:i}}static [t.entityKind]="PgDelete";config;cacheConfig;where(e){return this.config.where=e,this}returning(e=this.config.table[l.Table.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=(0,c.orderSelectedFields)(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return d.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"delete",tables:V(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>d.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new u({alias:(0,l.getTableName)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class H{constructor(e,t,r,i,n){this.table=e,this.session=t,this.dialect=r,this.withList=i,this.overridingSystemValue_=n}static [t.entityKind]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(0===(e=Array.isArray(e)?e:[e]).length)throw Error("values() must be called with at least one value");let r=e.map(e=>{let r={},i=this.table[l.Table.Symbol.Columns];for(let n of Object.keys(e)){let a=e[n];r[n]=(0,t.is)(a,s.SQL)?a:new s.Param(a,i[n])}return r});return new Z(this.table,r,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let r="function"==typeof e?e(new k):e;if(!(0,t.is)(r,s.SQL)&&!(0,c.haveSameKeys)(this.table[l.Columns],r._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new Z(this.table,r,this.session,this.dialect,this.withList,!0)}}class Z extends r{constructor(e,t,r,i,n,s,a){super(),this.session=r,this.dialect=i,this.config={table:e,values:t,withList:n,select:s,overridingSystemValue_:a}}static [t.entityKind]="PgInsert";config;cacheConfig;returning(e=this.config.table[l.Table.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=(0,c.orderSelectedFields)(e),this}onConflictDoNothing(e={}){if(void 0===e.target)this.config.onConflict=s.sql`do nothing`;else{let t="";t=Array.isArray(e.target)?e.target.map(e=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(e))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let r=e.where?s.sql` where ${e.where}`:void 0;this.config.onConflict=s.sql`(${s.sql.raw(t)})${r} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let t=e.where?s.sql` where ${e.where}`:void 0,r=e.targetWhere?s.sql` where ${e.targetWhere}`:void 0,i=e.setWhere?s.sql` where ${e.setWhere}`:void 0,n=this.dialect.buildUpdateSet(this.config.table,(0,c.mapUpdateSet)(this.config.table,e.set)),a="";return a=Array.isArray(e.target)?e.target.map(e=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(e))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=s.sql`(${s.sql.raw(a)})${r} do update set ${n}${t}${i}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return d.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:V(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>d.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new u({alias:(0,l.getTableName)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class W{constructor(e,t,r,i){this.table=e,this.session=t,this.dialect=r,this.withList=i}static [t.entityKind]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new Q(this.table,(0,c.mapUpdateSet)(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}}class Q extends r{constructor(e,t,r,i,n){super(),this.session=r,this.dialect=i,this.config={set:t,table:e,withList:n,joins:[]},this.tableName=(0,c.getTableLikeName)(e),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}static [t.entityKind]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(e){let t=(0,c.getTableLikeName)(e);return"string"==typeof t&&(this.joinsNotNullableMap[t]=!0),this.config.from=e,this}getTableLikeFields(e){return(0,t.is)(e,p.PgTable)?e[l.Table.Symbol.Columns]:(0,t.is)(e,a.Subquery)?e._.selectedFields:e[o.ViewBaseConfig].selectedFields}createJoin(e){return(r,i)=>{let n=(0,c.getTableLikeName)(r);if("string"==typeof n&&this.config.joins.some(e=>e.alias===n))throw Error(`Alias "${n}" is already used in this query`);if("function"==typeof i){let e=this.config.from&&!(0,t.is)(this.config.from,s.SQL)?this.getTableLikeFields(this.config.from):void 0;i=i(new Proxy(this.config.table[l.Table.Symbol.Columns],new u({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),e&&new Proxy(e,new u({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:i,table:r,joinType:e,alias:n}),"string"==typeof n)switch(e){case"left":this.joinsNotNullableMap[n]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[n]=!0;break;case"inner":this.joinsNotNullableMap[n]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[n]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[l.Table.Symbol.Columns]),this.config.from)){let r=(0,c.getTableLikeName)(this.config.from);if("string"==typeof r&&this.config.from&&!(0,t.is)(this.config.from,s.SQL)){let t=this.getTableLikeFields(this.config.from);e[r]=t}for(let r of this.config.joins){let i=(0,c.getTableLikeName)(r.table);if("string"==typeof i&&!(0,t.is)(r.table,s.SQL)){let t=this.getTableLikeFields(r.table);e[i]=t}}}return this.config.returningFields=e,this.config.returning=(0,c.orderSelectedFields)(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){let t=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:V(this.config.table)},this.cacheConfig);return t.joinsNotNullableMap=this.joinsNotNullableMap,t}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new u({alias:(0,l.getTableName)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}var J=s;class X extends J.SQL{constructor(e){super(X.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=X.buildCount(e.source,e.filters)}sql;token;static [t.entityKind]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,t){return J.sql`(select count(*) from ${e}${J.sql.raw(" where ").if(t)}${t})`}static buildCount(e,t){return J.sql`select count(*) as count from ${e}${J.sql.raw(" where ").if(t)}${t};`}setToken(e){return this.token=e,this}then(e,t){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}}var ee=e.i(79822);class et{constructor(e,t,r,i,n,s,a){this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=i,this.tableConfig=n,this.dialect=s,this.session=a}static [t.entityKind]="PgRelationalQueryBuilder";findMany(e){return new er(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new er(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}}class er extends r{constructor(e,t,r,i,n,s,a,o,u){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=i,this.tableConfig=n,this.dialect=s,this.session=a,this.config=o,this.mode=u}static [t.entityKind]="PgRelationalQuery";_prepare(e){return d.tracer.startActiveSpan("drizzle.prepareQuery",()=>{let{query:t,builtQuery:r}=this._toSQL();return this.session.prepareQuery(r,void 0,e,!0,(e,r)=>{let i=e.map(e=>(0,ee.mapRelationalRow)(this.schema,this.tableConfig,e,t.selection,r));return"first"===this.mode?i[0]:i})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return d.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}}class ei extends r{constructor(e,t,r,i){super(),this.execute=e,this.sql=t,this.query=r,this.mapBatchResult=i}static [t.entityKind]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}}class en extends r{constructor(e,t,r){super(),this.session=t,this.dialect=r,this.config={view:e}}static [t.entityKind]="PgRefreshMaterializedView";config;concurrently(){if(void 0!==this.config.withNoData)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(void 0!==this.config.concurrently)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return d.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>d.tracer.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))}class es{constructor(e,t,r){if(this.dialect=e,this.session=t,this._=r?{schema:r.schema,fullSchema:r.fullSchema,tableNamesMap:r.tableNamesMap,session:t}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:t},this.query={},this._.schema)for(let[i,n]of Object.entries(this._.schema))this.query[i]=new et(r.fullSchema,this._.schema,this._.tableNamesMap,r.fullSchema[i],n,e,t);this.$cache={invalidate:async e=>{}}}static [t.entityKind]="PgDatabase";query;$with=(e,t)=>{let r=this;return{as:i=>("function"==typeof i&&(i=i(new k(r.dialect))),new Proxy(new a.WithSubquery(i.getSQL(),t??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new u({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,t){return new X({source:e,filters:t,session:this.session})}$cache;with(...e){let t=this;return{select:function(r){return new T({fields:r??void 0,session:t.session,dialect:t.dialect,withList:e})},selectDistinct:function(r){return new T({fields:r??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})},selectDistinctOn:function(r,i){return new T({fields:i??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:{on:r}})},update:function(r){return new W(r,t.session,t.dialect,e)},insert:function(r){return new H(r,t.session,t.dialect,e)},delete:function(r){return new G(r,t.session,t.dialect,e)}}}select(e){return new T({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new T({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new T({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new W(e,this.session,this.dialect)}insert(e){return new H(e,this.session,this.dialect)}delete(e){return new G(e,this.session,this.dialect)}refreshMaterializedView(e){return new en(e,this.session,this.dialect)}authToken;execute(e){let t="string"==typeof e?s.sql.raw(e):e.getSQL(),r=this.dialect.sqlToQuery(t),i=this.session.prepareQuery(r,void 0,void 0,!1);return new ei(()=>i.execute(void 0,this.authToken),t,r,e=>i.mapResult(e,!0))}transaction(e,t){return this.session.transaction(e,t)}}},78856,e=>{"use strict";e.s(["NoopCache",()=>i,"hashQuery",()=>n]);var t=e.i(44988);class r{static [t.entityKind]="Cache"}class i extends r{strategy(){return"all"}static [t.entityKind]="NoopCache";async get(e){}async put(e,t,r,i){}async onMutate(e){}}async function n(e,t){let r=`${e}-${JSON.stringify(t)}`,i=new TextEncoder().encode(r);return[...new Uint8Array(await crypto.subtle.digest("SHA-256",i))].map(e=>e.toString(16).padStart(2,"0")).join("")}},68581,e=>{"use strict";e.s(["PgPreparedQuery",()=>o,"PgSession",()=>u,"PgTransaction",()=>l]);var t=e.i(78856),r=e.i(44988),i=e.i(71783),n=e.i(18899),s=e.i(22360),a=e.i(44482);class o{constructor(e,t,r,i){this.query=e,this.cache=t,this.queryMetadata=r,this.cacheConfig=i,t&&"all"===t.strategy()&&void 0===i&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(e,t){return e}setToken(e){return this.authToken=e,this}static [r.entityKind]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(e,n,s){if(void 0===this.cache||(0,r.is)(this.cache,t.NoopCache)||void 0===this.queryMetadata||this.cacheConfig&&!this.cacheConfig.enable)try{return await s()}catch(t){throw new i.DrizzleQueryError(e,n,t)}if(("insert"===this.queryMetadata.type||"update"===this.queryMetadata.type||"delete"===this.queryMetadata.type)&&this.queryMetadata.tables.length>0)try{let[e]=await Promise.all([s(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return e}catch(t){throw new i.DrizzleQueryError(e,n,t)}if(!this.cacheConfig)try{return await s()}catch(t){throw new i.DrizzleQueryError(e,n,t)}if("select"===this.queryMetadata.type){let r=await this.cache.get(this.cacheConfig.tag??await (0,t.hashQuery)(e,n),this.queryMetadata.tables,void 0!==this.cacheConfig.tag,this.cacheConfig.autoInvalidate);if(void 0===r){let r;try{r=await s()}catch(t){throw new i.DrizzleQueryError(e,n,t)}return await this.cache.put(this.cacheConfig.tag??await (0,t.hashQuery)(e,n),r,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],void 0!==this.cacheConfig.tag,this.cacheConfig.config),r}return r}try{return await s()}catch(t){throw new i.DrizzleQueryError(e,n,t)}}}class u{constructor(e){this.dialect=e}static [r.entityKind]="PgSession";execute(e,t){return s.tracer.startActiveSpan("drizzle.operation",()=>s.tracer.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(t).execute(void 0,t))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,t){return Number((await this.execute(e,t))[0].count)}}class l extends a.PgDatabase{constructor(e,t,r,i=0){super(e,t,r),this.schema=r,this.nestedIndex=i}static [r.entityKind]="PgTransaction";rollback(){throw new i.TransactionRollbackError}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),"boolean"==typeof e.deferrable&&t.push(e.deferrable?"deferrable":"not deferrable"),n.sql.raw(t.join(" "))}setTransaction(e){return this.session.execute(n.sql`set transaction ${this.getTransactionConfigSQL(e)}`)}}},29529,e=>e.a(async(t,r)=>{try{e.s(["NodePgSession",()=>m]);var i=e.i(30056),n=e.i(78856),s=e.i(44988),a=e.i(7932),o=e.i(68581),u=e.i(18899),l=e.i(22360),d=e.i(4313),c=t([i]);[i]=c.then?(await c)():c;let{Pool:p,types:f}=i.default;class h extends o.PgPreparedQuery{constructor(e,t,r,i,n,s,a,o,u,l,d){super({sql:t,params:r},n,s,a),this.client=e,this.queryString=t,this.params=r,this.logger=i,this.fields=o,this._isResponseInArrayMode=l,this.customResultMapper=d,this.rawQueryConfig={name:u,text:t,types:{getTypeParser:(e,t)=>e===f.builtins.TIMESTAMPTZ||e===f.builtins.TIMESTAMP||e===f.builtins.DATE||e===f.builtins.INTERVAL||1231===e||1115===e||1185===e||1187===e||1182===e?e=>e:f.getTypeParser(e,t)}},this.queryConfig={name:u,text:t,rowMode:"array",types:{getTypeParser:(e,t)=>e===f.builtins.TIMESTAMPTZ||e===f.builtins.TIMESTAMP||e===f.builtins.DATE||e===f.builtins.INTERVAL||1231===e||1115===e||1185===e||1187===e||1182===e?e=>e:f.getTypeParser(e,t)}}}static [s.entityKind]="NodePgPreparedQuery";rawQueryConfig;queryConfig;async execute(e={}){return l.tracer.startActiveSpan("drizzle.execute",async()=>{let t=(0,u.fillPlaceholders)(this.params,e);this.logger.logQuery(this.rawQueryConfig.text,t);let{fields:r,rawQueryConfig:i,client:n,queryConfig:s,joinsNotNullableMap:a,customResultMapper:o}=this;if(!r&&!o)return l.tracer.startActiveSpan("drizzle.driver.execute",async e=>(e?.setAttributes({"drizzle.query.name":i.name,"drizzle.query.text":i.text,"drizzle.query.params":JSON.stringify(t)}),this.queryWithCache(i.text,t,async()=>await n.query(i,t))));let c=await l.tracer.startActiveSpan("drizzle.driver.execute",e=>(e?.setAttributes({"drizzle.query.name":s.name,"drizzle.query.text":s.text,"drizzle.query.params":JSON.stringify(t)}),this.queryWithCache(s.text,t,async()=>await n.query(s,t))));return l.tracer.startActiveSpan("drizzle.mapResponse",()=>o?o(c.rows):c.rows.map(e=>(0,d.mapResultRow)(r,e,a)))})}all(e={}){return l.tracer.startActiveSpan("drizzle.execute",()=>{let t=(0,u.fillPlaceholders)(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,t),l.tracer.startActiveSpan("drizzle.driver.execute",e=>(e?.setAttributes({"drizzle.query.name":this.rawQueryConfig.name,"drizzle.query.text":this.rawQueryConfig.text,"drizzle.query.params":JSON.stringify(t)}),this.queryWithCache(this.rawQueryConfig.text,t,async()=>this.client.query(this.rawQueryConfig,t)).then(e=>e.rows)))})}isResponseInArrayMode(){return this._isResponseInArrayMode}}class m extends o.PgSession{constructor(e,t,r,i={}){super(t),this.client=e,this.schema=r,this.options=i,this.logger=i.logger??new a.NoopLogger,this.cache=i.cache??new n.NoopCache}static [s.entityKind]="NodePgSession";logger;cache;prepareQuery(e,t,r,i,n,s,a){return new h(this.client,e.sql,e.params,this.logger,this.cache,s,a,t,r,i,n)}async transaction(e,t){let r=this.client instanceof p?new m(await this.client.connect(),this.dialect,this.schema,this.options):this,i=new y(this.dialect,r,this.schema);await i.execute(u.sql`begin${t?u.sql` ${i.getTransactionConfigSQL(t)}`:void 0}`);try{let t=await e(i);return await i.execute(u.sql`commit`),t}catch(e){throw await i.execute(u.sql`rollback`),e}finally{this.client instanceof p&&r.client.release()}}async count(e){let t=await this.execute(e);return Number(t.rows[0].count)}}class y extends o.PgTransaction{static [s.entityKind]="NodePgTransaction";async transaction(e){let t=`sp${this.nestedIndex+1}`,r=new y(this.dialect,this.session,this.schema,this.nestedIndex+1);await r.execute(u.sql.raw(`savepoint ${t}`));try{let i=await e(r);return await r.execute(u.sql.raw(`release savepoint ${t}`)),i}catch(e){throw await r.execute(u.sql.raw(`rollback to savepoint ${t}`)),e}}}r()}catch(e){r(e)}},!1),51103,e=>e.a(async(t,r)=>{try{e.s(["drizzle",()=>f]);var i=e.i(30056),n=e.i(44988),s=e.i(7932),a=e.i(44482),o=e.i(15428),u=e.i(79822),l=e.i(4313),d=e.i(29529),c=t([i,d]);[i,d]=c.then?(await c)():c;class h{constructor(e,t,r={}){this.client=e,this.dialect=t,this.options=r}static [n.entityKind]="NodePgDriver";createSession(e){return new d.NodePgSession(this.client,this.dialect,e,{logger:this.options.logger,cache:this.options.cache})}}class m extends a.PgDatabase{static [n.entityKind]="NodePgDatabase"}function p(e,t={}){let r,i,n=new o.PgDialect({casing:t.casing});if(!0===t.logger?r=new s.DefaultLogger:!1!==t.logger&&(r=t.logger),t.schema){let e=(0,u.extractTablesRelationalConfig)(t.schema,u.createTableRelationsHelpers);i={fullSchema:t.schema,schema:e.tables,tableNamesMap:e.tableNamesMap}}let a=new h(e,n,{logger:r,cache:t.cache}).createSession(i),l=new m(n,a,i);return l.$client=e,l.$cache=t.cache,l.$cache&&(l.$cache.invalidate=t.cache?.onMutate),l}function f(...e){if("string"==typeof e[0]){let t=new i.default.Pool({connectionString:e[0]});return p(t,e[1])}if((0,l.isConfig)(e[0])){let{connection:t,client:r,...n}=e[0];if(r)return p(r,n);let s=new i.default.Pool("string"==typeof t?{connectionString:t}:t);return p(s,n)}return p(e[0],e[1])}(f||(f={})).mock=function(e){return p({},e)},r()}catch(e){r(e)}},!1),77035,e=>e.a(async(t,r)=>{try{e.s(["db",()=>s]);var i=e.i(51103),n=t([i]);[i]=n.then?(await n)():n;let s=(0,i.drizzle)({connection:{host:process.env.DATABASE_HOST,port:Number(process.env.DATABASE_PORT),database:process.env.DATABASE_DB,user:process.env.DATABASE_USER,password:process.env.DATABASE_PASSWORD,ssl:!1}});r()}catch(e){r(e)}},!1),18612,e=>{"use strict";e.s(["account",()=>u,"conversation",()=>d,"message",()=>c,"session",()=>o,"user",()=>a,"verification",()=>l]);var t=e.i(2847),r=e.i(94093),i=e.i(84259),n=e.i(3090),s=e.i(67751);let a=(0,r.pgTable)("user",{id:(0,s.uuid)("id").unique().defaultRandom().notNull(),name:(0,i.text)("name").notNull(),email:(0,i.text)("email").notNull().unique(),emailVerified:(0,t.boolean)("email_verified").default(!1).notNull(),image:(0,i.text)("image"),createdAt:(0,n.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,n.timestamp)("updated_at").defaultNow().$onUpdate(()=>new Date).notNull()}),o=(0,r.pgTable)("session",{id:(0,s.uuid)("id").unique().defaultRandom().notNull(),expiresAt:(0,n.timestamp)("expires_at").notNull(),token:(0,i.text)("token").notNull().unique(),createdAt:(0,n.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,n.timestamp)("updated_at").$onUpdate(()=>new Date).notNull(),ipAddress:(0,i.text)("ip_address"),userAgent:(0,i.text)("user_agent"),userId:(0,s.uuid)("user_id").notNull().references(()=>a.id,{onDelete:"cascade"})}),u=(0,r.pgTable)("account",{id:(0,s.uuid)("id").unique().defaultRandom().notNull(),accountId:(0,i.text)("account_id").notNull(),providerId:(0,i.text)("provider_id").notNull(),userId:(0,s.uuid)("user_id").notNull().references(()=>a.id,{onDelete:"cascade"}),accessToken:(0,i.text)("access_token"),refreshToken:(0,i.text)("refresh_token"),idToken:(0,i.text)("id_token"),accessTokenExpiresAt:(0,n.timestamp)("access_token_expires_at"),refreshTokenExpiresAt:(0,n.timestamp)("refresh_token_expires_at"),scope:(0,i.text)("scope"),password:(0,i.text)("password"),createdAt:(0,n.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,n.timestamp)("updated_at").$onUpdate(()=>new Date).notNull()}),l=(0,r.pgTable)("verification",{id:(0,s.uuid)("id").unique().defaultRandom().notNull(),identifier:(0,i.text)("identifier").notNull(),value:(0,i.text)("value").notNull(),expiresAt:(0,n.timestamp)("expires_at").notNull(),createdAt:(0,n.timestamp)("created_at").defaultNow().notNull(),updatedAt:(0,n.timestamp)("updated_at").defaultNow().$onUpdate(()=>new Date).notNull()}),d=(0,r.pgTable)("conversation",{id:(0,s.uuid)("id").unique().defaultRandom().notNull(),users:(0,s.uuid)("users").array(),name:(0,i.text)("name")}),c=(0,r.pgTable)("message",{id:(0,s.uuid)("id").unique().defaultRandom().notNull(),conversation:(0,s.uuid)("conversation").notNull().references(()=>d.id,{onDelete:"cascade"}),text:(0,i.text)("text").notNull(),sender:(0,s.uuid)("sender").notNull().references(()=>a.id)})},9662,30501,34075,12700,96101,31428,72381,e=>{"use strict";e.s(["ENV",()=>d,"TTY_COLORS",()=>m,"createLogger",()=>b,"env",()=>i,"getBooleanEnvVar",()=>l,"getColorDepth",()=>h,"getEnvVar",()=>u,"isDevelopment",()=>a,"isProduction",()=>s,"isTest",()=>o,"logger",()=>v,"shouldPublishLog",()=>g],9662);let t=Object.create(null),r=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?t:globalThis),i=new Proxy(t,{get:(e,i)=>r()[i]??t[i],has:(e,i)=>i in r()||i in t,set:(e,t,i)=>(r(!0)[t]=i,!0),deleteProperty(e,t){if(!t)return!1;let i=r(!0);return delete i[t],!0},ownKeys:()=>Object.keys(r(!0))}),n="undefined"!=typeof process&&process.env&&"production"||"",s="production"===n,a=()=>"dev"===n||"development"===n,o=()=>"test"===n||function(e){return!!e&&"false"!==e}(i.TEST);function u(e,t){return"undefined"!=typeof process&&process.env?process.env[e]??t:"undefined"!=typeof Deno?Deno.env.get(e)??t:"undefined"!=typeof Bun?Bun.env[e]??t:t}function l(e,t=!0){let r=u(e);return r?"0"!==r&&"false"!==r.toLowerCase()&&""!==r:t}let d=Object.freeze({get BETTER_AUTH_SECRET(){return u("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return u("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return u("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return u("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return u("NODE_ENV","development")},get PACKAGE_VERSION(){return u("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return u("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}}),c={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:24,putty:4,st:4,"rxvt-unicode-24bit":24,terminator:24,"xterm-kitty":24},p=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:24,DRONE:8,GITEA_ACTIONS:24,GITHUB_ACTIONS:24,GITLAB_CI:8,TRAVIS:8})),f=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/];function h(){if(void 0!==u("FORCE_COLOR"))switch(u("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return 24;default:return 1}if(void 0!==u("NODE_DISABLE_COLORS")&&""!==u("NODE_DISABLE_COLORS")||void 0!==u("NO_COLOR")&&""!==u("NO_COLOR")||"dumb"===u("TERM"))return 1;if(u("TMUX"))return 24;if("TF_BUILD"in i&&"AGENT_NAME"in i)return 4;if("CI"in i){for(let{0:e,1:t}of p)if(e in i)return t;return"codeship"===u("CI_NAME")?8:1}if("TEAMCITY_VERSION"in i)return null!==/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(u("TEAMCITY_VERSION"))?4:1;switch(u("TERM_PROGRAM")){case"iTerm.app":if(!u("TERM_PROGRAM_VERSION")||null!==/^[0-2]\./.exec(u("TERM_PROGRAM_VERSION")))return 8;return 24;case"HyperTerm":case"MacTerm":return 24;case"Apple_Terminal":return 8}if("truecolor"===u("COLORTERM")||"24bit"===u("COLORTERM"))return 24;if(u("TERM")){if(null!==/truecolor/.exec(u("TERM")))return 24;if(null!==/^xterm-256/.exec(u("TERM")))return 8;let e=u("TERM").toLowerCase();if(c[e])return c[e];if(f.some(t=>null!==t.exec(e)))return 4}return u("COLORTERM")?4:1}let m={reset:"\x1b[0m",bright:"\x1b[1m",dim:"\x1b[2m",undim:"\x1b[22m",underscore:"\x1b[4m",blink:"\x1b[5m",reverse:"\x1b[7m",hidden:"\x1b[8m",fg:{black:"\x1b[30m",red:"\x1b[31m",green:"\x1b[32m",yellow:"\x1b[33m",blue:"\x1b[34m",magenta:"\x1b[35m",cyan:"\x1b[36m",white:"\x1b[37m"},bg:{black:"\x1b[40m",red:"\x1b[41m",green:"\x1b[42m",yellow:"\x1b[43m",blue:"\x1b[44m",magenta:"\x1b[45m",cyan:"\x1b[46m",white:"\x1b[47m"}},y=["info","success","warn","error","debug"];function g(e,t){return y.indexOf(t)<=y.indexOf(e)}let _={info:m.fg.blue,success:m.fg.green,warn:m.fg.yellow,error:m.fg.red,debug:m.fg.magenta},b=e=>{let t=e?.disabled!==!0,r=e?.level??"error",i=e?.disableColors!==void 0?!e.disableColors:1!==h();return{...Object.fromEntries(y.map(n=>[n,(...[s,...a])=>((n,s,a=[])=>{if(!t||!g(r,n))return;let o=((e,t,r)=>{let i=new Date().toISOString();return r?`${m.dim}${i}${m.reset} ${_[e]}${e.toUpperCase()}${m.reset} ${m.bright}[Better Auth]:${m.reset} ${t}`:`${i} ${e.toUpperCase()} [Better Auth]: ${t}`})(n,s,i);if(!e||"function"!=typeof e.log)return void("error"===n?console.error(o,...a):"warn"===n?console.warn(o,...a):console.log(o,...a));e.log("success"===n?"info":n,s,...a)})(n,s,a)])),get level(){return r}}},v=b();function E(e){return e?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function S(e,t,r){let i="",n=0,s=0;for(let r of e)for(n=n<<8|r,s+=8;s>=6;)s-=6,i+=t[n>>s&63];if(s>0&&(i+=t[n<<6-s&63]),r){let e=(4-i.length%4)%4;i+="=".repeat(e)}return i}function A(e,t){let r=new Map;for(let e=0;e<t.length;e++)r.set(t[e],e);let i=[],n=0,s=0;for(let t of e){if("="===t)break;let e=r.get(t);if(void 0===e)throw Error(`Invalid Base64 character: ${t}`);n=n<<6|e,(s+=6)>=8&&(s-=8,i.push(n>>s&255))}return Uint8Array.from(i)}e.s(["base64",()=>T,"base64Url",()=>w],30501);let T={encode(e,t={}){let r=E(!1);return S("string"==typeof e?new TextEncoder().encode(e):new Uint8Array(e),r,t.padding??!0)},decode(e){"string"!=typeof e&&(e=new TextDecoder().decode(e));let t=E(e.includes("-")||e.includes("_"));return A(e,t)}},w={encode(e,t={}){let r=E(!0);return S("string"==typeof e?new TextEncoder().encode(e):new Uint8Array(e),r,t.padding??!0)},decode(e){let t=E(e.includes("-")||e.includes("_"));return A(e,t)}};function O(e){return e}e.s(["BASE_ERROR_CODES",()=>R,"BetterAuthError",()=>I],12700),e.s(["defineErrorCodes",()=>O],34075);let R={USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account."};class I extends Error{constructor(e,t){super(e),this.name="BetterAuthError",this.message=e,this.cause=t,this.stack=""}}function C(){let e="undefined"!=typeof globalThis&&globalThis.crypto;if(e&&"object"==typeof e.subtle&&null!=e.subtle)return e.subtle;throw Error("crypto.subtle must be defined")}e.s(["APIError",()=>$,"createEndpoint",()=>X,"createMiddleware",()=>J,"createRouter",()=>ri,"toResponse",()=>B],31428),e.s(["getWebcryptoSubtle",()=>C],96101);let N=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function P(){return{root:{key:""},static:new N}}function D(e){return e.split("/").filter(Boolean)}function x(e,t){let r=new N;for(let[i,n]of t){let t=i<0?e.slice(-1*i).join("/"):e[i];if("string"==typeof n)r[n]=t;else{let e=t.match(n);if(e)for(let t in e.groups)r[t]=e.groups[t]}}return r}function L(e,t="",r,i){let n=D(r),s=e.root,a=0,o=[];for(let e=0;e<n.length;e++){let t=n[e];if(t.startsWith("**")){s.wildcard||(s.wildcard={key:"**"}),s=s.wildcard,o.push([-e,t.split(":")[1]||"_",2===t.length]);break}if("*"===t||t.includes(":")){s.param||(s.param={key:"*"}),s=s.param;let r="*"===t;o.push([e,r?`_${a++}`:function(e){if(!e.includes(":",1))return e.slice(1);let t=e.replace(/:(\w+)/g,(e,t)=>`(?<${t}>\\w+)`);return RegExp(`^${t}$`)}(t),r]);continue}let r=s.static?.[t];if(r)s=r;else{let e={key:t};s.static||(s.static=new N),s.static[t]=e,s=e}}let u=o.length>0;s.methods||(s.methods=new N),s.methods[t]||(s.methods[t]=[]),s.methods[t].push({data:i||null,paramsMap:u?o:void 0}),u||(e.static[r]=s)}var k=Object.defineProperty,M={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511},$=function(e,t){class r extends e{#e;constructor(...e){if(function(){let e=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");return void 0===e?Object.isExtensible(Error):Object.prototype.hasOwnProperty.call(e,"writable")?e.writable:void 0!==e.set}()){let t=Error.stackTraceLimit;Error.stackTraceLimit=0,super(...e),Error.stackTraceLimit=t}else super(...e);let t=Error().stack;t&&(this.#e=function(e){let t=e.split("\n    at ");return t.length<=1?e:(t.splice(1,1),t.join("\n    at "))}(t.replace(/^Error/,this.name)))}get errorStack(){return this.#e}}return Object.defineProperty(r.prototype,"constructor",{get:()=>t,enumerable:!1,configurable:!0}),r}(class extends Error{constructor(e="INTERNAL_SERVER_ERROR",t,r={},i="number"==typeof e?e:M[e]){super(t?.message,t?.cause?{cause:t.cause}:void 0),this.status=e,this.body=t,this.headers=r,this.statusCode=i,this.name="APIError",this.status=e,this.headers=r,this.statusCode=i,this.body=t?{code:t?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...t}:void 0}},Error);async function U(e){let t=e.headers.get("content-type")||"";if(e.body){if(t.includes("application/json"))return await e.json();if(t.includes("application/x-www-form-urlencoded")){let t=await e.formData(),r={};return t.forEach((e,t)=>{r[t]=e.toString()}),r}if(t.includes("multipart/form-data")){let t=await e.formData(),r={};return t.forEach((e,t)=>{r[t]=e}),r}return t.includes("text/plain")?await e.text():t.includes("application/octet-stream")?await e.arrayBuffer():t.includes("application/pdf")||t.includes("image/")||t.includes("video/")?await e.blob():t.includes("application/stream")||e.body instanceof ReadableStream?e.body:await e.text()}}function j(e){return e instanceof $||e?.name==="APIError"}function B(e,t){if(e instanceof Response)return t?.headers instanceof Headers&&t.headers.forEach((t,r)=>{e.headers.set(r,t)}),e;if(e&&"object"==typeof e&&"_flag"in e&&"json"===e._flag){let r=e.body,i=e.routerResponse;if(i instanceof Response)return i;let n=new Headers({...i?.headers,...e.headers,...t?.headers,"Content-Type":"application/json"});return new Response(JSON.stringify(r),{...i,headers:n,status:e.status??t?.status??i?.status,statusText:t?.statusText??i?.statusText})}if(j(e))return B(e.body,{status:t?.status??e.statusCode,statusText:e.status.toString(),headers:t?.headers||e.headers});let r=e,i=new Headers(t?.headers);return e?"string"==typeof e?(r=e,i.set("Content-Type","text/plain")):e instanceof ArrayBuffer||ArrayBuffer.isView(e)?(r=e,i.set("Content-Type","application/octet-stream")):e instanceof Blob?(r=e,i.set("Content-Type",e.type||"application/octet-stream")):e instanceof FormData?r=e:e instanceof URLSearchParams?(r=e,i.set("Content-Type","application/x-www-form-urlencoded")):e instanceof ReadableStream?(r=e,i.set("Content-Type","application/octet-stream")):function(e){if(void 0===e)return!1;let t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}(e)&&(r=function(e,t,r){let i=0,n=new WeakMap;return JSON.stringify(e,(e,t)=>{if("bigint"==typeof t)return t.toString();if("object"==typeof t&&null!==t){if(n.has(t))return`[Circular ref-${n.get(t)}]`;n.set(t,i++)}return t},void 0)}(e),i.set("Content-Type","application/json")):(null===e&&(r=JSON.stringify(null)),i.set("content-type","application/json")),new Response(r,{...t,headers:i})}async function z(e,t={}){let r={body:t.body,query:t.query};if(e.body){let i=await e.body["~standard"].validate(t.body);if(i.issues)return{data:null,error:K(i.issues,"body")};r.body=i.value}if(e.query){let i=await e.query["~standard"].validate(t.query);if(i.issues)return{data:null,error:K(i.issues,"query")};r.query=i.value}return e.requireHeaders&&!t.headers?{data:null,error:{message:"Headers is required"}}:e.requireRequest&&!t.request?{data:null,error:{message:"Request is required"}}:{data:r,error:null}}function K(e,t){let r=[];for(let t of e){let e=t.message;r.push(e)}return{message:`Invalid ${t} parameters`}}var Y={name:"HMAC",hash:"SHA-256"},F=async e=>{let t="string"==typeof e?new TextEncoder().encode(e):e;return await C().importKey("raw",t,Y,!1,["sign","verify"])},q=async(e,t,r)=>{try{let i=atob(e),n=new Uint8Array(i.length);for(let e=0,t=i.length;e<t;e++)n[e]=i.charCodeAt(e);return await C().verify(Y,r,n,new TextEncoder().encode(t))}catch(e){return!1}},V=async(e,t)=>{let r=await F(t);return btoa(String.fromCharCode(...new Uint8Array(await C().sign(Y.name,r,new TextEncoder().encode(e)))))},G=async(e,t)=>{let r=await V(e,t);return encodeURIComponent(e=`${e}.${r}`)},H=(e,t)=>{let r=e;if(t)if("secure"===t)r="__Secure-"+e;else{if("host"!==t)return;r="__Host-"+e}return r},Z=(e,t,r={})=>{let i;if(i=r?.prefix==="secure"?`__Secure-${e}=${t}`:r?.prefix==="host"?`__Host-${e}=${t}`:`${e}=${t}`,e.startsWith("__Secure-")&&!r.secure&&(r.secure=!0),e.startsWith("__Host-")&&(r.secure||(r.secure=!0),"/"!==r.path&&(r.path="/"),r.domain&&(r.domain=void 0)),r&&"number"==typeof r.maxAge&&r.maxAge>=0){if(r.maxAge>3456e4)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");i+=`; Max-Age=${Math.floor(r.maxAge)}`}if(r.domain&&"host"!==r.prefix&&(i+=`; Domain=${r.domain}`),r.path&&(i+=`; Path=${r.path}`),r.expires){if(r.expires.getTime()-Date.now()>3456e7)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");i+=`; Expires=${r.expires.toUTCString()}`}return r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite&&(i+=`; SameSite=${r.sameSite.charAt(0).toUpperCase()+r.sameSite.slice(1)}`),r.partitioned&&(r.secure||(r.secure=!0),i+="; Partitioned"),i},W=async(e,t,r,i)=>Z(e,t=await G(t,r),i),Q=async(e,{options:t,path:r})=>{let i=new Headers,{data:n,error:s}=await z(t,e);if(s)throw new $(400,{message:s.message,code:"VALIDATION_ERROR"});let a="headers"in e?e.headers instanceof Headers?e.headers:new Headers(e.headers):"request"in e&&e.request instanceof Request?e.request.headers:null,o=a?.get("cookie"),u=o?function(e){if("string"!=typeof e)throw TypeError("argument str must be a string");let t=new Map,r=0;for(;r<e.length;){let i=e.indexOf("=",r);if(-1===i)break;let n=e.indexOf(";",r);if(-1===n)n=e.length;else if(n<i){r=e.lastIndexOf(";",i-1)+1;continue}let s=e.slice(r,i).trim();if(!t.has(s)){let r=e.slice(i+1,n).trim();34===r.codePointAt(0)&&(r=r.slice(1,-1)),t.set(s,function(e){try{return e.includes("%")?decodeURIComponent(e):e}catch{return e}}(r))}r=n+1}return t}(o):void 0,l={...e,body:n.body,query:n.query,path:e.path||r,context:"context"in e&&e.context?e.context:{},returned:void 0,headers:e?.headers,request:e?.request,params:"params"in e?e.params:void 0,method:e.method,setHeader:(e,t)=>{i.set(e,t)},getHeader:e=>a?a.get(e):null,getCookie:(e,t)=>{let r=H(e,t);return r&&u?.get(r)||null},getSignedCookie:async(e,t,r)=>{let i=H(e,r);if(!i)return null;let n=u?.get(i);if(!n)return null;let s=n.lastIndexOf(".");if(s<1)return null;let a=n.substring(0,s),o=n.substring(s+1);if(44!==o.length||!o.endsWith("="))return null;let l=await F(t);return!!await q(o,a,l)&&a},setCookie:(e,t,r)=>{let n=((e,t,r)=>Z(e,t=encodeURIComponent(t),r))(e,t,r);return i.append("set-cookie",n),n},setSignedCookie:async(e,t,r,n)=>{let s=await W(e,t,r,n);return i.append("set-cookie",s),s},redirect:e=>(i.set("location",e),new $("FOUND",void 0,i)),error:(e,t,r)=>new $(e,t,r),json:(t,r)=>e.asResponse?{body:r?.body||t,routerResponse:r,_flag:"json"}:t,responseHeaders:i};for(let e of t.use||[]){let t=await e({...l,returnHeaders:!0,asResponse:!1});t.response&&Object.assign(l.context,t.response),t.headers&&t.headers.forEach((e,t)=>{l.responseHeaders.set(t,e)})}return l};function J(e,t){let r=async r=>{let i="function"==typeof e?e:t,n=await Q(r,{options:"function"==typeof e?{}:e,path:"/"});if(!i)throw Error("handler must be defined");let s=await i(n),a=n.responseHeaders;return r.returnHeaders?{headers:a,response:s}:s};return r.options="function"==typeof e?{}:e,r}J.create=e=>function(t,r){if("function"==typeof t)return J({use:e?.use},t);if(!r)throw Error("Middleware handler is required");return J({...t,method:"*",use:[...e?.use||[],...t.use||[]]},r)};var X=(e,t,r)=>{let i=async(...i)=>{let n=i[0]||{},s=await Q(n,{options:t,path:e}),a=await r(s).catch(async e=>{if(j(e)){let r=t.onAPIError;if(r&&await r(e),n.asResponse)return e}throw e}),o=s.responseHeaders;return n.asResponse?B(a,{headers:o}):n.returnHeaders?{headers:o,response:a}:a};return i.options=t,i.path=e,i};function ee(e,t,r){function i(r,i){var n;for(let s in Object.defineProperty(r,"_zod",{value:r._zod??{},enumerable:!1}),(n=r._zod).traits??(n.traits=new Set),r._zod.traits.add(e),t(r,i),a.prototype)s in r||Object.defineProperty(r,s,{value:a.prototype[s].bind(r)});r._zod.constr=a,r._zod.def=i}let n=r?.Parent??Object;class s extends n{}function a(e){var t;let n=r?.Parent?new s:this;for(let r of(i(n,e),(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred))r();return n}return Object.defineProperty(s,"name",{value:e}),Object.defineProperty(a,"init",{value:i}),Object.defineProperty(a,Symbol.hasInstance,{value:t=>!!r?.Parent&&t instanceof r.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}X.create=e=>(t,r,i)=>X(t,{...r,use:[...r?.use||[],...e?.use||[]]},i),Object.freeze({status:"aborted"}),Symbol("zod_brand");var et=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},er={};function ei(e){return e&&Object.assign(er,e),er}var en={};function es(e){return e}function ea(e){return e}function eo(e){}function eu(e){throw Error()}function el(e){}function ed(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function ec(e,t="|"){return e.map(e=>ek(e)).join(t)}function ep(e,t){return"bigint"==typeof t?t.toString():t}function ef(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function eh(e){return null==e}function em(e){let t=+!!e.startsWith("^"),r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function ey(e,t){let r=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,n=r>i?r:i;return Number.parseInt(e.toFixed(n).replace(".",""))%Number.parseInt(t.toFixed(n).replace(".",""))/10**n}function eg(e,t,r){Object.defineProperty(e,t,{get(){{let i=r();return e[t]=i,i}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function e_(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function eb(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function ev(e){let t=Object.keys(e);return Promise.all(t.map(t=>e[t])).then(e=>{let r={};for(let i=0;i<t.length;i++)r[t[i]]=e[i];return r})}function eE(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let i=0;i<e;i++)r+=t[Math.floor(Math.random()*t.length)];return r}function eS(e){return JSON.stringify(e)}((e,t)=>{for(var r in t)k(e,r,{get:t[r],enumerable:!0})})(en,{BIGINT_FORMAT_RANGES:()=>eU,Class:()=>eX,NUMBER_FORMAT_RANGES:()=>e$,aborted:()=>eq,allowsEval:()=>ew,assert:()=>el,assertEqual:()=>es,assertIs:()=>eo,assertNever:()=>eu,assertNotEqual:()=>ea,assignProp:()=>e_,cached:()=>ef,captureStackTrace:()=>eA,cleanEnum:()=>eJ,cleanRegex:()=>em,clone:()=>eD,createTransparentProxy:()=>eL,defineLazy:()=>eg,esc:()=>eS,escapeRegex:()=>eP,extend:()=>ez,finalizeIssue:()=>eH,floatSafeRemainder:()=>ey,getElementAtPath:()=>eb,getEnumValues:()=>ed,getLengthableOrigin:()=>eW,getParsedType:()=>eI,getSizableOrigin:()=>eZ,isObject:()=>eT,isPlainObject:()=>eO,issue:()=>eQ,joinValues:()=>ec,jsonStringifyReplacer:()=>ep,merge:()=>eK,normalizeParams:()=>ex,nullish:()=>eh,numKeys:()=>eR,omit:()=>eB,optionalKeys:()=>eM,partial:()=>eY,pick:()=>ej,prefixIssues:()=>eV,primitiveTypes:()=>eN,promiseAllObject:()=>ev,propertyKeyTypes:()=>eC,randomString:()=>eE,required:()=>eF,stringifyPrimitive:()=>ek,unwrapMessage:()=>eG});var eA=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function eT(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}var ew=ef(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function eO(e){if(!1===eT(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!1!==eT(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function eR(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}var eI=e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return"promise";if("undefined"!=typeof Map&&e instanceof Map)return"map";if("undefined"!=typeof Set&&e instanceof Set)return"set";if("undefined"!=typeof Date&&e instanceof Date)return"date";if("undefined"!=typeof File&&e instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${t}`)}},eC=new Set(["string","number","symbol"]),eN=new Set(["string","number","bigint","boolean","symbol","undefined"]);function eP(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function eD(e,t,r){let i=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(i._zod.parent=e),i}function ex(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}function eL(e){let t;return new Proxy({},{get:(r,i,n)=>(t??(t=e()),Reflect.get(t,i,n)),set:(r,i,n,s)=>(t??(t=e()),Reflect.set(t,i,n,s)),has:(r,i)=>(t??(t=e()),Reflect.has(t,i)),deleteProperty:(r,i)=>(t??(t=e()),Reflect.deleteProperty(t,i)),ownKeys:r=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(r,i)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,i)),defineProperty:(r,i,n)=>(t??(t=e()),Reflect.defineProperty(t,i,n))})}function ek(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function eM(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}var e$={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},eU={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function ej(e,t){let r={},i=e._zod.def;for(let e in t){if(!(e in i.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&(r[e]=i.shape[e])}return eD(e,{...e._zod.def,shape:r,checks:[]})}function eB(e,t){let r={...e._zod.def.shape},i=e._zod.def;for(let e in t){if(!(e in i.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return eD(e,{...e._zod.def,shape:r,checks:[]})}function ez(e,t){if(!eO(t))throw Error("Invalid input to extend: expected a plain object");let r={...e._zod.def,get shape(){let r={...e._zod.def.shape,...t};return e_(this,"shape",r),r},checks:[]};return eD(e,r)}function eK(e,t){return eD(e,{...e._zod.def,get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return e_(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function eY(e,t,r){let i=t._zod.def.shape,n={...i};if(r)for(let t in r){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);r[t]&&(n[t]=e?new e({type:"optional",innerType:i[t]}):i[t])}else for(let t in i)n[t]=e?new e({type:"optional",innerType:i[t]}):i[t];return eD(t,{...t._zod.def,shape:n,checks:[]})}function eF(e,t,r){let i=t._zod.def.shape,n={...i};if(r)for(let t in r){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);r[t]&&(n[t]=new e({type:"nonoptional",innerType:i[t]}))}else for(let t in i)n[t]=new e({type:"nonoptional",innerType:i[t]});return eD(t,{...t._zod.def,shape:n,checks:[]})}function eq(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function eV(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function eG(e){return"string"==typeof e?e:e?.message}function eH(e,t,r){let i={...e,path:e.path??[]};return e.message||(i.message=eG(e.inst?._zod.def?.error?.(e))??eG(t?.error?.(e))??eG(r.customError?.(e))??eG(r.localeError?.(e))??"Invalid input"),delete i.inst,delete i.continue,t?.reportInput||delete i.input,i}function eZ(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function eW(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function eQ(...e){let[t,r,i]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:i}:{...t}}function eJ(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}var eX=class{constructor(...e){}},e0=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,ep,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},e1=ee("$ZodError",e0),e4=ee("$ZodError",e0,{Parent:Error}),e2=e=>(t,r,i)=>{let n=i?{...i,async:!1}:{async:!1},s=t._zod.run({value:r,issues:[]},n);if(s instanceof Promise)throw new et;return s.issues.length?{success:!1,error:new(e??e1)(s.issues.map(e=>eH(e,n,ei())))}:{success:!0,data:s.value}},e6=e2(e4),e3=e=>async(t,r,i)=>{let n=i?Object.assign(i,{async:!0}):{async:!0},s=t._zod.run({value:r,issues:[]},n);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(e=>eH(e,n,ei())))}:{success:!0,data:s.value}},e5=e3(e4),e8=ee("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),e9=ee("$ZodCheckMaxLength",(e,t)=>{var r;e8.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!eh(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let i=r.value;if(i.length<=t.maximum)return;let n=eW(i);r.issues.push({origin:n,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),e7=ee("$ZodCheckMinLength",(e,t)=>{var r;e8.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!eh(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let i=r.value;if(i.length>=t.minimum)return;let n=eW(i);r.issues.push({origin:n,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),te=ee("$ZodCheckLengthEquals",(e,t)=>{var r;e8.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!eh(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let i=r.value,n=i.length;if(n===t.length)return;let s=eW(i),a=n>t.length;r.issues.push({origin:s,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),tt=ee("$ZodCheckOverwrite",(e,t)=>{e8.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}}),tr=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}},ti={major:4,minor:0,patch:0},tn=ee("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=ti;let i=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&i.unshift(e),i))for(let r of t._zod.onattach)r(e);if(0===i.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let i,n=eq(e);for(let s of t){if(s._zod.def.when){if(!s._zod.def.when(e))continue}else if(n)continue;let t=e.issues.length,a=s._zod.check(e);if(a instanceof Promise&&r?.async===!1)throw new et;if(i||a instanceof Promise)i=(i??Promise.resolve()).then(async()=>{await a,e.issues.length!==t&&(n||(n=eq(e,t)))});else{if(e.issues.length===t)continue;n||(n=eq(e,t))}}return i?i.then(()=>e):e};e._zod.run=(r,n)=>{let s=e._zod.parse(r,n);if(s instanceof Promise){if(!1===n.async)throw new et;return s.then(e=>t(e,i,n))}return t(s,i,n)}}e["~standard"]={validate:t=>{try{let r=e6(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return e5(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),ts=ee("$ZodUnknown",(e,t)=>{tn.init(e,t),e._zod.parse=e=>e}),ta=ee("$ZodNever",(e,t)=>{tn.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function to(e,t,r){e.issues.length&&t.issues.push(...eV(r,e.issues)),t.value[r]=e.value}var tu=ee("$ZodArray",(e,t)=>{tn.init(e,t),e._zod.parse=(r,i)=>{let n=r.value;if(!Array.isArray(n))return r.issues.push({expected:"array",code:"invalid_type",input:n,inst:e}),r;r.value=Array(n.length);let s=[];for(let e=0;e<n.length;e++){let a=n[e],o=t.element._zod.run({value:a,issues:[]},i);o instanceof Promise?s.push(o.then(t=>to(t,r,e))):to(o,r,e)}return s.length?Promise.all(s).then(()=>r):r}});function tl(e,t,r){e.issues.length&&t.issues.push(...eV(r,e.issues)),t.value[r]=e.value}function td(e,t,r,i){e.issues.length?void 0===i[r]?r in i?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...eV(r,e.issues)):void 0===e.value?r in i&&(t.value[r]=void 0):t.value[r]=e.value}var tc=ee("$ZodObject",(e,t)=>{let r,i;tn.init(e,t);let n=ef(()=>{let e=Object.keys(t.shape);for(let r of e)if(!(t.shape[r]instanceof tn))throw Error(`Invalid element at key "${r}": expected a Zod schema`);let r=eM(t.shape);return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}});eg(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let i=e[t]._zod;if(i.values)for(let e of(r[t]??(r[t]=new Set),i.values))r[t].add(e)}return r});let s=!er.jitless,a=s&&ew.value,o=t.catchall;e._zod.parse=(u,l)=>{i??(i=n.value);let d=u.value;if(!eT(d))return u.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),u;let c=[];if(s&&a&&l?.async===!1&&!0!==l.jitless)r||(r=(e=>{let t=new tr(["shape","payload","ctx"]),r=n.value,i=e=>{let t=eS(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let s=Object.create(null),a=0;for(let e of r.keys)s[e]=`key_${a++}`;for(let e of(t.write("const newResult = {}"),r.keys))if(r.optionalKeys.has(e)){let r=s[e];t.write(`const ${r} = ${i(e)};`);let n=eS(e);t.write(`
        if (${r}.issues.length) {
          if (input[${n}] === undefined) {
            if (${n} in input) {
              newResult[${n}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${r}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${n}, ...iss.path] : [${n}],
              }))
            );
          }
        } else if (${r}.value === undefined) {
          if (${n} in input) newResult[${n}] = undefined;
        } else {
          newResult[${n}] = ${r}.value;
        }
        `)}else{let r=s[e];t.write(`const ${r} = ${i(e)};`),t.write(`
          if (${r}.issues.length) payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${eS(e)}, ...iss.path] : [${eS(e)}]
          })));`),t.write(`newResult[${eS(e)}] = ${r}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");let o=t.compile();return(t,r)=>o(e,t,r)})(t.shape)),u=r(u,l);else{u.value={};let e=i.shape;for(let t of i.keys){let r=e[t],i=r._zod.run({value:d[t],issues:[]},l),n="optional"===r._zod.optin&&"optional"===r._zod.optout;i instanceof Promise?c.push(i.then(e=>n?td(e,u,t,d):tl(e,u,t))):n?td(i,u,t,d):tl(i,u,t)}}if(!o)return c.length?Promise.all(c).then(()=>u):u;let p=[],f=i.keySet,h=o._zod,m=h.def.type;for(let e of Object.keys(d)){if(f.has(e))continue;if("never"===m){p.push(e);continue}let t=h.run({value:d[e],issues:[]},l);t instanceof Promise?c.push(t.then(t=>tl(t,u,e))):tl(t,u,e)}return(p.length&&u.issues.push({code:"unrecognized_keys",keys:p,input:d,inst:e}),c.length)?Promise.all(c).then(()=>u):u}});function tp(e,t,r,i){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>eH(e,i,ei())))}),t}var tf=ee("$ZodUnion",(e,t)=>{tn.init(e,t),eg(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),eg(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),eg(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),eg(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>em(e.source)).join("|")})$`)}}),e._zod.parse=(r,i)=>{let n=!1,s=[];for(let e of t.options){let t=e._zod.run({value:r.value,issues:[]},i);if(t instanceof Promise)s.push(t),n=!0;else{if(0===t.issues.length)return t;s.push(t)}}return n?Promise.all(s).then(t=>tp(t,r,e,i)):tp(s,r,e,i)}}),th=ee("$ZodIntersection",(e,t)=>{tn.init(e,t),e._zod.parse=(e,r)=>{let i=e.value,n=t.left._zod.run({value:i,issues:[]},r),s=t.right._zod.run({value:i,issues:[]},r);return n instanceof Promise||s instanceof Promise?Promise.all([n,s]).then(([t,r])=>tm(e,t,r)):tm(e,n,s)}});function tm(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),eq(e))return e;let i=function e(t,r){if(t===r||t instanceof Date&&r instanceof Date&&+t==+r)return{valid:!0,data:t};if(eO(t)&&eO(r)){let i=Object.keys(r),n=Object.keys(t).filter(e=>-1!==i.indexOf(e)),s={...t,...r};for(let i of n){let n=e(t[i],r[i]);if(!n.valid)return{valid:!1,mergeErrorPath:[i,...n.mergeErrorPath]};s[i]=n.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return{valid:!1,mergeErrorPath:[]};let i=[];for(let n=0;n<t.length;n++){let s=e(t[n],r[n]);if(!s.valid)return{valid:!1,mergeErrorPath:[n,...s.mergeErrorPath]};i.push(s.data)}return{valid:!0,data:i}}return{valid:!1,mergeErrorPath:[]}}(t.value,r.value);if(!i.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}var ty=ee("$ZodEnum",(e,t)=>{tn.init(e,t);let r=ed(t.entries);e._zod.values=new Set(r),e._zod.pattern=RegExp(`^(${r.filter(e=>eC.has(typeof e)).map(e=>"string"==typeof e?eP(e):e.toString()).join("|")})$`),e._zod.parse=(t,i)=>{let n=t.value;return e._zod.values.has(n)||t.issues.push({code:"invalid_value",values:r,input:n,inst:e}),t}}),tg=ee("$ZodTransform",(e,t)=>{tn.init(e,t),e._zod.parse=(e,r)=>{let i=t.transform(e.value,e);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(t=>(e.value=t,e));if(i instanceof Promise)throw new et;return e.value=i,e}}),t_=ee("$ZodOptional",(e,t)=>{tn.init(e,t),e._zod.optin="optional",e._zod.optout="optional",eg(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),eg(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${em(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>"optional"===t.innerType._zod.optin?t.innerType._zod.run(e,r):void 0===e.value?e:t.innerType._zod.run(e,r)}),tb=ee("$ZodNullable",(e,t)=>{tn.init(e,t),eg(e._zod,"optin",()=>t.innerType._zod.optin),eg(e._zod,"optout",()=>t.innerType._zod.optout),eg(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${em(e.source)}|null)$`):void 0}),eg(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),tv=ee("$ZodDefault",(e,t)=>{tn.init(e,t),e._zod.optin="optional",eg(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if(void 0===e.value)return e.value=t.defaultValue,e;let i=t.innerType._zod.run(e,r);return i instanceof Promise?i.then(e=>tE(e,t)):tE(i,t)}});function tE(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}var tS=ee("$ZodPrefault",(e,t)=>{tn.init(e,t),e._zod.optin="optional",eg(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),tA=ee("$ZodNonOptional",(e,t)=>{tn.init(e,t),eg(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,i)=>{let n=t.innerType._zod.run(r,i);return n instanceof Promise?n.then(t=>tT(t,e)):tT(n,e)}});function tT(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}var tw=ee("$ZodCatch",(e,t)=>{tn.init(e,t),e._zod.optin="optional",eg(e._zod,"optout",()=>t.innerType._zod.optout),eg(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{let i=t.innerType._zod.run(e,r);return i instanceof Promise?i.then(i=>(e.value=i.value,i.issues.length&&(e.value=t.catchValue({...e,error:{issues:i.issues.map(e=>eH(e,r,ei()))},input:e.value}),e.issues=[]),e)):(e.value=i.value,i.issues.length&&(e.value=t.catchValue({...e,error:{issues:i.issues.map(e=>eH(e,r,ei()))},input:e.value}),e.issues=[]),e)}}),tO=ee("$ZodPipe",(e,t)=>{tn.init(e,t),eg(e._zod,"values",()=>t.in._zod.values),eg(e._zod,"optin",()=>t.in._zod.optin),eg(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(e,r)=>{let i=t.in._zod.run(e,r);return i instanceof Promise?i.then(e=>tR(e,t,r)):tR(i,t,r)}});function tR(e,t,r){return eq(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}var tI=ee("$ZodReadonly",(e,t)=>{tn.init(e,t),eg(e._zod,"propValues",()=>t.innerType._zod.propValues),eg(e._zod,"values",()=>t.innerType._zod.values),eg(e._zod,"optin",()=>t.innerType._zod.optin),eg(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,r)=>{let i=t.innerType._zod.run(e,r);return i instanceof Promise?i.then(tC):tC(i)}});function tC(e){return e.value=Object.freeze(e.value),e}var tN=ee("$ZodCustom",(e,t)=>{e8.init(e,t),tn.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let i=r.value,n=t.fn(i);if(n instanceof Promise)return n.then(t=>tP(t,r,i,e));tP(n,r,i,e)}});function tP(e,t,r,i){if(!e){let e={code:"custom",input:r,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(e.params=i._zod.def.params),t.issues.push(eQ(e))}}Symbol("ZodOutput"),Symbol("ZodInput");var tD=new class{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){let r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}};function tx(e,t){return new e7({check:"min_length",...ex(t),minimum:e})}var tL=(e,t)=>{e1.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>(function(e,t){let r=t||function(e){return e.message},i={_errors:[]},n=e=>{for(let t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>n({issues:e}));else if("invalid_key"===t.code)n({issues:t.issues});else if("invalid_element"===t.code)n({issues:t.issues});else if(0===t.path.length)i._errors.push(r(t));else{let e=i,n=0;for(;n<t.path.length;){let i=t.path[n];n===t.path.length-1?(e[i]=e[i]||{_errors:[]},e[i]._errors.push(r(t))):e[i]=e[i]||{_errors:[]},e=e[i],n++}}};return n(e),i})(e,t)},flatten:{value:t=>(function(e,t=e=>e.message){let r={},i=[];for(let n of e.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(t(n))):i.push(t(n));return{formErrors:i,fieldErrors:r}})(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get:()=>0===e.issues.length}})};ee("ZodError",tL);var tk=ee("ZodError",tL,{Parent:Error}),tM=(e,t,r,i)=>{let n=r?Object.assign(r,{async:!1}):{async:!1},s=e._zod.run({value:t,issues:[]},n);if(s instanceof Promise)throw new et;if(s.issues.length){let e=new(i?.Err??tk)(s.issues.map(e=>eH(e,n,ei())));throw eA(e,i?.callee),e}return s.value},t$=async(e,t,r,i)=>{let n=r?Object.assign(r,{async:!0}):{async:!0},s=e._zod.run({value:t,issues:[]},n);if(s instanceof Promise&&(s=await s),s.issues.length){let e=new(i?.Err??tk)(s.issues.map(e=>eH(e,n,ei())));throw eA(e,i?.callee),e}return s.value},tU=e2(tk),tj=e3(tk),tB=ee("ZodType",(e,t)=>(tn.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,r)=>eD(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>tM(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>tU(e,t,r),e.parseAsync=async(t,r)=>t$(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>tj(e,t,r),e.spa=e.safeParseAsync,e.refine=(t,r)=>e.check(function(e,t={}){return new t8({type:"custom",check:"custom",fn:e,...ex(t)})}(t,r)),e.superRefine=t=>e.check(function(e){let t=function(e){let t=new e8({check:"custom"});return t._zod.check=e,t}(r=>(r.addIssue=e=>{"string"==typeof e?r.issues.push(en.issue(e,r.value,t._zod.def)):(e.fatal&&(e.continue=!1),e.code??(e.code="custom"),e.input??(e.input=r.value),e.inst??(e.inst=t),e.continue??(e.continue=!t._zod.def.abort),r.issues.push(en.issue(e)))},e(r.value,r)));return t}(t)),e.overwrite=t=>e.check(new tt({check:"overwrite",tx:t})),e.optional=()=>tQ(e),e.nullable=()=>tX(e),e.nullish=()=>tQ(tX(e)),e.nonoptional=t=>{var r,i;return r=e,i=t,new t4({type:"nonoptional",innerType:r,...en.normalizeParams(i)})},e.array=()=>(function(e,t){return new tF({type:"array",element:e,...ex(void 0)})})(e),e.or=t=>new tV({type:"union",options:[e,t],...en.normalizeParams(void 0)}),e.and=t=>{var r;return r=e,new tG({type:"intersection",left:r,right:t})},e.transform=t=>t3(e,new tZ({type:"transform",transform:t})),e.default=t=>(function(e,t){return new t0({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():t}})})(e,t),e.prefault=t=>(function(e,t){return new t1({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():t}})})(e,t),e.catch=t=>(function(e,t){return new t2({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})})(e,t),e.pipe=t=>t3(e,t),e.readonly=()=>new t5({type:"readonly",innerType:e}),e.describe=t=>{let r=e.clone();return tD.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>tD.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return tD.get(e);let r=e.clone();return tD.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),tz=ee("ZodUnknown",(e,t)=>{ts.init(e,t),tB.init(e,t)});function tK(){return new tz({type:"unknown"})}var tY=ee("ZodNever",(e,t)=>{ta.init(e,t),tB.init(e,t)}),tF=ee("ZodArray",(e,t)=>{tu.init(e,t),tB.init(e,t),e.element=t.element,e.min=(t,r)=>e.check(tx(t,r)),e.nonempty=t=>e.check(tx(1,t)),e.max=(t,r)=>e.check(new e9({check:"max_length",...ex(r),maximum:t})),e.length=(t,r)=>e.check(new te({check:"length_equals",...ex(r),length:t})),e.unwrap=()=>e.element}),tq=ee("ZodObject",(e,t)=>{tc.init(e,t),tB.init(e,t),en.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>(function(e,t){return new tH({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...en.normalizeParams(void 0)})})(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:tK()}),e.loose=()=>e.clone({...e._zod.def,catchall:tK()}),e.strict=()=>e.clone({...e._zod.def,catchall:new tY({type:"never",...ex(void 0)})}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>en.extend(e,t),e.merge=t=>en.merge(e,t),e.pick=t=>en.pick(e,t),e.omit=t=>en.omit(e,t),e.partial=(...t)=>en.partial(tW,e,t[0]),e.required=(...t)=>en.required(t4,e,t[0])}),tV=ee("ZodUnion",(e,t)=>{tf.init(e,t),tB.init(e,t),e.options=t.options}),tG=ee("ZodIntersection",(e,t)=>{th.init(e,t),tB.init(e,t)}),tH=ee("ZodEnum",(e,t)=>{ty.init(e,t),tB.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,i)=>{let n={};for(let i of e)if(r.has(i))n[i]=t.entries[i];else throw Error(`Key ${i} not found in enum`);return new tH({...t,checks:[],...en.normalizeParams(i),entries:n})},e.exclude=(e,i)=>{let n={...t.entries};for(let t of e)if(r.has(t))delete n[t];else throw Error(`Key ${t} not found in enum`);return new tH({...t,checks:[],...en.normalizeParams(i),entries:n})}}),tZ=ee("ZodTransform",(e,t)=>{tg.init(e,t),tB.init(e,t),e._zod.parse=(r,i)=>{r.addIssue=i=>{"string"==typeof i?r.issues.push(en.issue(i,r.value,t)):(i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=e),i.continue??(i.continue=!0),r.issues.push(en.issue(i)))};let n=t.transform(r.value,r);return n instanceof Promise?n.then(e=>(r.value=e,r)):(r.value=n,r)}}),tW=ee("ZodOptional",(e,t)=>{t_.init(e,t),tB.init(e,t),e.unwrap=()=>e._zod.def.innerType});function tQ(e){return new tW({type:"optional",innerType:e})}var tJ=ee("ZodNullable",(e,t)=>{tb.init(e,t),tB.init(e,t),e.unwrap=()=>e._zod.def.innerType});function tX(e){return new tJ({type:"nullable",innerType:e})}var t0=ee("ZodDefault",(e,t)=>{tv.init(e,t),tB.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),t1=ee("ZodPrefault",(e,t)=>{tS.init(e,t),tB.init(e,t),e.unwrap=()=>e._zod.def.innerType}),t4=ee("ZodNonOptional",(e,t)=>{tA.init(e,t),tB.init(e,t),e.unwrap=()=>e._zod.def.innerType}),t2=ee("ZodCatch",(e,t)=>{tw.init(e,t),tB.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),t6=ee("ZodPipe",(e,t)=>{tO.init(e,t),tB.init(e,t),e.in=t.in,e.out=t.out});function t3(e,t){return new t6({type:"pipe",in:e,out:t})}var t5=ee("ZodReadonly",(e,t)=>{tI.init(e,t),tB.init(e,t)}),t8=ee("ZodCustom",(e,t)=>{tN.init(e,t),tB.init(e,t)}),t9={};function t7(e){switch(e.constructor.name){case"ZodString":default:return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array"}}function re(e){let t=[];return e.metadata?.openapi?.parameters?t.push(...e.metadata.openapi.parameters):e.query instanceof tq&&Object.entries(e.query.shape).forEach(([e,r])=>{r instanceof tq&&t.push({name:e,in:"query",schema:{type:t7(r),..."minLength"in r&&r.minLength?{minLength:r.minLength}:{},description:r.description}})}),t}function rt(e){return{400:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},401:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},403:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},404:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},429:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},500:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...e}}async function rr(e,t){return Object.entries(e).forEach(([e,t])=>{let r=t.options;if(!r.metadata?.SERVER_ONLY&&("GET"===r.method&&(t9[t.path]={get:{tags:["Default",...r.metadata?.openapi?.tags||[]],description:r.metadata?.openapi?.description,operationId:r.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:re(r),responses:rt(r.metadata?.openapi?.responses)}}),"POST"===r.method)){let e=function(e){if(e.metadata?.openapi?.requestBody)return e.metadata.openapi.requestBody;if(e.body&&(e.body instanceof tq||e.body instanceof tW)){let t=e.body.shape;if(!t)return;let r={},i=[];return Object.entries(t).forEach(([e,t])=>{t instanceof tq&&(r[e]={type:t7(t),description:t.description},t instanceof tW||i.push(e))}),{required:!(e.body instanceof tW)&&!!e.body,content:{"application/json":{schema:{type:"object",properties:r,required:i}}}}}}(r);t9[t.path]={post:{tags:["Default",...r.metadata?.openapi?.tags||[]],description:r.metadata?.openapi?.description,operationId:r.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:re(r),...e?{requestBody:e}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:rt(r.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:{schemas:{}},security:[{apiKeyCookie:[]}],servers:[{url:t?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:t9}}var ri=(e,t)=>{if(!t?.openapi?.disabled){let r={path:"/api/reference",...t?.openapi};e.openapi=X(r.path,{method:"GET"},async t=>new Response(((e,t)=>`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify(e)}
    </script>
	 <script>
      var configuration = {
	  	favicon: ${t?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(t.logo)}`:void 0} ,
	   	theme: ${t?.theme||"saturn"},
        metaData: {
			title: ${t?.title||"Open API Reference"},
			description: ${t?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`)(await rr(e),r.scalar),{headers:{"Content-Type":"text/html"}}))}let r=P(),i=P();for(let t of Object.values(e))if(!(!t.options||t.options?.metadata?.SERVER_ONLY))for(let e of Array.isArray(t.options?.method)?t.options.method:[t.options?.method])L(r,e,t.path,t);if(t?.routerMiddleware?.length)for(let{path:e,middleware:r}of t.routerMiddleware)L(i,"*",e,r);let n=async e=>{let n=new URL(e.url),s=t?.basePath?n.pathname.split(t.basePath).reduce((e,r,i)=>(0!==i&&(i>1?e.push(`${t.basePath}${r}`):e.push(r)),e),[]).join(""):n.pathname;if(!s?.length)return new Response(null,{status:404,statusText:"Not Found"});let a=function(e,t="",r,i){"/"===r[r.length-1]&&(r=r.slice(0,-1));let n=e.static[r];if(n&&n.methods){let e=n.methods[t]||n.methods[""];if(void 0!==e)return e[0]}let s=D(r),a=function e(t,r,i,n,s){if(s===n.length){if(r.methods){let e=r.methods[i]||r.methods[""];if(e)return e}if(r.param&&r.param.methods){let e=r.param.methods[i]||r.param.methods[""];if(e){let t=e[0].paramsMap;if(t?.[t?.length-1]?.[2])return e}}if(r.wildcard&&r.wildcard.methods){let e=r.wildcard.methods[i]||r.wildcard.methods[""];if(e){let t=e[0].paramsMap;if(t?.[t?.length-1]?.[2])return e}}return}let a=n[s];if(r.static){let o=r.static[a];if(o){let r=e(t,o,i,n,s+1);if(r)return r}}if(r.param){let a=e(t,r.param,i,n,s+1);if(a)return a}if(r.wildcard&&r.wildcard.methods)return r.wildcard.methods[i]||r.wildcard.methods[""]}(e,e.root,t,s,0)?.[0];if(void 0!==a)return{data:a.data,params:a.paramsMap?x(s,a.paramsMap):void 0}}(r,e.method,s);if(!a?.data)return new Response(null,{status:404,statusText:"Not Found"});let o={};n.searchParams.forEach((e,t)=>{t in o?Array.isArray(o[t])?o[t].push(e):o[t]=[o[t],e]:o[t]=e});let u=a.data,l={path:s,method:e.method,headers:e.headers,params:a.params?JSON.parse(JSON.stringify(a.params)):{},request:e,body:u.options.disableBody?void 0:await U(u.options.cloneRequest?e.clone():e),query:o,_flag:"router",asResponse:!0,context:t?.routerContext};try{let e=function(e,t="",r,i){"/"===r[r.length-1]&&(r=r.slice(0,-1));let n=D(r);return(function e(t,r,i,n,s,a=[]){let o=n[s];if(r.wildcard&&r.wildcard.methods){let e=r.wildcard.methods[i]||r.wildcard.methods[""];e&&a.push(...e)}if(r.param&&(e(t,r.param,i,n,s+1,a),s===n.length&&r.param.methods)){let e=r.param.methods[i]||r.param.methods[""];e&&a.push(...e)}let u=r.static?.[o];if(u&&e(t,u,i,n,s+1,a),s===n.length&&r.methods){let e=r.methods[i]||r.methods[""];e&&a.push(...e)}return a})(e,e.root,t,n,0).map(e=>({data:e.data,params:e.paramsMap?x(n,e.paramsMap):void 0}))}(i,"*",s);if(e?.length)for(let{data:t,params:r}of e){let e=await t({...l,params:r,asResponse:!1});if(e instanceof Response)return e}return await u(l)}catch(e){if(t?.onError)try{let r=await t.onError(e);if(r instanceof Response)return B(r)}catch(e){if(j(e))return B(e);throw e}if(t?.throwError)throw e;if(j(e))return B(e);return console.error("# SERVER_ERROR: ",e),new Response(null,{status:500,statusText:"Internal Server Error"})}};return{handler:async e=>{let r=await t?.onRequest?.(e);if(r instanceof Response)return r;let i=r instanceof Request?r:e,s=await n(i),a=await t?.onResponse?.(s);return a instanceof Response?a:s},endpoints:e}};e.s(["hex",()=>rn],72381);let rn={encode:e=>{if("string"==typeof e&&(e=new TextEncoder().encode(e)),0===e.byteLength)return"";let t=new Uint8Array(e),r="";for(let e of t)r+=e.toString(16).padStart(2,"0");return r},decode:e=>{if(!e)return"";if("string"==typeof e){if(e.length%2!=0||!RegExp("^[0123456789abcdef]+$").test(e))throw Error("Invalid hexadecimal string");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=parseInt(e.slice(r,r+2),16);return new TextDecoder().decode(t)}return new TextDecoder().decode(e)}}},35972,23770,91488,36870,e=>{"use strict";e.s(["createHMAC",()=>n],35972);var t=e.i(72381),r=e.i(30501),i=e.i(96101);let n=(e="SHA-256",n="none")=>{let s={importKey:async(t,r)=>(0,i.getWebcryptoSubtle)().importKey("raw","string"==typeof t?new TextEncoder().encode(t):t,{name:"HMAC",hash:{name:e}},!1,[r]),sign:async(e,a)=>{"string"==typeof e&&(e=await s.importKey(e,"sign"));let o=await (0,i.getWebcryptoSubtle)().sign("HMAC",e,"string"==typeof a?new TextEncoder().encode(a):a);return"hex"===n?t.hex.encode(o):"base64"===n||"base64url"===n||"base64urlnopad"===n?r.base64Url.encode(o,{padding:"base64urlnopad"!==n}):o},verify:async(e,a,o)=>("string"==typeof e&&(e=await s.importKey(e,"verify")),"hex"===n&&(o=t.hex.decode(o)),("base64"===n||"base64url"===n||"base64urlnopad"===n)&&(o=await r.base64.decode(o)),(0,i.getWebcryptoSubtle)().verify("HMAC",e,"string"==typeof o?new TextEncoder().encode(o):o,"string"==typeof a?new TextEncoder().encode(a):a))};return s};e.s(["binary",()=>a],23770);let s=new Map,a={decode:(e,t="utf-8")=>(s.has(t)||s.set(t,new TextDecoder(t)),s.get(t).decode(e)),encode:new TextEncoder().encode};function o(e){let t=new Map;return e.split(", ").forEach(e=>{let[r,...i]=e.split(";").map(e=>e.trim()),[n,...s]=(r||"").split("="),a=s.join("=");if(!n||void 0===a)return;let o={value:a};i.forEach(e=>{let[t,...r]=e.split("="),i=r.join("="),n=t.trim().toLowerCase();switch(n){case"max-age":o["max-age"]=i?parseInt(i.trim(),10):void 0;break;case"expires":o.expires=i?new Date(i.trim()):void 0;break;case"domain":o.domain=i?i.trim():void 0;break;case"path":o.path=i?i.trim():void 0;break;case"secure":o.secure=!0;break;case"httponly":o.httponly=!0;break;case"samesite":o.samesite=i?i.trim().toLowerCase():void 0;break;default:o[n]=!i||i.trim()}}),t.set(n,o)}),t}e.s(["p",()=>o],91488),e.s(["createAuthEndpoint",()=>c,"createAuthMiddleware",()=>d],36870);var u=e.i(31428);let l=(0,u.createMiddleware)(async()=>({})),d=u.createMiddleware.create({use:[l,(0,u.createMiddleware)(async()=>({}))]}),c=u.createEndpoint.create({use:[l]})},20354,39127,49330,82318,62160,12407,99373,24788,e=>{"use strict";e.s(["s",()=>r],20354);var t=e.i(9662);function r(e){try{if("string"!=typeof e)return e;return JSON.parse(e,function(e,t){if("string"==typeof t&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(t)){let e=new Date(t);if(!isNaN(e.getTime()))return e}return t})}catch(e){return t.logger.error("Error parsing JSON",{error:e}),null}}function i(e){switch(e){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw Error(`Unsupported alphabet: ${e}`)}}function n(...e){let t=e.map(i).join("");if(0===t.length)throw Error("No valid characters provided for random string generation.");let r=t.length;return(e,...n)=>{let s;if(e<=0)throw Error("Length must be a positive integer.");let a=t,o=r;n.length>0&&(o=(a=n.map(i).join("")).length);let u=Math.floor(256/o)*o,l=new Uint8Array(2*e),d=l.length,c="",p=d;for(;c.length<e;)p>=d&&(crypto.getRandomValues(l),p=0),(s=l[p++])<u&&(c+=a[s%o]);return c}}e.s(["createRandomStringGenerator",()=>n],39127),e.s(["g",()=>s],49330);let s=e=>n("a-z","A-Z","0-9")(e||32);e.s(["createHash",()=>u],82318);var a=e.i(30501),o=e.i(96101);function u(e,t){return{digest:async r=>{let i=new TextEncoder,n="string"==typeof r?i.encode(r):r,s=await (0,o.getWebcryptoSubtle)().digest(e,n);return"hex"===t?Array.from(new Uint8Array(s)).map(e=>e.toString(16).padStart(2,"0")).join(""):"base64"===t||"base64url"===t||"base64urlnopad"===t?t.includes("url")?a.base64Url.encode(s,{padding:"base64urlnopad"!==t}):a.base64.encode(s):s}}}e.s(["g",()=>l],62160);let l=n("a-z","0-9","A-Z","-_");e.s([],12407),e.s(["g",()=>d],99373);let d=e=>{let t=(e.plugins??[]).reduce((e,t)=>{let r=t.schema;if(!r)return e;for(let[t,i]of Object.entries(r))e[t]={fields:{...e[t]?.fields,...i.fields},modelName:i.modelName||t};return e},{}),r=e.rateLimit?.storage==="database",i={rateLimit:{modelName:e.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",fieldName:e.rateLimit?.fields?.key||"key"},count:{type:"number",fieldName:e.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,fieldName:e.rateLimit?.fields?.lastRequest||"lastRequest"}}}},{user:n,session:s,account:a,...o}=t,u={session:{modelName:e.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:e.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:e.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:e.session?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:e.session?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},ipAddress:{type:"string",required:!1,fieldName:e.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:e.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:e.session?.fields?.userId||"userId",references:{model:e.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0},...s?.fields,...e.session?.additionalFields},order:2}};return{user:{modelName:e.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:e.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:e.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:!1,required:!0,fieldName:e.user?.fields?.emailVerified||"emailVerified",input:!1},image:{type:"string",required:!1,fieldName:e.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:e.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,onUpdate:()=>new Date,required:!0,fieldName:e.user?.fields?.updatedAt||"updatedAt"},...n?.fields,...e.user?.additionalFields},order:1},...!e.secondaryStorage||e.session?.storeSessionInDatabase?u:{},account:{modelName:e.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:e.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:e.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:e.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:e.account?.fields?.userId||"userId"},accessToken:{type:"string",required:!1,fieldName:e.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,fieldName:e.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,fieldName:e.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,fieldName:e.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,fieldName:e.account?.fields?.refreshTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:e.account?.fields?.scope||"scope"},password:{type:"string",required:!1,fieldName:e.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:e.account?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:e.account?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},...a?.fields,...e.account?.additionalFields},order:3},verification:{modelName:e.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:e.verification?.fields?.identifier||"identifier"},value:{type:"string",required:!0,fieldName:e.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:e.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:e.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,defaultValue:()=>new Date,onUpdate:()=>new Date,fieldName:e.verification?.fields?.updatedAt||"updatedAt"}},order:4},...o,...r?i:{}}};e.s(["c",()=>f],24788),e.i(31428),e.i(72381),e.i(12700);let c=[],p=-1,f=({adapter:e,config:i})=>n=>{let a=Math.random().toString(36).substring(2,15),o={...i,supportsBooleans:i.supportsBooleans??!0,supportsDates:i.supportsDates??!0,supportsJSON:i.supportsJSON??!1,adapterName:i.adapterName??i.adapterId,supportsNumericIds:i.supportsNumericIds??!0,transaction:i.transaction??!1,disableTransformInput:i.disableTransformInput??!1,disableTransformOutput:i.disableTransformOutput??!1};if(n.advanced?.database?.useNumberId===!0&&!1===o.supportsNumericIds)throw Error(`[${o.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);let u=d(n),l=({field:e,model:t})=>{if("id"===e||"_id"===e)return"id";let r=f(t),i=u[r]?.fields[e];if(!i){let t=Object.entries(u[r].fields).find(([t,r])=>r.fieldName===e);t&&(i=t[1],e=t[0])}if(!i)throw v(`Field ${e} not found in model ${r}`),v("Schema:",u),Error(`Field ${e} not found in model ${r}`);return e},f=e=>{if(o.usePlural&&"s"===e.charAt(e.length-1)){let t=e.slice(0,-1),r=u[t]?t:void 0;if(r||(r=Object.entries(u).find(([e,r])=>r.modelName===t)?.[0]),r)return r}let t=u[e]?e:void 0;if(t||(t=Object.entries(u).find(([t,r])=>r.modelName===e)?.[0]),!t)throw v(`Model "${e}" not found in schema`),v("Schema:",u),Error(`Model "${e}" not found in schema`);return t},_=e=>{let t=f(e),r=o&&o.usePlural;return u&&u[t]&&u[t].modelName!==e?r?`${u[t].modelName}s`:u[t].modelName:r?`${e}s`:e};function b({model:e,field:t}){let r=f(e),i=l({model:r,field:t});return u[r]?.fields[i]?.fieldName||i}let v=(...e)=>{if(!0===o.debugLogs||"object"==typeof o.debugLogs){if("object"==typeof o.debugLogs&&"isRunningAdapterTests"in o.debugLogs){o.debugLogs.isRunningAdapterTests&&(e.shift(),c.push({instance:a,args:e}));return}if("object"!=typeof o.debugLogs||!o.debugLogs.logCondition||o.debugLogs.logCondition?.())if("object"==typeof e[0]&&"method"in e[0]){let r=e.shift().method;if("object"==typeof o.debugLogs){if("create"===r&&!o.debugLogs.create)return;else if("update"===r&&!o.debugLogs.update)return;else if("updateMany"===r&&!o.debugLogs.updateMany)return;else if("findOne"===r&&!o.debugLogs.findOne)return;else if("findMany"===r&&!o.debugLogs.findMany)return;else if("delete"===r&&!o.debugLogs.delete)return;else if("deleteMany"===r&&!o.debugLogs.deleteMany)return;else if("count"===r&&!o.debugLogs.count)return}t.logger.info(`[${o.adapterName}]`,...e)}else t.logger.info(`[${o.adapterName}]`,...e)}},E=({customModelName:e,forceAllowId:r})=>{let i=!o.disableIdGeneration&&!n.advanced?.database?.useNumberId&&!r,a=f(e??"id");return{type:n.advanced?.database?.useNumberId?"number":"string",required:!!i,...i?{defaultValue(){if(o.disableIdGeneration)return;let e=n.advanced?.database?.useNumberId,r=n.advanced?.database?.generateId;if(n.advanced?.generateId!==void 0&&(t.logger.warn("Your Better Auth config includes advanced.generateId which is deprecated. Please use advanced.database.generateId instead. This will be removed in future releases."),r=n.advanced?.generateId),!1!==r&&!e)return r?r({model:a}):o.customIdGenerator?o.customIdGenerator({model:a}):s()}}:{}}},S=({model:e,field:t})=>{let r=f(e),i=l({field:t,model:r}),n=u[r].fields;return n.id=E({customModelName:r}),n[i]},A=async(e,t,r,i)=>{let s={},a=u[t].fields,l=o.mapKeysTransformInput??{};for(let d in o.disableIdGeneration||n.advanced?.database?.useNumberId||(a.id=E({customModelName:t,forceAllowId:i&&"id"in e})),a){let i=e[d],c=a[d],p=l[d]||a[d].fieldName||d;if(void 0===i&&(void 0===c.defaultValue&&!c.transform?.input&&!("update"===r&&c.onUpdate)||"update"===r&&!c.onUpdate))continue;let f=function(e,t,r){if("update"===r)return void 0===e&&void 0!==t.onUpdate?"function"==typeof t.onUpdate?t.onUpdate():t.onUpdate:e;return null==e&&void 0!==t.defaultValue?"function"==typeof t.defaultValue?t.defaultValue():t.defaultValue:e}(i,c,r);c.transform?.input&&(f=await c.transform.input(f)),c.references?.field==="id"&&n.advanced?.database?.useNumberId?f=Array.isArray(f)?f.map(e=>null!==e?Number(e):null):null!==f?Number(f):null:!1===o.supportsJSON&&"object"==typeof f&&"json"===c.type?f=JSON.stringify(f):!1===o.supportsDates&&f instanceof Date&&"date"===c.type?f=f.toISOString():!1===o.supportsBooleans&&"boolean"==typeof f&&(f=+!!f),o.customTransformInput&&(f=o.customTransformInput({data:f,action:r,field:p,fieldAttributes:c,model:t,schema:u,options:n})),void 0!==f&&(s[p]=f)}return s},T=async(e,t,i=[])=>{if(!e)return null;let s=o.mapKeysTransformOutput??{},a={},l=u[t].fields;for(let d in l[Object.entries(s).find(([e,t])=>"id"===t)?.[0]??"id"]={type:n.advanced?.database?.useNumberId?"number":"string"},l){if(i.length&&!i.includes(d))continue;let c=l[d];if(c){let l=c.fieldName||d,p=e[Object.entries(s).find(([e,t])=>t===l)?.[0]||l];c.transform?.output&&(p=await c.transform.output(p));let f=s[d]||d;"id"===l||c.references?.field==="id"?null!=p&&(p=String(p)):!1===o.supportsJSON&&"string"==typeof p&&"json"===c.type?p=r(p):!1===o.supportsDates&&"string"==typeof p&&"date"===c.type?p=new Date(p):!1===o.supportsBooleans&&"number"==typeof p&&"boolean"===c.type&&(p=1===p),o.customTransformOutput&&(p=o.customTransformOutput({data:p,field:f,fieldAttributes:c,select:i,model:t,schema:u,options:n})),a[f]=p}}return a},w=({model:e,where:t})=>{if(!t)return;let r=o.mapKeysTransformInput??{};return t.map(t=>{let{field:i,value:s,operator:a="eq",connector:o="AND"}=t;if("in"===a&&!Array.isArray(s))throw Error("Value must be an array");let u=f(e),d=l({field:i,model:e}),c=r[d]||b({field:d,model:u}),p=S({field:d,model:u});return("id"===d||p.references?.field==="id")&&n.advanced?.database?.useNumberId?Array.isArray(s)?{operator:a,connector:o,field:c,value:s.map(Number)}:{operator:a,connector:o,field:c,value:Number(s)}:{operator:a,connector:o,field:c,value:s}})},O=e({options:n,schema:u,debugLog:v,getFieldName:b,getModelName:_,getDefaultModelName:f,getDefaultFieldName:l,getFieldAttributes:S,transformInput:A,transformOutput:T,transformWhereClause:w}),R=null,I={transaction:async e=>{if(!R)if(o.transaction)t.logger.debug(`[${o.adapterName}] - Using provided transaction implementation.`),R=o.transaction;else"object"==typeof o.debugLogs&&"isRunningAdapterTests"in o.debugLogs&&o.debugLogs.isRunningAdapterTests||t.logger.warn(`[${o.adapterName}] - Transactions are not supported. Executing operations sequentially.`),R=e=>e(I);return R(e)},create:async({data:e,model:r,select:i,forceAllowId:n=!1})=>{let s=++p,a=_(r);if(r=f(r),"id"in e&&!n){t.logger.warn(`[${o.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \`forceAllowId\` parameter. The id will be ignored.`);let r=Error();console.log(r.stack?.split("\n").filter((e,t)=>1!==t).join("\n").replace("Error:","Create method with `id` being called at:")),e.id=void 0}v({method:"create"},`${h(s)} ${m(1,4)}`,`${y("create")} ${g("Unsafe Input")}:`,{model:a,data:e});let u=e;o.disableTransformInput||(u=await A(e,r,"create",n)),v({method:"create"},`${h(s)} ${m(2,4)}`,`${y("create")} ${g("Parsed Input")}:`,{model:a,data:u});let l=await O.create({data:u,model:a});v({method:"create"},`${h(s)} ${m(3,4)}`,`${y("create")} ${g("DB Result")}:`,{model:a,res:l});let d=l;return o.disableTransformOutput||(d=await T(l,r,i)),v({method:"create"},`${h(s)} ${m(4,4)}`,`${y("create")} ${g("Parsed Result")}:`,{model:a,data:d}),d},update:async({model:e,where:t,update:r})=>{let i=++p,n=_(e=f(e)),s=w({model:e,where:t});v({method:"update"},`${h(i)} ${m(1,4)}`,`${y("update")} ${g("Unsafe Input")}:`,{model:n,data:r});let a=r;o.disableTransformInput||(a=await A(r,e,"update")),v({method:"update"},`${h(i)} ${m(2,4)}`,`${y("update")} ${g("Parsed Input")}:`,{model:n,data:a});let u=await O.update({model:n,where:s,update:a});v({method:"update"},`${h(i)} ${m(3,4)}`,`${y("update")} ${g("DB Result")}:`,{model:n,data:u});let l=u;return o.disableTransformOutput||(l=await T(u,e)),v({method:"update"},`${h(i)} ${m(4,4)}`,`${y("update")} ${g("Parsed Result")}:`,{model:n,data:l}),l},updateMany:async({model:e,where:t,update:r})=>{let i=++p,n=_(e),s=w({model:e,where:t});e=f(e),v({method:"updateMany"},`${h(i)} ${m(1,4)}`,`${y("updateMany")} ${g("Unsafe Input")}:`,{model:n,data:r});let a=r;o.disableTransformInput||(a=await A(r,e,"update")),v({method:"updateMany"},`${h(i)} ${m(2,4)}`,`${y("updateMany")} ${g("Parsed Input")}:`,{model:n,data:a});let u=await O.updateMany({model:n,where:s,update:a});return v({method:"updateMany"},`${h(i)} ${m(3,4)}`,`${y("updateMany")} ${g("DB Result")}:`,{model:n,data:u}),v({method:"updateMany"},`${h(i)} ${m(4,4)}`,`${y("updateMany")} ${g("Parsed Result")}:`,{model:n,data:u}),u},findOne:async({model:e,where:t,select:r})=>{let i=++p,n=_(e),s=w({model:e,where:t});e=f(e),v({method:"findOne"},`${h(i)} ${m(1,3)}`,`${y("findOne")}:`,{model:n,where:s,select:r});let a=await O.findOne({model:n,where:s,select:r});v({method:"findOne"},`${h(i)} ${m(2,3)}`,`${y("findOne")} ${g("DB Result")}:`,{model:n,data:a});let u=a;return o.disableTransformOutput||(u=await T(a,e,r)),v({method:"findOne"},`${h(i)} ${m(3,3)}`,`${y("findOne")} ${g("Parsed Result")}:`,{model:n,data:u}),u},findMany:async({model:e,where:t,limit:r,sortBy:i,offset:s})=>{let a=++p,u=r??n.advanced?.database?.defaultFindManyLimit??100,l=_(e),d=w({model:e,where:t});e=f(e),v({method:"findMany"},`${h(a)} ${m(1,3)}`,`${y("findMany")}:`,{model:l,where:d,limit:u,sortBy:i,offset:s});let c=await O.findMany({model:l,where:d,limit:u,sortBy:i,offset:s});v({method:"findMany"},`${h(a)} ${m(2,3)}`,`${y("findMany")} ${g("DB Result")}:`,{model:l,data:c});let b=c;return o.disableTransformOutput||(b=await Promise.all(c.map(async t=>await T(t,e)))),v({method:"findMany"},`${h(a)} ${m(3,3)}`,`${y("findMany")} ${g("Parsed Result")}:`,{model:l,data:b}),b},delete:async({model:e,where:t})=>{let r=++p,i=_(e),n=w({model:e,where:t});e=f(e),v({method:"delete"},`${h(r)} ${m(1,2)}`,`${y("delete")}:`,{model:i,where:n}),await O.delete({model:i,where:n}),v({method:"delete"},`${h(r)} ${m(2,2)}`,`${y("delete")} ${g("DB Result")}:`,{model:i})},deleteMany:async({model:e,where:t})=>{let r=++p,i=_(e),n=w({model:e,where:t});e=f(e),v({method:"deleteMany"},`${h(r)} ${m(1,2)}`,`${y("deleteMany")} ${g("DeleteMany")}:`,{model:i,where:n});let s=await O.deleteMany({model:i,where:n});return v({method:"deleteMany"},`${h(r)} ${m(2,2)}`,`${y("deleteMany")} ${g("DB Result")}:`,{model:i,data:s}),s},count:async({model:e,where:t})=>{let r=++p,i=_(e),n=w({model:e,where:t});e=f(e),v({method:"count"},`${h(r)} ${m(1,2)}`,`${y("count")}:`,{model:i,where:n});let s=await O.count({model:i,where:n});return v({method:"count"},`${h(r)} ${m(2,2)}`,`${y("count")}:`,{model:i,data:s}),s},createSchema:O.createSchema?async(e,t)=>{let r=d(n);return n.secondaryStorage&&!n.session?.storeSessionInDatabase&&delete r.session,n.rateLimit&&"database"===n.rateLimit.storage&&(void 0===n.rateLimit.enabled||!0===n.rateLimit.enabled)&&(r.ratelimit={modelName:n.rateLimit.modelName??"ratelimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:n.rateLimit.fields?.key??"key"},count:{type:"number",required:!0,fieldName:n.rateLimit.fields?.count??"count"},lastRequest:{type:"number",required:!0,bigint:!0,defaultValue:()=>Date.now(),fieldName:n.rateLimit.fields?.lastRequest??"lastRequest"}}}),O.createSchema({file:t,tables:r})}:void 0,options:{adapterConfig:o,...O.options??{}},id:o.adapterId,...o.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){c=c.filter(e=>e.instance!==a)},printDebugLogs(){let e=`\u2500`.repeat(80),t=c.filter(e=>e.instance===a);0!==t.length&&console.log(...t.reverse().map(e=>(e.args[0]=`
${e.args[0]}`,[...e.args,"\n"])).reduce((e,t)=>[...t,...e],[`
${e}`]))}}}:{}};return I};function h(e){return 8>(0,t.getColorDepth)()?`#${e}`:`${t.TTY_COLORS.fg.magenta}#${e}${t.TTY_COLORS.reset}`}function m(e,r){return`${t.TTY_COLORS.bg.black}${t.TTY_COLORS.fg.yellow}[${e}/${r}]${t.TTY_COLORS.reset}`}function y(e){return`${t.TTY_COLORS.bright}${e}${t.TTY_COLORS.reset}`}function g(e){return`${t.TTY_COLORS.dim}(${e})${t.TTY_COLORS.reset}`}},74094,73088,36255,63129,89222,61453,80387,37430,29776,5650,8369,42551,22381,95483,16218,15465,23390,16694,61788,e=>{"use strict";let t,r,i,n,s;e.s(["createAuthorizationURL",()=>eO,"generateCodeChallenge",()=>ew,"getOAuth2Tokens",()=>eT,"refreshAccessToken",()=>eI,"validateAuthorizationCode",()=>eR],74094);var a,o=e.i(30501),u=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&h(e,r,t[r]);if(c)for(var r of c(t))f.call(t,r)&&h(e,r,t[r]);return e},y=(e,t)=>l(e,d(t)),g=class extends Error{constructor(e,t,r){super(t||e.toString(),{cause:r}),this.status=e,this.statusText=t,this.error=r}},_=async(e,t)=>{var r,i,n,s,a,o;let u=t||{},l={onRequest:[null==t?void 0:t.onRequest],onResponse:[null==t?void 0:t.onResponse],onSuccess:[null==t?void 0:t.onSuccess],onError:[null==t?void 0:t.onError],onRetry:[null==t?void 0:t.onRetry]};if(!t||!(null==t?void 0:t.plugins))return{url:e,options:u,hooks:l};for(let d of(null==t?void 0:t.plugins)||[]){if(d.init){let i=await (null==(r=d.init)?void 0:r.call(d,e.toString(),t));u=i.options||u,e=i.url}l.onRequest.push(null==(i=d.hooks)?void 0:i.onRequest),l.onResponse.push(null==(n=d.hooks)?void 0:n.onResponse),l.onSuccess.push(null==(s=d.hooks)?void 0:s.onSuccess),l.onError.push(null==(a=d.hooks)?void 0:a.onError),l.onRetry.push(null==(o=d.hooks)?void 0:o.onRetry)}return{url:e,options:u,hooks:l}},b=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}},v=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}},E=async e=>{let t={},r=async e=>"function"==typeof e?await e():e;if(null==e?void 0:e.auth){if("Bearer"===e.auth.type){let i=await r(e.auth.token);if(!i)return t;t.authorization=`Bearer ${i}`}else if("Basic"===e.auth.type){let i=r(e.auth.username),n=r(e.auth.password);if(!i||!n)return t;t.authorization=`Basic ${btoa(`${i}:${n}`)}`}else if("Custom"===e.auth.type){let i=r(e.auth.value);if(!i)return t;t.authorization=`${r(e.auth.prefix)} ${i}`}}return t},S=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function A(e){if(void 0===e)return!1;let t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}function T(e){try{return JSON.parse(e)}catch(t){return e}}async function w(e){let t=new Headers(null==e?void 0:e.headers);for(let[r,i]of Object.entries(await E(e)||{}))t.set(r,i);if(!t.has("content-type")){let r=A(null==e?void 0:e.body)?"application/json":null;r&&t.set("content-type",r)}return t}var O=class e extends Error{constructor(t,r){super(r||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,e.prototype)}};async function R(e,t){let r=await e["~standard"].validate(t);if(r.issues)throw new O(r.issues);return r.value}var I=["get","post","put","patch","delete"],C=async(e,t)=>{var r,i,n,s,a,o,u,l;let{hooks:d,url:c,options:p}=await _(e,t),f=function(e){if(null==e?void 0:e.customFetchImpl)return e.customFetchImpl;if("undefined"!=typeof globalThis&&"function"==typeof globalThis.fetch)return globalThis.fetch;throw Error("No fetch implementation found")}(p),h=new AbortController,E=null!=(r=p.signal)?r:h.signal,O=function(e,t){let{baseURL:r,params:i,query:n}=t||{query:{},params:{},baseURL:""},s=e.startsWith("http")?e.split("/").slice(0,3).join("/"):r||"";if(e.startsWith("@")){let t=e.toString().split("@")[1].split("/")[0];I.includes(t)&&(e=e.replace(`@${t}/`,"/"))}s.endsWith("/")||(s+="/");let[a,o]=e.replace(s,"").split("?"),u=new URLSearchParams(o);for(let[e,t]of Object.entries(n||{}))null!=t&&u.set(e,String(t));if(i)if(Array.isArray(i))for(let[e,t]of a.split("/").filter(e=>e.startsWith(":")).entries()){let r=i[e];a=a.replace(t,r)}else for(let[e,t]of Object.entries(i))a=a.replace(`:${e}`,String(t));(a=a.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(a=a.slice(1));let l=u.toString();return(l=l.length>0?`?${l}`.replace(/\+/g,"%20"):"",s.startsWith("http"))?new URL(`${a}${l}`,s):`${s}${a}${l}`}(c,p),N=function(e){if(!(null==e?void 0:e.body))return null;let t=new Headers(null==e?void 0:e.headers);if(A(e.body)&&!t.has("content-type")){for(let[t,r]of Object.entries(null==e?void 0:e.body))r instanceof Date&&(e.body[t]=r.toISOString());return JSON.stringify(e.body)}return e.body}(p),P=await w(p),D=function(e,t){var r;if(null==t?void 0:t.method)return t.method.toUpperCase();if(e.startsWith("@")){let i=null==(r=e.split("@")[1])?void 0:r.split("/")[0];return I.includes(i)?i.toUpperCase():(null==t?void 0:t.body)?"POST":"GET"}return(null==t?void 0:t.body)?"POST":"GET"}(c,p),x=y(m({},p),{url:O,headers:P,body:N,method:D,signal:E});for(let e of d.onRequest)if(e){let t=await e(x);t instanceof Object&&(x=t)}("pipeTo"in x&&"function"==typeof x.pipeTo||"function"==typeof(null==(i=null==t?void 0:t.body)?void 0:i.pipe))&&!("duplex"in x)&&(x.duplex="half");let{clearTimeout:L}=function(e,t){let r;return!(null==e?void 0:e.signal)&&(null==e?void 0:e.timeout)&&(r=setTimeout(()=>null==t?void 0:t.abort(),null==e?void 0:e.timeout)),{abortTimeout:r,clearTimeout:()=>{r&&clearTimeout(r)}}}(p,h),k=await f(x.url,x);L();let M={response:k,request:x};for(let e of d.onResponse)if(e){let r=await e(y(m({},M),{response:(null==(n=null==t?void 0:t.hookOptions)?void 0:n.cloneResponse)?k.clone():k}));r instanceof Response?k=r:r instanceof Object&&(k=r.response)}if(k.ok){if("HEAD"===x.method)return{data:"",error:null};let e=function(e){let t=e.headers.get("content-type"),r=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";let i=t.split(";").shift()||"";return S.test(i)?"json":r.has(i)||i.startsWith("text/")?"text":"blob"}(k),r={data:"",response:k,request:x};if("json"===e||"text"===e){let e=await k.text(),t=null!=(s=x.jsonParser)?s:T;r.data=await t(e)}else r.data=await k[e]();for(let e of((null==x?void 0:x.output)&&x.output&&!x.disableValidation&&(r.data=await R(x.output,r.data)),d.onSuccess))e&&await e(y(m({},r),{response:(null==(a=null==t?void 0:t.hookOptions)?void 0:a.cloneResponse)?k.clone():k}));return(null==t?void 0:t.throw)?r.data:{data:r.data,error:null}}let $=null!=(o=null==t?void 0:t.jsonParser)?o:T,U=await k.text(),j=function(e){try{return JSON.parse(e),!0}catch(e){return!1}}(U),B=j?await $(U):null,z={response:k,responseText:U,request:x,error:y(m({},B),{status:k.status,statusText:k.statusText})};for(let e of d.onError)e&&await e(y(m({},z),{response:(null==(u=null==t?void 0:t.hookOptions)?void 0:u.cloneResponse)?k.clone():k}));if(null==t?void 0:t.retry){let r=function(e){if("number"==typeof e)return new b({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new b(e);case"exponential":return new v(e);default:throw Error("Invalid retry strategy")}}(t.retry),i=null!=(l=t.retryAttempt)?l:0;if(await r.shouldAttemptRetry(i,k)){for(let e of d.onRetry)e&&await e(M);let n=r.getDelay(i);return await new Promise(e=>setTimeout(e,n)),await C(e,y(m({},t),{retryAttempt:i+1}))}}if(null==t?void 0:t.throw)throw new g(k.status,k.statusText,j?B:U);return{data:null,error:y(m({},B),{status:k.status,statusText:k.statusText})}};let N=new TextEncoder,P=new TextDecoder;function D(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let i of e)t.set(i,r),r+=i.length;return t}function x(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof e?e:P.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=P.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{var r=t;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(r);let e=atob(r),i=new Uint8Array(e.length);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return i}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function L(e){let t=e;return("string"==typeof t&&(t=N.encode(t)),Uint8Array.prototype.toBase64)?t.toBase64({alphabet:"base64url",omitPadding:!0}):(function(e){if(Uint8Array.prototype.toBase64)return e.toBase64();let t=[];for(let r=0;r<e.length;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join(""))})(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class k extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class M extends k{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",i="unspecified"){super(e,{cause:{claim:r,reason:i,payload:t}}),this.claim=r,this.reason=i,this.payload=t}}class $ extends k{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",i="unspecified"){super(e,{cause:{claim:r,reason:i,payload:t}}),this.claim=r,this.reason=i,this.payload=t}}class U extends k{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class j extends k{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class B extends k{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class z extends k{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class K extends k{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class Y extends k{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t)}}class F extends k{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}class q extends k{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(e="request timed out",t){super(e,t)}}class V extends k{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(e="signature verification failed",t){super(e,t)}}let G=(e,t)=>{let r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:parseInt(e.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:e};default:throw new j(`alg ${e} is not supported either by JOSE or your javascript runtime`)}},H=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function Z(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function W(e,t){return e.name===t}function Q(e){return parseInt(e.name.slice(4),10)}function J(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}function X(e,t,...r){return J(`Key for the ${e} algorithm must be `,t,...r)}let ee=async(e,t,r)=>{if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError(((e,...t)=>J("Key must be ",e,...t))(t,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}return!function(e,t,r){switch(t){case"HS256":case"HS384":case"HS512":{if(!W(e.algorithm,"HMAC"))throw Z("HMAC");let r=parseInt(t.slice(2),10);if(Q(e.algorithm.hash)!==r)throw Z(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!W(e.algorithm,"RSASSA-PKCS1-v1_5"))throw Z("RSASSA-PKCS1-v1_5");let r=parseInt(t.slice(2),10);if(Q(e.algorithm.hash)!==r)throw Z(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!W(e.algorithm,"RSA-PSS"))throw Z("RSA-PSS");let r=parseInt(t.slice(2),10);if(Q(e.algorithm.hash)!==r)throw Z(`SHA-${r}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if(!W(e.algorithm,"Ed25519"))throw Z("Ed25519");break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":if(!W(e.algorithm,t))throw Z(t);break;case"ES256":case"ES384":case"ES512":{if(!W(e.algorithm,"ECDSA"))throw Z("ECDSA");let r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw Z(r,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}if(r&&!e.usages.includes(r))throw TypeError(`CryptoKey does not support this operation, its usages must include ${r}.`)}(t,e,r),t},et=async(e,t,r,i)=>{let n=await ee(e,t,"verify");H(e,n);let s=G(e,n.algorithm);try{return await crypto.subtle.verify(s,n,r,i)}catch{return!1}},er=(...e)=>{let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0},ei=e=>{if(!function(e){return"object"==typeof e&&null!==e}(e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function en(e){return e?.[Symbol.toStringTag]==="CryptoKey"}function es(e){return e?.[Symbol.toStringTag]==="KeyObject"}let ea=e=>en(e)||es(e);function eo(e){return ei(e)&&"string"==typeof e.kty}let eu=e=>e?.[Symbol.toStringTag],el=(e,t,r)=>{if(void 0!==t.use){let e;switch(r){case"sign":case"verify":e="sig";break;case"encrypt":case"decrypt":e="enc"}if(t.use!==e)throw TypeError(`Invalid key for this operation, its "use" must be "${e}" when present`)}if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let i;switch(!0){case"sign"===r||"verify"===r:case"dir"===e:case e.includes("CBC-HS"):i=r;break;case e.startsWith("PBES2"):i="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):i=!e.includes("GCM")&&e.endsWith("KW")?"encrypt"===r?"wrapKey":"unwrapKey":r;break;case"encrypt"===r&&e.startsWith("RSA"):i="wrapKey";break;case"decrypt"===r:i=e.startsWith("RSA")?"unwrapKey":"deriveBits"}if(i&&t.key_ops?.includes?.(i)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${i}" when present`)}return!0},ed=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(e)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(e)?((e,t,r)=>{if(!(t instanceof Uint8Array)){if(eo(t)){if(function(e){return"oct"===e.kty&&"string"==typeof e.k}(t)&&el(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!ea(t))throw TypeError(X(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==t.type)throw TypeError(`${eu(t)} instances for symmetric algorithms must be of type "secret"`)}})(e,t,r):((e,t,r)=>{if(eo(t))switch(r){case"decrypt":case"sign":if(function(e){return"oct"!==e.kty&&("AKP"===e.kty&&"string"==typeof e.priv||"string"==typeof e.d)}(t)&&el(e,t,r))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(function(e){return"oct"!==e.kty&&void 0===e.d&&void 0===e.priv}(t)&&el(e,t,r))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!ea(t))throw TypeError(X(e,t,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===t.type)throw TypeError(`${eu(t)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===t.type)switch(r){case"sign":throw TypeError(`${eu(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${eu(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===t.type)switch(r){case"verify":throw TypeError(`${eu(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${eu(t)} instances for asymmetric algorithm encryption must be of type "public"`)}})(e,t,r)},ec=(e,t,r,i,n)=>{let s;if(void 0!==n.crit&&i?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||void 0===i.crit)return new Set;if(!Array.isArray(i.crit)||0===i.crit.length||i.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let a of(s=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,i.crit)){if(!s.has(a))throw new j(`Extension Header Parameter "${a}" is not recognized`);if(void 0===n[a])throw new e(`Extension Header Parameter "${a}" is missing`);if(s.get(a)&&void 0===i[a])throw new e(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(i.crit)},ep=async e=>{if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=function(e){let t,r;switch(e.kty){case"AKP":switch(e.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":t={name:e.alg},r=e.priv?["sign"]:["verify"];break;default:throw new j('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new j('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new j('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new j('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new j('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),i={...e};return"AKP"!==i.kty&&delete i.alg,delete i.use,crypto.subtle.importKey("jwk",i,t,e.ext??(!e.d&&!e.priv),e.key_ops??r)},ef=async(e,r,i,n=!1)=>{let s=(t||=new WeakMap).get(e);if(s?.[i])return s[i];let a=await ep({...r,alg:i});return n&&Object.freeze(e),s?s[i]=a:t.set(e,{[i]:a}),a},eh=async(e,r)=>{if(e instanceof Uint8Array||en(e))return e;if(es(e)){if("secret"===e.type)return e.export();if("toCryptoKey"in e&&"function"==typeof e.toCryptoKey)try{return((e,r)=>{let i,n=(t||=new WeakMap).get(e);if(n?.[r])return n[r];let s="public"===e.type,a=!!s;if("x25519"===e.asymmetricKeyType){switch(r){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}i=e.toCryptoKey(e.asymmetricKeyType,a,s?[]:["deriveBits"])}if("ed25519"===e.asymmetricKeyType){if("EdDSA"!==r&&"Ed25519"!==r)throw TypeError("given KeyObject instance cannot be used for this algorithm");i=e.toCryptoKey(e.asymmetricKeyType,a,[s?"verify":"sign"])}switch(e.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(r!==e.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");i=e.toCryptoKey(e.asymmetricKeyType,a,[s?"verify":"sign"])}if("rsa"===e.asymmetricKeyType){let t;switch(r){case"RSA-OAEP":t="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":t="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":t="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":t="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(r.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:t},a,s?["encrypt"]:["decrypt"]);i=e.toCryptoKey({name:r.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:t},a,[s?"verify":"sign"])}if("ec"===e.asymmetricKeyType){let t=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(e.asymmetricKeyDetails?.namedCurve);if(!t)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===r&&"P-256"===t&&(i=e.toCryptoKey({name:"ECDSA",namedCurve:t},a,[s?"verify":"sign"])),"ES384"===r&&"P-384"===t&&(i=e.toCryptoKey({name:"ECDSA",namedCurve:t},a,[s?"verify":"sign"])),"ES512"===r&&"P-521"===t&&(i=e.toCryptoKey({name:"ECDSA",namedCurve:t},a,[s?"verify":"sign"])),r.startsWith("ECDH-ES")&&(i=e.toCryptoKey({name:"ECDH",namedCurve:t},a,s?[]:["deriveBits"]))}if(!i)throw TypeError("given KeyObject instance cannot be used for this algorithm");return n?n[r]=i:t.set(e,{[r]:i}),i})(e,r)}catch(e){if(e instanceof TypeError)throw e}let i=e.export({format:"jwk"});return ef(e,i,r)}if(eo(e))return e.k?x(e.k):ef(e,e,r,!0);throw Error("unreachable")};async function em(e,t,r){let i,n;if(!ei(e))throw new B("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new B('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new B("JWS Protected Header incorrect type");if(void 0===e.payload)throw new B("JWS Payload missing");if("string"!=typeof e.signature)throw new B("JWS Signature missing or incorrect type");if(void 0!==e.header&&!ei(e.header))throw new B("JWS Unprotected Header incorrect type");let s={};if(e.protected)try{let t=x(e.protected);s=JSON.parse(P.decode(t))}catch{throw new B("JWS Protected Header is invalid")}if(!er(s,e.header))throw new B("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let a={...s,...e.header},o=ec(B,new Map([["b64",!0]]),r?.crit,s,a),u=!0;if(o.has("b64")&&"boolean"!=typeof(u=s.b64))throw new B('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:l}=a;if("string"!=typeof l||!l)throw new B('JWS "alg" (Algorithm) Header Parameter missing or invalid');let d=r&&((e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)})("algorithms",r.algorithms);if(d&&!d.has(l))throw new U('"alg" (Algorithm) Header Parameter value not allowed');if(u){if("string"!=typeof e.payload)throw new B("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new B("JWS Payload must be a string or an Uint8Array instance");let c=!1;"function"==typeof t&&(t=await t(s,e),c=!0),ed(l,t,"verify");let p=D(N.encode(e.protected??""),N.encode("."),"string"==typeof e.payload?N.encode(e.payload):e.payload);try{i=x(e.signature)}catch{throw new B("Failed to base64url decode the signature")}let f=await eh(t,l);if(!await et(l,f,i,p))throw new V;if(u)try{n=x(e.payload)}catch{throw new B("Failed to base64url decode the payload")}else n="string"==typeof e.payload?N.encode(e.payload):e.payload;let h={payload:n};return(void 0!==e.protected&&(h.protectedHeader=s),void 0!==e.header&&(h.unprotectedHeader=e.header),c)?{...h,key:f}:h}async function ey(e,t,r){if(e instanceof Uint8Array&&(e=P.decode(e)),"string"!=typeof e)throw new B("Compact JWS must be a string or Uint8Array");let{0:i,1:n,2:s,length:a}=e.split(".");if(3!==a)throw new B("Invalid Compact JWS");let o=await em({payload:n,protected:i,signature:s},t,r),u={payload:o.payload,protectedHeader:o.protectedHeader};return"function"==typeof t?{...u,key:o.key}:u}let eg=e=>Math.floor(e.getTime()/1e3),e_=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,eb=e=>{let t,r=e_.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let i=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(i);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*i);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*i);break;case"day":case"days":case"d":t=Math.round(86400*i);break;case"week":case"weeks":case"w":t=Math.round(604800*i);break;default:t=Math.round(0x1e187e0*i)}return"-"===r[1]||"ago"===r[4]?-t:t};function ev(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}let eE=e=>e.includes("/")?e.toLowerCase():`application/${e.toLowerCase()}`;class eS{#t;constructor(e){if(!ei(e))throw TypeError("JWT Claims Set MUST be an object");this.#t=structuredClone(e)}data(){return N.encode(JSON.stringify(this.#t))}get iss(){return this.#t.iss}set iss(e){this.#t.iss=e}get sub(){return this.#t.sub}set sub(e){this.#t.sub=e}get aud(){return this.#t.aud}set aud(e){this.#t.aud=e}set jti(e){this.#t.jti=e}set nbf(e){"number"==typeof e?this.#t.nbf=ev("setNotBefore",e):e instanceof Date?this.#t.nbf=ev("setNotBefore",eg(e)):this.#t.nbf=eg(new Date)+eb(e)}set exp(e){"number"==typeof e?this.#t.exp=ev("setExpirationTime",e):e instanceof Date?this.#t.exp=ev("setExpirationTime",eg(e)):this.#t.exp=eg(new Date)+eb(e)}set iat(e){void 0===e?this.#t.iat=eg(new Date):e instanceof Date?this.#t.iat=ev("setIssuedAt",eg(e)):"string"==typeof e?this.#t.iat=ev("setIssuedAt",eg(new Date)+eb(e)):this.#t.iat=ev("setIssuedAt",e)}}async function eA(e,t,r){let i=await ey(e,t,r);if(i.protectedHeader.crit?.includes("b64")&&!1===i.protectedHeader.b64)throw new z("JWTs MUST NOT use unencoded payload");let n={payload:function(e,t,r={}){var i,n;let s,a;try{s=JSON.parse(P.decode(t))}catch{}if(!ei(s))throw new z("JWT Claims Set must be a top-level JSON object");let{typ:o}=r;if(o&&("string"!=typeof e.typ||eE(e.typ)!==eE(o)))throw new M('unexpected "typ" JWT header value',s,"typ","check_failed");let{requiredClaims:u=[],issuer:l,subject:d,audience:c,maxTokenAge:p}=r,f=[...u];for(let e of(void 0!==p&&f.push("iat"),void 0!==c&&f.push("aud"),void 0!==d&&f.push("sub"),void 0!==l&&f.push("iss"),new Set(f.reverse())))if(!(e in s))throw new M(`missing required "${e}" claim`,s,e,"missing");if(l&&!(Array.isArray(l)?l:[l]).includes(s.iss))throw new M('unexpected "iss" claim value',s,"iss","check_failed");if(d&&s.sub!==d)throw new M('unexpected "sub" claim value',s,"sub","check_failed");if(c&&(i=s.aud,n="string"==typeof c?[c]:c,"string"==typeof i?!n.includes(i):!(Array.isArray(i)&&n.some(Set.prototype.has.bind(new Set(i))))))throw new M('unexpected "aud" claim value',s,"aud","check_failed");switch(typeof r.clockTolerance){case"string":a=eb(r.clockTolerance);break;case"number":a=r.clockTolerance;break;case"undefined":a=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:h}=r,m=eg(h||new Date);if((void 0!==s.iat||p)&&"number"!=typeof s.iat)throw new M('"iat" claim must be a number',s,"iat","invalid");if(void 0!==s.nbf){if("number"!=typeof s.nbf)throw new M('"nbf" claim must be a number',s,"nbf","invalid");if(s.nbf>m+a)throw new M('"nbf" claim timestamp check failed',s,"nbf","check_failed")}if(void 0!==s.exp){if("number"!=typeof s.exp)throw new M('"exp" claim must be a number',s,"exp","invalid");if(s.exp<=m-a)throw new $('"exp" claim timestamp check failed',s,"exp","check_failed")}if(p){let e=m-s.iat;if(e-a>("number"==typeof p?p:eb(p)))throw new $('"iat" claim timestamp check failed (too far in the past)',s,"iat","check_failed");if(e<0-a)throw new M('"iat" claim timestamp check failed (it should be in the past)',s,"iat","check_failed")}return s}(i.protectedHeader,i.payload,r),protectedHeader:i.protectedHeader};return"function"==typeof t?{...n,key:i.key}:n}function eT(e){let t=e=>new Date(new Date().getTime()+1e3*e);return{tokenType:e.token_type,accessToken:e.access_token,refreshToken:e.refresh_token,accessTokenExpiresAt:e.expires_in?t(e.expires_in):void 0,refreshTokenExpiresAt:e.refresh_token_expires_in?t(e.refresh_token_expires_in):void 0,scopes:e?.scope?"string"==typeof e.scope?e.scope.split(" "):e.scope:[],idToken:e.id_token}}async function ew(e){let t=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",t);return o.base64Url.encode(new Uint8Array(r),{padding:!1})}async function eO({id:e,options:t,authorizationEndpoint:r,state:i,codeVerifier:n,scopes:s,claims:a,redirectURI:o,duration:u,prompt:l,accessType:d,responseType:c,display:p,loginHint:f,hd:h,responseMode:m,additionalParams:y,scopeJoiner:g}){let _=new URL(r);_.searchParams.set("response_type",c||"code");let b=Array.isArray(t.clientId)?t.clientId[0]:t.clientId;if(_.searchParams.set("client_id",b),_.searchParams.set("state",i),_.searchParams.set("scope",s.join(g||" ")),_.searchParams.set("redirect_uri",t.redirectURI||o),u&&_.searchParams.set("duration",u),p&&_.searchParams.set("display",p),f&&_.searchParams.set("login_hint",f),l&&_.searchParams.set("prompt",l),h&&_.searchParams.set("hd",h),d&&_.searchParams.set("access_type",d),m&&_.searchParams.set("response_mode",m),n){let e=await ew(n);_.searchParams.set("code_challenge_method","S256"),_.searchParams.set("code_challenge",e)}if(a){let e=a.reduce((e,t)=>(e[t]=null,e),{});_.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...e}}))}return y&&Object.entries(y).forEach(([e,t])=>{_.searchParams.set(e,t)}),_}async function eR({code:e,codeVerifier:t,redirectURI:r,options:i,tokenEndpoint:n,authentication:s,deviceId:a,headers:u,additionalParams:l={},resource:d}){let{body:c,headers:p}=function({code:e,codeVerifier:t,redirectURI:r,options:i,authentication:n,deviceId:s,headers:a,additionalParams:u={},resource:l}){let d=new URLSearchParams,c={"content-type":"application/x-www-form-urlencoded",accept:"application/json","user-agent":"better-auth",...a};if(d.set("grant_type","authorization_code"),d.set("code",e),t&&d.set("code_verifier",t),i.clientKey&&d.set("client_key",i.clientKey),s&&d.set("device_id",s),d.set("redirect_uri",i.redirectURI||r),l)if("string"==typeof l)d.append("resource",l);else for(let e of l)d.append("resource",e);if("basic"===n){let e=Array.isArray(i.clientId)?i.clientId[0]:i.clientId,t=o.base64.encode(`${e}:${i.clientSecret??""}`);c.authorization=`Basic ${t}`}else{let e=Array.isArray(i.clientId)?i.clientId[0]:i.clientId;d.set("client_id",e),i.clientSecret&&d.set("client_secret",i.clientSecret)}for(let[e,t]of Object.entries(u))d.has(e)||d.append(e,t);return{body:d,headers:c}}({code:e,codeVerifier:t,redirectURI:r,options:i,authentication:s,deviceId:a,headers:u,additionalParams:l,resource:d}),{data:f,error:h}=await C(n,{method:"POST",body:c,headers:p});if(h)throw h;return eT(f)}async function eI({refreshToken:e,options:t,tokenEndpoint:r,authentication:i,extraParams:n}){let{body:s,headers:a}=function({refreshToken:e,options:t,authentication:r,extraParams:i,resource:n}){let s=new URLSearchParams,a={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(s.set("grant_type","refresh_token"),s.set("refresh_token",e),"basic"===r){let e=Array.isArray(t.clientId)?t.clientId[0]:t.clientId;e?a.authorization="Basic "+o.base64.encode(`${e}:${t.clientSecret??""}`):a.authorization="Basic "+o.base64.encode(`:${t.clientSecret??""}`)}else{let e=Array.isArray(t.clientId)?t.clientId[0]:t.clientId;s.set("client_id",e),t.clientSecret&&s.set("client_secret",t.clientSecret)}if(n)if("string"==typeof n)s.append("resource",n);else for(let e of n)s.append("resource",e);if(i)for(let[e,t]of Object.entries(i))s.set(e,t);return{body:s,headers:a}}({refreshToken:e,options:t,authentication:i,extraParams:n}),{data:u,error:l}=await C(r,{method:"POST",body:s,headers:a});if(l)throw l;let d={accessToken:u.access_token,refreshToken:u.refresh_token,tokenType:u.token_type,scopes:u.scope?.split(" "),idToken:u.id_token};return u.expires_in&&(d.accessTokenExpiresAt=new Date(new Date().getTime()+1e3*u.expires_in)),d}e.s(["b",()=>yF],61788),e.s(["checkEndpointConflicts",()=>f$,"getEndpoints",()=>fU,"router",()=>fj],22381);var eC=e.i(31428);e.s(["A",()=>fE,"B",()=>p9,"C",()=>p7,"D",()=>fm,"E",()=>fp,"F",()=>fa,"G",()=>fl,"I",()=>fu,"J",()=>fs,"a",()=>p6,"b",()=>fA,"c",()=>p5,"e",()=>fS,"f",()=>fC,"i",()=>fR,"j",()=>fO,"k",()=>fv,"l",()=>fT,"m",()=>fw,"n",()=>ff,"q",()=>fc,"r",()=>fI,"t",()=>fP,"u",()=>fy,"v",()=>fh,"w",()=>p2,"x",()=>fb,"y",()=>f_,"z",()=>fg],8369),e.s(["$brand",()=>eD,"$input",()=>sK,"$output",()=>sz,"NEVER",()=>eN,"TimePrecision",()=>aa,"ZodAny",()=>le,"ZodArray",()=>ld,"ZodBase64",()=>uN,"ZodBase64URL",()=>uD,"ZodBigInt",()=>uX,"ZodBigIntFormat",()=>u1,"ZodBoolean",()=>uQ,"ZodCIDRv4",()=>uO,"ZodCIDRv6",()=>uI,"ZodCUID",()=>up,"ZodCUID2",()=>uh,"ZodCatch",()=>l0,"ZodCodec",()=>l5,"ZodCustom",()=>dl,"ZodCustomStringFormat",()=>uU,"ZodDate",()=>lu,"ZodDefault",()=>lV,"ZodDiscriminatedUnion",()=>lb,"ZodE164",()=>uL,"ZodEmail",()=>o5,"ZodEmoji",()=>uu,"ZodEnum",()=>lD,"ZodError",()=>oz,"ZodFile",()=>l$,"ZodFirstPartyTypeKind",()=>a,"ZodFunction",()=>da,"ZodGUID",()=>o9,"ZodIPv4",()=>uS,"ZodIPv6",()=>uT,"ZodISODate",()=>oL,"ZodISODateTime",()=>oD,"ZodISODuration",()=>oU,"ZodISOTime",()=>oM,"ZodIntersection",()=>lE,"ZodIssueCode",()=>d_,"ZodJWT",()=>uM,"ZodKSUID",()=>uv,"ZodLazy",()=>dr,"ZodLiteral",()=>lk,"ZodMap",()=>lI,"ZodNaN",()=>l4,"ZodNanoID",()=>ud,"ZodNever",()=>ln,"ZodNonOptional",()=>lW,"ZodNull",()=>u9,"ZodNullable",()=>lY,"ZodNumber",()=>uY,"ZodNumberFormat",()=>uq,"ZodObject",()=>lf,"ZodOptional",()=>lz,"ZodPipe",()=>l6,"ZodPrefault",()=>lH,"ZodPromise",()=>dn,"ZodReadonly",()=>l9,"ZodRealError",()=>oK,"ZodRecord",()=>lw,"ZodSet",()=>lN,"ZodString",()=>o2,"ZodStringFormat",()=>o3,"ZodSuccess",()=>lJ,"ZodSymbol",()=>u6,"ZodTemplateLiteral",()=>de,"ZodTransform",()=>lj,"ZodTuple",()=>lA,"ZodType",()=>o1,"ZodULID",()=>uy,"ZodURL",()=>us,"ZodUUID",()=>ue,"ZodUndefined",()=>u5,"ZodUnion",()=>lg,"ZodUnknown",()=>lr,"ZodVoid",()=>la,"ZodXID",()=>u_,"_ZodString",()=>o4,"_default",()=>lG,"_function",()=>du,"any",()=>lt,"array",()=>lc,"base64",()=>uP,"base64url",()=>ux,"bigint",()=>u0,"boolean",()=>uJ,"catch",()=>l1,"check",()=>dd,"cidrv4",()=>uR,"cidrv6",()=>uC,"clone",()=>ts,"codec",()=>l8,"coerce",()=>dx,"config",()=>eM,"core",()=>dN,"cuid",()=>uf,"cuid2",()=>um,"custom",()=>dc,"date",()=>ll,"decode",()=>oH,"decodeAsync",()=>oW,"default",()=>dk,"discriminatedUnion",()=>lv,"e164",()=>uk,"email",()=>o8,"emoji",()=>ul,"encode",()=>oG,"encodeAsync",()=>oZ,"endsWith",()=>a0,"enum",()=>lx,"file",()=>lU,"flattenError",()=>t$,"float32",()=>uG,"float64",()=>uH,"formatError",()=>tU,"function",()=>du,"getErrorMap",()=>dv,"globalRegistry",()=>sq,"gt",()=>aM,"gte",()=>a$,"guid",()=>o7,"hash",()=>uK,"hex",()=>uz,"hostname",()=>uB,"httpUrl",()=>uo,"includes",()=>aJ,"instanceof",()=>dh,"int",()=>uV,"int32",()=>uZ,"int64",()=>u4,"intersection",()=>lS,"ipv4",()=>uA,"ipv6",()=>uw,"iso",()=>dD,"json",()=>dy,"jwt",()=>u$,"keyof",()=>lp,"ksuid",()=>uE,"lazy",()=>di,"length",()=>aH,"literal",()=>lM,"locales",()=>dP,"looseObject",()=>ly,"lowercase",()=>aW,"lt",()=>aL,"lte",()=>ak,"map",()=>lC,"maxLength",()=>aV,"maxSize",()=>aY,"mime",()=>a4,"minLength",()=>aG,"minSize",()=>aF,"multipleOf",()=>aK,"nan",()=>l2,"nanoid",()=>uc,"nativeEnum",()=>lL,"negative",()=>aj,"never",()=>ls,"nonnegative",()=>az,"nonoptional",()=>lQ,"nonpositive",()=>aB,"normalize",()=>a6,"null",()=>u7,"nullable",()=>lF,"nullish",()=>lq,"number",()=>uF,"object",()=>lh,"optional",()=>lK,"overwrite",()=>a2,"parse",()=>oY,"parseAsync",()=>oF,"partialRecord",()=>lR,"pipe",()=>l3,"positive",()=>aU,"prefault",()=>lZ,"preprocess",()=>dg,"prettifyError",()=>tz,"promise",()=>ds,"property",()=>a1,"readonly",()=>l7,"record",()=>lO,"refine",()=>dp,"regex",()=>aZ,"regexes",()=>oN,"registry",()=>sF,"safeDecode",()=>oJ,"safeDecodeAsync",()=>o0,"safeEncode",()=>oQ,"safeEncodeAsync",()=>oX,"safeParse",()=>oq,"safeParseAsync",()=>oV,"set",()=>lP,"setErrorMap",()=>db,"size",()=>aq,"startsWith",()=>aX,"strictObject",()=>lm,"string",()=>o6,"stringFormat",()=>uj,"stringbool",()=>dm,"success",()=>lX,"superRefine",()=>df,"symbol",()=>u3,"templateLiteral",()=>dt,"toJSONSchema",()=>oC,"toLowerCase",()=>a5,"toUpperCase",()=>a8,"transform",()=>lB,"treeifyError",()=>tj,"trim",()=>a3,"tuple",()=>lT,"uint32",()=>uW,"uint64",()=>u2,"ulid",()=>ug,"undefined",()=>u8,"union",()=>l_,"unknown",()=>li,"uppercase",()=>aQ,"url",()=>ua,"util",()=>oP,"uuid",()=>ut,"uuidv4",()=>ur,"uuidv6",()=>ui,"uuidv7",()=>un,"void",()=>lo,"xid",()=>ub,"z",()=>dM],90544),e.s(["default",()=>dk],61166),e.s([],54048),e.s([],82811),e.s(["$ZodAsyncError",()=>ex,"$ZodEncodeError",()=>eL,"$brand",()=>eD,"$constructor",()=>eP,"NEVER",()=>eN,"config",()=>eM,"globalConfig",()=>ek],27438);let eN=Object.freeze({status:"aborted"});function eP(e,t,r){function i(r,i){var n;for(let s in Object.defineProperty(r,"_zod",{value:r._zod??{},enumerable:!1}),(n=r._zod).traits??(n.traits=new Set),r._zod.traits.add(e),t(r,i),a.prototype)s in r||Object.defineProperty(r,s,{value:a.prototype[s].bind(r)});r._zod.constr=a,r._zod.def=i}let n=r?.Parent??Object;class s extends n{}function a(e){var t;let n=r?.Parent?new s:this;for(let r of(i(n,e),(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred))r();return n}return Object.defineProperty(s,"name",{value:e}),Object.defineProperty(a,"init",{value:i}),Object.defineProperty(a,Symbol.hasInstance,{value:t=>!!r?.Parent&&t instanceof r.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}let eD=Symbol("zod_brand");class ex extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class eL extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}let ek={};function eM(e){return e&&Object.assign(ek,e),ek}function e$(e){return e}function eU(e){return e}function ej(e){}function eB(e){throw Error()}function ez(e){}function eK(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function eY(e,t="|"){return e.map(e=>tu(e)).join(t)}function eF(e,t){return"bigint"==typeof t?t.toString():t}function eq(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function eV(e){return null==e}function eG(e){let t=+!!e.startsWith("^"),r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function eH(e,t){let r=(e.toString().split(".")[1]||"").length,i=t.toString(),n=(i.split(".")[1]||"").length;if(0===n&&/\d?e-\d?/.test(i)){let e=i.match(/\d?e-(\d?)/);e?.[1]&&(n=Number.parseInt(e[1]))}let s=r>n?r:n;return Number.parseInt(e.toFixed(s).replace(".",""))%Number.parseInt(t.toFixed(s).replace(".",""))/10**s}e.s(["_decode",()=>tJ,"_decodeAsync",()=>t4,"_encode",()=>tW,"_encodeAsync",()=>t0,"_parse",()=>tK,"_parseAsync",()=>tF,"_safeDecode",()=>t5,"_safeDecodeAsync",()=>re,"_safeEncode",()=>t6,"_safeEncodeAsync",()=>t9,"_safeParse",()=>tV,"_safeParseAsync",()=>tH,"decode",()=>tX,"decodeAsync",()=>t2,"encode",()=>tQ,"encodeAsync",()=>t1,"parse",()=>tY,"parseAsync",()=>tq,"safeDecode",()=>t8,"safeDecodeAsync",()=>rt,"safeEncode",()=>t3,"safeEncodeAsync",()=>t7,"safeParse",()=>tG,"safeParseAsync",()=>tZ],15143),e.s(["$ZodError",()=>tk,"$ZodRealError",()=>tM,"flattenError",()=>t$,"formatError",()=>tU,"prettifyError",()=>tz,"toDotPath",()=>tB,"treeifyError",()=>tj],67021),e.s(["BIGINT_FORMAT_RANGES",()=>tc,"Class",()=>tx,"NUMBER_FORMAT_RANGES",()=>td,"aborted",()=>tb,"allowsEval",()=>e8,"assert",()=>ez,"assertEqual",()=>e$,"assertIs",()=>ej,"assertNever",()=>eB,"assertNotEqual",()=>eU,"assignProp",()=>eJ,"base64ToUint8Array",()=>tR,"base64urlToUint8Array",()=>tC,"cached",()=>eq,"captureStackTrace",()=>e3,"cleanEnum",()=>tO,"cleanRegex",()=>eG,"clone",()=>ts,"cloneDef",()=>e0,"createTransparentProxy",()=>to,"defineLazy",()=>eW,"esc",()=>e6,"escapeRegex",()=>tn,"extend",()=>th,"finalizeIssue",()=>tS,"floatSafeRemainder",()=>eH,"getElementAtPath",()=>e1,"getEnumValues",()=>eK,"getLengthableOrigin",()=>tT,"getParsedType",()=>tt,"getSizableOrigin",()=>tA,"hexToUint8Array",()=>tP,"isObject",()=>e5,"isPlainObject",()=>e9,"issue",()=>tw,"joinValues",()=>eY,"jsonStringifyReplacer",()=>eF,"merge",()=>ty,"mergeDefs",()=>eX,"normalizeParams",()=>ta,"nullish",()=>eV,"numKeys",()=>te,"objectClone",()=>eQ,"omit",()=>tf,"optionalKeys",()=>tl,"partial",()=>tg,"pick",()=>tp,"prefixIssues",()=>tv,"primitiveTypes",()=>ti,"promiseAllObject",()=>e4,"propertyKeyTypes",()=>tr,"randomString",()=>e2,"required",()=>t_,"safeExtend",()=>tm,"shallowClone",()=>e7,"stringifyPrimitive",()=>tu,"uint8ArrayToBase64",()=>tI,"uint8ArrayToBase64url",()=>tN,"uint8ArrayToHex",()=>tD,"unwrapMessage",()=>tE],86618);let eZ=Symbol("evaluating");function eW(e,t,r){let i;Object.defineProperty(e,t,{get(){if(i!==eZ)return void 0===i&&(i=eZ,i=r()),i},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function eQ(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function eJ(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function eX(...e){let t={};for(let r of e)Object.assign(t,Object.getOwnPropertyDescriptors(r));return Object.defineProperties({},t)}function e0(e){return eX(e._zod.def)}function e1(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function e4(e){let t=Object.keys(e);return Promise.all(t.map(t=>e[t])).then(e=>{let r={};for(let i=0;i<t.length;i++)r[t[i]]=e[i];return r})}function e2(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let i=0;i<e;i++)r+=t[Math.floor(Math.random()*t.length)];return r}function e6(e){return JSON.stringify(e)}let e3="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function e5(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let e8=eq(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function e9(e){if(!1===e5(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!1!==e5(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function e7(e){return e9(e)?{...e}:Array.isArray(e)?[...e]:e}function te(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}let tt=e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return"promise";if("undefined"!=typeof Map&&e instanceof Map)return"map";if("undefined"!=typeof Set&&e instanceof Set)return"set";if("undefined"!=typeof Date&&e instanceof Date)return"date";if("undefined"!=typeof File&&e instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${t}`)}},tr=new Set(["string","number","symbol"]),ti=new Set(["string","number","bigint","boolean","symbol","undefined"]);function tn(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ts(e,t,r){let i=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(i._zod.parent=e),i}function ta(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}function to(e){let t;return new Proxy({},{get:(r,i,n)=>(t??(t=e()),Reflect.get(t,i,n)),set:(r,i,n,s)=>(t??(t=e()),Reflect.set(t,i,n,s)),has:(r,i)=>(t??(t=e()),Reflect.has(t,i)),deleteProperty:(r,i)=>(t??(t=e()),Reflect.deleteProperty(t,i)),ownKeys:r=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(r,i)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,i)),defineProperty:(r,i,n)=>(t??(t=e()),Reflect.defineProperty(t,i,n))})}function tu(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function tl(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}let td={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},tc={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function tp(e,t){let r=e._zod.def,i=eX(e._zod.def,{get shape(){let e={};for(let i in t){if(!(i in r.shape))throw Error(`Unrecognized key: "${i}"`);t[i]&&(e[i]=r.shape[i])}return eJ(this,"shape",e),e},checks:[]});return ts(e,i)}function tf(e,t){let r=e._zod.def,i=eX(e._zod.def,{get shape(){let i={...e._zod.def.shape};for(let e in t){if(!(e in r.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete i[e]}return eJ(this,"shape",i),i},checks:[]});return ts(e,i)}function th(e,t){if(!e9(t))throw Error("Invalid input to extend: expected a plain object");let r=e._zod.def.checks;if(r&&r.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let i=eX(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t};return eJ(this,"shape",r),r},checks:[]});return ts(e,i)}function tm(e,t){if(!e9(t))throw Error("Invalid input to safeExtend: expected a plain object");let r={...e._zod.def,get shape(){let r={...e._zod.def.shape,...t};return eJ(this,"shape",r),r},checks:e._zod.def.checks};return ts(e,r)}function ty(e,t){let r=eX(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return eJ(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return ts(e,r)}function tg(e,t,r){let i=eX(t._zod.def,{get shape(){let i=t._zod.def.shape,n={...i};if(r)for(let t in r){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);r[t]&&(n[t]=e?new e({type:"optional",innerType:i[t]}):i[t])}else for(let t in i)n[t]=e?new e({type:"optional",innerType:i[t]}):i[t];return eJ(this,"shape",n),n},checks:[]});return ts(t,i)}function t_(e,t,r){let i=eX(t._zod.def,{get shape(){let i=t._zod.def.shape,n={...i};if(r)for(let t in r){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);r[t]&&(n[t]=new e({type:"nonoptional",innerType:i[t]}))}else for(let t in i)n[t]=new e({type:"nonoptional",innerType:i[t]});return eJ(this,"shape",n),n},checks:[]});return ts(t,i)}function tb(e,t=0){if(!0===e.aborted)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function tv(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function tE(e){return"string"==typeof e?e:e?.message}function tS(e,t,r){let i={...e,path:e.path??[]};return e.message||(i.message=tE(e.inst?._zod.def?.error?.(e))??tE(t?.error?.(e))??tE(r.customError?.(e))??tE(r.localeError?.(e))??"Invalid input"),delete i.inst,delete i.continue,t?.reportInput||delete i.input,i}function tA(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function tT(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function tw(...e){let[t,r,i]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:i}:{...t}}function tO(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function tR(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function tI(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function tC(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-t.length%4)%4);return tR(t+r)}function tN(e){return tI(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function tP(e){let t=e.replace(/^0x/,"");if(t.length%2!=0)throw Error("Invalid hex string length");let r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)r[e/2]=Number.parseInt(t.slice(e,e+2),16);return r}function tD(e){return Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}class tx{constructor(...e){}}let tL=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,eF,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},tk=eP("$ZodError",tL),tM=eP("$ZodError",tL,{Parent:Error});function t$(e,t=e=>e.message){let r={},i=[];for(let n of e.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(t(n))):i.push(t(n));return{formErrors:i,fieldErrors:r}}function tU(e,t=e=>e.message){let r={_errors:[]},i=e=>{for(let n of e.issues)if("invalid_union"===n.code&&n.errors.length)n.errors.map(e=>i({issues:e}));else if("invalid_key"===n.code)i({issues:n.issues});else if("invalid_element"===n.code)i({issues:n.issues});else if(0===n.path.length)r._errors.push(t(n));else{let e=r,i=0;for(;i<n.path.length;){let r=n.path[i];i===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(e),r}function tj(e,t=e=>e.message){let r={errors:[]},i=(e,n=[])=>{var s,a;for(let o of e.issues)if("invalid_union"===o.code&&o.errors.length)o.errors.map(e=>i({issues:e},o.path));else if("invalid_key"===o.code)i({issues:o.issues},o.path);else if("invalid_element"===o.code)i({issues:o.issues},o.path);else{let e=[...n,...o.path];if(0===e.length){r.errors.push(t(o));continue}let i=r,u=0;for(;u<e.length;){let r=e[u],n=u===e.length-1;"string"==typeof r?(i.properties??(i.properties={}),(s=i.properties)[r]??(s[r]={errors:[]}),i=i.properties[r]):(i.items??(i.items=[]),(a=i.items)[r]??(a[r]={errors:[]}),i=i.items[r]),n&&i.errors.push(t(o)),u++}}};return i(e),r}function tB(e){let t=[];for(let r of e.map(e=>"object"==typeof e?e.key:e))"number"==typeof r?t.push(`[${r}]`):"symbol"==typeof r?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push("."),t.push(r));return t.join("")}function tz(e){let t=[];for(let r of[...e.issues].sort((e,t)=>(e.path??[]).length-(t.path??[]).length))t.push(` ${r.message}`),r.path?.length&&t.push(`   at ${tB(r.path)}`);return t.join("\n")}let tK=e=>(t,r,i,n)=>{let s=i?Object.assign(i,{async:!1}):{async:!1},a=t._zod.run({value:r,issues:[]},s);if(a instanceof Promise)throw new ex;if(a.issues.length){let t=new(n?.Err??e)(a.issues.map(e=>tS(e,s,eM())));throw e3(t,n?.callee),t}return a.value},tY=tK(tM),tF=e=>async(t,r,i,n)=>{let s=i?Object.assign(i,{async:!0}):{async:!0},a=t._zod.run({value:r,issues:[]},s);if(a instanceof Promise&&(a=await a),a.issues.length){let t=new(n?.Err??e)(a.issues.map(e=>tS(e,s,eM())));throw e3(t,n?.callee),t}return a.value},tq=tF(tM),tV=e=>(t,r,i)=>{let n=i?{...i,async:!1}:{async:!1},s=t._zod.run({value:r,issues:[]},n);if(s instanceof Promise)throw new ex;return s.issues.length?{success:!1,error:new(e??tk)(s.issues.map(e=>tS(e,n,eM())))}:{success:!0,data:s.value}},tG=tV(tM),tH=e=>async(t,r,i)=>{let n=i?Object.assign(i,{async:!0}):{async:!0},s=t._zod.run({value:r,issues:[]},n);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(e=>tS(e,n,eM())))}:{success:!0,data:s.value}},tZ=tH(tM),tW=e=>(t,r,i)=>{let n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return tK(e)(t,r,n)},tQ=tW(tM),tJ=e=>(t,r,i)=>tK(e)(t,r,i),tX=tJ(tM),t0=e=>async(t,r,i)=>{let n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return tF(e)(t,r,n)},t1=t0(tM),t4=e=>async(t,r,i)=>tF(e)(t,r,i),t2=t4(tM),t6=e=>(t,r,i)=>{let n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return tV(e)(t,r,n)},t3=t6(tM),t5=e=>(t,r,i)=>tV(e)(t,r,i),t8=t5(tM),t9=e=>async(t,r,i)=>{let n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return tH(e)(t,r,n)},t7=t9(tM),re=e=>async(t,r,i)=>tH(e)(t,r,i),rt=re(tM);e.s(["$ZodAny",()=>nt,"$ZodArray",()=>no,"$ZodBase64",()=>iW,"$ZodBase64URL",()=>iJ,"$ZodBigInt",()=>i5,"$ZodBigIntFormat",()=>i8,"$ZodBoolean",()=>i3,"$ZodCIDRv4",()=>iG,"$ZodCIDRv6",()=>iH,"$ZodCUID",()=>iM,"$ZodCUID2",()=>i$,"$ZodCatch",()=>nU,"$ZodCodec",()=>nK,"$ZodCustom",()=>nQ,"$ZodCustomStringFormat",()=>i4,"$ZodDate",()=>ns,"$ZodDefault",()=>nD,"$ZodDiscriminatedUnion",()=>nm,"$ZodE164",()=>iX,"$ZodEmail",()=>iD,"$ZodEmoji",()=>iL,"$ZodEnum",()=>nw,"$ZodFile",()=>nR,"$ZodFunction",()=>nH,"$ZodGUID",()=>iN,"$ZodIPv4",()=>iq,"$ZodIPv6",()=>iV,"$ZodISODate",()=>iK,"$ZodISODateTime",()=>iz,"$ZodISODuration",()=>iF,"$ZodISOTime",()=>iY,"$ZodIntersection",()=>ny,"$ZodJWT",()=>i1,"$ZodKSUID",()=>iB,"$ZodLazy",()=>nW,"$ZodLiteral",()=>nO,"$ZodMap",()=>nE,"$ZodNaN",()=>nj,"$ZodNanoID",()=>ik,"$ZodNever",()=>ni,"$ZodNonOptional",()=>nk,"$ZodNull",()=>ne,"$ZodNullable",()=>nP,"$ZodNumber",()=>i2,"$ZodNumberFormat",()=>i6,"$ZodObject",()=>nc,"$ZodObjectJIT",()=>np,"$ZodOptional",()=>nN,"$ZodPipe",()=>nB,"$ZodPrefault",()=>nL,"$ZodPromise",()=>nZ,"$ZodReadonly",()=>nq,"$ZodRecord",()=>nv,"$ZodSet",()=>nA,"$ZodString",()=>iI,"$ZodStringFormat",()=>iC,"$ZodSuccess",()=>n$,"$ZodSymbol",()=>i9,"$ZodTemplateLiteral",()=>nG,"$ZodTransform",()=>nI,"$ZodTuple",()=>n_,"$ZodType",()=>iR,"$ZodULID",()=>iU,"$ZodURL",()=>ix,"$ZodUUID",()=>iP,"$ZodUndefined",()=>i7,"$ZodUnion",()=>nh,"$ZodUnknown",()=>nr,"$ZodVoid",()=>nn,"$ZodXID",()=>ij,"isValidBase64",()=>iZ,"isValidBase64URL",()=>iQ,"isValidJWT",()=>i0],39510),e.s(["$ZodCheck",()=>r7,"$ZodCheckBigIntFormat",()=>ia,"$ZodCheckEndsWith",()=>iv,"$ZodCheckGreaterThan",()=>ir,"$ZodCheckIncludes",()=>i_,"$ZodCheckLengthEquals",()=>ip,"$ZodCheckLessThan",()=>it,"$ZodCheckLowerCase",()=>iy,"$ZodCheckMaxLength",()=>id,"$ZodCheckMaxSize",()=>io,"$ZodCheckMimeType",()=>iA,"$ZodCheckMinLength",()=>ic,"$ZodCheckMinSize",()=>iu,"$ZodCheckMultipleOf",()=>ii,"$ZodCheckNumberFormat",()=>is,"$ZodCheckOverwrite",()=>iT,"$ZodCheckProperty",()=>iS,"$ZodCheckRegex",()=>im,"$ZodCheckSizeEquals",()=>il,"$ZodCheckStartsWith",()=>ib,"$ZodCheckStringFormat",()=>ih,"$ZodCheckUpperCase",()=>ig],36608),e.s(["base64",()=>rO,"base64url",()=>rR,"bigint",()=>r$,"boolean",()=>rB,"browserEmail",()=>rv,"cidrv4",()=>rT,"cidrv6",()=>rw,"cuid",()=>rr,"cuid2",()=>ri,"date",()=>rD,"datetime",()=>rk,"domain",()=>rC,"duration",()=>ru,"e164",()=>rN,"email",()=>rm,"emoji",()=>rE,"extendedDuration",()=>rl,"guid",()=>rd,"hex",()=>rq,"hostname",()=>rI,"html5Email",()=>ry,"idnEmail",()=>rb,"integer",()=>rU,"ipv4",()=>rS,"ipv6",()=>rA,"ksuid",()=>ra,"lowercase",()=>rY,"md5_base64",()=>rZ,"md5_base64url",()=>rW,"md5_hex",()=>rH,"nanoid",()=>ro,"null",()=>rz,"number",()=>rj,"rfc5322Email",()=>rg,"sha1_base64",()=>rJ,"sha1_base64url",()=>rX,"sha1_hex",()=>rQ,"sha256_base64",()=>r1,"sha256_base64url",()=>r4,"sha256_hex",()=>r0,"sha384_base64",()=>r6,"sha384_base64url",()=>r3,"sha384_hex",()=>r2,"sha512_base64",()=>r8,"sha512_base64url",()=>r9,"sha512_hex",()=>r5,"string",()=>rM,"time",()=>rL,"ulid",()=>rn,"undefined",()=>rK,"unicodeEmail",()=>r_,"uppercase",()=>rF,"uuid",()=>rc,"uuid4",()=>rp,"uuid6",()=>rf,"uuid7",()=>rh,"xid",()=>rs],21131);let rr=/^[cC][^\s-]{8,}$/,ri=/^[0-9a-z]+$/,rn=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,rs=/^[0-9a-vA-V]{20}$/,ra=/^[A-Za-z0-9]{27}$/,ro=/^[a-zA-Z0-9_-]{21}$/,ru=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,rl=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,rd=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,rc=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,rp=rc(4),rf=rc(6),rh=rc(7),rm=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ry=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,rg=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r_=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,rb=r_,rv=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function rE(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let rS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,rT=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,rw=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rO=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,rR=/^[A-Za-z0-9_-]*$/,rI=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,rC=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,rN=/^\+(?:[0-9]){6,14}[0-9]$/,rP="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",rD=RegExp(`^${rP}$`);function rx(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function rL(e){return RegExp(`^${rx(e)}$`)}function rk(e){let t=rx({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let i=`${t}(?:${r.join("|")})`;return RegExp(`^${rP}T(?:${i})$`)}let rM=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},r$=/^-?\d+n?$/,rU=/^-?\d+$/,rj=/^-?\d+(?:\.\d+)?/,rB=/^(?:true|false)$/i,rz=/^null$/i,rK=/^undefined$/i,rY=/^[^A-Z]*$/,rF=/^[^a-z]*$/,rq=/^[0-9a-fA-F]*$/;function rV(e,t){return RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function rG(e){return RegExp(`^[A-Za-z0-9_-]{${e}}$`)}let rH=/^[0-9a-fA-F]{32}$/,rZ=rV(22,"=="),rW=rG(22),rQ=/^[0-9a-fA-F]{40}$/,rJ=rV(27,"="),rX=rG(27),r0=/^[0-9a-fA-F]{64}$/,r1=rV(43,"="),r4=rG(43),r2=/^[0-9a-fA-F]{96}$/,r6=rV(64,""),r3=rG(64),r5=/^[0-9a-fA-F]{128}$/,r8=rV(86,"=="),r9=rG(86),r7=eP("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),ie={number:"number",bigint:"bigint",object:"date"},it=eP("$ZodCheckLessThan",(e,t)=>{r7.init(e,t);let r=ie[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,i=(t.inclusive?r.maximum:r.exclusiveMaximum)??1/0;t.value<i&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value<=t.value:i.value<t.value)||i.issues.push({origin:r,code:"too_big",maximum:t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ir=eP("$ZodCheckGreaterThan",(e,t)=>{r7.init(e,t);let r=ie[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,i=(t.inclusive?r.minimum:r.exclusiveMinimum)??-1/0;t.value>i&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value>=t.value:i.value>t.value)||i.issues.push({origin:r,code:"too_small",minimum:t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ii=eP("$ZodCheckMultipleOf",(e,t)=>{r7.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0===eH(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),is=eP("$ZodCheckNumberFormat",(e,t)=>{r7.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),i=r?"int":"number",[n,s]=td[t.format];e._zod.onattach.push(e=>{let i=e._zod.bag;i.format=t.format,i.minimum=n,i.maximum=s,r&&(i.pattern=rU)}),e._zod.check=a=>{let o=a.value;if(r){if(!Number.isInteger(o))return void a.issues.push({expected:i,format:t.format,code:"invalid_type",continue:!1,input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?a.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!t.abort}):a.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,continue:!t.abort}))}o<n&&a.issues.push({origin:"number",input:o,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),o>s&&a.issues.push({origin:"number",input:o,code:"too_big",maximum:s,inst:e})}}),ia=eP("$ZodCheckBigIntFormat",(e,t)=>{r7.init(e,t);let[r,i]=tc[t.format];e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,n.minimum=r,n.maximum=i}),e._zod.check=n=>{let s=n.value;s<r&&n.issues.push({origin:"bigint",input:s,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),s>i&&n.issues.push({origin:"bigint",input:s,code:"too_big",maximum:i,inst:e})}}),io=eP("$ZodCheckMaxSize",(e,t)=>{var r;r7.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!eV(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let i=r.value;i.size<=t.maximum||r.issues.push({origin:tA(i),code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),iu=eP("$ZodCheckMinSize",(e,t)=>{var r;r7.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!eV(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let i=r.value;i.size>=t.minimum||r.issues.push({origin:tA(i),code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),il=eP("$ZodCheckSizeEquals",(e,t)=>{var r;r7.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!eV(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.size,r.maximum=t.size,r.size=t.size}),e._zod.check=r=>{let i=r.value,n=i.size;if(n===t.size)return;let s=n>t.size;r.issues.push({origin:tA(i),...s?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),id=eP("$ZodCheckMaxLength",(e,t)=>{var r;r7.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!eV(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??1/0;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let i=r.value;if(i.length<=t.maximum)return;let n=tT(i);r.issues.push({origin:n,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),ic=eP("$ZodCheckMinLength",(e,t)=>{var r;r7.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!eV(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??-1/0;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let i=r.value;if(i.length>=t.minimum)return;let n=tT(i);r.issues.push({origin:n,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),ip=eP("$ZodCheckLengthEquals",(e,t)=>{var r;r7.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!eV(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let i=r.value,n=i.length;if(n===t.length)return;let s=tT(i),a=n>t.length;r.issues.push({origin:s,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),ih=eP("$ZodCheckStringFormat",(e,t)=>{var r,i;r7.init(e,t),e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(i=e._zod).check??(i.check=()=>{})}),im=eP("$ZodCheckRegex",(e,t)=>{ih.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),iy=eP("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=rY),ih.init(e,t)}),ig=eP("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=rF),ih.init(e,t)}),i_=eP("$ZodCheckIncludes",(e,t)=>{r7.init(e,t);let r=tn(t.includes),i=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=i,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(i)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),ib=eP("$ZodCheckStartsWith",(e,t)=>{r7.init(e,t);let r=RegExp(`^${tn(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),iv=eP("$ZodCheckEndsWith",(e,t)=>{r7.init(e,t);let r=RegExp(`.*${tn(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}});function iE(e,t,r){e.issues.length&&t.issues.push(...tv(r,e.issues))}let iS=eP("$ZodCheckProperty",(e,t)=>{r7.init(e,t),e._zod.check=e=>{let r=t.schema._zod.run({value:e.value[t.property],issues:[]},{});if(r instanceof Promise)return r.then(r=>iE(r,e,t.property));iE(r,e,t.property)}}),iA=eP("$ZodCheckMimeType",(e,t)=>{r7.init(e,t);let r=new Set(t.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=t.mime}),e._zod.check=i=>{r.has(i.value.type)||i.issues.push({code:"invalid_value",values:t.mime,input:i.value.type,inst:e,continue:!t.abort})}}),iT=eP("$ZodCheckOverwrite",(e,t)=>{r7.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});e.s(["Doc",()=>iw],73911);class iw{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}e.s(["version",()=>iO],22824);let iO={major:4,minor:1,patch:12},iR=eP("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=iO;let i=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&i.unshift(e),i))for(let r of t._zod.onattach)r(e);if(0===i.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let i,n=tb(e);for(let s of t){if(s._zod.def.when){if(!s._zod.def.when(e))continue}else if(n)continue;let t=e.issues.length,a=s._zod.check(e);if(a instanceof Promise&&r?.async===!1)throw new ex;if(i||a instanceof Promise)i=(i??Promise.resolve()).then(async()=>{await a,e.issues.length!==t&&(n||(n=tb(e,t)))});else{if(e.issues.length===t)continue;n||(n=tb(e,t))}}return i?i.then(()=>e):e},r=(r,n,s)=>{if(tb(r))return r.aborted=!0,r;let a=t(n,i,s);if(a instanceof Promise){if(!1===s.async)throw new ex;return a.then(t=>e._zod.parse(t,s))}return e._zod.parse(a,s)};e._zod.run=(n,s)=>{if(s.skipChecks)return e._zod.parse(n,s);if("backward"===s.direction){let t=e._zod.parse({value:n.value,issues:[]},{...s,skipChecks:!0});return t instanceof Promise?t.then(e=>r(e,n,s)):r(t,n,s)}let a=e._zod.parse(n,s);if(a instanceof Promise){if(!1===s.async)throw new ex;return a.then(e=>t(e,i,s))}return t(a,i,s)}}e["~standard"]={validate:t=>{try{let r=tG(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return tZ(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),iI=eP("$ZodString",(e,t)=>{iR.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??rM(e._zod.bag),e._zod.parse=(r,i)=>{if(t.coerce)try{r.value=String(r.value)}catch(e){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),iC=eP("$ZodStringFormat",(e,t)=>{ih.init(e,t),iI.init(e,t)}),iN=eP("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=rd),iC.init(e,t)}),iP=eP("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=rc(e))}else t.pattern??(t.pattern=rc());iC.init(e,t)}),iD=eP("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=rm),iC.init(e,t)}),ix=eP("$ZodURL",(e,t)=>{iC.init(e,t),e._zod.check=r=>{try{let i=r.value.trim(),n=new URL(i);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(n.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:rI.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=n.href:r.value=i;return}catch(i){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),iL=eP("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=rE()),iC.init(e,t)}),ik=eP("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=ro),iC.init(e,t)}),iM=eP("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=rr),iC.init(e,t)}),i$=eP("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=ri),iC.init(e,t)}),iU=eP("$ZodULID",(e,t)=>{t.pattern??(t.pattern=rn),iC.init(e,t)}),ij=eP("$ZodXID",(e,t)=>{t.pattern??(t.pattern=rs),iC.init(e,t)}),iB=eP("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=ra),iC.init(e,t)}),iz=eP("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=rk(t)),iC.init(e,t)}),iK=eP("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=rD),iC.init(e,t)}),iY=eP("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=rL(t)),iC.init(e,t)}),iF=eP("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=ru),iC.init(e,t)}),iq=eP("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=rS),iC.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),iV=eP("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=rA),iC.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),iG=eP("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=rT),iC.init(e,t)}),iH=eP("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=rw),iC.init(e,t),e._zod.check=r=>{let i=r.value.split("/");try{if(2!==i.length)throw Error();let[e,t]=i;if(!t)throw Error();let r=Number(t);if(`${r}`!==t||r<0||r>128)throw Error();new URL(`http://[${e}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function iZ(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let iW=eP("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=rO),iC.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{iZ(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function iQ(e){if(!rR.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return iZ(t.padEnd(4*Math.ceil(t.length/4),"="))}let iJ=eP("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=rR),iC.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{iQ(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),iX=eP("$ZodE164",(e,t)=>{t.pattern??(t.pattern=rN),iC.init(e,t)});function i0(e,t=null){try{let r=e.split(".");if(3!==r.length)return!1;let[i]=r;if(!i)return!1;let n=JSON.parse(atob(i));if("typ"in n&&n?.typ!=="JWT"||!n.alg||t&&(!("alg"in n)||n.alg!==t))return!1;return!0}catch{return!1}}let i1=eP("$ZodJWT",(e,t)=>{iC.init(e,t),e._zod.check=r=>{i0(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),i4=eP("$ZodCustomStringFormat",(e,t)=>{iC.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),i2=eP("$ZodNumber",(e,t)=>{iR.init(e,t),e._zod.pattern=e._zod.bag.pattern??rj,e._zod.parse=(r,i)=>{if(t.coerce)try{r.value=Number(r.value)}catch(e){}let n=r.value;if("number"==typeof n&&!Number.isNaN(n)&&Number.isFinite(n))return r;let s="number"==typeof n?Number.isNaN(n)?"NaN":Number.isFinite(n)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:n,inst:e,...s?{received:s}:{}}),r}}),i6=eP("$ZodNumber",(e,t)=>{is.init(e,t),i2.init(e,t)}),i3=eP("$ZodBoolean",(e,t)=>{iR.init(e,t),e._zod.pattern=rB,e._zod.parse=(r,i)=>{if(t.coerce)try{r.value=!!r.value}catch(e){}let n=r.value;return"boolean"==typeof n||r.issues.push({expected:"boolean",code:"invalid_type",input:n,inst:e}),r}}),i5=eP("$ZodBigInt",(e,t)=>{iR.init(e,t),e._zod.pattern=r$,e._zod.parse=(r,i)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch(e){}return"bigint"==typeof r.value||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),i8=eP("$ZodBigInt",(e,t)=>{ia.init(e,t),i5.init(e,t)}),i9=eP("$ZodSymbol",(e,t)=>{iR.init(e,t),e._zod.parse=(t,r)=>{let i=t.value;return"symbol"==typeof i||t.issues.push({expected:"symbol",code:"invalid_type",input:i,inst:e}),t}}),i7=eP("$ZodUndefined",(e,t)=>{iR.init(e,t),e._zod.pattern=rK,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,r)=>{let i=t.value;return void 0===i||t.issues.push({expected:"undefined",code:"invalid_type",input:i,inst:e}),t}}),ne=eP("$ZodNull",(e,t)=>{iR.init(e,t),e._zod.pattern=rz,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{let i=t.value;return null===i||t.issues.push({expected:"null",code:"invalid_type",input:i,inst:e}),t}}),nt=eP("$ZodAny",(e,t)=>{iR.init(e,t),e._zod.parse=e=>e}),nr=eP("$ZodUnknown",(e,t)=>{iR.init(e,t),e._zod.parse=e=>e}),ni=eP("$ZodNever",(e,t)=>{iR.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),nn=eP("$ZodVoid",(e,t)=>{iR.init(e,t),e._zod.parse=(t,r)=>{let i=t.value;return void 0===i||t.issues.push({expected:"void",code:"invalid_type",input:i,inst:e}),t}}),ns=eP("$ZodDate",(e,t)=>{iR.init(e,t),e._zod.parse=(r,i)=>{if(t.coerce)try{r.value=new Date(r.value)}catch(e){}let n=r.value,s=n instanceof Date;return s&&!Number.isNaN(n.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:n,...s?{received:"Invalid Date"}:{},inst:e}),r}});function na(e,t,r){e.issues.length&&t.issues.push(...tv(r,e.issues)),t.value[r]=e.value}let no=eP("$ZodArray",(e,t)=>{iR.init(e,t),e._zod.parse=(r,i)=>{let n=r.value;if(!Array.isArray(n))return r.issues.push({expected:"array",code:"invalid_type",input:n,inst:e}),r;r.value=Array(n.length);let s=[];for(let e=0;e<n.length;e++){let a=n[e],o=t.element._zod.run({value:a,issues:[]},i);o instanceof Promise?s.push(o.then(t=>na(t,r,e))):na(o,r,e)}return s.length?Promise.all(s).then(()=>r):r}});function nu(e,t,r,i){e.issues.length&&t.issues.push(...tv(r,e.issues)),void 0===e.value?r in i&&(t.value[r]=void 0):t.value[r]=e.value}function nl(e){let t=Object.keys(e.shape);for(let r of t)if(!e.shape?.[r]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${r}": expected a Zod schema`);let r=tl(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function nd(e,t,r,i,n,s){let a=[],o=n.keySet,u=n.catchall._zod,l=u.def.type;for(let n of Object.keys(t)){if(o.has(n))continue;if("never"===l){a.push(n);continue}let s=u.run({value:t[n],issues:[]},i);s instanceof Promise?e.push(s.then(e=>nu(e,r,n,t))):nu(s,r,n,t)}return(a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:s}),e.length)?Promise.all(e).then(()=>r):r}let nc=eP("$ZodObject",(e,t)=>{let r;iR.init(e,t);let i=Object.getOwnPropertyDescriptor(t,"shape");if(!i?.get){let e=t.shape;Object.defineProperty(t,"shape",{get:()=>{let r={...e};return Object.defineProperty(t,"shape",{value:r}),r}})}let n=eq(()=>nl(t));eW(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let i=e[t]._zod;if(i.values)for(let e of(r[t]??(r[t]=new Set),i.values))r[t].add(e)}return r});let s=t.catchall;e._zod.parse=(t,i)=>{r??(r=n.value);let a=t.value;if(!e5(a))return t.issues.push({expected:"object",code:"invalid_type",input:a,inst:e}),t;t.value={};let o=[],u=r.shape;for(let e of r.keys){let r=u[e]._zod.run({value:a[e],issues:[]},i);r instanceof Promise?o.push(r.then(r=>nu(r,t,e,a))):nu(r,t,e,a)}return s?nd(o,a,t,i,n.value,e):o.length?Promise.all(o).then(()=>t):t}}),np=eP("$ZodObjectJIT",(e,t)=>{let r,i;nc.init(e,t);let n=e._zod.parse,s=eq(()=>nl(t)),a=!ek.jitless,o=a&&e8.value,u=t.catchall;e._zod.parse=(l,d)=>{i??(i=s.value);let c=l.value;return e5(c)?a&&o&&d?.async===!1&&!0!==d.jitless?(r||(r=(e=>{let t=new iw(["shape","payload","ctx"]),r=s.value,i=e=>{let t=e6(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let n=Object.create(null),a=0;for(let e of r.keys)n[e]=`key_${a++}`;for(let e of(t.write("const newResult = {};"),r.keys)){let r=n[e],s=e6(e);t.write(`const ${r} = ${i(e)};`),t.write(`
        if (${r}.issues.length) {
          payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${s}, ...iss.path] : [${s}]
          })));
        }
        
        
        if (${r}.value === undefined) {
          if (${s} in input) {
            newResult[${s}] = undefined;
          }
        } else {
          newResult[${s}] = ${r}.value;
        }
        
      `)}t.write("payload.value = newResult;"),t.write("return payload;");let o=t.compile();return(t,r)=>o(e,t,r)})(t.shape)),l=r(l,d),u)?nd([],c,l,d,i,e):l:n(l,d):(l.issues.push({expected:"object",code:"invalid_type",input:c,inst:e}),l)}});function nf(e,t,r,i){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;let n=e.filter(e=>!tb(e));return 1===n.length?(t.value=n[0].value,n[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>tS(e,i,eM())))}),t)}let nh=eP("$ZodUnion",(e,t)=>{iR.init(e,t),eW(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),eW(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),eW(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),eW(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>eG(e.source)).join("|")})$`)}});let r=1===t.options.length,i=t.options[0]._zod.run;e._zod.parse=(n,s)=>{if(r)return i(n,s);let a=!1,o=[];for(let e of t.options){let t=e._zod.run({value:n.value,issues:[]},s);if(t instanceof Promise)o.push(t),a=!0;else{if(0===t.issues.length)return t;o.push(t)}}return a?Promise.all(o).then(t=>nf(t,n,e,s)):nf(o,n,e,s)}}),nm=eP("$ZodDiscriminatedUnion",(e,t)=>{nh.init(e,t);let r=e._zod.parse;eW(e._zod,"propValues",()=>{let e={};for(let r of t.options){let i=r._zod.propValues;if(!i||0===Object.keys(i).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let[t,r]of Object.entries(i))for(let i of(e[t]||(e[t]=new Set),r))e[t].add(i)}return e});let i=eq(()=>{let e=t.options,r=new Map;for(let i of e){let e=i._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(let t of e){if(r.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,i)}}return r});e._zod.parse=(n,s)=>{let a=n.value;if(!e5(a))return n.issues.push({code:"invalid_type",expected:"object",input:a,inst:e}),n;let o=i.value.get(a?.[t.discriminator]);return o?o._zod.run(n,s):t.unionFallback?r(n,s):(n.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:a,path:[t.discriminator],inst:e}),n)}}),ny=eP("$ZodIntersection",(e,t)=>{iR.init(e,t),e._zod.parse=(e,r)=>{let i=e.value,n=t.left._zod.run({value:i,issues:[]},r),s=t.right._zod.run({value:i,issues:[]},r);return n instanceof Promise||s instanceof Promise?Promise.all([n,s]).then(([t,r])=>ng(e,t,r)):ng(e,n,s)}});function ng(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),tb(e))return e;let i=function e(t,r){if(t===r||t instanceof Date&&r instanceof Date&&+t==+r)return{valid:!0,data:t};if(e9(t)&&e9(r)){let i=Object.keys(r),n=Object.keys(t).filter(e=>-1!==i.indexOf(e)),s={...t,...r};for(let i of n){let n=e(t[i],r[i]);if(!n.valid)return{valid:!1,mergeErrorPath:[i,...n.mergeErrorPath]};s[i]=n.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return{valid:!1,mergeErrorPath:[]};let i=[];for(let n=0;n<t.length;n++){let s=e(t[n],r[n]);if(!s.valid)return{valid:!1,mergeErrorPath:[n,...s.mergeErrorPath]};i.push(s.data)}return{valid:!0,data:i}}return{valid:!1,mergeErrorPath:[]}}(t.value,r.value);if(!i.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}let n_=eP("$ZodTuple",(e,t)=>{iR.init(e,t);let r=t.items,i=r.length-[...r].reverse().findIndex(e=>"optional"!==e._zod.optin);e._zod.parse=(n,s)=>{let a=n.value;if(!Array.isArray(a))return n.issues.push({input:a,inst:e,expected:"tuple",code:"invalid_type"}),n;n.value=[];let o=[];if(!t.rest){let t=a.length>r.length,s=a.length<i-1;if(t||s)return n.issues.push({...t?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:a,inst:e,origin:"array"}),n}let u=-1;for(let e of r){if(++u>=a.length&&u>=i)continue;let t=e._zod.run({value:a[u],issues:[]},s);t instanceof Promise?o.push(t.then(e=>nb(e,n,u))):nb(t,n,u)}if(t.rest)for(let e of a.slice(r.length)){u++;let r=t.rest._zod.run({value:e,issues:[]},s);r instanceof Promise?o.push(r.then(e=>nb(e,n,u))):nb(r,n,u)}return o.length?Promise.all(o).then(()=>n):n}});function nb(e,t,r){e.issues.length&&t.issues.push(...tv(r,e.issues)),t.value[r]=e.value}let nv=eP("$ZodRecord",(e,t)=>{iR.init(e,t),e._zod.parse=(r,i)=>{let n=r.value;if(!e9(n))return r.issues.push({expected:"record",code:"invalid_type",input:n,inst:e}),r;let s=[];if(t.keyType._zod.values){let a,o=t.keyType._zod.values;for(let e of(r.value={},o))if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){let a=t.valueType._zod.run({value:n[e],issues:[]},i);a instanceof Promise?s.push(a.then(t=>{t.issues.length&&r.issues.push(...tv(e,t.issues)),r.value[e]=t.value})):(a.issues.length&&r.issues.push(...tv(e,a.issues)),r.value[e]=a.value)}for(let e in n)o.has(e)||(a=a??[]).push(e);a&&a.length>0&&r.issues.push({code:"unrecognized_keys",input:n,inst:e,keys:a})}else for(let a of(r.value={},Reflect.ownKeys(n))){if("__proto__"===a)continue;let o=t.keyType._zod.run({value:a,issues:[]},i);if(o instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(o.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:o.issues.map(e=>tS(e,i,eM())),input:a,path:[a],inst:e}),r.value[o.value]=o.value;continue}let u=t.valueType._zod.run({value:n[a],issues:[]},i);u instanceof Promise?s.push(u.then(e=>{e.issues.length&&r.issues.push(...tv(a,e.issues)),r.value[o.value]=e.value})):(u.issues.length&&r.issues.push(...tv(a,u.issues)),r.value[o.value]=u.value)}return s.length?Promise.all(s).then(()=>r):r}}),nE=eP("$ZodMap",(e,t)=>{iR.init(e,t),e._zod.parse=(r,i)=>{let n=r.value;if(!(n instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:n,inst:e}),r;let s=[];for(let[a,o]of(r.value=new Map,n)){let u=t.keyType._zod.run({value:a,issues:[]},i),l=t.valueType._zod.run({value:o,issues:[]},i);u instanceof Promise||l instanceof Promise?s.push(Promise.all([u,l]).then(([t,s])=>{nS(t,s,r,a,n,e,i)})):nS(u,l,r,a,n,e,i)}return s.length?Promise.all(s).then(()=>r):r}});function nS(e,t,r,i,n,s,a){e.issues.length&&(tr.has(typeof i)?r.issues.push(...tv(i,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:n,inst:s,issues:e.issues.map(e=>tS(e,a,eM()))})),t.issues.length&&(tr.has(typeof i)?r.issues.push(...tv(i,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:n,inst:s,key:i,issues:t.issues.map(e=>tS(e,a,eM()))})),r.value.set(e.value,t.value)}let nA=eP("$ZodSet",(e,t)=>{iR.init(e,t),e._zod.parse=(r,i)=>{let n=r.value;if(!(n instanceof Set))return r.issues.push({input:n,inst:e,expected:"set",code:"invalid_type"}),r;let s=[];for(let e of(r.value=new Set,n)){let n=t.valueType._zod.run({value:e,issues:[]},i);n instanceof Promise?s.push(n.then(e=>nT(e,r))):nT(n,r)}return s.length?Promise.all(s).then(()=>r):r}});function nT(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}let nw=eP("$ZodEnum",(e,t)=>{iR.init(e,t);let r=eK(t.entries),i=new Set(r);e._zod.values=i,e._zod.pattern=RegExp(`^(${r.filter(e=>tr.has(typeof e)).map(e=>"string"==typeof e?tn(e):e.toString()).join("|")})$`),e._zod.parse=(t,n)=>{let s=t.value;return i.has(s)||t.issues.push({code:"invalid_value",values:r,input:s,inst:e}),t}}),nO=eP("$ZodLiteral",(e,t)=>{if(iR.init(e,t),0===t.values.length)throw Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?tn(e):e?tn(e.toString()):String(e)).join("|")})$`),e._zod.parse=(r,i)=>{let n=r.value;return e._zod.values.has(n)||r.issues.push({code:"invalid_value",values:t.values,input:n,inst:e}),r}}),nR=eP("$ZodFile",(e,t)=>{iR.init(e,t),e._zod.parse=(t,r)=>{let i=t.value;return i instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:i,inst:e}),t}}),nI=eP("$ZodTransform",(e,t)=>{iR.init(e,t),e._zod.parse=(r,i)=>{if("backward"===i.direction)throw new eL(e.constructor.name);let n=t.transform(r.value,r);if(i.async)return(n instanceof Promise?n:Promise.resolve(n)).then(e=>(r.value=e,r));if(n instanceof Promise)throw new ex;return r.value=n,r}});function nC(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}let nN=eP("$ZodOptional",(e,t)=>{iR.init(e,t),e._zod.optin="optional",e._zod.optout="optional",eW(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),eW(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${eG(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>{if("optional"===t.innerType._zod.optin){let i=t.innerType._zod.run(e,r);return i instanceof Promise?i.then(t=>nC(t,e.value)):nC(i,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,r)}}),nP=eP("$ZodNullable",(e,t)=>{iR.init(e,t),eW(e._zod,"optin",()=>t.innerType._zod.optin),eW(e._zod,"optout",()=>t.innerType._zod.optout),eW(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${eG(e.source)}|null)$`):void 0}),eW(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),nD=eP("$ZodDefault",(e,t)=>{iR.init(e,t),e._zod.optin="optional",eW(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);if(void 0===e.value)return e.value=t.defaultValue,e;let i=t.innerType._zod.run(e,r);return i instanceof Promise?i.then(e=>nx(e,t)):nx(i,t)}});function nx(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let nL=eP("$ZodPrefault",(e,t)=>{iR.init(e,t),e._zod.optin="optional",eW(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>("backward"===r.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),nk=eP("$ZodNonOptional",(e,t)=>{iR.init(e,t),eW(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,i)=>{let n=t.innerType._zod.run(r,i);return n instanceof Promise?n.then(t=>nM(t,e)):nM(n,e)}});function nM(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let n$=eP("$ZodSuccess",(e,t)=>{iR.init(e,t),e._zod.parse=(e,r)=>{if("backward"===r.direction)throw new eL("ZodSuccess");let i=t.innerType._zod.run(e,r);return i instanceof Promise?i.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===i.issues.length,e)}}),nU=eP("$ZodCatch",(e,t)=>{iR.init(e,t),eW(e._zod,"optin",()=>t.innerType._zod.optin),eW(e._zod,"optout",()=>t.innerType._zod.optout),eW(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let i=t.innerType._zod.run(e,r);return i instanceof Promise?i.then(i=>(e.value=i.value,i.issues.length&&(e.value=t.catchValue({...e,error:{issues:i.issues.map(e=>tS(e,r,eM()))},input:e.value}),e.issues=[]),e)):(e.value=i.value,i.issues.length&&(e.value=t.catchValue({...e,error:{issues:i.issues.map(e=>tS(e,r,eM()))},input:e.value}),e.issues=[]),e)}}),nj=eP("$ZodNaN",(e,t)=>{iR.init(e,t),e._zod.parse=(t,r)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)}),nB=eP("$ZodPipe",(e,t)=>{iR.init(e,t),eW(e._zod,"values",()=>t.in._zod.values),eW(e._zod,"optin",()=>t.in._zod.optin),eW(e._zod,"optout",()=>t.out._zod.optout),eW(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("backward"===r.direction){let i=t.out._zod.run(e,r);return i instanceof Promise?i.then(e=>nz(e,t.in,r)):nz(i,t.in,r)}let i=t.in._zod.run(e,r);return i instanceof Promise?i.then(e=>nz(e,t.out,r)):nz(i,t.out,r)}});function nz(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}let nK=eP("$ZodCodec",(e,t)=>{iR.init(e,t),eW(e._zod,"values",()=>t.in._zod.values),eW(e._zod,"optin",()=>t.in._zod.optin),eW(e._zod,"optout",()=>t.out._zod.optout),eW(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("forward"===(r.direction||"forward")){let i=t.in._zod.run(e,r);return i instanceof Promise?i.then(e=>nY(e,t,r)):nY(i,t,r)}{let i=t.out._zod.run(e,r);return i instanceof Promise?i.then(e=>nY(e,t,r)):nY(i,t,r)}}});function nY(e,t,r){if(e.issues.length)return e.aborted=!0,e;if("forward"===(r.direction||"forward")){let i=t.transform(e.value,e);return i instanceof Promise?i.then(i=>nF(e,i,t.out,r)):nF(e,i,t.out,r)}{let i=t.reverseTransform(e.value,e);return i instanceof Promise?i.then(i=>nF(e,i,t.in,r)):nF(e,i,t.in,r)}}function nF(e,t,r,i){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},i)}let nq=eP("$ZodReadonly",(e,t)=>{iR.init(e,t),eW(e._zod,"propValues",()=>t.innerType._zod.propValues),eW(e._zod,"values",()=>t.innerType._zod.values),eW(e._zod,"optin",()=>t.innerType._zod.optin),eW(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let i=t.innerType._zod.run(e,r);return i instanceof Promise?i.then(nV):nV(i)}});function nV(e){return e.value=Object.freeze(e.value),e}let nG=eP("$ZodTemplateLiteral",(e,t)=>{iR.init(e,t);let r=[];for(let e of t.parts)if("object"==typeof e&&null!==e){if(!e._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);let t=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!t)throw Error(`Invalid template literal part: ${e._zod.traits}`);let i=+!!t.startsWith("^"),n=t.endsWith("$")?t.length-1:t.length;r.push(t.slice(i,n))}else if(null===e||ti.has(typeof e))r.push(tn(`${e}`));else throw Error(`Invalid template literal part: ${e}`);e._zod.pattern=RegExp(`^${r.join("")}$`),e._zod.parse=(r,i)=>("string"!=typeof r.value?r.issues.push({input:r.value,inst:e,expected:"template_literal",code:"invalid_type"}):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source})),r)}),nH=eP("$ZodFunction",(e,t)=>(iR.init(e,t),e._def=t,e._zod.def=t,e.implement=t=>{if("function"!=typeof t)throw Error("implement() must be called with a function");return function(...r){let i=Reflect.apply(t,this,e._def.input?tY(e._def.input,r):r);return e._def.output?tY(e._def.output,i):i}},e.implementAsync=t=>{if("function"!=typeof t)throw Error("implementAsync() must be called with a function");return async function(...r){let i=e._def.input?await tq(e._def.input,r):r,n=await Reflect.apply(t,this,i);return e._def.output?await tq(e._def.output,n):n}},e._zod.parse=(t,r)=>("function"!=typeof t.value?t.issues.push({code:"invalid_type",expected:"function",input:t.value,inst:e}):e._def.output&&"promise"===e._def.output._zod.def.type?t.value=e.implementAsync(t.value):t.value=e.implement(t.value),t),e.input=(...t)=>{let r=e.constructor;return new r(Array.isArray(t[0])?{type:"function",input:new n_({type:"tuple",items:t[0],rest:t[1]}),output:e._def.output}:{type:"function",input:t[0],output:e._def.output})},e.output=t=>new e.constructor({type:"function",input:e._def.input,output:t}),e)),nZ=eP("$ZodPromise",(e,t)=>{iR.init(e,t),e._zod.parse=(e,r)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},r))}),nW=eP("$ZodLazy",(e,t)=>{iR.init(e,t),eW(e._zod,"innerType",()=>t.getter()),eW(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),eW(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),eW(e._zod,"optin",()=>e._zod.innerType._zod.optin??void 0),eW(e._zod,"optout",()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(t,r)=>e._zod.innerType._zod.run(t,r)}),nQ=eP("$ZodCustom",(e,t)=>{r7.init(e,t),iR.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let i=r.value,n=t.fn(i);if(n instanceof Promise)return n.then(t=>nJ(t,r,i,e));nJ(n,r,i,e)}});function nJ(e,t,r,i){if(!e){let e={code:"custom",input:r,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(e.params=i._zod.def.params),t.issues.push(tw(e))}}function nX(){return{localeError:(()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:"  ISO",time:"  ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:"   IPv4",cidrv6:"   IPv6",base64:"  base64-encoded",base64url:"  base64url-encoded",json_string:"   JSON",e164:"   E.164",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return`  :   ${r.expected}    ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`  :   ${tu(r.values[0])}`;return`  :     : ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`   :    ${r.origin??""} ${t} ${r.maximum.toString()} ${i.unit??""}`;return`  :    ${r.origin??""} ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`  :   ${r.origin}   ${t} ${r.minimum.toString()} ${i.unit}`;return`  :   ${r.origin}   ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`  :     "${r.prefix}"`;if("ends_with"===r.format)return`  :     "${r.suffix}"`;if("includes"===r.format)return`  :    "${r.includes}"`;if("regex"===r.format)return`  :     ${r.pattern}`;return`${t[r.format]??r.format}  `;case"not_multiple_of":return`  :      ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""} ${r.keys.length>1?"":""}: ${eY(r.keys," ")}`;case"invalid_key":return`    ${r.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`    ${r.origin}`}}})()}}function n0(){return{localeError:(()=>{let e={string:{unit:"simvol",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"element",verb:"olmaldr"},set:{unit:"element",verb:"olmaldr"}},t={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return r=>{switch(r.code){case"invalid_type":return`Yanl dyr: g\xf6zlniln ${r.expected}, daxil olan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Yanl dyr: g\xf6zlniln ${tu(r.values[0])}`;return`Yanl se\xe7im: aadaklardan biri olmaldr: ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${r.origin??"dyr"} ${t}${r.maximum.toString()} ${i.unit??"element"}`;return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${r.origin??"dyr"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`\xc7ox ki\xe7ik: g\xf6zlniln ${r.origin} ${t}${r.minimum.toString()} ${i.unit}`;return`\xc7ox ki\xe7ik: g\xf6zlniln ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Yanl mtn: "${r.prefix}" il balamaldr`;if("ends_with"===r.format)return`Yanl mtn: "${r.suffix}" il bitmlidir`;if("includes"===r.format)return`Yanl mtn: "${r.includes}" daxil olmaldr`;if("regex"===r.format)return`Yanl mtn: ${r.pattern} ablonuna uyun olmaldr`;return`Yanl ${t[r.format]??r.format}`;case"not_multiple_of":return`Yanl dd: ${r.divisor} il b\xf6l\xfcn biln olmaldr`;case"unrecognized_keys":return`Tannmayan a\xe7ar${r.keys.length>1?"lar":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`${r.origin} daxilind yanl a\xe7ar`;case"invalid_union":return"Yanl dyr";case"invalid_element":return`${r.origin} daxilind yanl dyr`;default:return`Yanl dyr`}}})()}}function n1(e,t,r,i){let n=Math.abs(e),s=n%10,a=n%100;return a>=11&&a<=19?i:1===s?t:s>=2&&s<=4?r:i}function n4(){return{localeError:(()=>{let e={string:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""}},t={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${tu(r.values[0])}`;return` :    ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i){let e=n1(Number(r.maximum),i.unit.one,i.unit.few,i.unit.many);return` : ,  ${r.origin??""}  ${i.verb} ${t}${r.maximum.toString()} ${e}`}return` : ,  ${r.origin??""}   ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i){let e=n1(Number(r.minimum),i.unit.one,i.unit.few,i.unit.many);return` : ,  ${r.origin}  ${i.verb} ${t}${r.minimum.toString()} ${e}`}return` : ,  ${r.origin}   ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :    "${r.prefix}"`;if("ends_with"===r.format)return` :    "${r.suffix}"`;if("includes"===r.format)return` :   "${r.includes}"`;if("regex"===r.format)return` :    ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` :    ${r.divisor}`;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin}`;default:return` `}}})()}}function n2(){return{localeError:(()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${tu(r.values[0])}`;return` :    ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return` :   ${r.origin??""}   ${t}${r.maximum.toString()} ${i.unit??""}`;return` :   ${r.origin??""}   ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return` :   ${r.origin}   ${t}${r.minimum.toString()} ${i.unit}`;return` :   ${r.origin}   ${t}${r.minimum.toString()}`}case"invalid_format":{if("starts_with"===r.format)return` :     "${r.prefix}"`;if("ends_with"===r.format)return` :     "${r.suffix}"`;if("includes"===r.format)return` :    "${r.includes}"`;if("regex"===r.format)return` :     ${r.pattern}`;let e="";return"emoji"===r.format&&(e=""),"datetime"===r.format&&(e=""),"date"===r.format&&(e=""),"time"===r.format&&(e=""),"duration"===r.format&&(e=""),`${e} ${t[r.format]??r.format}`}case"not_multiple_of":return` :      ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""} ${r.keys.length>1?"":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin}`;default:return` `}}})()}}function n6(){return{localeError:(()=>{let e={string:{unit:"carcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}},t={regex:"entrada",email:"adrea electrnica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adrea IPv4",ipv6:"adrea IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"};return r=>{switch(r.code){case"invalid_type":return`Tipus inv\xe0lid: s'esperava ${r.expected}, s'ha rebut ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Valor inv\xe0lid: s'esperava ${tu(r.values[0])}`;return`Opci\xf3 inv\xe0lida: s'esperava una de ${eY(r.values," o ")}`;case"too_big":{let t=r.inclusive?"com a mxim":"menys de",i=e[r.origin]??null;if(i)return`Massa gran: s'esperava que ${r.origin??"el valor"} contingu\xe9s ${t} ${r.maximum.toString()} ${i.unit??"elements"}`;return`Massa gran: s'esperava que ${r.origin??"el valor"} fos ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?"com a mnim":"ms de",i=e[r.origin]??null;if(i)return`Massa petit: s'esperava que ${r.origin} contingu\xe9s ${t} ${r.minimum.toString()} ${i.unit}`;return`Massa petit: s'esperava que ${r.origin} fos ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Format inv\xe0lid: ha de comen\xe7ar amb "${r.prefix}"`;if("ends_with"===r.format)return`Format inv\xe0lid: ha d'acabar amb "${r.suffix}"`;if("includes"===r.format)return`Format inv\xe0lid: ha d'incloure "${r.includes}"`;if("regex"===r.format)return`Format inv\xe0lid: ha de coincidir amb el patr\xf3 ${r.pattern}`;return`Format inv\xe0lid per a ${t[r.format]??r.format}`;case"not_multiple_of":return`N\xfamero inv\xe0lid: ha de ser m\xfaltiple de ${r.divisor}`;case"unrecognized_keys":return`Clau${r.keys.length>1?"s":""} no reconeguda${r.keys.length>1?"s":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`Clau inv\xe0lida a ${r.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Element inv\xe0lid a ${r.origin}`;default:return`Entrada inv\xe0lida`}}})()}}function n3(){return{localeError:(()=>{let e={string:{unit:"znak",verb:"mt"},file:{unit:"bajt",verb:"mt"},array:{unit:"prvk",verb:"mt"},set:{unit:"prvk",verb:"mt"}},t={regex:"regulrn vraz",email:"e-mailov adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a as ve formtu ISO",date:"datum ve formtu ISO",time:"as ve formtu ISO",duration:"doba trvn ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"etzec zakdovan ve formtu base64",base64url:"etzec zakdovan ve formtu base64url",json_string:"etzec ve formtu JSON",e164:"slo E.164",jwt:"JWT",template_literal:"vstup"};return r=>{switch(r.code){case"invalid_type":return`Neplatn\xfd vstup: oek\xe1v\xe1no ${r.expected}, obdreno ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"slo";case"string":return"etzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":if(Array.isArray(e))return"pole";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Neplatn\xfd vstup: oek\xe1v\xe1no ${tu(r.values[0])}`;return`Neplatn\xe1 monost: oek\xe1v\xe1na jedna z hodnot ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Hodnota je p\xedli velk\xe1: ${r.origin??"hodnota"} mus\xed m\xedt ${t}${r.maximum.toString()} ${i.unit??"prvk"}`;return`Hodnota je p\xedli velk\xe1: ${r.origin??"hodnota"} mus\xed b\xfdt ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Hodnota je p\xedli mal\xe1: ${r.origin??"hodnota"} mus\xed m\xedt ${t}${r.minimum.toString()} ${i.unit??"prvk"}`;return`Hodnota je p\xedli mal\xe1: ${r.origin??"hodnota"} mus\xed b\xfdt ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Neplatn\xfd etzec: mus\xed za\xednat na "${r.prefix}"`;if("ends_with"===r.format)return`Neplatn\xfd etzec: mus\xed konit na "${r.suffix}"`;if("includes"===r.format)return`Neplatn\xfd etzec: mus\xed obsahovat "${r.includes}"`;if("regex"===r.format)return`Neplatn\xfd etzec: mus\xed odpov\xeddat vzoru ${r.pattern}`;return`Neplatn\xfd form\xe1t ${t[r.format]??r.format}`;case"not_multiple_of":return`Neplatn\xe9 \xedslo: mus\xed b\xfdt n\xe1sobkem ${r.divisor}`;case"unrecognized_keys":return`Nezn\xe1m\xe9 kl\xede: ${eY(r.keys,", ")}`;case"invalid_key":return`Neplatn\xfd kl\xed v ${r.origin}`;case"invalid_union":return"Neplatn vstup";case"invalid_element":return`Neplatn\xe1 hodnota v ${r.origin}`;default:return`Neplatn\xfd vstup`}}})()}}function n5(){return{localeError:(()=>{let e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},t={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"st",file:"fil"},r={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslt",date:"ISO-dato",time:"ISO-klokkeslt",duration:"ISO-varighed",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return i=>{var n,s,a,o;switch(i.code){case"invalid_type":return`Ugyldigt input: forventede ${t[n=i.expected]??n}, fik ${t[s=(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tal";case"object":if(Array.isArray(e))return"liste";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name;return"objekt"}return t})(i.input)]??s}`;case"invalid_value":if(1===i.values.length)return`Ugyldig v\xe6rdi: forventede ${tu(i.values[0])}`;return`Ugyldigt valg: forventede en af f\xf8lgende ${eY(i.values,"|")}`;case"too_big":{let r=i.inclusive?"<=":"<",n=e[i.origin]??null,s=t[a=i.origin]??a;if(n)return`For stor: forventede ${s??"value"} ${n.verb} ${r} ${i.maximum.toString()} ${n.unit??"elementer"}`;return`For stor: forventede ${s??"value"} havde ${r} ${i.maximum.toString()}`}case"too_small":{let r=i.inclusive?">=":">",n=e[i.origin]??null,s=t[o=i.origin]??o;if(n)return`For lille: forventede ${s} ${n.verb} ${r} ${i.minimum.toString()} ${n.unit}`;return`For lille: forventede ${s} havde ${r} ${i.minimum.toString()}`}case"invalid_format":if("starts_with"===i.format)return`Ugyldig streng: skal starte med "${i.prefix}"`;if("ends_with"===i.format)return`Ugyldig streng: skal ende med "${i.suffix}"`;if("includes"===i.format)return`Ugyldig streng: skal indeholde "${i.includes}"`;if("regex"===i.format)return`Ugyldig streng: skal matche m\xf8nsteret ${i.pattern}`;return`Ugyldig ${r[i.format]??i.format}`;case"not_multiple_of":return`Ugyldigt tal: skal v\xe6re deleligt med ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"Ukendte ngler":"Ukendt ngle"}: ${eY(i.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8gle i ${i.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xe6rdi i ${i.origin}`;default:return"Ugyldigt input"}}})()}}function n8(){return{localeError:(()=>{let e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}},t={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return r=>{switch(r.code){case"invalid_type":return`Ung\xfcltige Eingabe: erwartet ${r.expected}, erhalten ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Zahl";case"object":if(Array.isArray(e))return"Array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ung\xfcltige Eingabe: erwartet ${tu(r.values[0])}`;return`Ung\xfcltige Option: erwartet eine von ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Zu gro\xdf: erwartet, dass ${r.origin??"Wert"} ${t}${r.maximum.toString()} ${i.unit??"Elemente"} hat`;return`Zu gro\xdf: erwartet, dass ${r.origin??"Wert"} ${t}${r.maximum.toString()} ist`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Zu klein: erwartet, dass ${r.origin} ${t}${r.minimum.toString()} ${i.unit} hat`;return`Zu klein: erwartet, dass ${r.origin} ${t}${r.minimum.toString()} ist`}case"invalid_format":if("starts_with"===r.format)return`Ung\xfcltiger String: muss mit "${r.prefix}" beginnen`;if("ends_with"===r.format)return`Ung\xfcltiger String: muss mit "${r.suffix}" enden`;if("includes"===r.format)return`Ung\xfcltiger String: muss "${r.includes}" enthalten`;if("regex"===r.format)return`Ung\xfcltiger String: muss dem Muster ${r.pattern} entsprechen`;return`Ung\xfcltig: ${t[r.format]??r.format}`;case"not_multiple_of":return`Ung\xfcltige Zahl: muss ein Vielfaches von ${r.divisor} sein`;case"unrecognized_keys":return`${r.keys.length>1?"Unbekannte Schlssel":"Unbekannter Schlssel"}: ${eY(r.keys,", ")}`;case"invalid_key":return`Ung\xfcltiger Schl\xfcssel in ${r.origin}`;case"invalid_union":return"Ungltige Eingabe";case"invalid_element":return`Ung\xfcltiger Wert in ${r.origin}`;default:return`Ung\xfcltige Eingabe`}}})()}}function n9(){return{localeError:(()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}},t={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return r=>{switch(r.code){case"invalid_type":return`Invalid input: expected ${r.expected}, received ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Invalid input: expected ${tu(r.values[0])}`;return`Invalid option: expected one of ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Too big: expected ${r.origin??"value"} to have ${t}${r.maximum.toString()} ${i.unit??"elements"}`;return`Too big: expected ${r.origin??"value"} to be ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Too small: expected ${r.origin} to have ${t}${r.minimum.toString()} ${i.unit}`;return`Too small: expected ${r.origin} to be ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Invalid string: must start with "${r.prefix}"`;if("ends_with"===r.format)return`Invalid string: must end with "${r.suffix}"`;if("includes"===r.format)return`Invalid string: must include "${r.includes}"`;if("regex"===r.format)return`Invalid string: must match pattern ${r.pattern}`;return`Invalid ${t[r.format]??r.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${r.divisor}`;case"unrecognized_keys":return`Unrecognized key${r.keys.length>1?"s":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`Invalid key in ${r.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${r.origin}`}}})()}}function n7(){return{localeError:(()=>{let e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}},t={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return r=>{switch(r.code){case"invalid_type":return`Nevalida enigo: atendiis ${r.expected}, riceviis ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombro";case"object":if(Array.isArray(e))return"tabelo";if(null===e)return"senvalora";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Nevalida enigo: atendiis ${tu(r.values[0])}`;return`Nevalida opcio: atendiis unu el ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Tro granda: atendiis ke ${r.origin??"valoro"} havu ${t}${r.maximum.toString()} ${i.unit??"elementojn"}`;return`Tro granda: atendiis ke ${r.origin??"valoro"} havu ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Tro malgranda: atendiis ke ${r.origin} havu ${t}${r.minimum.toString()} ${i.unit}`;return`Tro malgranda: atendiis ke ${r.origin} estu ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Nevalida karaktraro: devas komencii per "${r.prefix}"`;if("ends_with"===r.format)return`Nevalida karaktraro: devas finii per "${r.suffix}"`;if("includes"===r.format)return`Nevalida karaktraro: devas inkluzivi "${r.includes}"`;if("regex"===r.format)return`Nevalida karaktraro: devas kongrui kun la modelo ${r.pattern}`;return`Nevalida ${t[r.format]??r.format}`;case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${r.divisor}`;case"unrecognized_keys":return`Nekonata${r.keys.length>1?"j":""} losilo${r.keys.length>1?"j":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`Nevalida losilo en ${r.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${r.origin}`}}})()}}function se(){return{localeError:(()=>{let e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},t={string:"texto",number:"nmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"nmero grande",symbol:"smbolo",undefined:"indefinido",null:"nulo",function:"funcin",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeracin",union:"unin",literal:"literal",promise:"promesa",void:"vaco",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(e){return t[e]??e}let i={regex:"entrada",email:"direccin de correo electrnico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duracin ISO",ipv4:"direccin IPv4",ipv6:"direccin IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"};return t=>{switch(t.code){case"invalid_type":return`Entrada inv\xe1lida: se esperaba ${r(t.expected)}, recibido ${r((e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype)return e.constructor.name;return"object"}return t})(t.input))}`;case"invalid_value":if(1===t.values.length)return`Entrada inv\xe1lida: se esperaba ${tu(t.values[0])}`;return`Opci\xf3n inv\xe1lida: se esperaba una de ${eY(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",n=e[t.origin]??null,s=r(t.origin);if(n)return`Demasiado grande: se esperaba que ${s??"valor"} tuviera ${i}${t.maximum.toString()} ${n.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${s??"valor"} fuera ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",n=e[t.origin]??null,s=r(t.origin);if(n)return`Demasiado peque\xf1o: se esperaba que ${s} tuviera ${i}${t.minimum.toString()} ${n.unit}`;return`Demasiado peque\xf1o: se esperaba que ${s} fuera ${i}${t.minimum.toString()}`}case"invalid_format":if("starts_with"===t.format)return`Cadena inv\xe1lida: debe comenzar con "${t.prefix}"`;if("ends_with"===t.format)return`Cadena inv\xe1lida: debe terminar en "${t.suffix}"`;if("includes"===t.format)return`Cadena inv\xe1lida: debe incluir "${t.includes}"`;if("regex"===t.format)return`Cadena inv\xe1lida: debe coincidir con el patr\xf3n ${t.pattern}`;return`Inv\xe1lido ${i[t.format]??t.format}`;case"not_multiple_of":return`N\xfamero inv\xe1lido: debe ser m\xfaltiplo de ${t.divisor}`;case"unrecognized_keys":return`Llave${t.keys.length>1?"s":""} desconocida${t.keys.length>1?"s":""}: ${eY(t.keys,", ")}`;case"invalid_key":return`Llave inv\xe1lida en ${r(t.origin)}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor inv\xe1lido en ${r(t.origin)}`;default:return`Entrada inv\xe1lida`}}})()}}function st(){return{localeError:(()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ",date:" ",time:" ",duration:"  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return` :  ${r.expected}  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}  `;case"invalid_value":if(1===r.values.length)return` :  ${tu(r.values[0])} `;return` :    ${eY(r.values,"|")} `;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return` : ${r.origin??""}  ${t}${r.maximum.toString()} ${i.unit??""} `;return` : ${r.origin??""}  ${t}${r.maximum.toString()} `}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return` : ${r.origin}  ${t}${r.minimum.toString()} ${i.unit} `;return` : ${r.origin}  ${t}${r.minimum.toString()} `}case"invalid_format":if("starts_with"===r.format)return` :   "${r.prefix}"  `;if("ends_with"===r.format)return` :   "${r.suffix}"  `;if("includes"===r.format)return` :   "${r.includes}" `;if("regex"===r.format)return` :    ${r.pattern}   `;return`${t[r.format]??r.format} `;case"not_multiple_of":return` :   ${r.divisor} `;case"unrecognized_keys":return`${r.keys.length>1?"":""} : ${eY(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":default:return` `;case"invalid_element":return`   ${r.origin}`}}})()}}function sr(){return{localeError:(()=>{let e={string:{unit:"merkki",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"pivmrn"}},t={regex:"snnllinen lauseke",email:"shkpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-pivmr",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return r=>{switch(r.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${r.expected}, oli ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Virheellinen sy\xf6te: t\xe4ytyy olla ${tu(r.values[0])}`;return`Virheellinen valinta: t\xe4ytyy olla yksi seuraavista: ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Liian suuri: ${i.subject} t\xe4ytyy olla ${t}${r.maximum.toString()} ${i.unit}`.trim();return`Liian suuri: arvon t\xe4ytyy olla ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Liian pieni: ${i.subject} t\xe4ytyy olla ${t}${r.minimum.toString()} ${i.unit}`.trim();return`Liian pieni: arvon t\xe4ytyy olla ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy alkaa "${r.prefix}"`;if("ends_with"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy loppua "${r.suffix}"`;if("includes"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy sis\xe4lt\xe4\xe4 "${r.includes}"`;if("regex"===r.format)return`Virheellinen sy\xf6te: t\xe4ytyy vastata s\xe4\xe4nn\xf6llist\xe4 lauseketta ${r.pattern}`;return`Virheellinen ${t[r.format]??r.format}`;case"not_multiple_of":return`Virheellinen luku: t\xe4ytyy olla luvun ${r.divisor} monikerta`;case"unrecognized_keys":return`${r.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${eY(r.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return`Virheellinen sy\xf6te`}}})()}}function si(){return{localeError:(()=>{let e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}},t={regex:"entre",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"};return r=>{switch(r.code){case"invalid_type":return`Entr\xe9e invalide : ${r.expected} attendu, ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombre";case"object":if(Array.isArray(e))return"tableau";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)} re\xe7u`;case"invalid_value":if(1===r.values.length)return`Entr\xe9e invalide : ${tu(r.values[0])} attendu`;return`Option invalide : une valeur parmi ${eY(r.values,"|")} attendue`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Trop grand : ${r.origin??"valeur"} doit ${i.verb} ${t}${r.maximum.toString()} ${i.unit??"lment(s)"}`;return`Trop grand : ${r.origin??"valeur"} doit \xeatre ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Trop petit : ${r.origin} doit ${i.verb} ${t}${r.minimum.toString()} ${i.unit}`;return`Trop petit : ${r.origin} doit \xeatre ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Cha\xeene invalide : doit commencer par "${r.prefix}"`;if("ends_with"===r.format)return`Cha\xeene invalide : doit se terminer par "${r.suffix}"`;if("includes"===r.format)return`Cha\xeene invalide : doit inclure "${r.includes}"`;if("regex"===r.format)return`Cha\xeene invalide : doit correspondre au mod\xe8le ${r.pattern}`;return`${t[r.format]??r.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${r.divisor}`;case"unrecognized_keys":return`Cl\xe9${r.keys.length>1?"s":""} non reconnue${r.keys.length>1?"s":""} : ${eY(r.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${r.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${r.origin}`;default:return`Entr\xe9e invalide`}}})()}}function sn(){return{localeError:(()=>{let e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}},t={regex:"entre",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"};return r=>{switch(r.code){case"invalid_type":return`Entr\xe9e invalide : attendu ${r.expected}, re\xe7u ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Entr\xe9e invalide : attendu ${tu(r.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"":"<",i=e[r.origin]??null;if(i)return`Trop grand : attendu que ${r.origin??"la valeur"} ait ${t}${r.maximum.toString()} ${i.unit}`;return`Trop grand : attendu que ${r.origin??"la valeur"} soit ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?"":">",i=e[r.origin]??null;if(i)return`Trop petit : attendu que ${r.origin} ait ${t}${r.minimum.toString()} ${i.unit}`;return`Trop petit : attendu que ${r.origin} soit ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Cha\xeene invalide : doit commencer par "${r.prefix}"`;if("ends_with"===r.format)return`Cha\xeene invalide : doit se terminer par "${r.suffix}"`;if("includes"===r.format)return`Cha\xeene invalide : doit inclure "${r.includes}"`;if("regex"===r.format)return`Cha\xeene invalide : doit correspondre au motif ${r.pattern}`;return`${t[r.format]??r.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${r.divisor}`;case"unrecognized_keys":return`Cl\xe9${r.keys.length>1?"s":""} non reconnue${r.keys.length>1?"s":""} : ${eY(r.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${r.origin}`;case"invalid_union":return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${r.origin}`;default:return`Entr\xe9e invalide`}}})()}}function ss(){return{localeError:(()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:" ",url:" ",emoji:"'",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"  64",base64url:"  64  ",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return`  :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`  :  ${tu(r.values[0])}`;return`  :     ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return` : ${r.origin??"value"}   ${t}${r.maximum.toString()} ${i.unit??"elements"}`;return` : ${r.origin??"value"}   ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return` : ${r.origin}   ${t}${r.minimum.toString()} ${i.unit}`;return` : ${r.origin}   ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`  :   "${r.prefix}"`;if("ends_with"===r.format)return`  :    "${r.suffix}"`;if("includes"===r.format)return`  :   "${r.includes}"`;if("regex"===r.format)return`  :    ${r.pattern}`;return`${t[r.format]??r.format}  `;case"not_multiple_of":return`  :     ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""}  ${r.keys.length>1?"":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${r.origin}`;default:return`  `}}})()}}function sa(){return{localeError:(()=>{let e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}},t={regex:"bemenet",email:"email cm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO idblyeg",date:"ISO dtum",time:"ISO id",duration:"ISO idintervallum",ipv4:"IPv4 cm",ipv6:"IPv6 cm",cidrv4:"IPv4 tartomny",cidrv6:"IPv6 tartomny",base64:"base64-kdolt string",base64url:"base64url-kdolt string",json_string:"JSON string",e164:"E.164 szm",jwt:"JWT",template_literal:"bemenet"};return r=>{switch(r.code){case"invalid_type":return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${r.expected}, a kapott \xe9rt\xe9k ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"szm";case"object":if(Array.isArray(e))return"tmb";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${tu(r.values[0])}`;return`\xc9rv\xe9nytelen opci\xf3: valamelyik \xe9rt\xe9k v\xe1rt ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`T\xfal nagy: ${r.origin??"rtk"} m\xe9rete t\xfal nagy ${t}${r.maximum.toString()} ${i.unit??"elem"}`;return`T\xfal nagy: a bemeneti \xe9rt\xe9k ${r.origin??"rtk"} t\xfal nagy: ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${r.origin} m\xe9rete t\xfal kicsi ${t}${r.minimum.toString()} ${i.unit}`;return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${r.origin} t\xfal kicsi ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`\xc9rv\xe9nytelen string: "${r.prefix}" \xe9rt\xe9kkel kell kezddnie`;if("ends_with"===r.format)return`\xc9rv\xe9nytelen string: "${r.suffix}" \xe9rt\xe9kkel kell v\xe9gzdnie`;if("includes"===r.format)return`\xc9rv\xe9nytelen string: "${r.includes}" \xe9rt\xe9ket kell tartalmaznia`;if("regex"===r.format)return`\xc9rv\xe9nytelen string: ${r.pattern} mint\xe1nak kell megfelelnie`;return`\xc9rv\xe9nytelen ${t[r.format]??r.format}`;case"not_multiple_of":return`\xc9rv\xe9nytelen sz\xe1m: ${r.divisor} t\xf6bbsz\xf6r\xf6s\xe9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${r.keys.length>1?"s":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`\xc9rv\xe9nytelen kulcs ${r.origin}`;case"invalid_union":return"rvnytelen bemenet";case"invalid_element":return`\xc9rv\xe9nytelen \xe9rt\xe9k: ${r.origin}`;default:return`\xc9rv\xe9nytelen bemenet`}}})()}}function so(){return{localeError:(()=>{let e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}},t={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return r=>{switch(r.code){case"invalid_type":return`Input tidak valid: diharapkan ${r.expected}, diterima ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Input tidak valid: diharapkan ${tu(r.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Terlalu besar: diharapkan ${r.origin??"value"} memiliki ${t}${r.maximum.toString()} ${i.unit??"elemen"}`;return`Terlalu besar: diharapkan ${r.origin??"value"} menjadi ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Terlalu kecil: diharapkan ${r.origin} memiliki ${t}${r.minimum.toString()} ${i.unit}`;return`Terlalu kecil: diharapkan ${r.origin} menjadi ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`String tidak valid: harus dimulai dengan "${r.prefix}"`;if("ends_with"===r.format)return`String tidak valid: harus berakhir dengan "${r.suffix}"`;if("includes"===r.format)return`String tidak valid: harus menyertakan "${r.includes}"`;if("regex"===r.format)return`String tidak valid: harus sesuai pola ${r.pattern}`;return`${t[r.format]??r.format} tidak valid`;case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${r.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${r.keys.length>1?"s":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${r.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${r.origin}`}}})()}}function su(){return{localeError:(()=>{let e={string:{unit:"stafi",verb:"a hafa"},file:{unit:"bti",verb:"a hafa"},array:{unit:"hluti",verb:"a hafa"},set:{unit:"hluti",verb:"a hafa"}},t={regex:"gildi",email:"netfang",url:"vefsl",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og tmi",date:"ISO dagsetning",time:"ISO tmi",duration:"ISO tmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 tlugildi",jwt:"JWT",template_literal:"gildi"};return r=>{switch(r.code){case"invalid_type":return`Rangt gildi: \xde\xfa sl\xf3st inn ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmer";case"object":if(Array.isArray(e))return"fylki";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)} \xfear sem \xe1 a\xf0 vera ${r.expected}`;case"invalid_value":if(1===r.values.length)return`Rangt gildi: gert r\xe1\xf0 fyrir ${tu(r.values[0])}`;return`\xd3gilt val: m\xe1 vera eitt af eftirfarandi ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin??"gildi"} hafi ${t}${r.maximum.toString()} ${i.unit??"hluti"}`;return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin??"gildi"} s\xe9 ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin} hafi ${t}${r.minimum.toString()} ${i.unit}`;return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${r.origin} s\xe9 ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 byrja \xe1 "${r.prefix}"`;if("ends_with"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 enda \xe1 "${r.suffix}"`;if("includes"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 innihalda "${r.includes}"`;if("regex"===r.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 fylgja mynstri ${r.pattern}`;return`Rangt ${t[r.format]??r.format}`;case"not_multiple_of":return`R\xf6ng tala: ver\xf0ur a\xf0 vera margfeldi af ${r.divisor}`;case"unrecognized_keys":return`\xd3\xfeekkt ${r.keys.length>1?"ir lyklar":"ur lykill"}: ${eY(r.keys,", ")}`;case"invalid_key":return`Rangur lykill \xed ${r.origin}`;case"invalid_union":default:return"Rangt gildi";case"invalid_element":return`Rangt gildi \xed ${r.origin}`}}})()}}function sl(){return{localeError:(()=>{let e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}},t={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return r=>{switch(r.code){case"invalid_type":return`Input non valido: atteso ${r.expected}, ricevuto ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numero";case"object":if(Array.isArray(e))return"vettore";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Input non valido: atteso ${tu(r.values[0])}`;return`Opzione non valida: atteso uno tra ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Troppo grande: ${r.origin??"valore"} deve avere ${t}${r.maximum.toString()} ${i.unit??"elementi"}`;return`Troppo grande: ${r.origin??"valore"} deve essere ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Troppo piccolo: ${r.origin} deve avere ${t}${r.minimum.toString()} ${i.unit}`;return`Troppo piccolo: ${r.origin} deve essere ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Stringa non valida: deve iniziare con "${r.prefix}"`;if("ends_with"===r.format)return`Stringa non valida: deve terminare con "${r.suffix}"`;if("includes"===r.format)return`Stringa non valida: deve includere "${r.includes}"`;if("regex"===r.format)return`Stringa non valida: deve corrispondere al pattern ${r.pattern}`;return`Invalid ${t[r.format]??r.format}`;case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${r.divisor}`;case"unrecognized_keys":return`Chiav${r.keys.length>1?"i":"e"} non riconosciut${r.keys.length>1?"e":"a"}: ${eY(r.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${r.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${r.origin}`}}})()}}function sd(){return{localeError:(()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return`: ${r.expected}${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`: ${tu(r.values[0])}`;return`: ${eY(r.values,"")}`;case"too_big":{let t=r.inclusive?"":"",i=e[r.origin]??null;if(i)return`: ${r.origin??""}${r.maximum.toString()}${i.unit??""}${t}`;return`: ${r.origin??""}${r.maximum.toString()}${t}`}case"too_small":{let t=r.inclusive?"":"",i=e[r.origin]??null;if(i)return`: ${r.origin}${r.minimum.toString()}${i.unit}${t}`;return`: ${r.origin}${r.minimum.toString()}${t}`}case"invalid_format":if("starts_with"===r.format)return`: "${r.prefix}"`;if("ends_with"===r.format)return`: "${r.suffix}"`;if("includes"===r.format)return`: "${r.includes}"`;if("regex"===r.format)return`: ${r.pattern}`;return`${t[r.format]??r.format}`;case"not_multiple_of":return`: ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""}: ${eY(r.keys,"")}`;case"invalid_key":return`${r.origin}`;case"invalid_union":return"";case"invalid_element":return`${r.origin}`;default:return``}}})()}}function sc(){return{localeError:(()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:"- ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"-",date:"",time:"",duration:"",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return({string:"",boolean:"",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:""})[t]??t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${tu(r.values[0])}`;return` :  - ${eY(r.values,"|")}-`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return` :  ${r.origin??""} ${i.verb} ${t}${r.maximum.toString()} ${i.unit}`;return` :  ${r.origin??""}  ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return` :  ${r.origin} ${i.verb} ${t}${r.minimum.toString()} ${i.unit}`;return` :  ${r.origin}  ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :   "${r.prefix}"-`;if("ends_with"===r.format)return` :   "${r.suffix}"-`;if("includes"===r.format)return` :   "${r.includes}"-`;if("regex"===r.format)return` :    ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` :   ${r.divisor}- `;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`  ${r.origin}-`;case"invalid_union":return" ";case"invalid_element":return`  ${r.origin}-`;default:return` `}}})()}}function sp(){return{localeError:(()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:" base64",base64url:" base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return`  ${r.expected}  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?" (NaN)":"";case"object":if(Array.isArray(e))return" (Array)";if(null===e)return" (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`  ${tu(r.values[0])}`;return`  ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`  ${r.origin??""} ${t} ${r.maximum.toString()} ${i.unit??""}`;return`  ${r.origin??""} ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`  ${r.origin} ${t} ${r.minimum.toString()} ${i.unit}`;return`  ${r.origin} ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`  "${r.prefix}"`;if("ends_with"===r.format)return`  "${r.suffix}"`;if("includes"===r.format)return`  "${r.includes}"`;if("regex"===r.format)return`  ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return`  ${r.divisor}`;case"unrecognized_keys":return` ${eY(r.keys,", ")}`;case"invalid_key":return` ${r.origin}`;case"invalid_union":default:return``;case"invalid_element":return` ${r.origin}`}}})()}}function sf(){return sp()}function sh(){return{localeError:(()=>{let e={string:{unit:"",verb:"to have"},file:{unit:"",verb:"to have"},array:{unit:"",verb:"to have"},set:{unit:"",verb:"to have"}},t={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return` :   ${r.expected},   ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${tu(r.values[0])}  `;return` : ${eY(r.values," ")}   `;case"too_big":{let t=r.inclusive?"":"",i=""===t?" ":" ",n=e[r.origin]??null,s=n?.unit??"";if(n)return`${r.origin??""}  : ${r.maximum.toString()}${s} ${t}${i}`;return`${r.origin??""}  : ${r.maximum.toString()} ${t}${i}`}case"too_small":{let t=r.inclusive?"":"",i=""===t?" ":" ",n=e[r.origin]??null,s=n?.unit??"";if(n)return`${r.origin??""}  : ${r.minimum.toString()}${s} ${t}${i}`;return`${r.origin??""}  : ${r.minimum.toString()} ${t}${i}`}case"invalid_format":if("starts_with"===r.format)return` : "${r.prefix}"()  `;if("ends_with"===r.format)return` : "${r.suffix}"()  `;if("includes"===r.format)return` : "${r.includes}"()  `;if("regex"===r.format)return` :  ${r.pattern}   `;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` : ${r.divisor}  `;case"unrecognized_keys":return`   : ${eY(r.keys,", ")}`;case"invalid_key":return` : ${r.origin}`;case"invalid_union":default:return` `;case"invalid_element":return` : ${r.origin}`}}})()}}e.s([],79113);let sm=(e,t)=>{switch(e){case"number":return Number.isNaN(t)?"NaN":"skaiius";case"bigint":return"sveikasis skaiius";case"string":return"eilut";case"boolean":return"login reikm";case"undefined":case"void":return"neapibrta reikm";case"function":return"funkcija";case"symbol":return"simbolis";case"object":if(void 0===t)return"neinomas objektas";if(null===t)return"nulin reikm";if(Array.isArray(t))return"masyvas";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name;return"objektas";case"null":return"nulin reikm"}return e},sy=e=>e.charAt(0).toUpperCase()+e.slice(1);function sg(e){let t=Math.abs(e),r=t%10,i=t%100;return i>=11&&i<=19||0===r?"many":1===r?"one":"few"}function s_(){return{localeError:(()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli"},verb:{smaller:{inclusive:"turi bti ne ilgesn kaip",notInclusive:"turi bti trumpesn kaip"},bigger:{inclusive:"turi bti ne trumpesn kaip",notInclusive:"turi bti ilgesn kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait"},verb:{smaller:{inclusive:"turi bti ne didesnis kaip",notInclusive:"turi bti maesnis kaip"},bigger:{inclusive:"turi bti ne maesnis kaip",notInclusive:"turi bti didesnis kaip"}}},array:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}},set:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}}};function t(t,r,i,n){let s=e[t]??null;return null===s?s:{unit:s.unit[r],verb:s.verb[n][i?"inclusive":"notInclusive"]}}let r={regex:"vestis",email:"el. pato adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 ukoduota eilut",base64url:"base64url ukoduota eilut",json_string:"JSON eilut",e164:"E.164 numeris",jwt:"JWT",template_literal:"vestis"};return e=>{switch(e.code){case"invalid_type":let i;return`Gautas tipas ${sm(typeof(i=e.input),i)}, o tiktasi - ${sm(e.expected)}`;case"invalid_value":if(1===e.values.length)return`Privalo bti ${tu(e.values[0])}`;return`Privalo bti vienas i ${eY(e.values,"|")} pasirinkim`;case"too_big":{let r=sm(e.origin),i=t(e.origin,sg(Number(e.maximum)),e.inclusive??!1,"smaller");if(i?.verb)return`${sy(r??e.origin??"reikm")} ${i.verb} ${e.maximum.toString()} ${i.unit??"element"}`;let n=e.inclusive?"ne didesnis kaip":"maesnis kaip";return`${sy(r??e.origin??"reikm")} turi bti ${n} ${e.maximum.toString()} ${i?.unit}`}case"too_small":{let r=sm(e.origin),i=t(e.origin,sg(Number(e.minimum)),e.inclusive??!1,"bigger");if(i?.verb)return`${sy(r??e.origin??"reikm")} ${i.verb} ${e.minimum.toString()} ${i.unit??"element"}`;let n=e.inclusive?"ne maesnis kaip":"didesnis kaip";return`${sy(r??e.origin??"reikm")} turi bti ${n} ${e.minimum.toString()} ${i?.unit}`}case"invalid_format":if("starts_with"===e.format)return`Eilut privalo prasidti "${e.prefix}"`;if("ends_with"===e.format)return`Eilut privalo pasibaigti "${e.suffix}"`;if("includes"===e.format)return`Eilut privalo traukti "${e.includes}"`;if("regex"===e.format)return`Eilut privalo atitikti ${e.pattern}`;return`Neteisingas ${r[e.format]??e.format}`;case"not_multiple_of":return`Skaiius privalo bti ${e.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpaint${e.keys.length>1?"i":"as"} rakt${e.keys.length>1?"ai":"as"}: ${eY(e.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":default:return"Klaidinga vestis";case"invalid_element":{let t=sm(e.origin);return`${sy(t??e.origin??"reikm")} turi klaiding vest`}}}})()}}function sb(){return{localeError:(()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:"  -",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return` :   ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Invalid input: expected ${tu(r.values[0])}`;return` :    ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return` :   ${r.origin??""}   ${t}${r.maximum.toString()} ${i.unit??""}`;return` :   ${r.origin??""}   ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return` :   ${r.origin}   ${t}${r.minimum.toString()} ${i.unit}`;return` :   ${r.origin}   ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :     "${r.prefix}"`;if("ends_with"===r.format)return` :     "${r.suffix}"`;if("includes"===r.format)return` :    "${r.includes}"`;if("regex"===r.format)return` :      ${r.pattern}`;return`Invalid ${t[r.format]??r.format}`;case"not_multiple_of":return` :      ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?" ":" "}: ${eY(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${r.origin}`;default:return` `}}})()}}function sv(){return{localeError:(()=>{let e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}},t={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return r=>{switch(r.code){case"invalid_type":return`Input tidak sah: dijangka ${r.expected}, diterima ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombor";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Input tidak sah: dijangka ${tu(r.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Terlalu besar: dijangka ${r.origin??"nilai"} ${i.verb} ${t}${r.maximum.toString()} ${i.unit??"elemen"}`;return`Terlalu besar: dijangka ${r.origin??"nilai"} adalah ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Terlalu kecil: dijangka ${r.origin} ${i.verb} ${t}${r.minimum.toString()} ${i.unit}`;return`Terlalu kecil: dijangka ${r.origin} adalah ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`String tidak sah: mesti bermula dengan "${r.prefix}"`;if("ends_with"===r.format)return`String tidak sah: mesti berakhir dengan "${r.suffix}"`;if("includes"===r.format)return`String tidak sah: mesti mengandungi "${r.includes}"`;if("regex"===r.format)return`String tidak sah: mesti sepadan dengan corak ${r.pattern}`;return`${t[r.format]??r.format} tidak sah`;case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${r.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${eY(r.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${r.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${r.origin}`}}})()}}function sE(){return{localeError:(()=>{let e={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}},t={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return r=>{switch(r.code){case"invalid_type":return`Ongeldige invoer: verwacht ${r.expected}, ontving ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"getal";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ongeldige invoer: verwacht ${tu(r.values[0])}`;return`Ongeldige optie: verwacht \xe9\xe9n van ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Te lang: verwacht dat ${r.origin??"waarde"} ${t}${r.maximum.toString()} ${i.unit??"elementen"} bevat`;return`Te lang: verwacht dat ${r.origin??"waarde"} ${t}${r.maximum.toString()} is`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Te kort: verwacht dat ${r.origin} ${t}${r.minimum.toString()} ${i.unit} bevat`;return`Te kort: verwacht dat ${r.origin} ${t}${r.minimum.toString()} is`}case"invalid_format":if("starts_with"===r.format)return`Ongeldige tekst: moet met "${r.prefix}" beginnen`;if("ends_with"===r.format)return`Ongeldige tekst: moet op "${r.suffix}" eindigen`;if("includes"===r.format)return`Ongeldige tekst: moet "${r.includes}" bevatten`;if("regex"===r.format)return`Ongeldige tekst: moet overeenkomen met patroon ${r.pattern}`;return`Ongeldig: ${t[r.format]??r.format}`;case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${r.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${r.keys.length>1?"s":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${r.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${r.origin}`}}})()}}function sS(){return{localeError:(()=>{let e={string:{unit:"tegn",verb:" ha"},file:{unit:"bytes",verb:" ha"},array:{unit:"elementer",verb:" inneholde"},set:{unit:"elementer",verb:" inneholde"}},t={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return r=>{switch(r.code){case"invalid_type":return`Ugyldig input: forventet ${r.expected}, fikk ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tall";case"object":if(Array.isArray(e))return"liste";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ugyldig verdi: forventet ${tu(r.values[0])}`;return`Ugyldig valg: forventet en av ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`For stor(t): forventet ${r.origin??"value"} til \xe5 ha ${t}${r.maximum.toString()} ${i.unit??"elementer"}`;return`For stor(t): forventet ${r.origin??"value"} til \xe5 ha ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`For lite(n): forventet ${r.origin} til \xe5 ha ${t}${r.minimum.toString()} ${i.unit}`;return`For lite(n): forventet ${r.origin} til \xe5 ha ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Ugyldig streng: m\xe5 starte med "${r.prefix}"`;if("ends_with"===r.format)return`Ugyldig streng: m\xe5 ende med "${r.suffix}"`;if("includes"===r.format)return`Ugyldig streng: m\xe5 inneholde "${r.includes}"`;if("regex"===r.format)return`Ugyldig streng: m\xe5 matche m\xf8nsteret ${r.pattern}`;return`Ugyldig ${t[r.format]??r.format}`;case"not_multiple_of":return`Ugyldig tall: m\xe5 v\xe6re et multiplum av ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"Ukjente nkler":"Ukjent nkkel"}: ${eY(r.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8kkel i ${r.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${r.origin}`}}})()}}function sA(){return{localeError:(()=>{let e={string:{unit:"harf",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"unsur",verb:"olmaldr"},set:{unit:"unsur",verb:"olmaldr"}},t={regex:"giren",email:"epostagh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengm",date:"ISO tarihi",time:"ISO zaman",duration:"ISO mddeti",ipv4:"IPv4 nin",ipv6:"IPv6 nin",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-ifreli metin",base64url:"base64url-ifreli metin",json_string:"JSON metin",e164:"E.164 says",jwt:"JWT",template_literal:"giren"};return r=>{switch(r.code){case"invalid_type":return`F\xe2sit giren: umulan ${r.expected}, alnan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numara";case"object":if(Array.isArray(e))return"saf";if(null===e)return"gayb";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`F\xe2sit giren: umulan ${tu(r.values[0])}`;return`F\xe2sit tercih: m\xfbteberler ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Fazla b\xfcy\xfck: ${r.origin??"value"}, ${t}${r.maximum.toString()} ${i.unit??"elements"} sahip olmalyd.`;return`Fazla b\xfcy\xfck: ${r.origin??"value"}, ${t}${r.maximum.toString()} olmalyd.`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Fazla k\xfc\xe7\xfck: ${r.origin}, ${t}${r.minimum.toString()} ${i.unit} sahip olmalyd.`;return`Fazla k\xfc\xe7\xfck: ${r.origin}, ${t}${r.minimum.toString()} olmalyd.`}case"invalid_format":if("starts_with"===r.format)return`F\xe2sit metin: "${r.prefix}" ile balamal.`;if("ends_with"===r.format)return`F\xe2sit metin: "${r.suffix}" ile bitmeli.`;if("includes"===r.format)return`F\xe2sit metin: "${r.includes}" ihtiv\xe2 etmeli.`;if("regex"===r.format)return`F\xe2sit metin: ${r.pattern} nakna uymal.`;return`F\xe2sit ${t[r.format]??r.format}`;case"not_multiple_of":return`F\xe2sit say: ${r.divisor} kat olmalyd.`;case"unrecognized_keys":return`Tannmayan anahtar ${r.keys.length>1?"s":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`${r.origin} i\xe7in tannmayan anahtar var.`;case"invalid_union":return"Giren tannamad.";case"invalid_element":return`${r.origin} i\xe7in tannmayan kymet var.`;default:return`Kymet tannamad.`}}})()}}function sT(){return{localeError:(()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"  ",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ",date:"",time:"",duration:"",ipv4:" IPv4 ",ipv6:" IPv6 ",cidrv4:" IPv4 ",cidrv6:" IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:" E.164 ",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return` :  ${r.expected} ,  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}  `;case"invalid_value":if(1===r.values.length)return` :  ${tu(r.values[0])} `;return` :    ${eY(r.values,"|")}  `;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return` : ${r.origin??""}  ${t}${r.maximum.toString()} ${i.unit??""} `;return` : ${r.origin??""}  ${t}${r.maximum.toString()} `}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return` : ${r.origin}  ${t}${r.minimum.toString()} ${i.unit} `;return` : ${r.origin}  ${t}${r.minimum.toString()} `}case"invalid_format":if("starts_with"===r.format)return` :   "${r.prefix}"   `;if("ends_with"===r.format)return` :   "${r.suffix}"    `;if("includes"===r.format)return` :  "${r.includes}" `;if("regex"===r.format)return` :   ${r.pattern}   `;return`${t[r.format]??r.format}  `;case"not_multiple_of":return` :   ${r.divisor}  `;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`   ${r.origin} `;case"invalid_union":default:return` `;case"invalid_element":return`   ${r.origin} `}}})()}}function sw(){return{localeError:(()=>{let e={string:{unit:"znakw",verb:"mie"},file:{unit:"bajtw",verb:"mie"},array:{unit:"elementw",verb:"mie"},set:{unit:"elementw",verb:"mie"}},t={regex:"wyraenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"cig znakw zakodowany w formacie base64",base64url:"cig znakw zakodowany w formacie base64url",json_string:"cig znakw w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejcie"};return r=>{switch(r.code){case"invalid_type":return`Nieprawidowe dane wejciowe: oczekiwano ${r.expected}, otrzymano ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"liczba";case"object":if(Array.isArray(e))return"tablica";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Nieprawidowe dane wejciowe: oczekiwano ${tu(r.values[0])}`;return`Nieprawidowa opcja: oczekiwano jednej z wartoci ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Za dua warto: oczekiwano, e ${r.origin??"warto"} bdzie mie ${t}${r.maximum.toString()} ${i.unit??"elementw"}`;return`Zbyt du(y/a/e): oczekiwano, e ${r.origin??"warto"} bdzie wynosi ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Za maa warto: oczekiwano, e ${r.origin??"warto"} bdzie mie ${t}${r.minimum.toString()} ${i.unit??"elementw"}`;return`Zbyt ma(y/a/e): oczekiwano, e ${r.origin??"warto"} bdzie wynosi ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Nieprawidowy cig znak\xf3w: musi zaczyna si od "${r.prefix}"`;if("ends_with"===r.format)return`Nieprawidowy cig znak\xf3w: musi koczy si na "${r.suffix}"`;if("includes"===r.format)return`Nieprawidowy cig znak\xf3w: musi zawiera "${r.includes}"`;if("regex"===r.format)return`Nieprawidowy cig znak\xf3w: musi odpowiada wzorcowi ${r.pattern}`;return`Nieprawidow(y/a/e) ${t[r.format]??r.format}`;case"not_multiple_of":return`Nieprawidowa liczba: musi by wielokrotnoci ${r.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${r.keys.length>1?"s":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`Nieprawidowy klucz w ${r.origin}`;case"invalid_union":return"Nieprawidowe dane wejciowe";case"invalid_element":return`Nieprawidowa warto w ${r.origin}`;default:return`Nieprawidowe dane wejciowe`}}})()}}function sO(){return{localeError:(()=>{let e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}},t={regex:"padro",email:"endereo de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"durao ISO",ipv4:"endereo IPv4",ipv6:"endereo IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"};return r=>{switch(r.code){case"invalid_type":return`Tipo inv\xe1lido: esperado ${r.expected}, recebido ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmero";case"object":if(Array.isArray(e))return"array";if(null===e)return"nulo";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Entrada inv\xe1lida: esperado ${tu(r.values[0])}`;return`Op\xe7\xe3o inv\xe1lida: esperada uma das ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Muito grande: esperado que ${r.origin??"valor"} tivesse ${t}${r.maximum.toString()} ${i.unit??"elementos"}`;return`Muito grande: esperado que ${r.origin??"valor"} fosse ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Muito pequeno: esperado que ${r.origin} tivesse ${t}${r.minimum.toString()} ${i.unit}`;return`Muito pequeno: esperado que ${r.origin} fosse ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Texto inv\xe1lido: deve come\xe7ar com "${r.prefix}"`;if("ends_with"===r.format)return`Texto inv\xe1lido: deve terminar com "${r.suffix}"`;if("includes"===r.format)return`Texto inv\xe1lido: deve incluir "${r.includes}"`;if("regex"===r.format)return`Texto inv\xe1lido: deve corresponder ao padr\xe3o ${r.pattern}`;return`${t[r.format]??r.format} inv\xe1lido`;case"not_multiple_of":return`N\xfamero inv\xe1lido: deve ser m\xfaltiplo de ${r.divisor}`;case"unrecognized_keys":return`Chave${r.keys.length>1?"s":""} desconhecida${r.keys.length>1?"s":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`Chave inv\xe1lida em ${r.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor inv\xe1lido em ${r.origin}`;default:return`Campo inv\xe1lido`}}})()}}function sR(e,t,r,i){let n=Math.abs(e),s=n%10,a=n%100;return a>=11&&a<=19?i:1===s?t:s>=2&&s<=4?r:i}function sI(){return{localeError:(()=>{let e={string:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""}},t={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${tu(r.values[0])}`;return` :    ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i){let e=sR(Number(r.maximum),i.unit.one,i.unit.few,i.unit.many);return`  : ,  ${r.origin??""}   ${t}${r.maximum.toString()} ${e}`}return`  : ,  ${r.origin??""}  ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i){let e=sR(Number(r.minimum),i.unit.one,i.unit.few,i.unit.many);return`  : ,  ${r.origin}   ${t}${r.minimum.toString()} ${e}`}return`  : ,  ${r.origin}  ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :    "${r.prefix}"`;if("ends_with"===r.format)return` :    "${r.suffix}"`;if("includes"===r.format)return` :   "${r.includes}"`;if("regex"===r.format)return` :    ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` :    ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"":""} ${r.keys.length>1?"":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${r.origin}`;default:return`  `}}})()}}function sC(){return{localeError:(()=>{let e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}},t={regex:"vnos",email:"e-potni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in as",date:"ISO datum",time:"ISO as",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 tevilka",jwt:"JWT",template_literal:"vnos"};return r=>{switch(r.code){case"invalid_type":return`Neveljaven vnos: priakovano ${r.expected}, prejeto ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tevilo";case"object":if(Array.isArray(e))return"tabela";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Neveljaven vnos: priakovano ${tu(r.values[0])}`;return`Neveljavna monost: priakovano eno izmed ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Preveliko: priakovano, da bo ${r.origin??"vrednost"} imelo ${t}${r.maximum.toString()} ${i.unit??"elementov"}`;return`Preveliko: priakovano, da bo ${r.origin??"vrednost"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Premajhno: priakovano, da bo ${r.origin} imelo ${t}${r.minimum.toString()} ${i.unit}`;return`Premajhno: priakovano, da bo ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Neveljaven niz: mora se zaeti z "${r.prefix}"`;if("ends_with"===r.format)return`Neveljaven niz: mora se konati z "${r.suffix}"`;if("includes"===r.format)return`Neveljaven niz: mora vsebovati "${r.includes}"`;if("regex"===r.format)return`Neveljaven niz: mora ustrezati vzorcu ${r.pattern}`;return`Neveljaven ${t[r.format]??r.format}`;case"not_multiple_of":return`Neveljavno tevilo: mora biti vekratnik ${r.divisor}`;case"unrecognized_keys":return`Neprepoznan${r.keys.length>1?"i kljui":" klju"}: ${eY(r.keys,", ")}`;case"invalid_key":return`Neveljaven klju v ${r.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${r.origin}`}}})()}}function sN(){return{localeError:(()=>{let e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehlla"},set:{unit:"objekt",verb:"att innehlla"}},t={regex:"reguljrt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad strng",base64url:"base64url-kodad strng",json_string:"JSON-strng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return r=>{switch(r.code){case"invalid_type":return`Ogiltig inmatning: f\xf6rv\xe4ntat ${r.expected}, fick ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"antal";case"object":if(Array.isArray(e))return"lista";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ogiltig inmatning: f\xf6rv\xe4ntat ${tu(r.values[0])}`;return`Ogiltigt val: f\xf6rv\xe4ntade en av ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`F\xf6r stor(t): f\xf6rv\xe4ntade ${r.origin??"vrdet"} att ha ${t}${r.maximum.toString()} ${i.unit??"element"}`;return`F\xf6r stor(t): f\xf6rv\xe4ntat ${r.origin??"vrdet"} att ha ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`F\xf6r lite(t): f\xf6rv\xe4ntade ${r.origin??"vrdet"} att ha ${t}${r.minimum.toString()} ${i.unit}`;return`F\xf6r lite(t): f\xf6rv\xe4ntade ${r.origin??"vrdet"} att ha ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Ogiltig str\xe4ng: m\xe5ste b\xf6rja med "${r.prefix}"`;if("ends_with"===r.format)return`Ogiltig str\xe4ng: m\xe5ste sluta med "${r.suffix}"`;if("includes"===r.format)return`Ogiltig str\xe4ng: m\xe5ste inneh\xe5lla "${r.includes}"`;if("regex"===r.format)return`Ogiltig str\xe4ng: m\xe5ste matcha m\xf6nstret "${r.pattern}"`;return`Ogiltig(t) ${t[r.format]??r.format}`;case"not_multiple_of":return`Ogiltigt tal: m\xe5ste vara en multipel av ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"Oknda nycklar":"Oknd nyckel"}: ${eY(r.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${r.origin??"vrdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xe4rde i ${r.origin??"vrdet"}`}}})()}}function sP(){return{localeError:(()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},t={regex:"",email:" ",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO  ",date:"ISO ",time:"ISO ",duration:"ISO  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:"input"};return r=>{switch(r.code){case"invalid_type":return` :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?" ":"";case"object":if(Array.isArray(e))return"";if(null===e)return"";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` :  ${tu(r.values[0])}`;return` :  ${eY(r.values,"|")}  `;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return` :  ${r.origin??""} ${t}${r.maximum.toString()} ${i.unit??""}   `;return` :  ${r.origin??""} ${t}${r.maximum.toString()}   `}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return` :  ${r.origin} ${t}${r.minimum.toString()} ${i.unit}   `;return` :  ${r.origin} ${t}${r.minimum.toString()}   `}case"invalid_format":if("starts_with"===r.format)return` : "${r.prefix}"   `;if("ends_with"===r.format)return` : "${r.suffix}"   `;if("includes"===r.format)return` : "${r.includes}"   `;if("regex"===r.format)return` : ${r.pattern}   `;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` : ${r.divisor}    `;case"unrecognized_keys":return`  ${r.keys.length>1?"":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`${r.origin}   `;case"invalid_union":return" ";case"invalid_element":return`${r.origin}   `;default:return` `}}})()}}function sD(){return{localeError:(()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:" ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IP  IPv4",cidrv6:" IP  IPv6",base64:" Base64",base64url:" Base64  URL",json_string:" JSON",e164:" (E.164)",jwt:" JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return`:  ${r.expected}  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?" (NaN)":"";case"object":if(Array.isArray(e))return" (Array)";if(null===e)return" (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`:  ${tu(r.values[0])}`;return`:  ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"":"",i=e[r.origin]??null;if(i)return`: ${r.origin??""} ${t} ${r.maximum.toString()} ${i.unit??""}`;return`: ${r.origin??""} ${t} ${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?"":"",i=e[r.origin]??null;if(i)return`: ${r.origin} ${t} ${r.minimum.toString()} ${i.unit}`;return`: ${r.origin} ${t} ${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`:  "${r.prefix}"`;if("ends_with"===r.format)return`:  "${r.suffix}"`;if("includes"===r.format)return`:  "${r.includes}" `;if("regex"===r.format)return`:  ${r.pattern}`;return`: ${t[r.format]??r.format}`;case"not_multiple_of":return`:  ${r.divisor} `;case"unrecognized_keys":return`: ${eY(r.keys,", ")}`;case"invalid_key":return` ${r.origin}`;case"invalid_union":return": ";case"invalid_element":return` ${r.origin}`;default:return``}}})()}}function sx(){return{localeError:(()=>{let e={string:{unit:"karakter",verb:"olmal"},file:{unit:"bayt",verb:"olmal"},array:{unit:"e",verb:"olmal"},set:{unit:"e",verb:"olmal"}},t={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO sre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral",cidrv6:"IPv6 aral",base64:"base64 ile ifrelenmi metin",base64url:"base64url ile ifrelenmi metin",json_string:"JSON dizesi",e164:"E.164 says",jwt:"JWT",template_literal:"ablon dizesi"};return r=>{switch(r.code){case"invalid_type":return`Ge\xe7ersiz deer: beklenen ${r.expected}, alnan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`Ge\xe7ersiz deer: beklenen ${tu(r.values[0])}`;return`Ge\xe7ersiz se\xe7enek: aadakilerden biri olmal: ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`\xc7ok b\xfcy\xfck: beklenen ${r.origin??"deer"} ${t}${r.maximum.toString()} ${i.unit??"e"}`;return`\xc7ok b\xfcy\xfck: beklenen ${r.origin??"deer"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`\xc7ok k\xfc\xe7\xfck: beklenen ${r.origin} ${t}${r.minimum.toString()} ${i.unit}`;return`\xc7ok k\xfc\xe7\xfck: beklenen ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Ge\xe7ersiz metin: "${r.prefix}" ile balamal`;if("ends_with"===r.format)return`Ge\xe7ersiz metin: "${r.suffix}" ile bitmeli`;if("includes"===r.format)return`Ge\xe7ersiz metin: "${r.includes}" i\xe7ermeli`;if("regex"===r.format)return`Ge\xe7ersiz metin: ${r.pattern} desenine uymal`;return`Ge\xe7ersiz ${t[r.format]??r.format}`;case"not_multiple_of":return`Ge\xe7ersiz say: ${r.divisor} ile tam b\xf6l\xfcnebilmeli`;case"unrecognized_keys":return`Tannmayan anahtar${r.keys.length>1?"lar":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`${r.origin} i\xe7inde ge\xe7ersiz anahtar`;case"invalid_union":return"Geersiz deer";case"invalid_element":return`${r.origin} i\xe7inde ge\xe7ersiz deer`;default:return`Ge\xe7ersiz deer`}}})()}}function sL(){return{localeError:(()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:" ",email:"  ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"   base64",base64url:"   base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:" "};return r=>{switch(r.code){case"invalid_type":return`  :  ${r.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`  :  ${tu(r.values[0])}`;return` :    ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return` : ,  ${r.origin??""} ${i.verb} ${t}${r.maximum.toString()} ${i.unit??""}`;return` : ,  ${r.origin??""}  ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return` : ,  ${r.origin} ${i.verb} ${t}${r.minimum.toString()} ${i.unit}`;return` : ,  ${r.origin}  ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` :    "${r.prefix}"`;if("ends_with"===r.format)return` :    "${r.suffix}"`;if("includes"===r.format)return` :   "${r.includes}"`;if("regex"===r.format)return` :    ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` :    ${r.divisor}`;case"unrecognized_keys":return` ${r.keys.length>1?"":""}: ${eY(r.keys,", ")}`;case"invalid_key":return`   ${r.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${r.origin}`;default:return`  `}}})()}}function sk(){return sL()}function sM(){return{localeError:(()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:" ",email:"  ",url:"  ",emoji:"",uuid:"   ",uuidv4:"     4",uuidv6:"     6",nanoid:"  ",guid:"   ",cuid:"   ",cuid2:"    2",ulid:"   ",xid:"  ",ksuid:"    ",datetime:"    ",date:"   ",time:"   ",duration:"   ",ipv4:"   4 ",ipv6:"   6 ",cidrv4:"   4 ",cidrv6:"   6 ",base64:" 64   ",base64url:" 64      ",json_string:"    ",e164:" 164 ",jwt:"  ",template_literal:" "};return r=>{switch(r.code){case"invalid_type":return`  : ${r.expected}   ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}  `;case"invalid_value":if(1===r.values.length)return`  : ${tu(r.values[0])}  `;return` : ${eY(r.values,"|")}     `;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return` : ${r.origin??""}  ${t}${r.maximum.toString()} ${i.unit??""}   `;return` : ${r.origin??""}  ${t}${r.maximum.toString()}   `}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return` : ${r.origin}  ${t}${r.minimum.toString()} ${i.unit}   `;return` : ${r.origin}  ${t}${r.minimum.toString()}   `}case"invalid_format":if("starts_with"===r.format)return` : "${r.prefix}"    `;if("ends_with"===r.format)return` : "${r.suffix}"    `;if("includes"===r.format)return` : "${r.includes}"   `;if("regex"===r.format)return` :  ${r.pattern}    `;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` : ${r.divisor}    `;case"unrecognized_keys":return`   ${r.keys.length>1?"":""}: ${eY(r.keys," ")}`;case"invalid_key":return`${r.origin}   `;case"invalid_union":return"  ";case"invalid_element":return`${r.origin}   `;default:return`  `}}})()}}function s$(){return{localeError:(()=>{let e={string:{unit:"k t",verb:"c"},file:{unit:"byte",verb:"c"},array:{unit:"phn t",verb:"c"},set:{unit:"phn t",verb:"c"}},t={regex:"u vo",email:"a ch email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngy gi ISO",date:"ngy ISO",time:"gi ISO",duration:"khong thi gian ISO",ipv4:"a ch IPv4",ipv6:"a ch IPv6",cidrv4:"di IPv4",cidrv6:"di IPv6",base64:"chui m ha base64",base64url:"chui m ha base64url",json_string:"chui JSON",e164:"s E.164",jwt:"JWT",template_literal:"u vo"};return r=>{switch(r.code){case"invalid_type":return`u v\xe0o kh\xf4ng hp l: mong i ${r.expected}, nhn c ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"s";case"object":if(Array.isArray(e))return"mng";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`u v\xe0o kh\xf4ng hp l: mong i ${tu(r.values[0])}`;return`T\xf9y chn kh\xf4ng hp l: mong i mt trong c\xe1c gi\xe1 tr ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`Qu\xe1 ln: mong i ${r.origin??"gi tr"} ${i.verb} ${t}${r.maximum.toString()} ${i.unit??"phn t"}`;return`Qu\xe1 ln: mong i ${r.origin??"gi tr"} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`Qu\xe1 nh: mong i ${r.origin} ${i.verb} ${t}${r.minimum.toString()} ${i.unit}`;return`Qu\xe1 nh: mong i ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return`Chui kh\xf4ng hp l: phi bt u bng "${r.prefix}"`;if("ends_with"===r.format)return`Chui kh\xf4ng hp l: phi kt th\xfac bng "${r.suffix}"`;if("includes"===r.format)return`Chui kh\xf4ng hp l: phi bao gm "${r.includes}"`;if("regex"===r.format)return`Chui kh\xf4ng hp l: phi khp vi mu ${r.pattern}`;return`${t[r.format]??r.format} kh\xf4ng hp l`;case"not_multiple_of":return`S kh\xf4ng hp l: phi l\xe0 bi s ca ${r.divisor}`;case"unrecognized_keys":return`Kh\xf3a kh\xf4ng c nhn dng: ${eY(r.keys,", ")}`;case"invalid_key":return`Kh\xf3a kh\xf4ng hp l trong ${r.origin}`;case"invalid_union":return"u vo khng hp l";case"invalid_element":return`Gi\xe1 tr kh\xf4ng hp l trong ${r.origin}`;default:return`u v\xe0o kh\xf4ng hp l`}}})()}}function sU(){return{localeError:(()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return` ${r.expected} ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"(NaN)":"";case"object":if(Array.isArray(e))return"";if(null===e)return"(null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` ${tu(r.values[0])}`;return` ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return` ${r.origin??""} ${t}${r.maximum.toString()} ${i.unit??""}`;return` ${r.origin??""} ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return` ${r.origin} ${t}${r.minimum.toString()} ${i.unit}`;return` ${r.origin} ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` "${r.prefix}" `;if("ends_with"===r.format)return` "${r.suffix}" `;if("includes"===r.format)return` "${r.includes}"`;if("regex"===r.format)return` ${r.pattern}`;return`${t[r.format]??r.format}`;case"not_multiple_of":return` ${r.divisor} `;case"unrecognized_keys":return`(key): ${eY(r.keys,", ")}`;case"invalid_key":return`${r.origin} (key)`;case"invalid_union":return"";case"invalid_element":return`${r.origin} (value)`;default:return``}}})()}}function sj(){return{localeError:(()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},t={regex:"",email:"",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64 ",base64url:"base64url ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return r=>{switch(r.code){case"invalid_type":return` ${r.expected} ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return` ${tu(r.values[0])}`;return` ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return` ${r.origin??""}  ${t}${r.maximum.toString()} ${i.unit??""}`;return` ${r.origin??""}  ${t}${r.maximum.toString()}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return` ${r.origin}  ${t}${r.minimum.toString()} ${i.unit}`;return` ${r.origin}  ${t}${r.minimum.toString()}`}case"invalid_format":if("starts_with"===r.format)return` "${r.prefix}" `;if("ends_with"===r.format)return` "${r.suffix}" `;if("includes"===r.format)return` "${r.includes}"`;if("regex"===r.format)return` ${r.pattern}`;return` ${t[r.format]??r.format}`;case"not_multiple_of":return` ${r.divisor} `;case"unrecognized_keys":return`${r.keys.length>1?"":""}${eY(r.keys,"")}`;case"invalid_key":return`${r.origin} `;case"invalid_union":return"";case"invalid_element":return`${r.origin} `;default:return``}}})()}}function sB(){return{localeError:(()=>{let e={string:{unit:"mi",verb:"n"},file:{unit:"bytes",verb:"n"},array:{unit:"nkan",verb:"n"},set:{unit:"nkan",verb:"n"}},t={regex:"r bwl",email:"drs ml",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"kk ISO",date:"j ISO",time:"kk ISO",duration:"kk t p ISO",ipv4:"drs IPv4",ipv6:"drs IPv6",cidrv4:"gbgb IPv4",cidrv6:"gbgb IPv6",base64:"r t a k n base64",base64url:"r base64url",json_string:"r JSON",e164:"nmb E.164",jwt:"JWT",template_literal:"r bwl"};return r=>{switch(r.code){case"invalid_type":return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${r.expected}, \xe0m a r\xed ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmb";case"object":if(Array.isArray(e))return"akop";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(r.input)}`;case"invalid_value":if(1===r.values.length)return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${tu(r.values[0])}`;return`\xc0\xe0y\xe0n a\xece: yan kan l\xe1ra ${eY(r.values,"|")}`;case"too_big":{let t=r.inclusive?"<=":"<",i=e[r.origin]??null;if(i)return`T\xf3 p j\xf9: a n\xed l\xe1ti j p\xe9 ${r.origin??"iye"} ${i.verb} ${t}${r.maximum} ${i.unit}`;return`T\xf3 p j\xf9: a n\xed l\xe1ti j ${t}${r.maximum}`}case"too_small":{let t=r.inclusive?">=":">",i=e[r.origin]??null;if(i)return`K\xe9r\xe9 ju: a n\xed l\xe1ti j p\xe9 ${r.origin} ${i.verb} ${t}${r.minimum} ${i.unit}`;return`K\xe9r\xe9 ju: a n\xed l\xe1ti j ${t}${r.minimum}`}case"invalid_format":if("starts_with"===r.format)return`r a\xece: gbd br pl\xfa "${r.prefix}"`;if("ends_with"===r.format)return`r a\xece: gbd par\xed pl\xfa "${r.suffix}"`;if("includes"===r.format)return`r a\xece: gbd n\xed "${r.includes}"`;if("regex"===r.format)return`r a\xece: gbd b\xe1 \xe0pr mu ${r.pattern}`;return`A\xece: ${t[r.format]??r.format}`;case"not_multiple_of":return`Nmb\xe0 a\xece: gbd j \xe8y\xe0 p\xedp\xedn ti ${r.divisor}`;case"unrecognized_keys":return`Bt\xecn\xec \xe0\xecm: ${eY(r.keys,", ")}`;case"invalid_key":return`Bt\xecn\xec a\xece n\xedn\xfa ${r.origin}`;case"invalid_union":default:return"bwl ae";case"invalid_element":return`Iye a\xece n\xedn\xfa ${r.origin}`}}})()}}e.s(["$ZodRegistry",()=>sY,"$input",()=>sK,"$output",()=>sz,"globalRegistry",()=>sq,"registry",()=>sF],52637);let sz=Symbol("ZodOutput"),sK=Symbol("ZodInput");class sY{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};delete r.id;let i={...r,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function sF(){return new sY}let sq=sF();function sV(e,t){return new e({type:"string",...ta(t)})}function sG(e,t){return new e({type:"string",coerce:!0,...ta(t)})}function sH(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...ta(t)})}function sZ(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...ta(t)})}function sW(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...ta(t)})}function sQ(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ta(t)})}function sJ(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ta(t)})}function sX(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ta(t)})}function s0(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...ta(t)})}function s1(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...ta(t)})}function s4(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...ta(t)})}function s2(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...ta(t)})}function s6(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...ta(t)})}function s3(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...ta(t)})}function s5(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...ta(t)})}function s8(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...ta(t)})}function s9(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...ta(t)})}function s7(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...ta(t)})}function ae(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ta(t)})}function at(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ta(t)})}function ar(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...ta(t)})}function ai(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...ta(t)})}function an(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...ta(t)})}function as(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...ta(t)})}e.s(["TimePrecision",()=>aa,"_any",()=>aR,"_array",()=>a9,"_base64",()=>ar,"_base64url",()=>ai,"_bigint",()=>av,"_boolean",()=>a_,"_catch",()=>oy,"_check",()=>ow,"_cidrv4",()=>ae,"_cidrv6",()=>at,"_coercedBigint",()=>aE,"_coercedBoolean",()=>ab,"_coercedDate",()=>aD,"_coercedNumber",()=>ap,"_coercedString",()=>sG,"_cuid",()=>s2,"_cuid2",()=>s6,"_custom",()=>oS,"_date",()=>aP,"_default",()=>of,"_discriminatedUnion",()=>oe,"_e164",()=>an,"_email",()=>sH,"_emoji",()=>s1,"_endsWith",()=>a0,"_enum",()=>oa,"_file",()=>ol,"_float32",()=>ah,"_float64",()=>am,"_gt",()=>aM,"_gte",()=>a$,"_guid",()=>sZ,"_includes",()=>aJ,"_int",()=>af,"_int32",()=>ay,"_int64",()=>aS,"_intersection",()=>ot,"_ipv4",()=>s9,"_ipv6",()=>s7,"_isoDate",()=>au,"_isoDateTime",()=>ao,"_isoDuration",()=>ad,"_isoTime",()=>al,"_jwt",()=>as,"_ksuid",()=>s8,"_lazy",()=>ov,"_length",()=>aH,"_literal",()=>ou,"_lowercase",()=>aW,"_lt",()=>aL,"_lte",()=>ak,"_map",()=>on,"_max",()=>ak,"_maxLength",()=>aV,"_maxSize",()=>aY,"_mime",()=>a4,"_min",()=>a$,"_minLength",()=>aG,"_minSize",()=>aF,"_multipleOf",()=>aK,"_nan",()=>ax,"_nanoid",()=>s4,"_nativeEnum",()=>oo,"_negative",()=>aj,"_never",()=>aC,"_nonnegative",()=>az,"_nonoptional",()=>oh,"_nonpositive",()=>aB,"_normalize",()=>a6,"_null",()=>aO,"_nullable",()=>op,"_number",()=>ac,"_optional",()=>oc,"_overwrite",()=>a2,"_pipe",()=>og,"_positive",()=>aU,"_promise",()=>oE,"_property",()=>a1,"_readonly",()=>o_,"_record",()=>oi,"_refine",()=>oA,"_regex",()=>aZ,"_set",()=>os,"_size",()=>aq,"_startsWith",()=>aX,"_string",()=>sV,"_stringFormat",()=>oR,"_stringbool",()=>oO,"_success",()=>om,"_superRefine",()=>oT,"_symbol",()=>aT,"_templateLiteral",()=>ob,"_toLowerCase",()=>a5,"_toUpperCase",()=>a8,"_transform",()=>od,"_trim",()=>a3,"_tuple",()=>or,"_uint32",()=>ag,"_uint64",()=>aA,"_ulid",()=>s3,"_undefined",()=>aw,"_union",()=>a7,"_unknown",()=>aI,"_uppercase",()=>aQ,"_url",()=>s0,"_uuid",()=>sW,"_uuidv4",()=>sQ,"_uuidv6",()=>sJ,"_uuidv7",()=>sX,"_void",()=>aN,"_xid",()=>s5],62061);let aa={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function ao(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ta(t)})}function au(e,t){return new e({type:"string",format:"date",check:"string_format",...ta(t)})}function al(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...ta(t)})}function ad(e,t){return new e({type:"string",format:"duration",check:"string_format",...ta(t)})}function ac(e,t){return new e({type:"number",checks:[],...ta(t)})}function ap(e,t){return new e({type:"number",coerce:!0,checks:[],...ta(t)})}function af(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...ta(t)})}function ah(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...ta(t)})}function am(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...ta(t)})}function ay(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...ta(t)})}function ag(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...ta(t)})}function a_(e,t){return new e({type:"boolean",...ta(t)})}function ab(e,t){return new e({type:"boolean",coerce:!0,...ta(t)})}function av(e,t){return new e({type:"bigint",...ta(t)})}function aE(e,t){return new e({type:"bigint",coerce:!0,...ta(t)})}function aS(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...ta(t)})}function aA(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...ta(t)})}function aT(e,t){return new e({type:"symbol",...ta(t)})}function aw(e,t){return new e({type:"undefined",...ta(t)})}function aO(e,t){return new e({type:"null",...ta(t)})}function aR(e){return new e({type:"any"})}function aI(e){return new e({type:"unknown"})}function aC(e,t){return new e({type:"never",...ta(t)})}function aN(e,t){return new e({type:"void",...ta(t)})}function aP(e,t){return new e({type:"date",...ta(t)})}function aD(e,t){return new e({type:"date",coerce:!0,...ta(t)})}function ax(e,t){return new e({type:"nan",...ta(t)})}function aL(e,t){return new it({check:"less_than",...ta(t),value:e,inclusive:!1})}function ak(e,t){return new it({check:"less_than",...ta(t),value:e,inclusive:!0})}function aM(e,t){return new ir({check:"greater_than",...ta(t),value:e,inclusive:!1})}function a$(e,t){return new ir({check:"greater_than",...ta(t),value:e,inclusive:!0})}function aU(e){return aM(0,e)}function aj(e){return aL(0,e)}function aB(e){return ak(0,e)}function az(e){return a$(0,e)}function aK(e,t){return new ii({check:"multiple_of",...ta(t),value:e})}function aY(e,t){return new io({check:"max_size",...ta(t),maximum:e})}function aF(e,t){return new iu({check:"min_size",...ta(t),minimum:e})}function aq(e,t){return new il({check:"size_equals",...ta(t),size:e})}function aV(e,t){return new id({check:"max_length",...ta(t),maximum:e})}function aG(e,t){return new ic({check:"min_length",...ta(t),minimum:e})}function aH(e,t){return new ip({check:"length_equals",...ta(t),length:e})}function aZ(e,t){return new im({check:"string_format",format:"regex",...ta(t),pattern:e})}function aW(e){return new iy({check:"string_format",format:"lowercase",...ta(e)})}function aQ(e){return new ig({check:"string_format",format:"uppercase",...ta(e)})}function aJ(e,t){return new i_({check:"string_format",format:"includes",...ta(t),includes:e})}function aX(e,t){return new ib({check:"string_format",format:"starts_with",...ta(t),prefix:e})}function a0(e,t){return new iv({check:"string_format",format:"ends_with",...ta(t),suffix:e})}function a1(e,t,r){return new iS({check:"property",property:e,schema:t,...ta(r)})}function a4(e,t){return new iA({check:"mime_type",mime:e,...ta(t)})}function a2(e){return new iT({check:"overwrite",tx:e})}function a6(e){return a2(t=>t.normalize(e))}function a3(){return a2(e=>e.trim())}function a5(){return a2(e=>e.toLowerCase())}function a8(){return a2(e=>e.toUpperCase())}function a9(e,t,r){return new e({type:"array",element:t,...ta(r)})}function a7(e,t,r){return new e({type:"union",options:t,...ta(r)})}function oe(e,t,r,i){return new e({type:"union",options:r,discriminator:t,...ta(i)})}function ot(e,t,r){return new e({type:"intersection",left:t,right:r})}function or(e,t,r,i){let n=r instanceof iR,s=n?i:r;return new e({type:"tuple",items:t,rest:n?r:null,...ta(s)})}function oi(e,t,r,i){return new e({type:"record",keyType:t,valueType:r,...ta(i)})}function on(e,t,r,i){return new e({type:"map",keyType:t,valueType:r,...ta(i)})}function os(e,t,r){return new e({type:"set",valueType:t,...ta(r)})}function oa(e,t,r){return new e({type:"enum",entries:Array.isArray(t)?Object.fromEntries(t.map(e=>[e,e])):t,...ta(r)})}function oo(e,t,r){return new e({type:"enum",entries:t,...ta(r)})}function ou(e,t,r){return new e({type:"literal",values:Array.isArray(t)?t:[t],...ta(r)})}function ol(e,t){return new e({type:"file",...ta(t)})}function od(e,t){return new e({type:"transform",transform:t})}function oc(e,t){return new e({type:"optional",innerType:t})}function op(e,t){return new e({type:"nullable",innerType:t})}function of(e,t,r){return new e({type:"default",innerType:t,get defaultValue(){return"function"==typeof r?r():e7(r)}})}function oh(e,t,r){return new e({type:"nonoptional",innerType:t,...ta(r)})}function om(e,t){return new e({type:"success",innerType:t})}function oy(e,t,r){return new e({type:"catch",innerType:t,catchValue:"function"==typeof r?r:()=>r})}function og(e,t,r){return new e({type:"pipe",in:t,out:r})}function o_(e,t){return new e({type:"readonly",innerType:t})}function ob(e,t,r){return new e({type:"template_literal",parts:t,...ta(r)})}function ov(e,t){return new e({type:"lazy",getter:t})}function oE(e,t){return new e({type:"promise",innerType:t})}function oS(e,t,r){let i=ta(r);return i.abort??(i.abort=!0),new e({type:"custom",check:"custom",fn:t,...i})}function oA(e,t,r){return new e({type:"custom",check:"custom",fn:t,...ta(r)})}function oT(e){let t=ow(r=>(r.addIssue=e=>{"string"==typeof e?r.issues.push(tw(e,r.value,t._zod.def)):(e.fatal&&(e.continue=!1),e.code??(e.code="custom"),e.input??(e.input=r.value),e.inst??(e.inst=t),e.continue??(e.continue=!t._zod.def.abort),r.issues.push(tw(e)))},e(r.value,r)));return t}function ow(e,t){let r=new r7({check:"custom",...ta(t)});return r._zod.check=e,r}function oO(e,t){let r=ta(t),i=r.truthy??["true","1","yes","on","y","enabled"],n=r.falsy??["false","0","no","off","n","disabled"];"sensitive"!==r.case&&(i=i.map(e=>"string"==typeof e?e.toLowerCase():e),n=n.map(e=>"string"==typeof e?e.toLowerCase():e));let s=new Set(i),a=new Set(n),o=e.Codec??nK,u=e.Boolean??i3,l=new o({type:"pipe",in:new(e.String??iI)({type:"string",error:r.error}),out:new u({type:"boolean",error:r.error}),transform:(e,t)=>{let i=e;return"sensitive"!==r.case&&(i=i.toLowerCase()),!!s.has(i)||!a.has(i)&&(t.issues.push({code:"invalid_value",expected:"stringbool",values:[...s,...a],input:t.value,inst:l,continue:!1}),{})},reverseTransform:(e,t)=>!0===e?i[0]||"true":n[0]||"false",error:r.error});return l}function oR(e,t,r,i={}){let n=ta(i),s={...ta(i),check:"string_format",type:"string",format:t,fn:"function"==typeof r?r:e=>r.test(e),...n};return r instanceof RegExp&&(s.pattern=r),new e(s)}e.s(["JSONSchemaGenerator",()=>oI,"toJSONSchema",()=>oC],7159);class oI{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??sq,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var r;let i=e._zod.def,n=this.seen.get(e);if(n)return n.count++,t.schemaPath.includes(e)&&(n.cycle=t.path),n.schema;let s={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,s);let a=e._zod.toJSONSchema?.();if(a)s.schema=a;else{let r={...t,schemaPath:[...t.schemaPath,e],path:t.path},n=e._zod.parent;if(n)s.ref=n,this.process(n,r),this.seen.get(n).isParent=!0;else{let t=s.schema;switch(i.type){case"string":{t.type="string";let{minimum:r,maximum:i,format:n,patterns:a,contentEncoding:o}=e._zod.bag;if("number"==typeof r&&(t.minLength=r),"number"==typeof i&&(t.maxLength=i),n&&(t.format=({guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""})[n]??n,""===t.format&&delete t.format),o&&(t.contentEncoding=o),a&&a.size>0){let e=[...a];1===e.length?t.pattern=e[0].source:e.length>1&&(s.schema.allOf=[...e.map(e=>({..."draft-7"===this.target||"draft-4"===this.target||"openapi-3.0"===this.target?{type:"string"}:{},pattern:e.source}))])}break}case"number":{let{minimum:r,maximum:i,format:n,multipleOf:s,exclusiveMaximum:a,exclusiveMinimum:o}=e._zod.bag;"string"==typeof n&&n.includes("int")?t.type="integer":t.type="number","number"==typeof o&&("draft-4"===this.target||"openapi-3.0"===this.target?(t.minimum=o,t.exclusiveMinimum=!0):t.exclusiveMinimum=o),"number"==typeof r&&(t.minimum=r,"number"==typeof o&&"draft-4"!==this.target&&(o>=r?delete t.minimum:delete t.exclusiveMinimum)),"number"==typeof a&&("draft-4"===this.target||"openapi-3.0"===this.target?(t.maximum=a,t.exclusiveMaximum=!0):t.exclusiveMaximum=a),"number"==typeof i&&(t.maximum=i,"number"==typeof a&&"draft-4"!==this.target&&(a<=i?delete t.maximum:delete t.exclusiveMaximum)),"number"==typeof s&&(t.multipleOf=s);break}case"boolean":case"success":t.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema");break;case"null":"openapi-3.0"===this.target?(t.type="string",t.nullable=!0,t.enum=[null]):t.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw Error("Void cannot be represented in JSON Schema");break;case"never":t.not={};break;case"date":if("throw"===this.unrepresentable)throw Error("Date cannot be represented in JSON Schema");break;case"array":{let{minimum:n,maximum:s}=e._zod.bag;"number"==typeof n&&(t.minItems=n),"number"==typeof s&&(t.maxItems=s),t.type="array",t.items=this.process(i.element,{...r,path:[...r.path,"items"]});break}case"object":{t.type="object",t.properties={};let e=i.shape;for(let i in e)t.properties[i]=this.process(e[i],{...r,path:[...r.path,"properties",i]});let n=new Set([...new Set(Object.keys(e))].filter(e=>{let t=i.shape[e]._zod;return"input"===this.io?void 0===t.optin:void 0===t.optout}));n.size>0&&(t.required=Array.from(n)),i.catchall?._zod.def.type==="never"?t.additionalProperties=!1:i.catchall?i.catchall&&(t.additionalProperties=this.process(i.catchall,{...r,path:[...r.path,"additionalProperties"]})):"output"===this.io&&(t.additionalProperties=!1);break}case"union":t.anyOf=i.options.map((e,t)=>this.process(e,{...r,path:[...r.path,"anyOf",t]}));break;case"intersection":{let e=this.process(i.left,{...r,path:[...r.path,"allOf",0]}),n=this.process(i.right,{...r,path:[...r.path,"allOf",1]}),s=e=>"allOf"in e&&1===Object.keys(e).length;t.allOf=[...s(e)?e.allOf:[e],...s(n)?n.allOf:[n]];break}case"tuple":{t.type="array";let n="draft-2020-12"===this.target?"prefixItems":"items",s="draft-2020-12"===this.target||"openapi-3.0"===this.target?"items":"additionalItems",a=i.items.map((e,t)=>this.process(e,{...r,path:[...r.path,n,t]})),o=i.rest?this.process(i.rest,{...r,path:[...r.path,s,..."openapi-3.0"===this.target?[i.items.length]:[]]}):null;"draft-2020-12"===this.target?(t.prefixItems=a,o&&(t.items=o)):"openapi-3.0"===this.target?(t.items={anyOf:a},o&&t.items.anyOf.push(o),t.minItems=a.length,o||(t.maxItems=a.length)):(t.items=a,o&&(t.additionalItems=o));let{minimum:u,maximum:l}=e._zod.bag;"number"==typeof u&&(t.minItems=u),"number"==typeof l&&(t.maxItems=l);break}case"record":t.type="object",("draft-7"===this.target||"draft-2020-12"===this.target)&&(t.propertyNames=this.process(i.keyType,{...r,path:[...r.path,"propertyNames"]})),t.additionalProperties=this.process(i.valueType,{...r,path:[...r.path,"additionalProperties"]});break;case"map":if("throw"===this.unrepresentable)throw Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw Error("Set cannot be represented in JSON Schema");break;case"enum":{let e=eK(i.entries);e.every(e=>"number"==typeof e)&&(t.type="number"),e.every(e=>"string"==typeof e)&&(t.type="string"),t.enum=e;break}case"literal":{let e=[];for(let t of i.values)if(void 0===t){if("throw"===this.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof t)if("throw"===this.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else e.push(Number(t));else e.push(t);if(0===e.length);else if(1===e.length){let r=e[0];t.type=null===r?"null":typeof r,"draft-4"===this.target||"openapi-3.0"===this.target?t.enum=[r]:t.const=r}else e.every(e=>"number"==typeof e)&&(t.type="number"),e.every(e=>"string"==typeof e)&&(t.type="string"),e.every(e=>"boolean"==typeof e)&&(t.type="string"),e.every(e=>null===e)&&(t.type="null"),t.enum=e;break}case"file":{let r={type:"string",format:"binary",contentEncoding:"binary"},{minimum:i,maximum:n,mime:s}=e._zod.bag;void 0!==i&&(r.minLength=i),void 0!==n&&(r.maxLength=n),s?1===s.length?(r.contentMediaType=s[0],Object.assign(t,r)):t.anyOf=s.map(e=>({...r,contentMediaType:e})):Object.assign(t,r);break}case"transform":if("throw"===this.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{let e=this.process(i.innerType,r);"openapi-3.0"===this.target?(s.ref=i.innerType,t.nullable=!0):t.anyOf=[e,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(i.innerType,r),s.ref=i.innerType;break;case"default":this.process(i.innerType,r),s.ref=i.innerType,t.default=JSON.parse(JSON.stringify(i.defaultValue));break;case"prefault":this.process(i.innerType,r),s.ref=i.innerType,"input"===this.io&&(t._prefault=JSON.parse(JSON.stringify(i.defaultValue)));break;case"catch":{let e;this.process(i.innerType,r),s.ref=i.innerType;try{e=i.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}t.default=e;break}case"nan":if("throw"===this.unrepresentable)throw Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{let r=e._zod.pattern;if(!r)throw Error("Pattern not found in template literal");t.type="string",t.pattern=r.source;break}case"pipe":{let e="input"===this.io?"transform"===i.in._zod.def.type?i.out:i.in:i.out;this.process(e,r),s.ref=e;break}case"readonly":this.process(i.innerType,r),s.ref=i.innerType,t.readOnly=!0;break;case"lazy":{let t=e._zod.innerType;this.process(t,r),s.ref=t;break}case"custom":if("throw"===this.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema");break;case"function":if("throw"===this.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")}}}let o=this.metadataRegistry.get(e);return o&&Object.assign(s.schema,o),"input"===this.io&&function e(t,r){let i=r??{seen:new Set};if(i.seen.has(t))return!1;i.seen.add(t);let n=t._zod.def;switch(n.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":case"function":return!1;case"array":return e(n.element,i);case"object":for(let t in n.shape)if(e(n.shape[t],i))return!0;return!1;case"union":for(let t of n.options)if(e(t,i))return!0;return!1;case"intersection":return e(n.left,i)||e(n.right,i);case"tuple":for(let t of n.items)if(e(t,i))return!0;if(n.rest&&e(n.rest,i))return!0;return!1;case"record":case"map":return e(n.keyType,i)||e(n.valueType,i);case"set":return e(n.valueType,i);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return e(n.innerType,i);case"lazy":return e(n.getter(),i);case"transform":return!0;case"pipe":return e(n.in,i)||e(n.out,i)}throw Error(`Unknown schema type: ${n.type}`)}(e)&&(delete s.schema.examples,delete s.schema.default),"input"===this.io&&s.schema._prefault&&((r=s.schema).default??(r.default=s.schema._prefault)),delete s.schema._prefault,this.seen.get(e).schema}emit(e,t){let r={cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0},i=this.seen.get(e);if(!i)throw Error("Unprocessed schema. This is a bug in Zod.");let n=e=>{let t="draft-2020-12"===this.target?"$defs":"definitions";if(r.external){let i=r.external.registry.get(e[0])?.id,n=r.external.uri??(e=>e);if(i)return{ref:n(i)};let s=e[1].defId??e[1].schema.id??`schema${this.counter++}`;return e[1].defId=s,{defId:s,ref:`${n("__shared")}#/${t}/${s}`}}if(e[1]===i)return{ref:"#"};let n=`#/${t}/`,s=e[1].schema.id??`__schema${this.counter++}`;return{defId:s,ref:n+s}},s=e=>{if(e[1].schema.$ref)return;let t=e[1],{ref:r,defId:i}=n(e);t.def={...t.schema},i&&(t.defId=i);let s=t.schema;for(let e in s)delete s[e];s.$ref=r};if("throw"===r.cycles)for(let e of this.seen.entries()){let t=e[1];if(t.cycle)throw Error(`Cycle detected: #/${t.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let t of this.seen.entries()){let i=t[1];if(e===t[0]){s(t);continue}if(r.external){let i=r.external.registry.get(t[0])?.id;if(e!==t[0]&&i){s(t);continue}}if(this.metadataRegistry.get(t[0])?.id||i.cycle||i.count>1&&"ref"===r.reused){s(t);continue}}let a=(e,t)=>{let r=this.seen.get(e),i=r.def??r.schema,n={...i};if(null===r.ref)return;let s=r.ref;if(r.ref=null,s){a(s,t);let e=this.seen.get(s).schema;e.$ref&&("draft-7"===t.target||"draft-4"===t.target||"openapi-3.0"===t.target)?(i.allOf=i.allOf??[],i.allOf.push(e)):(Object.assign(i,e),Object.assign(i,n))}r.isParent||this.override({zodSchema:e,jsonSchema:i,path:r.path??[]})};for(let e of[...this.seen.entries()].reverse())a(e[0],{target:this.target});let o={};if("draft-2020-12"===this.target?o.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?o.$schema="http://json-schema.org/draft-07/schema#":"draft-4"===this.target?o.$schema="http://json-schema.org/draft-04/schema#":"openapi-3.0"===this.target||console.warn(`Invalid target: ${this.target}`),r.external?.uri){let t=r.external.registry.get(e)?.id;if(!t)throw Error("Schema is missing an `id` property");o.$id=r.external.uri(t)}Object.assign(o,i.def);let u=r.external?.defs??{};for(let e of this.seen.entries()){let t=e[1];t.def&&t.defId&&(u[t.defId]=t.def)}r.external||Object.keys(u).length>0&&("draft-2020-12"===this.target?o.$defs=u:o.definitions=u);try{return JSON.parse(JSON.stringify(o))}catch(e){throw Error("Error converting schema to JSON.")}}}function oC(e,t){if(e instanceof sY){let r=new oI(t),i={};for(let t of e._idmap.entries()){let[e,i]=t;r.process(i)}let n={},s={registry:e,uri:t?.uri,defs:i};for(let i of e._idmap.entries()){let[e,a]=i;n[e]=r.emit(a,{...t,external:s})}return Object.keys(i).length>0&&(n.__shared={["draft-2020-12"===r.target?"$defs":"definitions"]:i}),{schemas:n}}let r=new oI(t);return r.process(e),r.emit(e,t)}e.s([],33145),e.s(["ZodAny",()=>le,"ZodArray",()=>ld,"ZodBase64",()=>uN,"ZodBase64URL",()=>uD,"ZodBigInt",()=>uX,"ZodBigIntFormat",()=>u1,"ZodBoolean",()=>uQ,"ZodCIDRv4",()=>uO,"ZodCIDRv6",()=>uI,"ZodCUID",()=>up,"ZodCUID2",()=>uh,"ZodCatch",()=>l0,"ZodCodec",()=>l5,"ZodCustom",()=>dl,"ZodCustomStringFormat",()=>uU,"ZodDate",()=>lu,"ZodDefault",()=>lV,"ZodDiscriminatedUnion",()=>lb,"ZodE164",()=>uL,"ZodEmail",()=>o5,"ZodEmoji",()=>uu,"ZodEnum",()=>lD,"ZodFile",()=>l$,"ZodFunction",()=>da,"ZodGUID",()=>o9,"ZodIPv4",()=>uS,"ZodIPv6",()=>uT,"ZodIntersection",()=>lE,"ZodJWT",()=>uM,"ZodKSUID",()=>uv,"ZodLazy",()=>dr,"ZodLiteral",()=>lk,"ZodMap",()=>lI,"ZodNaN",()=>l4,"ZodNanoID",()=>ud,"ZodNever",()=>ln,"ZodNonOptional",()=>lW,"ZodNull",()=>u9,"ZodNullable",()=>lY,"ZodNumber",()=>uY,"ZodNumberFormat",()=>uq,"ZodObject",()=>lf,"ZodOptional",()=>lz,"ZodPipe",()=>l6,"ZodPrefault",()=>lH,"ZodPromise",()=>dn,"ZodReadonly",()=>l9,"ZodRecord",()=>lw,"ZodSet",()=>lN,"ZodString",()=>o2,"ZodStringFormat",()=>o3,"ZodSuccess",()=>lJ,"ZodSymbol",()=>u6,"ZodTemplateLiteral",()=>de,"ZodTransform",()=>lj,"ZodTuple",()=>lA,"ZodType",()=>o1,"ZodULID",()=>uy,"ZodURL",()=>us,"ZodUUID",()=>ue,"ZodUndefined",()=>u5,"ZodUnion",()=>lg,"ZodUnknown",()=>lr,"ZodVoid",()=>la,"ZodXID",()=>u_,"_ZodString",()=>o4,"_default",()=>lG,"_function",()=>du,"any",()=>lt,"array",()=>lc,"base64",()=>uP,"base64url",()=>ux,"bigint",()=>u0,"boolean",()=>uJ,"catch",()=>l1,"check",()=>dd,"cidrv4",()=>uR,"cidrv6",()=>uC,"codec",()=>l8,"cuid",()=>uf,"cuid2",()=>um,"custom",()=>dc,"date",()=>ll,"discriminatedUnion",()=>lv,"e164",()=>uk,"email",()=>o8,"emoji",()=>ul,"enum",()=>lx,"file",()=>lU,"float32",()=>uG,"float64",()=>uH,"function",()=>du,"guid",()=>o7,"hash",()=>uK,"hex",()=>uz,"hostname",()=>uB,"httpUrl",()=>uo,"instanceof",()=>dh,"int",()=>uV,"int32",()=>uZ,"int64",()=>u4,"intersection",()=>lS,"ipv4",()=>uA,"ipv6",()=>uw,"json",()=>dy,"jwt",()=>u$,"keyof",()=>lp,"ksuid",()=>uE,"lazy",()=>di,"literal",()=>lM,"looseObject",()=>ly,"map",()=>lC,"nan",()=>l2,"nanoid",()=>uc,"nativeEnum",()=>lL,"never",()=>ls,"nonoptional",()=>lQ,"null",()=>u7,"nullable",()=>lF,"nullish",()=>lq,"number",()=>uF,"object",()=>lh,"optional",()=>lK,"partialRecord",()=>lR,"pipe",()=>l3,"prefault",()=>lZ,"preprocess",()=>dg,"promise",()=>ds,"readonly",()=>l7,"record",()=>lO,"refine",()=>dp,"set",()=>lP,"strictObject",()=>lm,"string",()=>o6,"stringFormat",()=>uj,"stringbool",()=>dm,"success",()=>lX,"superRefine",()=>df,"symbol",()=>u3,"templateLiteral",()=>dt,"transform",()=>lB,"tuple",()=>lT,"uint32",()=>uW,"uint64",()=>u2,"ulid",()=>ug,"undefined",()=>u8,"union",()=>l_,"unknown",()=>li,"url",()=>ua,"uuid",()=>ut,"uuidv4",()=>ur,"uuidv6",()=>ui,"uuidv7",()=>un,"void",()=>lo,"xid",()=>ub],7855),e.s(["$ZodAny",()=>nt,"$ZodArray",()=>no,"$ZodBase64",()=>iW,"$ZodBase64URL",()=>iJ,"$ZodBigInt",()=>i5,"$ZodBigIntFormat",()=>i8,"$ZodBoolean",()=>i3,"$ZodCIDRv4",()=>iG,"$ZodCIDRv6",()=>iH,"$ZodCUID",()=>iM,"$ZodCUID2",()=>i$,"$ZodCatch",()=>nU,"$ZodCodec",()=>nK,"$ZodCustom",()=>nQ,"$ZodCustomStringFormat",()=>i4,"$ZodDate",()=>ns,"$ZodDefault",()=>nD,"$ZodDiscriminatedUnion",()=>nm,"$ZodE164",()=>iX,"$ZodEmail",()=>iD,"$ZodEmoji",()=>iL,"$ZodEnum",()=>nw,"$ZodFile",()=>nR,"$ZodFunction",()=>nH,"$ZodGUID",()=>iN,"$ZodIPv4",()=>iq,"$ZodIPv6",()=>iV,"$ZodISODate",()=>iK,"$ZodISODateTime",()=>iz,"$ZodISODuration",()=>iF,"$ZodISOTime",()=>iY,"$ZodIntersection",()=>ny,"$ZodJWT",()=>i1,"$ZodKSUID",()=>iB,"$ZodLazy",()=>nW,"$ZodLiteral",()=>nO,"$ZodMap",()=>nE,"$ZodNaN",()=>nj,"$ZodNanoID",()=>ik,"$ZodNever",()=>ni,"$ZodNonOptional",()=>nk,"$ZodNull",()=>ne,"$ZodNullable",()=>nP,"$ZodNumber",()=>i2,"$ZodNumberFormat",()=>i6,"$ZodObject",()=>nc,"$ZodObjectJIT",()=>np,"$ZodOptional",()=>nN,"$ZodPipe",()=>nB,"$ZodPrefault",()=>nL,"$ZodPromise",()=>nZ,"$ZodReadonly",()=>nq,"$ZodRecord",()=>nv,"$ZodSet",()=>nA,"$ZodString",()=>iI,"$ZodStringFormat",()=>iC,"$ZodSuccess",()=>n$,"$ZodSymbol",()=>i9,"$ZodTemplateLiteral",()=>nG,"$ZodTransform",()=>nI,"$ZodTuple",()=>n_,"$ZodType",()=>iR,"$ZodULID",()=>iU,"$ZodURL",()=>ix,"$ZodUUID",()=>iP,"$ZodUndefined",()=>i7,"$ZodUnion",()=>nh,"$ZodUnknown",()=>nr,"$ZodVoid",()=>nn,"$ZodXID",()=>ij,"clone",()=>ts,"isValidBase64",()=>iZ,"isValidBase64URL",()=>iQ,"isValidJWT",()=>i0],62429),e.i(39510);var oN=e.i(21131),oN=oN,oP=e.i(86618),oP=oP;e.s([],64328),e.s(["ZodISODate",()=>oL,"ZodISODateTime",()=>oD,"ZodISODuration",()=>oU,"ZodISOTime",()=>oM,"date",()=>ok,"datetime",()=>ox,"duration",()=>oj,"time",()=>o$],51047);let oD=eP("ZodISODateTime",(e,t)=>{iz.init(e,t),o3.init(e,t)});function ox(e){return ao(oD,e)}let oL=eP("ZodISODate",(e,t)=>{iK.init(e,t),o3.init(e,t)});function ok(e){return au(oL,e)}let oM=eP("ZodISOTime",(e,t)=>{iY.init(e,t),o3.init(e,t)});function o$(e){return al(oM,e)}let oU=eP("ZodISODuration",(e,t)=>{iF.init(e,t),o3.init(e,t)});function oj(e){return ad(oU,e)}e.s(["decode",()=>oH,"decodeAsync",()=>oW,"encode",()=>oG,"encodeAsync",()=>oZ,"parse",()=>oY,"parseAsync",()=>oF,"safeDecode",()=>oJ,"safeDecodeAsync",()=>o0,"safeEncode",()=>oQ,"safeEncodeAsync",()=>oX,"safeParse",()=>oq,"safeParseAsync",()=>oV],48804),e.s(["ZodError",()=>oz,"ZodRealError",()=>oK],15874);let oB=(e,t)=>{tk.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>tU(e,t)},flatten:{value:t=>t$(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,eF,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,eF,2)}},isEmpty:{get:()=>0===e.issues.length}})},oz=eP("ZodError",oB),oK=eP("ZodError",oB,{Parent:Error}),oY=tK(oK),oF=tF(oK),oq=tV(oK),oV=tH(oK),oG=tW(oK),oH=tJ(oK),oZ=t0(oK),oW=t4(oK),oQ=t6(oK),oJ=t5(oK),oX=t9(oK),o0=re(oK),o1=eP("ZodType",(e,t)=>(iR.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(oP.mergeDefs(t,{checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]})),e.clone=(t,r)=>ts(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>oY(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>oq(e,t,r),e.parseAsync=async(t,r)=>oF(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>oV(e,t,r),e.spa=e.safeParseAsync,e.encode=(t,r)=>oG(e,t,r),e.decode=(t,r)=>oH(e,t,r),e.encodeAsync=async(t,r)=>oZ(e,t,r),e.decodeAsync=async(t,r)=>oW(e,t,r),e.safeEncode=(t,r)=>oQ(e,t,r),e.safeDecode=(t,r)=>oJ(e,t,r),e.safeEncodeAsync=async(t,r)=>oX(e,t,r),e.safeDecodeAsync=async(t,r)=>o0(e,t,r),e.refine=(t,r)=>e.check(dp(t,r)),e.superRefine=t=>e.check(oT(t)),e.overwrite=t=>e.check(a2(t)),e.optional=()=>lK(e),e.nullable=()=>lF(e),e.nullish=()=>lK(lF(e)),e.nonoptional=t=>lQ(e,t),e.array=()=>lc(e),e.or=t=>l_([e,t]),e.and=t=>lS(e,t),e.transform=t=>l3(e,lB(t)),e.default=t=>lG(e,t),e.prefault=t=>lZ(e,t),e.catch=t=>l1(e,t),e.pipe=t=>l3(e,t),e.readonly=()=>l7(e),e.describe=t=>{let r=e.clone();return sq.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>sq.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return sq.get(e);let r=e.clone();return sq.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),o4=eP("_ZodString",(e,t)=>{iI.init(e,t),o1.init(e,t);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(aZ(...t)),e.includes=(...t)=>e.check(aJ(...t)),e.startsWith=(...t)=>e.check(aX(...t)),e.endsWith=(...t)=>e.check(a0(...t)),e.min=(...t)=>e.check(aG(...t)),e.max=(...t)=>e.check(aV(...t)),e.length=(...t)=>e.check(aH(...t)),e.nonempty=(...t)=>e.check(aG(1,...t)),e.lowercase=t=>e.check(aW(t)),e.uppercase=t=>e.check(aQ(t)),e.trim=()=>e.check(a3()),e.normalize=(...t)=>e.check(a6(...t)),e.toLowerCase=()=>e.check(a5()),e.toUpperCase=()=>e.check(a8())}),o2=eP("ZodString",(e,t)=>{iI.init(e,t),o4.init(e,t),e.email=t=>e.check(sH(o5,t)),e.url=t=>e.check(s0(us,t)),e.jwt=t=>e.check(as(uM,t)),e.emoji=t=>e.check(s1(uu,t)),e.guid=t=>e.check(sZ(o9,t)),e.uuid=t=>e.check(sW(ue,t)),e.uuidv4=t=>e.check(sQ(ue,t)),e.uuidv6=t=>e.check(sJ(ue,t)),e.uuidv7=t=>e.check(sX(ue,t)),e.nanoid=t=>e.check(s4(ud,t)),e.guid=t=>e.check(sZ(o9,t)),e.cuid=t=>e.check(s2(up,t)),e.cuid2=t=>e.check(s6(uh,t)),e.ulid=t=>e.check(s3(uy,t)),e.base64=t=>e.check(ar(uN,t)),e.base64url=t=>e.check(ai(uD,t)),e.xid=t=>e.check(s5(u_,t)),e.ksuid=t=>e.check(s8(uv,t)),e.ipv4=t=>e.check(s9(uS,t)),e.ipv6=t=>e.check(s7(uT,t)),e.cidrv4=t=>e.check(ae(uO,t)),e.cidrv6=t=>e.check(at(uI,t)),e.e164=t=>e.check(an(uL,t)),e.datetime=t=>e.check(ox(t)),e.date=t=>e.check(ok(t)),e.time=t=>e.check(o$(t)),e.duration=t=>e.check(oj(t))});function o6(e){return sV(o2,e)}let o3=eP("ZodStringFormat",(e,t)=>{iC.init(e,t),o4.init(e,t)}),o5=eP("ZodEmail",(e,t)=>{iD.init(e,t),o3.init(e,t)});function o8(e){return sH(o5,e)}let o9=eP("ZodGUID",(e,t)=>{iN.init(e,t),o3.init(e,t)});function o7(e){return sZ(o9,e)}let ue=eP("ZodUUID",(e,t)=>{iP.init(e,t),o3.init(e,t)});function ut(e){return sW(ue,e)}function ur(e){return sQ(ue,e)}function ui(e){return sJ(ue,e)}function un(e){return sX(ue,e)}let us=eP("ZodURL",(e,t)=>{ix.init(e,t),o3.init(e,t)});function ua(e){return s0(us,e)}function uo(e){return s0(us,{protocol:/^https?$/,hostname:oN.domain,...oP.normalizeParams(e)})}let uu=eP("ZodEmoji",(e,t)=>{iL.init(e,t),o3.init(e,t)});function ul(e){return s1(uu,e)}let ud=eP("ZodNanoID",(e,t)=>{ik.init(e,t),o3.init(e,t)});function uc(e){return s4(ud,e)}let up=eP("ZodCUID",(e,t)=>{iM.init(e,t),o3.init(e,t)});function uf(e){return s2(up,e)}let uh=eP("ZodCUID2",(e,t)=>{i$.init(e,t),o3.init(e,t)});function um(e){return s6(uh,e)}let uy=eP("ZodULID",(e,t)=>{iU.init(e,t),o3.init(e,t)});function ug(e){return s3(uy,e)}let u_=eP("ZodXID",(e,t)=>{ij.init(e,t),o3.init(e,t)});function ub(e){return s5(u_,e)}let uv=eP("ZodKSUID",(e,t)=>{iB.init(e,t),o3.init(e,t)});function uE(e){return s8(uv,e)}let uS=eP("ZodIPv4",(e,t)=>{iq.init(e,t),o3.init(e,t)});function uA(e){return s9(uS,e)}let uT=eP("ZodIPv6",(e,t)=>{iV.init(e,t),o3.init(e,t)});function uw(e){return s7(uT,e)}let uO=eP("ZodCIDRv4",(e,t)=>{iG.init(e,t),o3.init(e,t)});function uR(e){return ae(uO,e)}let uI=eP("ZodCIDRv6",(e,t)=>{iH.init(e,t),o3.init(e,t)});function uC(e){return at(uI,e)}let uN=eP("ZodBase64",(e,t)=>{iW.init(e,t),o3.init(e,t)});function uP(e){return ar(uN,e)}let uD=eP("ZodBase64URL",(e,t)=>{iJ.init(e,t),o3.init(e,t)});function ux(e){return ai(uD,e)}let uL=eP("ZodE164",(e,t)=>{iX.init(e,t),o3.init(e,t)});function uk(e){return an(uL,e)}let uM=eP("ZodJWT",(e,t)=>{i1.init(e,t),o3.init(e,t)});function u$(e){return as(uM,e)}let uU=eP("ZodCustomStringFormat",(e,t)=>{i4.init(e,t),o3.init(e,t)});function uj(e,t,r={}){return oR(uU,e,t,r)}function uB(e){return oR(uU,"hostname",oN.hostname,e)}function uz(e){return oR(uU,"hex",oN.hex,e)}function uK(e,t){let r=t?.enc??"hex",i=`${e}_${r}`,n=oN[i];if(!n)throw Error(`Unrecognized hash format: ${i}`);return oR(uU,i,n,t)}let uY=eP("ZodNumber",(e,t)=>{i2.init(e,t),o1.init(e,t),e.gt=(t,r)=>e.check(aM(t,r)),e.gte=(t,r)=>e.check(a$(t,r)),e.min=(t,r)=>e.check(a$(t,r)),e.lt=(t,r)=>e.check(aL(t,r)),e.lte=(t,r)=>e.check(ak(t,r)),e.max=(t,r)=>e.check(ak(t,r)),e.int=t=>e.check(uV(t)),e.safe=t=>e.check(uV(t)),e.positive=t=>e.check(aM(0,t)),e.nonnegative=t=>e.check(a$(0,t)),e.negative=t=>e.check(aL(0,t)),e.nonpositive=t=>e.check(ak(0,t)),e.multipleOf=(t,r)=>e.check(aK(t,r)),e.step=(t,r)=>e.check(aK(t,r)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??-1/0,r.exclusiveMinimum??-1/0)??null,e.maxValue=Math.min(r.maximum??1/0,r.exclusiveMaximum??1/0)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function uF(e){return ac(uY,e)}let uq=eP("ZodNumberFormat",(e,t)=>{i6.init(e,t),uY.init(e,t)});function uV(e){return af(uq,e)}function uG(e){return ah(uq,e)}function uH(e){return am(uq,e)}function uZ(e){return ay(uq,e)}function uW(e){return ag(uq,e)}let uQ=eP("ZodBoolean",(e,t)=>{i3.init(e,t),o1.init(e,t)});function uJ(e){return a_(uQ,e)}let uX=eP("ZodBigInt",(e,t)=>{i5.init(e,t),o1.init(e,t),e.gte=(t,r)=>e.check(a$(t,r)),e.min=(t,r)=>e.check(a$(t,r)),e.gt=(t,r)=>e.check(aM(t,r)),e.gte=(t,r)=>e.check(a$(t,r)),e.min=(t,r)=>e.check(a$(t,r)),e.lt=(t,r)=>e.check(aL(t,r)),e.lte=(t,r)=>e.check(ak(t,r)),e.max=(t,r)=>e.check(ak(t,r)),e.positive=t=>e.check(aM(BigInt(0),t)),e.negative=t=>e.check(aL(BigInt(0),t)),e.nonpositive=t=>e.check(ak(BigInt(0),t)),e.nonnegative=t=>e.check(a$(BigInt(0),t)),e.multipleOf=(t,r)=>e.check(aK(t,r));let r=e._zod.bag;e.minValue=r.minimum??null,e.maxValue=r.maximum??null,e.format=r.format??null});function u0(e){return av(uX,e)}let u1=eP("ZodBigIntFormat",(e,t)=>{i8.init(e,t),uX.init(e,t)});function u4(e){return aS(u1,e)}function u2(e){return aA(u1,e)}let u6=eP("ZodSymbol",(e,t)=>{i9.init(e,t),o1.init(e,t)});function u3(e){return aT(u6,e)}let u5=eP("ZodUndefined",(e,t)=>{i7.init(e,t),o1.init(e,t)});function u8(e){return aw(u5,e)}let u9=eP("ZodNull",(e,t)=>{ne.init(e,t),o1.init(e,t)});function u7(e){return aO(u9,e)}let le=eP("ZodAny",(e,t)=>{nt.init(e,t),o1.init(e,t)});function lt(){return aR(le)}let lr=eP("ZodUnknown",(e,t)=>{nr.init(e,t),o1.init(e,t)});function li(){return aI(lr)}let ln=eP("ZodNever",(e,t)=>{ni.init(e,t),o1.init(e,t)});function ls(e){return aC(ln,e)}let la=eP("ZodVoid",(e,t)=>{nn.init(e,t),o1.init(e,t)});function lo(e){return aN(la,e)}let lu=eP("ZodDate",(e,t)=>{ns.init(e,t),o1.init(e,t),e.min=(t,r)=>e.check(a$(t,r)),e.max=(t,r)=>e.check(ak(t,r));let r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function ll(e){return aP(lu,e)}let ld=eP("ZodArray",(e,t)=>{no.init(e,t),o1.init(e,t),e.element=t.element,e.min=(t,r)=>e.check(aG(t,r)),e.nonempty=t=>e.check(aG(1,t)),e.max=(t,r)=>e.check(aV(t,r)),e.length=(t,r)=>e.check(aH(t,r)),e.unwrap=()=>e.element});function lc(e,t){return a9(ld,e,t)}function lp(e){return lx(Object.keys(e._zod.def.shape))}let lf=eP("ZodObject",(e,t)=>{np.init(e,t),o1.init(e,t),oP.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>lx(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:li()}),e.loose=()=>e.clone({...e._zod.def,catchall:li()}),e.strict=()=>e.clone({...e._zod.def,catchall:ls()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>oP.extend(e,t),e.safeExtend=t=>oP.safeExtend(e,t),e.merge=t=>oP.merge(e,t),e.pick=t=>oP.pick(e,t),e.omit=t=>oP.omit(e,t),e.partial=(...t)=>oP.partial(lz,e,t[0]),e.required=(...t)=>oP.required(lW,e,t[0])});function lh(e,t){return new lf({type:"object",shape:e??{},...oP.normalizeParams(t)})}function lm(e,t){return new lf({type:"object",shape:e,catchall:ls(),...oP.normalizeParams(t)})}function ly(e,t){return new lf({type:"object",shape:e,catchall:li(),...oP.normalizeParams(t)})}let lg=eP("ZodUnion",(e,t)=>{nh.init(e,t),o1.init(e,t),e.options=t.options});function l_(e,t){return new lg({type:"union",options:e,...oP.normalizeParams(t)})}let lb=eP("ZodDiscriminatedUnion",(e,t)=>{lg.init(e,t),nm.init(e,t)});function lv(e,t,r){return new lb({type:"union",options:t,discriminator:e,...oP.normalizeParams(r)})}let lE=eP("ZodIntersection",(e,t)=>{ny.init(e,t),o1.init(e,t)});function lS(e,t){return new lE({type:"intersection",left:e,right:t})}let lA=eP("ZodTuple",(e,t)=>{n_.init(e,t),o1.init(e,t),e.rest=t=>e.clone({...e._zod.def,rest:t})});function lT(e,t,r){let i=t instanceof iR,n=i?r:t;return new lA({type:"tuple",items:e,rest:i?t:null,...oP.normalizeParams(n)})}let lw=eP("ZodRecord",(e,t)=>{nv.init(e,t),o1.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function lO(e,t,r){return new lw({type:"record",keyType:e,valueType:t,...oP.normalizeParams(r)})}function lR(e,t,r){let i=ts(e);return i._zod.values=void 0,new lw({type:"record",keyType:i,valueType:t,...oP.normalizeParams(r)})}let lI=eP("ZodMap",(e,t)=>{nE.init(e,t),o1.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function lC(e,t,r){return new lI({type:"map",keyType:e,valueType:t,...oP.normalizeParams(r)})}let lN=eP("ZodSet",(e,t)=>{nA.init(e,t),o1.init(e,t),e.min=(...t)=>e.check(aF(...t)),e.nonempty=t=>e.check(aF(1,t)),e.max=(...t)=>e.check(aY(...t)),e.size=(...t)=>e.check(aq(...t))});function lP(e,t){return new lN({type:"set",valueType:e,...oP.normalizeParams(t)})}let lD=eP("ZodEnum",(e,t)=>{nw.init(e,t),o1.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,i)=>{let n={};for(let i of e)if(r.has(i))n[i]=t.entries[i];else throw Error(`Key ${i} not found in enum`);return new lD({...t,checks:[],...oP.normalizeParams(i),entries:n})},e.exclude=(e,i)=>{let n={...t.entries};for(let t of e)if(r.has(t))delete n[t];else throw Error(`Key ${t} not found in enum`);return new lD({...t,checks:[],...oP.normalizeParams(i),entries:n})}});function lx(e,t){return new lD({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...oP.normalizeParams(t)})}function lL(e,t){return new lD({type:"enum",entries:e,...oP.normalizeParams(t)})}let lk=eP("ZodLiteral",(e,t)=>{nO.init(e,t),o1.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function lM(e,t){return new lk({type:"literal",values:Array.isArray(e)?e:[e],...oP.normalizeParams(t)})}let l$=eP("ZodFile",(e,t)=>{nR.init(e,t),o1.init(e,t),e.min=(t,r)=>e.check(aF(t,r)),e.max=(t,r)=>e.check(aY(t,r)),e.mime=(t,r)=>e.check(a4(Array.isArray(t)?t:[t],r))});function lU(e){return ol(l$,e)}let lj=eP("ZodTransform",(e,t)=>{nI.init(e,t),o1.init(e,t),e._zod.parse=(r,i)=>{if("backward"===i.direction)throw new eL(e.constructor.name);r.addIssue=i=>{"string"==typeof i?r.issues.push(oP.issue(i,r.value,t)):(i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=e),r.issues.push(oP.issue(i)))};let n=t.transform(r.value,r);return n instanceof Promise?n.then(e=>(r.value=e,r)):(r.value=n,r)}});function lB(e){return new lj({type:"transform",transform:e})}let lz=eP("ZodOptional",(e,t)=>{nN.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function lK(e){return new lz({type:"optional",innerType:e})}let lY=eP("ZodNullable",(e,t)=>{nP.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function lF(e){return new lY({type:"nullable",innerType:e})}function lq(e){return lK(lF(e))}let lV=eP("ZodDefault",(e,t)=>{nD.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function lG(e,t){return new lV({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():oP.shallowClone(t)}})}let lH=eP("ZodPrefault",(e,t)=>{nL.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function lZ(e,t){return new lH({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():oP.shallowClone(t)}})}let lW=eP("ZodNonOptional",(e,t)=>{nk.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function lQ(e,t){return new lW({type:"nonoptional",innerType:e,...oP.normalizeParams(t)})}let lJ=eP("ZodSuccess",(e,t)=>{n$.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function lX(e){return new lJ({type:"success",innerType:e})}let l0=eP("ZodCatch",(e,t)=>{nU.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function l1(e,t){return new l0({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}let l4=eP("ZodNaN",(e,t)=>{nj.init(e,t),o1.init(e,t)});function l2(e){return ax(l4,e)}let l6=eP("ZodPipe",(e,t)=>{nB.init(e,t),o1.init(e,t),e.in=t.in,e.out=t.out});function l3(e,t){return new l6({type:"pipe",in:e,out:t})}let l5=eP("ZodCodec",(e,t)=>{l6.init(e,t),nK.init(e,t)});function l8(e,t,r){return new l5({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}let l9=eP("ZodReadonly",(e,t)=>{nq.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function l7(e){return new l9({type:"readonly",innerType:e})}let de=eP("ZodTemplateLiteral",(e,t)=>{nG.init(e,t),o1.init(e,t)});function dt(e,t){return new de({type:"template_literal",parts:e,...oP.normalizeParams(t)})}let dr=eP("ZodLazy",(e,t)=>{nW.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.getter()});function di(e){return new dr({type:"lazy",getter:e})}let dn=eP("ZodPromise",(e,t)=>{nZ.init(e,t),o1.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ds(e){return new dn({type:"promise",innerType:e})}let da=eP("ZodFunction",(e,t)=>{nH.init(e,t),o1.init(e,t)});function du(e){return new da({type:"function",input:Array.isArray(e?.input)?lT(e?.input):e?.input??lc(li()),output:e?.output??li()})}let dl=eP("ZodCustom",(e,t)=>{nQ.init(e,t),o1.init(e,t)});function dd(e){let t=new r7({check:"custom"});return t._zod.check=e,t}function dc(e,t){return oS(dl,e??(()=>!0),t)}function dp(e,t={}){return oA(dl,e,t)}function df(e){return oT(e)}function dh(e,t={error:`Input not instance of ${e.name}`}){let r=new dl({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...oP.normalizeParams(t)});return r._zod.bag.Class=e,r}let dm=(...e)=>oO({Codec:l5,Boolean:uQ,String:o2},...e);function dy(e){let t=di(()=>l_([o6(e),uF(),uJ(),u7(),lc(t),lO(o6(),t)]));return t}function dg(e,t){return l3(lB(e),t)}e.s(["ZodFirstPartyTypeKind",()=>a,"ZodIssueCode",()=>d_,"getErrorMap",()=>dv,"setErrorMap",()=>db],33137);let d_={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function db(e){eM({customError:e})}function dv(){return eM().customError}function dE(e){return sG(o2,e)}function dS(e){return ap(uY,e)}function dA(e){return ab(uQ,e)}function dT(e){return aE(uX,e)}function dw(e){return aD(lu,e)}a||(a={}),e.s(["bigint",()=>dT,"boolean",()=>dA,"date",()=>dw,"number",()=>dS,"string",()=>dE],34512),eM(n9()),e.s(["$brand",()=>eD,"$input",()=>sK,"$output",()=>sz,"NEVER",()=>eN,"TimePrecision",()=>aa,"ZodAny",()=>le,"ZodArray",()=>ld,"ZodBase64",()=>uN,"ZodBase64URL",()=>uD,"ZodBigInt",()=>uX,"ZodBigIntFormat",()=>u1,"ZodBoolean",()=>uQ,"ZodCIDRv4",()=>uO,"ZodCIDRv6",()=>uI,"ZodCUID",()=>up,"ZodCUID2",()=>uh,"ZodCatch",()=>l0,"ZodCodec",()=>l5,"ZodCustom",()=>dl,"ZodCustomStringFormat",()=>uU,"ZodDate",()=>lu,"ZodDefault",()=>lV,"ZodDiscriminatedUnion",()=>lb,"ZodE164",()=>uL,"ZodEmail",()=>o5,"ZodEmoji",()=>uu,"ZodEnum",()=>lD,"ZodError",()=>oz,"ZodFile",()=>l$,"ZodFirstPartyTypeKind",()=>a,"ZodFunction",()=>da,"ZodGUID",()=>o9,"ZodIPv4",()=>uS,"ZodIPv6",()=>uT,"ZodISODate",()=>oL,"ZodISODateTime",()=>oD,"ZodISODuration",()=>oU,"ZodISOTime",()=>oM,"ZodIntersection",()=>lE,"ZodIssueCode",()=>d_,"ZodJWT",()=>uM,"ZodKSUID",()=>uv,"ZodLazy",()=>dr,"ZodLiteral",()=>lk,"ZodMap",()=>lI,"ZodNaN",()=>l4,"ZodNanoID",()=>ud,"ZodNever",()=>ln,"ZodNonOptional",()=>lW,"ZodNull",()=>u9,"ZodNullable",()=>lY,"ZodNumber",()=>uY,"ZodNumberFormat",()=>uq,"ZodObject",()=>lf,"ZodOptional",()=>lz,"ZodPipe",()=>l6,"ZodPrefault",()=>lH,"ZodPromise",()=>dn,"ZodReadonly",()=>l9,"ZodRealError",()=>oK,"ZodRecord",()=>lw,"ZodSet",()=>lN,"ZodString",()=>o2,"ZodStringFormat",()=>o3,"ZodSuccess",()=>lJ,"ZodSymbol",()=>u6,"ZodTemplateLiteral",()=>de,"ZodTransform",()=>lj,"ZodTuple",()=>lA,"ZodType",()=>o1,"ZodULID",()=>uy,"ZodURL",()=>us,"ZodUUID",()=>ue,"ZodUndefined",()=>u5,"ZodUnion",()=>lg,"ZodUnknown",()=>lr,"ZodVoid",()=>la,"ZodXID",()=>u_,"_ZodString",()=>o4,"_default",()=>lG,"_function",()=>du,"any",()=>lt,"array",()=>lc,"base64",()=>uP,"base64url",()=>ux,"bigint",()=>u0,"boolean",()=>uJ,"catch",()=>l1,"check",()=>dd,"cidrv4",()=>uR,"cidrv6",()=>uC,"clone",()=>ts,"codec",()=>l8,"coerce",()=>dx,"config",()=>eM,"core",()=>dN,"cuid",()=>uf,"cuid2",()=>um,"custom",()=>dc,"date",()=>ll,"decode",()=>oH,"decodeAsync",()=>oW,"discriminatedUnion",()=>lv,"e164",()=>uk,"email",()=>o8,"emoji",()=>ul,"encode",()=>oG,"encodeAsync",()=>oZ,"endsWith",()=>a0,"enum",()=>lx,"file",()=>lU,"flattenError",()=>t$,"float32",()=>uG,"float64",()=>uH,"formatError",()=>tU,"function",()=>du,"getErrorMap",()=>dv,"globalRegistry",()=>sq,"gt",()=>aM,"gte",()=>a$,"guid",()=>o7,"hash",()=>uK,"hex",()=>uz,"hostname",()=>uB,"httpUrl",()=>uo,"includes",()=>aJ,"instanceof",()=>dh,"int",()=>uV,"int32",()=>uZ,"int64",()=>u4,"intersection",()=>lS,"ipv4",()=>uA,"ipv6",()=>uw,"iso",()=>dD,"json",()=>dy,"jwt",()=>u$,"keyof",()=>lp,"ksuid",()=>uE,"lazy",()=>di,"length",()=>aH,"literal",()=>lM,"locales",()=>dP,"looseObject",()=>ly,"lowercase",()=>aW,"lt",()=>aL,"lte",()=>ak,"map",()=>lC,"maxLength",()=>aV,"maxSize",()=>aY,"mime",()=>a4,"minLength",()=>aG,"minSize",()=>aF,"multipleOf",()=>aK,"nan",()=>l2,"nanoid",()=>uc,"nativeEnum",()=>lL,"negative",()=>aj,"never",()=>ls,"nonnegative",()=>az,"nonoptional",()=>lQ,"nonpositive",()=>aB,"normalize",()=>a6,"null",()=>u7,"nullable",()=>lF,"nullish",()=>lq,"number",()=>uF,"object",()=>lh,"optional",()=>lK,"overwrite",()=>a2,"parse",()=>oY,"parseAsync",()=>oF,"partialRecord",()=>lR,"pipe",()=>l3,"positive",()=>aU,"prefault",()=>lZ,"preprocess",()=>dg,"prettifyError",()=>tz,"promise",()=>ds,"property",()=>a1,"readonly",()=>l7,"record",()=>lO,"refine",()=>dp,"regex",()=>aZ,"regexes",()=>oN,"registry",()=>sF,"safeDecode",()=>oJ,"safeDecodeAsync",()=>o0,"safeEncode",()=>oQ,"safeEncodeAsync",()=>oX,"safeParse",()=>oq,"safeParseAsync",()=>oV,"set",()=>lP,"setErrorMap",()=>db,"size",()=>aq,"startsWith",()=>aX,"strictObject",()=>lm,"string",()=>o6,"stringFormat",()=>uj,"stringbool",()=>dm,"success",()=>lX,"superRefine",()=>df,"symbol",()=>u3,"templateLiteral",()=>dt,"toJSONSchema",()=>oC,"toLowerCase",()=>a5,"toUpperCase",()=>a8,"transform",()=>lB,"treeifyError",()=>tj,"trim",()=>a3,"tuple",()=>lT,"uint32",()=>uW,"uint64",()=>u2,"ulid",()=>ug,"undefined",()=>u8,"union",()=>l_,"unknown",()=>li,"uppercase",()=>aQ,"url",()=>ua,"util",()=>oP,"uuid",()=>ut,"uuidv4",()=>ur,"uuidv6",()=>ui,"uuidv7",()=>un,"void",()=>lo,"xid",()=>ub],62810),e.i(54048),e.s(["$ZodAny",()=>nt,"$ZodArray",()=>no,"$ZodAsyncError",()=>ex,"$ZodBase64",()=>iW,"$ZodBase64URL",()=>iJ,"$ZodBigInt",()=>i5,"$ZodBigIntFormat",()=>i8,"$ZodBoolean",()=>i3,"$ZodCIDRv4",()=>iG,"$ZodCIDRv6",()=>iH,"$ZodCUID",()=>iM,"$ZodCUID2",()=>i$,"$ZodCatch",()=>nU,"$ZodCheck",()=>r7,"$ZodCheckBigIntFormat",()=>ia,"$ZodCheckEndsWith",()=>iv,"$ZodCheckGreaterThan",()=>ir,"$ZodCheckIncludes",()=>i_,"$ZodCheckLengthEquals",()=>ip,"$ZodCheckLessThan",()=>it,"$ZodCheckLowerCase",()=>iy,"$ZodCheckMaxLength",()=>id,"$ZodCheckMaxSize",()=>io,"$ZodCheckMimeType",()=>iA,"$ZodCheckMinLength",()=>ic,"$ZodCheckMinSize",()=>iu,"$ZodCheckMultipleOf",()=>ii,"$ZodCheckNumberFormat",()=>is,"$ZodCheckOverwrite",()=>iT,"$ZodCheckProperty",()=>iS,"$ZodCheckRegex",()=>im,"$ZodCheckSizeEquals",()=>il,"$ZodCheckStartsWith",()=>ib,"$ZodCheckStringFormat",()=>ih,"$ZodCheckUpperCase",()=>ig,"$ZodCodec",()=>nK,"$ZodCustom",()=>nQ,"$ZodCustomStringFormat",()=>i4,"$ZodDate",()=>ns,"$ZodDefault",()=>nD,"$ZodDiscriminatedUnion",()=>nm,"$ZodE164",()=>iX,"$ZodEmail",()=>iD,"$ZodEmoji",()=>iL,"$ZodEncodeError",()=>eL,"$ZodEnum",()=>nw,"$ZodError",()=>tk,"$ZodFile",()=>nR,"$ZodFunction",()=>nH,"$ZodGUID",()=>iN,"$ZodIPv4",()=>iq,"$ZodIPv6",()=>iV,"$ZodISODate",()=>iK,"$ZodISODateTime",()=>iz,"$ZodISODuration",()=>iF,"$ZodISOTime",()=>iY,"$ZodIntersection",()=>ny,"$ZodJWT",()=>i1,"$ZodKSUID",()=>iB,"$ZodLazy",()=>nW,"$ZodLiteral",()=>nO,"$ZodMap",()=>nE,"$ZodNaN",()=>nj,"$ZodNanoID",()=>ik,"$ZodNever",()=>ni,"$ZodNonOptional",()=>nk,"$ZodNull",()=>ne,"$ZodNullable",()=>nP,"$ZodNumber",()=>i2,"$ZodNumberFormat",()=>i6,"$ZodObject",()=>nc,"$ZodObjectJIT",()=>np,"$ZodOptional",()=>nN,"$ZodPipe",()=>nB,"$ZodPrefault",()=>nL,"$ZodPromise",()=>nZ,"$ZodReadonly",()=>nq,"$ZodRealError",()=>tM,"$ZodRecord",()=>nv,"$ZodRegistry",()=>sY,"$ZodSet",()=>nA,"$ZodString",()=>iI,"$ZodStringFormat",()=>iC,"$ZodSuccess",()=>n$,"$ZodSymbol",()=>i9,"$ZodTemplateLiteral",()=>nG,"$ZodTransform",()=>nI,"$ZodTuple",()=>n_,"$ZodType",()=>iR,"$ZodULID",()=>iU,"$ZodURL",()=>ix,"$ZodUUID",()=>iP,"$ZodUndefined",()=>i7,"$ZodUnion",()=>nh,"$ZodUnknown",()=>nr,"$ZodVoid",()=>nn,"$ZodXID",()=>ij,"$brand",()=>eD,"$constructor",()=>eP,"$input",()=>sK,"$output",()=>sz,"Doc",()=>iw,"JSONSchema",()=>dC,"JSONSchemaGenerator",()=>oI,"NEVER",()=>eN,"TimePrecision",()=>aa,"_any",()=>aR,"_array",()=>a9,"_base64",()=>ar,"_base64url",()=>ai,"_bigint",()=>av,"_boolean",()=>a_,"_catch",()=>oy,"_check",()=>ow,"_cidrv4",()=>ae,"_cidrv6",()=>at,"_coercedBigint",()=>aE,"_coercedBoolean",()=>ab,"_coercedDate",()=>aD,"_coercedNumber",()=>ap,"_coercedString",()=>sG,"_cuid",()=>s2,"_cuid2",()=>s6,"_custom",()=>oS,"_date",()=>aP,"_decode",()=>tJ,"_decodeAsync",()=>t4,"_default",()=>of,"_discriminatedUnion",()=>oe,"_e164",()=>an,"_email",()=>sH,"_emoji",()=>s1,"_encode",()=>tW,"_encodeAsync",()=>t0,"_endsWith",()=>a0,"_enum",()=>oa,"_file",()=>ol,"_float32",()=>ah,"_float64",()=>am,"_gt",()=>aM,"_gte",()=>a$,"_guid",()=>sZ,"_includes",()=>aJ,"_int",()=>af,"_int32",()=>ay,"_int64",()=>aS,"_intersection",()=>ot,"_ipv4",()=>s9,"_ipv6",()=>s7,"_isoDate",()=>au,"_isoDateTime",()=>ao,"_isoDuration",()=>ad,"_isoTime",()=>al,"_jwt",()=>as,"_ksuid",()=>s8,"_lazy",()=>ov,"_length",()=>aH,"_literal",()=>ou,"_lowercase",()=>aW,"_lt",()=>aL,"_lte",()=>ak,"_map",()=>on,"_max",()=>ak,"_maxLength",()=>aV,"_maxSize",()=>aY,"_mime",()=>a4,"_min",()=>a$,"_minLength",()=>aG,"_minSize",()=>aF,"_multipleOf",()=>aK,"_nan",()=>ax,"_nanoid",()=>s4,"_nativeEnum",()=>oo,"_negative",()=>aj,"_never",()=>aC,"_nonnegative",()=>az,"_nonoptional",()=>oh,"_nonpositive",()=>aB,"_normalize",()=>a6,"_null",()=>aO,"_nullable",()=>op,"_number",()=>ac,"_optional",()=>oc,"_overwrite",()=>a2,"_parse",()=>tK,"_parseAsync",()=>tF,"_pipe",()=>og,"_positive",()=>aU,"_promise",()=>oE,"_property",()=>a1,"_readonly",()=>o_,"_record",()=>oi,"_refine",()=>oA,"_regex",()=>aZ,"_safeDecode",()=>t5,"_safeDecodeAsync",()=>re,"_safeEncode",()=>t6,"_safeEncodeAsync",()=>t9,"_safeParse",()=>tV,"_safeParseAsync",()=>tH,"_set",()=>os,"_size",()=>aq,"_startsWith",()=>aX,"_string",()=>sV,"_stringFormat",()=>oR,"_stringbool",()=>oO,"_success",()=>om,"_superRefine",()=>oT,"_symbol",()=>aT,"_templateLiteral",()=>ob,"_toLowerCase",()=>a5,"_toUpperCase",()=>a8,"_transform",()=>od,"_trim",()=>a3,"_tuple",()=>or,"_uint32",()=>ag,"_uint64",()=>aA,"_ulid",()=>s3,"_undefined",()=>aw,"_union",()=>a7,"_unknown",()=>aI,"_uppercase",()=>aQ,"_url",()=>s0,"_uuid",()=>sW,"_uuidv4",()=>sQ,"_uuidv6",()=>sJ,"_uuidv7",()=>sX,"_void",()=>aN,"_xid",()=>s5,"clone",()=>ts,"config",()=>eM,"decode",()=>tX,"decodeAsync",()=>t2,"encode",()=>tQ,"encodeAsync",()=>t1,"flattenError",()=>t$,"formatError",()=>tU,"globalConfig",()=>ek,"globalRegistry",()=>sq,"isValidBase64",()=>iZ,"isValidBase64URL",()=>iQ,"isValidJWT",()=>i0,"locales",()=>dI,"parse",()=>tY,"parseAsync",()=>tq,"prettifyError",()=>tz,"regexes",()=>dR,"registry",()=>sF,"safeDecode",()=>t8,"safeDecodeAsync",()=>rt,"safeEncode",()=>t3,"safeEncodeAsync",()=>t7,"safeParse",()=>tG,"safeParseAsync",()=>tZ,"toDotPath",()=>tB,"toJSONSchema",()=>oC,"treeifyError",()=>tj,"util",()=>dO,"version",()=>iO],13007),e.i(82811),e.i(27438),e.i(15143),e.i(67021),e.i(62429),e.i(36608),e.i(22824);var dO=oP,dR=oN;e.s(["ar",()=>nX,"az",()=>n0,"be",()=>n4,"bg",()=>n2,"ca",()=>n6,"cs",()=>n3,"da",()=>n5,"de",()=>n8,"en",()=>n9,"eo",()=>n7,"es",()=>se,"fa",()=>st,"fi",()=>sr,"fr",()=>si,"frCA",()=>sn,"he",()=>ss,"hu",()=>sa,"id",()=>so,"is",()=>su,"it",()=>sl,"ja",()=>sd,"ka",()=>sc,"kh",()=>sf,"km",()=>sp,"ko",()=>sh,"lt",()=>s_,"mk",()=>sb,"ms",()=>sv,"nl",()=>sE,"no",()=>sS,"ota",()=>sA,"pl",()=>sw,"ps",()=>sT,"pt",()=>sO,"ru",()=>sI,"sl",()=>sC,"sv",()=>sN,"ta",()=>sP,"th",()=>sD,"tr",()=>sx,"ua",()=>sk,"uk",()=>sL,"ur",()=>sM,"vi",()=>s$,"yo",()=>sB,"zhCN",()=>sU,"zhTW",()=>sj],60544),e.i(79113);var dI=e.i(60544);e.i(52637),e.i(73911),e.i(62061),e.i(7159);var dC=e.i(33145),dN=e.i(13007);e.i(7855),e.s(["endsWith",()=>a0,"gt",()=>aM,"gte",()=>a$,"includes",()=>aJ,"length",()=>aH,"lowercase",()=>aW,"lt",()=>aL,"lte",()=>ak,"maxLength",()=>aV,"maxSize",()=>aY,"mime",()=>a4,"minLength",()=>aG,"minSize",()=>aF,"multipleOf",()=>aK,"negative",()=>aj,"nonnegative",()=>az,"nonpositive",()=>aB,"normalize",()=>a6,"overwrite",()=>a2,"positive",()=>aU,"property",()=>a1,"regex",()=>aZ,"size",()=>aq,"startsWith",()=>aX,"toLowerCase",()=>a5,"toUpperCase",()=>a8,"trim",()=>a3,"uppercase",()=>aQ],85648),e.i(64328),e.i(85648),e.i(15874),e.i(48804),e.s(["$brand",()=>eD,"ZodFirstPartyTypeKind",()=>a,"ZodIssueCode",()=>d_,"config",()=>eM,"getErrorMap",()=>dv,"setErrorMap",()=>db],63203),e.i(33137),e.i(63203);var oN=oN,oP=oP,dP=dI,dD=e.i(51047),dx=e.i(34512),dL=e.i(62810);let dk=dL;e.i(61166);var dM=dL;e.i(90544);var dx=dx;e.s(["a",()=>dW,"c",()=>dH,"d",()=>dJ,"g",()=>dZ,"s",()=>dQ],63129);var d$=e.i(12700);e.s(["g",()=>dU],73088);let dU=(e,t="ms")=>new Date(Date.now()+("sec"===t?1e3*e:e));var dj=e.i(9662),dB=e.i(35972),dz=e.i(20354);function dK(e,t="/api/auth"){if(function(e){try{let t=new URL(e).pathname.replace(/\/+$/,"")||"/";return"/"!==t}catch(t){throw new d$.BetterAuthError(`Invalid base URL: ${e}. Please provide a valid base URL.`)}}(e))return e;let r=e.replace(/\/+$/,"");return t&&"/"!==t?(t=t.startsWith("/")?t:`/${t}`,`${r}${t}`):r}function dY(e,t,r,i){if(e)return dK(e,t);if(!1!==i){let e=dj.env.BETTER_AUTH_URL||dj.env.NEXT_PUBLIC_BETTER_AUTH_URL||dj.env.PUBLIC_BETTER_AUTH_URL||dj.env.NUXT_PUBLIC_BETTER_AUTH_URL||dj.env.NUXT_PUBLIC_AUTH_URL||("/"!==dj.env.BASE_URL?dj.env.BASE_URL:void 0);if(e)return dK(e,t)}let n=r?.headers.get("x-forwarded-host"),s=r?.headers.get("x-forwarded-proto");if(n&&s)return dK(`${s}://${n}`,t);if(r){let e=dF(r.url);if(!e)throw new d$.BetterAuthError("Could not get origin from request. Please provide a valid base URL.");return dK(e,t)}}function dF(e){try{return new URL(e).origin}catch(e){return null}}function dq(e){try{return new URL(e).protocol}catch(e){return null}}function dV(e){try{return new URL(e).host}catch(e){return null}}e.s(["a",()=>dY,"b",()=>dV,"c",()=>dq,"g",()=>dF],36255);var dG=e.i(23770);e.i(91488);function dH(e){let t=(e.advanced?.useSecureCookies!==void 0?e.advanced?.useSecureCookies:void 0!==e.baseURL?!!e.baseURL.startsWith("https://"):dj.isProduction)?"__Secure-":"",r=!!e.advanced?.crossSubDomainCookies?.enabled,i=r?e.advanced?.crossSubDomainCookies?.domain||(e.baseURL?new URL(e.baseURL).hostname:void 0):void 0;if(r&&!i)throw new d$.BetterAuthError("baseURL is required when crossSubdomainCookies are enabled");return function(n,s={}){let a=e.advanced?.cookiePrefix||"better-auth",o=e.advanced?.cookies?.[n]?.name||`${a}.${n}`,u=e.advanced?.cookies?.[n]?.attributes;return{name:`${t}${o}`,attributes:{secure:!!t,sameSite:"lax",path:"/",httpOnly:!0,...r?{domain:i}:{},...e.advanced?.defaultCookieAttributes,...s,...u}}}}function dZ(e){let t=dH(e),r=t("session_token",{maxAge:e.session?.expiresIn||function(e,t){var r="7d";if("string"!=typeof r||0===r.length||r.length>100)throw Error(`Value provided to ms.parse() must be a string with length between 1 and 99. value=${JSON.stringify(r)}`);let i=/^(?<value>-?\d*\.?\d+) *(?<unit>milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)?$/i.exec(r);if(!i?.groups)return NaN;let{value:n,unit:s="ms"}=i.groups,a=parseFloat(n),o=s.toLowerCase();switch(o){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"months":case"month":case"mo":return 26298e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return 864e5*a;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*a;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*a;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:throw Error(`Unknown unit "${o}" provided to ms.parse(). value=${JSON.stringify(r)}`)}}("7d")/1e3}),i=t("session_data",{maxAge:e.session?.cookieCache?.maxAge||300}),n=t("dont_remember");return{sessionToken:{name:r.name,options:r.attributes},sessionData:{name:i.name,options:i.attributes},dontRememberToken:{name:n.name,options:n.attributes}}}async function dW(e,t,r){if(e.context.options.session?.cookieCache?.enabled){let i={session:Object.entries(t.session).reduce((t,[r,i])=>{let n=e.context.options.session?.additionalFields?.[r];return n&&!1===n.returned||(t[r]=i),t},{}),user:t.user},n={...e.context.authCookies.sessionData.options,maxAge:r?void 0:e.context.authCookies.sessionData.options.maxAge},s=dU(n.maxAge||60,"sec").getTime(),a=o.base64Url.encode(JSON.stringify({session:i,expiresAt:s,signature:await (0,dB.createHMAC)("SHA-256","base64urlnopad").sign(e.context.secret,JSON.stringify({...i,expiresAt:s}))}),{padding:!1});if(a.length>4093)return void e.context?.logger?.error(`Session data exceeds cookie size limit (${a.length} bytes > 4093 bytes). Consider reducing session data size or disabling cookie cache. Session will not be cached in cookie.`);e.setCookie(e.context.authCookies.sessionData.name,a,n)}}async function dQ(e,t,r,i){let n=await e.getSignedCookie(e.context.authCookies.dontRememberToken.name,e.context.secret);r=void 0!==r?r:!!n;let s=e.context.authCookies.sessionToken.options,a=r?void 0:e.context.sessionConfig.expiresIn;await e.setSignedCookie(e.context.authCookies.sessionToken.name,t.session.token,e.context.secret,{...s,maxAge:a,...i}),r&&await e.setSignedCookie(e.context.authCookies.dontRememberToken.name,"true",e.context.secret,e.context.authCookies.dontRememberToken.options),await dW(e,t,r),e.context.setNewSession(t),e.context.options.secondaryStorage&&await e.context.secondaryStorage?.set(t.session.token,JSON.stringify({user:t.user,session:t.session}),Math.floor((new Date(t.session.expiresAt).getTime()-Date.now())/1e3))}function dJ(e,t){e.setCookie(e.context.authCookies.sessionToken.name,"",{...e.context.authCookies.sessionToken.options,maxAge:0}),e.setCookie(e.context.authCookies.sessionData.name,"",{...e.context.authCookies.sessionData.options,maxAge:0}),t||e.setCookie(e.context.authCookies.dontRememberToken.name,"",{...e.context.authCookies.dontRememberToken.options,maxAge:0})}var dX=e.i(36870),d0=e.i(39127);function d1(e){let t,r;if("string"!=typeof e)throw new z("JWTs must use Compact JWS serialization, JWT must be a string");let{1:i,length:n}=e.split(".");if(5===n)throw new z("Only JWTs using Compact JWS serialization can be decoded");if(3!==n)throw new z("Invalid JWT");if(!i)throw new z("JWTs must contain a payload");try{t=x(i)}catch{throw new z("Failed to base64url decode the payload")}try{r=JSON.parse(P.decode(t))}catch{throw new z("Failed to parse the decoded payload as JSON")}if(!ei(r))throw new z("Invalid JWT Claims Set");return r}function d4(e){let t;if("string"==typeof e){let r=e.split(".");(3===r.length||5===r.length)&&([t]=r)}else if("object"==typeof e&&e)if("protected"in e)t=e.protected;else throw TypeError("Token does not contain a Protected Header");try{if("string"!=typeof t||!t)throw Error();let e=JSON.parse(P.decode(x(t)));if(!ei(e))throw Error();return e}catch{throw TypeError("Invalid Token or Protected Header formatting")}}async function d2(e,t,r){let i;if(!ei(e))throw TypeError("JWK must be an object");switch(t??=e.alg,i??=r?.extractable??e.ext,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return x(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new j('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return ep({...e,alg:t,ext:i});case"AKP":if("string"!=typeof e.alg||!e.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==t&&t!==e.alg)throw TypeError("JWK alg and alg option value mismatch");return ep({...e,ext:i});case"EC":case"OKP":return ep({...e,alg:t,ext:i});default:throw new j('Unsupported "kty" (Key Type) Parameter value')}}function d6(e){return ei(e)}e.s(["SocialProviderListEnum",()=>ca,"socialProviders",()=>cs],89222);class d3{#r;#i=new WeakMap;constructor(e){if(!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(d6)}(e))throw new K("JSON Web Key Set malformed");this.#r=structuredClone(e)}jwks(){return this.#r}async getKey(e,t){let{alg:r,kid:i}={...e,...t?.header},n=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new j('Unsupported "alg" value for a JSON Web Key Set')}}(r),s=this.#r.keys.filter(e=>{let t=n===e.kty;if(t&&"string"==typeof i&&(t=i===e.kid),t&&("string"==typeof e.alg||"AKP"===n)&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv;break;case"Ed25519":case"EdDSA":t="Ed25519"===e.crv}return t}),{0:a,length:o}=s;if(0===o)throw new Y;if(1!==o){let e=new F,t=this.#i;throw e[Symbol.asyncIterator]=async function*(){for(let e of s)try{yield await d5(t,e,r)}catch{}},e}return d5(this.#i,a,r)}}async function d5(e,t,r){let i=e.get(t)||e.set(t,{}).get(t);if(void 0===i[r]){let e=await d2({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new K("JSON Web Key Set members must be public keys");i[r]=e}return i[r]}function d8(e){let t=new d3(e),r=async(e,r)=>t.getKey(e,r);return Object.defineProperties(r,{jwks:{value:()=>structuredClone(t.jwks()),enumerable:!1,configurable:!1,writable:!1}}),r}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(r="jose/v6.1.0");let d9=Symbol();async function d7(e,t,r,i=fetch){let n=await i(e,{method:"GET",signal:r,redirect:"manual",headers:t}).catch(e=>{if("TimeoutError"===e.name)throw new q;throw e});if(200!==n.status)throw new k("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await n.json()}catch{throw new k("Failed to parse the JSON Web Key Set HTTP response as JSON")}}let ce=Symbol();class ct{#n;#s;#a;#o;#u;#l;#d;#c;#p;#f;constructor(e,t){if(!(e instanceof URL))throw TypeError("url must be an instance of URL");this.#n=new URL(e.href),this.#s="number"==typeof t?.timeoutDuration?t?.timeoutDuration:5e3,this.#a="number"==typeof t?.cooldownDuration?t?.cooldownDuration:3e4,this.#o="number"==typeof t?.cacheMaxAge?t?.cacheMaxAge:6e5,this.#d=new Headers(t?.headers),r&&!this.#d.has("User-Agent")&&this.#d.set("User-Agent",r),this.#d.has("accept")||(this.#d.set("accept","application/json"),this.#d.append("accept","application/jwk-set+json")),this.#c=t?.[d9],t?.[ce]!==void 0&&(this.#f=t?.[ce],function(e,t){return!("object"!=typeof e||null===e||!("uat"in e)||"number"!=typeof e.uat||Date.now()-e.uat>=t)&&"jwks"in e&&!!ei(e.jwks)&&!!Array.isArray(e.jwks.keys)&&!!Array.prototype.every.call(e.jwks.keys,ei)}(t?.[ce],this.#o)&&(this.#u=this.#f.uat,this.#p=d8(this.#f.jwks)))}pendingFetch(){return!!this.#l}coolingDown(){return"number"==typeof this.#u&&Date.now()<this.#u+this.#a}fresh(){return"number"==typeof this.#u&&Date.now()<this.#u+this.#o}jwks(){return this.#p?.jwks()}async getKey(e,t){this.#p&&this.fresh()||await this.reload();try{return await this.#p(e,t)}catch(r){if(r instanceof Y&&!1===this.coolingDown())return await this.reload(),this.#p(e,t);throw r}}async reload(){this.#l&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this.#l=void 0),this.#l||=d7(this.#n.href,this.#d,AbortSignal.timeout(this.#s),this.#c).then(e=>{this.#p=d8(e),this.#f&&(this.#f.uat=Date.now(),this.#f.jwks=e),this.#u=Date.now(),this.#l=void 0}).catch(e=>{throw this.#l=void 0,e}),await this.#l}}e.i(34075);let cr=async e=>{let{data:t}=await C("https://appleid.apple.com/auth/keys");if(!t?.keys)throw new eC.APIError("BAD_REQUEST",{message:"Keys not found"});let r=t.keys.find(t=>t.kid===e);if(!r)throw Error(`JWK with kid ${e} not found`);return await d2(r,r.alg)},ci=async(e,t,r)=>{let i=`https://cognito-idp.${t}.amazonaws.com/${r}/.well-known/jwks.json`;try{let{data:t}=await C(i);if(!t?.keys)throw new eC.APIError("BAD_REQUEST",{message:"Keys not found"});let r=t.keys.find(t=>t.kid===e);if(!r)throw Error(`JWK with kid ${e} not found`);return await d2(r,r.alg)}catch(e){throw dj.logger.error("Failed to fetch Cognito public key:",e),e}},cn=(e="")=>e.split("://").map(e=>e.replace(/\/{2,}/g,"/")).join("://"),cs={apple:e=>({id:"apple",name:"Apple",async createAuthorizationURL({state:t,scopes:r,redirectURI:i}){let n=e.disableDefaultScope?[]:["email","name"];return e.scope&&n.push(...e.scope),r&&n.push(...r),await eO({id:"apple",options:e,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:n,state:t,redirectURI:i,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i})=>eR({code:t,codeVerifier:r,redirectURI:i,options:e,tokenEndpoint:"https://appleid.apple.com/auth/token"}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);let{kid:i,alg:n}=d4(t);if(!i||!n)return!1;let s=await cr(i),{payload:a}=await eA(t,s,{algorithms:[n],issuer:"https://appleid.apple.com",audience:e.audience&&e.audience.length?e.audience:e.appBundleIdentifier?e.appBundleIdentifier:e.clientId,maxTokenAge:"1h"});return["email_verified","is_private_email"].forEach(e=>{void 0!==a[e]&&(a[e]=!!a[e])}),(!r||a.nonce===r)&&!!a},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.idToken)return null;let r=d1(t.idToken);if(!r)return null;let i=t.user?`${t.user.name?.firstName} ${t.user.name?.lastName}`:r.name||r.email,n="boolean"==typeof r.email_verified?r.email_verified:"true"===r.email_verified,s={...r,name:i},a=await e.mapProfileToUser?.(s);return{user:{id:r.sub,name:s.name,emailVerified:n,email:r.email,...a},data:s}},options:e}),atlassian:e=>({id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:t,scopes:r,codeVerifier:i,redirectURI:n}){if(!e.clientId||!e.clientSecret)throw dj.logger.error("Client Id and Secret are required for Atlassian"),new d$.BetterAuthError("CLIENT_ID_AND_SECRET_REQUIRED");if(!i)throw new d$.BetterAuthError("codeVerifier is required for Atlassian");let s=e.disableDefaultScope?[]:["read:jira-user","offline_access"];return e.scope&&s.push(...e.scope),r&&s.push(...r),eO({id:"atlassian",options:e,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:s,state:t,codeVerifier:i,redirectURI:n,additionalParams:{audience:"api.atlassian.com"},prompt:e.prompt})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i})=>eR({code:t,codeVerifier:r,redirectURI:i,options:e,tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientSecret:e.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.accessToken)return null;try{let{data:r}=await C("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(!r)return null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.account_id,name:r.name,email:r.email,image:r.picture,emailVerified:!1,...i},data:r}}catch(e){return dj.logger.error("Failed to fetch user info from Figma:",e),null}},options:e}),cognito:e=>{if(!e.domain||!e.region||!e.userPoolId)throw dj.logger.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new d$.BetterAuthError("DOMAIN_AND_REGION_REQUIRED");let t=e.domain.replace(/^https?:\/\//,""),r=`https://${t}/oauth2/authorize`,i=`https://${t}/oauth2/token`,n=`https://${t}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:t,scopes:i,codeVerifier:n,redirectURI:s}){if(!e.clientId)throw dj.logger.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new d$.BetterAuthError("CLIENT_ID_AND_SECRET_REQUIRED");if(e.requireClientSecret&&!e.clientSecret)throw dj.logger.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new d$.BetterAuthError("CLIENT_SECRET_REQUIRED");let a=e.disableDefaultScope?[]:["openid","profile","email"];return e.scope&&a.push(...e.scope),i&&a.push(...i),await eO({id:"cognito",options:{...e},authorizationEndpoint:r,scopes:a,state:t,codeVerifier:n,redirectURI:s,prompt:e.prompt})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>eR({code:t,codeVerifier:r,redirectURI:n,options:e,tokenEndpoint:i}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:i}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);try{let{kid:i,alg:n}=d4(t);if(!i||!n)return!1;let s=await ci(i,e.region,e.userPoolId),a=`https://cognito-idp.${e.region}.amazonaws.com/${e.userPoolId}`,{payload:o}=await eA(t,s,{algorithms:[n],issuer:a,audience:e.clientId,maxTokenAge:"1h"});if(r&&o.nonce!==r)return!1;return!0}catch(e){return dj.logger.error("Failed to verify ID token:",e),!1}},async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(t.idToken)try{let r=d1(t.idToken);if(!r)return null;let i=r.name||r.given_name||r.username||r.email,n={...r,name:i},s=await e.mapProfileToUser?.(n);return{user:{id:r.sub,name:n.name,email:r.email,image:r.picture,emailVerified:r.email_verified,...s},data:n}}catch(e){dj.logger.error("Failed to decode ID token:",e)}if(t.accessToken)try{let{data:r}=await C(n,{headers:{Authorization:`Bearer ${t.accessToken}`}});if(r){let t=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name||r.given_name||r.username,email:r.email,image:r.picture,emailVerified:r.email_verified,...t},data:r}}}catch(e){dj.logger.error("Failed to fetch user info from Cognito:",e)}return null},options:e}},discord:e=>({id:"discord",name:"Discord",createAuthorizationURL({state:t,scopes:r,redirectURI:i}){let n=e.disableDefaultScope?[]:["identify","email"];r&&n.push(...r),e.scope&&n.push(...e.scope);let s=n.includes("bot")&&void 0!==e.permissions?`&permissions=${e.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${n.join("+")}&response_type=code&client_id=${e.clientId}&redirect_uri=${encodeURIComponent(e.redirectURI||i)}&state=${t}&prompt=${e.prompt||"none"}${s}`)},validateAuthorizationCode:async({code:t,redirectURI:r})=>eR({code:t,redirectURI:r,options:e,tokenEndpoint:"https://discord.com/api/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${t.accessToken}`}});if(i)return null;if(null===r.avatar){let e="0"===r.discriminator?Number(BigInt(r.id)>>BigInt(22))%6:parseInt(r.discriminator)%5;r.image_url=`https://cdn.discordapp.com/embed/avatars/${e}.png`}else{let e=r.avatar.startsWith("a_")?"gif":"png";r.image_url=`https://cdn.discordapp.com/avatars/${r.id}/${r.avatar}.${e}`}let n=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.global_name||r.username||"",email:r.email,emailVerified:r.verified,image:r.image_url,...n},data:r}},options:e}),facebook:e=>({id:"facebook",name:"Facebook",async createAuthorizationURL({state:t,scopes:r,redirectURI:i,loginHint:n}){let s=e.disableDefaultScope?[]:["email","public_profile"];return e.scope&&s.push(...e.scope),r&&s.push(...r),await eO({id:"facebook",options:e,authorizationEndpoint:"https://www.facebook.com/v21.0/dialog/oauth",scopes:s,state:t,redirectURI:i,loginHint:n,additionalParams:e.configId?{config_id:e.configId}:{}})},validateAuthorizationCode:async({code:t,redirectURI:r})=>eR({code:t,redirectURI:r,options:e,tokenEndpoint:"https://graph.facebook.com/oauth/access_token"}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);if(3===t.split(".").length)try{let{payload:i}=await eA(t,function(e,t){let r=new ct(e,void 0),i=async(e,t)=>r.getKey(e,t);return Object.defineProperties(i,{coolingDown:{get:()=>r.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>r.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>r.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>r.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>r.jwks(),enumerable:!0,configurable:!1,writable:!1}}),i}(new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/")),{algorithms:["RS256"],audience:e.clientId,issuer:"https://www.facebook.com"});if(r&&i.nonce!==r)return!1;return!!i}catch(e){return!1}return!0},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://graph.facebook.com/v18.0/oauth/access_token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(t.idToken&&3===t.idToken.split(".").length){let r=d1(t.idToken),i={id:r.sub,name:r.name,email:r.email,picture:{data:{url:r.picture,height:100,width:100,is_silhouette:!1}}},n=await e.mapProfileToUser?.({...i,email_verified:!0});return{user:{...i,emailVerified:!0,...n},data:r}}let r=["id","name","email","picture",...e?.fields||[]],{data:i,error:n}=await C("https://graph.facebook.com/me?fields="+r.join(","),{auth:{type:"Bearer",token:t.accessToken}});if(n)return null;let s=await e.mapProfileToUser?.(i);return{user:{id:i.id,name:i.name,email:i.email,image:i.picture.data.url,emailVerified:i.email_verified,...s},data:i}},options:e}),figma:e=>({id:"figma",name:"Figma",async createAuthorizationURL({state:t,scopes:r,codeVerifier:i,redirectURI:n}){if(!e.clientId||!e.clientSecret)throw dj.logger.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new d$.BetterAuthError("CLIENT_ID_AND_SECRET_REQUIRED");if(!i)throw new d$.BetterAuthError("codeVerifier is required for Figma");let s=e.disableDefaultScope?[]:["file_read"];return e.scope&&s.push(...e.scope),r&&s.push(...r),await eO({id:"figma",options:e,authorizationEndpoint:"https://www.figma.com/oauth",scopes:s,state:t,codeVerifier:i,redirectURI:n})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i})=>eR({code:t,codeVerifier:r,redirectURI:i,options:e,tokenEndpoint:"https://www.figma.com/api/oauth/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://www.figma.com/api/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);try{let{data:r}=await C("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(!r)return dj.logger.error("Failed to fetch user from Figma"),null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.handle,email:r.email,image:r.img_url,emailVerified:!!r.email,...i},data:r}}catch(e){return dj.logger.error("Failed to fetch user info from Figma:",e),null}},options:e}),github:e=>({id:"github",name:"GitHub",createAuthorizationURL({state:t,scopes:r,loginHint:i,redirectURI:n}){let s=e.disableDefaultScope?[]:["read:user","user:email"];return e.scope&&s.push(...e.scope),r&&s.push(...r),eO({id:"github",options:e,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:s,state:t,redirectURI:n,loginHint:i,prompt:e.prompt})},validateAuthorizationCode:async({code:t,redirectURI:r})=>eR({code:t,redirectURI:r,options:e,tokenEndpoint:"https://github.com/login/oauth/access_token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${t.accessToken}`}});if(i)return null;let{data:n}=await C("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${t.accessToken}`,"User-Agent":"better-auth"}});!r.email&&n&&(r.email=(n.find(e=>e.primary)??n[0])?.email);let s=n?.find(e=>e.email===r.email)?.verified??!1,a=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name||r.login,email:r.email,image:r.avatar_url,emailVerified:s,...a},data:r}},options:e}),microsoft:e=>{let t=e.tenantId||"common",r=e.authority||"https://login.microsoftonline.com",i=`${r}/${t}/oauth2/v2.0/authorize`,n=`${r}/${t}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(t){let r=e.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return e.scope&&r.push(...e.scope),t.scopes&&r.push(...t.scopes),eO({id:"microsoft",options:e,authorizationEndpoint:i,state:t.state,codeVerifier:t.codeVerifier,scopes:r,redirectURI:t.redirectURI,prompt:e.prompt,loginHint:t.loginHint})},validateAuthorizationCode:({code:t,codeVerifier:r,redirectURI:i})=>eR({code:t,codeVerifier:r,redirectURI:i,options:e,tokenEndpoint:n}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.idToken)return null;let r=d1(t.idToken),i=e.profilePhotoSize||48;await C(`https://graph.microsoft.com/v1.0/me/photos/${i}x${i}/$value`,{headers:{Authorization:`Bearer ${t.accessToken}`},async onResponse(t){if(!e.disableProfilePhoto&&t.response.ok)try{let e=t.response.clone(),i=await e.arrayBuffer(),n=o.base64.encode(i);r.picture=`data:image/jpeg;base64, ${n}`}catch(e){dj.logger.error(e&&"object"==typeof e&&"name"in e?e.name:"",e)}}});let n=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name,email:r.email,image:r.picture,emailVerified:!0,...n},data:r}},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>{let r=e.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return e.scope&&r.push(...e.scope),eI({refreshToken:t,options:{clientId:e.clientId,clientSecret:e.clientSecret},extraParams:{scope:r.join(" ")},tokenEndpoint:n})},options:e}},google:e=>({id:"google",name:"Google",async createAuthorizationURL({state:t,scopes:r,codeVerifier:i,redirectURI:n,loginHint:s,display:a}){if(!e.clientId||!e.clientSecret)throw dj.logger.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new d$.BetterAuthError("CLIENT_ID_AND_SECRET_REQUIRED");if(!i)throw new d$.BetterAuthError("codeVerifier is required for Google");let o=e.disableDefaultScope?[]:["email","profile","openid"];return e.scope&&o.push(...e.scope),r&&o.push(...r),await eO({id:"google",options:e,authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",scopes:o,state:t,codeVerifier:i,redirectURI:n,prompt:e.prompt,accessType:e.accessType,display:a||e.display,loginHint:s,hd:e.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i})=>eR({code:t,codeVerifier:r,redirectURI:i,options:e,tokenEndpoint:"https://oauth2.googleapis.com/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://www.googleapis.com/oauth2/v4/token"}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);let i=`https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${t}`,{data:n}=await C(i);return!!n&&n.aud===e.clientId&&("https://accounts.google.com"===n.iss||"accounts.google.com"===n.iss)},async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.idToken)return null;let r=d1(t.idToken),i=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name,email:r.email,image:r.picture,emailVerified:r.email_verified,...i},data:r}},options:e}),huggingface:e=>({id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:t,scopes:r,codeVerifier:i,redirectURI:n}){let s=e.disableDefaultScope?[]:["openid","profile","email"];return e.scope&&s.push(...e.scope),r&&s.push(...r),eO({id:"huggingface",options:e,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:s,state:t,codeVerifier:i,redirectURI:n})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i})=>eR({code:t,codeVerifier:r,redirectURI:i,options:e,tokenEndpoint:"https://huggingface.co/oauth/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(i)return null;let n=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name||r.preferred_username,email:r.email,image:r.picture,emailVerified:r.email_verified??!1,...n},data:r}},options:e}),slack:e=>({id:"slack",name:"Slack",createAuthorizationURL({state:t,scopes:r,redirectURI:i}){let n=e.disableDefaultScope?[]:["openid","profile","email"];r&&n.push(...r),e.scope&&n.push(...e.scope);let s=new URL("https://slack.com/openid/connect/authorize");return s.searchParams.set("scope",n.join(" ")),s.searchParams.set("response_type","code"),s.searchParams.set("client_id",e.clientId),s.searchParams.set("redirect_uri",e.redirectURI||i),s.searchParams.set("state",t),s},validateAuthorizationCode:async({code:t,redirectURI:r})=>eR({code:t,redirectURI:r,options:e,tokenEndpoint:"https://slack.com/api/openid.connect.token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${t.accessToken}`}});if(i)return null;let n=await e.mapProfileToUser?.(r);return{user:{id:r["https://slack.com/user_id"],name:r.name||"",email:r.email,emailVerified:r.email_verified,image:r.picture||r["https://slack.com/user_image_512"],...n},data:r}},options:e}),spotify:e=>({id:"spotify",name:"Spotify",createAuthorizationURL({state:t,scopes:r,codeVerifier:i,redirectURI:n}){let s=e.disableDefaultScope?[]:["user-read-email"];return e.scope&&s.push(...e.scope),r&&s.push(...r),eO({id:"spotify",options:e,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:s,state:t,codeVerifier:i,redirectURI:n})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i})=>eR({code:t,codeVerifier:r,redirectURI:i,options:e,tokenEndpoint:"https://accounts.spotify.com/api/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(i)return null;let n=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.display_name,email:r.email,image:r.images[0]?.url,emailVerified:!1,...n},data:r}},options:e}),twitch:e=>({id:"twitch",name:"Twitch",createAuthorizationURL({state:t,scopes:r,redirectURI:i}){let n=e.disableDefaultScope?[]:["user:read:email","openid"];return e.scope&&n.push(...e.scope),r&&n.push(...r),eO({id:"twitch",redirectURI:i,options:e,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:n,state:t,claims:e.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:t,redirectURI:r})=>eR({code:t,redirectURI:r,options:e,tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let r=t.idToken;if(!r)return dj.logger.error("No idToken found in token"),null;let i=d1(r),n=await e.mapProfileToUser?.(i);return{user:{id:i.sub,name:i.preferred_username,email:i.email,image:i.picture,emailVerified:i.email_verified,...n},data:i}},options:e}),twitter:e=>({id:"twitter",name:"Twitter",createAuthorizationURL(t){let r=e.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];return e.scope&&r.push(...e.scope),t.scopes&&r.push(...t.scopes),eO({id:"twitter",options:e,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:r,state:t.state,codeVerifier:t.codeVerifier,redirectURI:t.redirectURI})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i})=>eR({code:t,codeVerifier:r,authentication:"basic",redirectURI:i,options:e,tokenEndpoint:"https://api.x.com/2/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(i)return null;let{data:n,error:s}=await C("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}}),a=!1;!s&&n?.data?.confirmed_email&&(r.data.email=n.data.confirmed_email,a=!0);let o=await e.mapProfileToUser?.(r);return{user:{id:r.data.id,name:r.data.name,email:r.data.email||r.data.username||null,image:r.data.profile_image_url,emailVerified:a,...o},data:r}},options:e}),dropbox:e=>({id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:t,scopes:r,codeVerifier:i,redirectURI:n})=>{let s=e.disableDefaultScope?[]:["account_info.read"];e.scope&&s.push(...e.scope),r&&s.push(...r);let a={};return e.accessType&&(a.token_access_type=e.accessType),await eO({id:"dropbox",options:e,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:s,state:t,redirectURI:n,codeVerifier:i,additionalParams:a})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i})=>await eR({code:t,codeVerifier:r,redirectURI:i,options:e,tokenEndpoint:"https://api.dropboxapi.com/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${t.accessToken}`}});if(i)return null;let n=await e.mapProfileToUser?.(r);return{user:{id:r.account_id,name:r.name?.display_name,email:r.email,emailVerified:r.email_verified||!1,image:r.profile_photo_url,...n},data:r}},options:e}),kick:e=>({id:"kick",name:"Kick",createAuthorizationURL({state:t,scopes:r,redirectURI:i,codeVerifier:n}){let s=e.disableDefaultScope?[]:["user:read"];return e.scope&&s.push(...e.scope),r&&s.push(...r),eO({id:"kick",redirectURI:i,options:e,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:s,codeVerifier:n,state:t})},validateAuthorizationCode:async({code:t,redirectURI:r,codeVerifier:i})=>eR({code:t,redirectURI:r,options:e,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:i}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(i)return null;let n=r.data[0],s=await e.mapProfileToUser?.(n);return{user:{id:n.user_id,name:n.name,email:n.email,image:n.profile_picture,emailVerified:!0,...s},data:n}},options:e}),linear:e=>{let t="https://api.linear.app/oauth/token";return{id:"linear",name:"Linear",createAuthorizationURL({state:t,scopes:r,loginHint:i,redirectURI:n}){let s=e.disableDefaultScope?[]:["read"];return e.scope&&s.push(...e.scope),r&&s.push(...r),eO({id:"linear",options:e,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:s,state:t,redirectURI:n,loginHint:i})},validateAuthorizationCode:async({code:r,redirectURI:i})=>eR({code:r,redirectURI:i,options:e,tokenEndpoint:t}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>eI({refreshToken:r,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:t}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(i||!r?.data?.viewer)return null;let n=r.data.viewer,s=await e.mapProfileToUser?.(n);return{user:{id:r.data.viewer.id,name:r.data.viewer.name,email:r.data.viewer.email,image:r.data.viewer.avatarUrl,emailVerified:!0,...s},data:n}},options:e}},linkedin:e=>{let t="https://www.linkedin.com/oauth/v2/accessToken";return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:t,scopes:r,redirectURI:i,loginHint:n})=>{let s=e.disableDefaultScope?[]:["profile","email","openid"];return e.scope&&s.push(...e.scope),r&&s.push(...r),await eO({id:"linkedin",options:e,authorizationEndpoint:"https://www.linkedin.com/oauth/v2/authorization",scopes:s,state:t,loginHint:n,redirectURI:i})},validateAuthorizationCode:async({code:r,redirectURI:i})=>await eR({code:r,redirectURI:i,options:e,tokenEndpoint:t}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>eI({refreshToken:r,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:t}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});if(i)return null;let n=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name,email:r.email,emailVerified:r.email_verified||!1,image:r.picture,...n},data:r}},options:e}},gitlab:e=>{let{authorizationEndpoint:t,tokenEndpoint:r,userinfoEndpoint:i}=(e=>{let t=e||"https://gitlab.com";return{authorizationEndpoint:cn(`${t}/oauth/authorize`),tokenEndpoint:cn(`${t}/oauth/token`),userinfoEndpoint:cn(`${t}/api/v4/user`)}})(e.issuer),n="gitlab";return{id:n,name:"Gitlab",createAuthorizationURL:async({state:r,scopes:i,codeVerifier:s,loginHint:a,redirectURI:o})=>{let u=e.disableDefaultScope?[]:["read_user"];return e.scope&&u.push(...e.scope),i&&u.push(...i),await eO({id:n,options:e,authorizationEndpoint:t,scopes:u,state:r,redirectURI:o,codeVerifier:s,loginHint:a})},validateAuthorizationCode:async({code:t,redirectURI:i,codeVerifier:n})=>eR({code:t,redirectURI:i,options:e,codeVerifier:n,tokenEndpoint:r}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:r}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:n}=await C(i,{headers:{authorization:`Bearer ${t.accessToken}`}});if(n||"active"!==r.state||r.locked)return null;let s=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name??r.username,email:r.email,image:r.avatar_url,emailVerified:!0,...s},data:r}},options:e}},tiktok:e=>({id:"tiktok",name:"TikTok",createAuthorizationURL({state:t,scopes:r,redirectURI:i}){let n=e.disableDefaultScope?[]:["user.info.profile"];return e.scope&&n.push(...e.scope),r&&n.push(...r),new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${n.join(",")}&response_type=code&client_key=${e.clientKey}&redirect_uri=${encodeURIComponent(e.redirectURI||i)}&state=${t}`)},validateAuthorizationCode:async({code:t,redirectURI:r})=>eR({code:t,redirectURI:e.redirectURI||r,options:{clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientSecret:e.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:e.clientKey}}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://open.tiktokapis.com/v2/user/info/?fields=open_id,avatar_large_url,display_name,username",{headers:{authorization:`Bearer ${t.accessToken}`}});return i?null:{user:{email:r.data.user.email||r.data.user.username,id:r.data.user.open_id,name:r.data.user.display_name||r.data.user.username,image:r.data.user.avatar_large_url,emailVerified:!!r.data.user.email},data:r}},options:e}),reddit:e=>({id:"reddit",name:"Reddit",createAuthorizationURL({state:t,scopes:r,redirectURI:i}){let n=e.disableDefaultScope?[]:["identity"];return e.scope&&n.push(...e.scope),r&&n.push(...r),eO({id:"reddit",options:e,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:n,state:t,redirectURI:i,duration:e.duration})},validateAuthorizationCode:async({code:t,redirectURI:r})=>{let i=new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:e.redirectURI||r}),n={"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${o.base64.encode(`${e.clientId}:${e.clientSecret}`)}`},{data:s,error:a}=await C("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:n,body:i.toString()});if(a)throw a;return eT(s)},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${t.accessToken}`,"User-Agent":"better-auth"}});if(i)return null;let n=await e.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name,email:r.oauth_client_id,emailVerified:r.has_verified_email,image:r.icon_img?.split("?")[0],...n},data:r}},options:e}),roblox:e=>({id:"roblox",name:"Roblox",createAuthorizationURL({state:t,scopes:r,redirectURI:i}){let n=e.disableDefaultScope?[]:["openid","profile"];return e.scope&&n.push(...e.scope),r&&n.push(...r),new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${n.join("+")}&response_type=code&client_id=${e.clientId}&redirect_uri=${encodeURIComponent(e.redirectURI||i)}&state=${t}&prompt=${e.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:t,redirectURI:r})=>eR({code:t,redirectURI:e.redirectURI||r,options:e,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${t.accessToken}`}});if(i)return null;let n=await e.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.nickname||r.preferred_username||"",image:r.picture,email:r.preferred_username||null,emailVerified:!0,...n},data:{...r}}},options:e}),salesforce:e=>{let t="sandbox"===(e.environment??"production"),r=e.loginUrl?`https://${e.loginUrl}/services/oauth2/authorize`:t?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",i=e.loginUrl?`https://${e.loginUrl}/services/oauth2/token`:t?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",n=e.loginUrl?`https://${e.loginUrl}/services/oauth2/userinfo`:t?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:t,scopes:i,codeVerifier:n,redirectURI:s}){if(!e.clientId||!e.clientSecret)throw dj.logger.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new d$.BetterAuthError("CLIENT_ID_AND_SECRET_REQUIRED");if(!n)throw new d$.BetterAuthError("codeVerifier is required for Salesforce");let a=e.disableDefaultScope?[]:["openid","email","profile"];return e.scope&&a.push(...e.scope),i&&a.push(...i),eO({id:"salesforce",options:e,authorizationEndpoint:r,scopes:a,state:t,codeVerifier:n,redirectURI:e.redirectURI||s})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:n})=>eR({code:t,codeVerifier:r,redirectURI:e.redirectURI||n,options:e,tokenEndpoint:i}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientSecret:e.clientSecret},tokenEndpoint:i}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);try{let{data:r}=await C(n,{headers:{Authorization:`Bearer ${t.accessToken}`}});if(!r)return dj.logger.error("Failed to fetch user info from Salesforce"),null;let i=await e.mapProfileToUser?.(r);return{user:{id:r.user_id,name:r.name,email:r.email,image:r.photos?.picture||r.photos?.thumbnail,emailVerified:r.email_verified??!1,...i},data:r}}catch(e){return dj.logger.error("Failed to fetch user info from Salesforce:",e),null}},options:e}},vk:e=>({id:"vk",name:"VK",async createAuthorizationURL({state:t,scopes:r,codeVerifier:i,redirectURI:n}){let s=e.disableDefaultScope?[]:["email","phone"];return e.scope&&s.push(...e.scope),r&&s.push(...r),eO({id:"vk",options:e,authorizationEndpoint:"https://id.vk.com/authorize",scopes:s,state:t,redirectURI:n,codeVerifier:i})},validateAuthorizationCode:async({code:t,codeVerifier:r,redirectURI:i,deviceId:n})=>eR({code:t,codeVerifier:r,redirectURI:e.redirectURI||i,options:e,deviceId:n,tokenEndpoint:"https://id.vk.com/oauth2/auth"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.accessToken)return null;let r=new URLSearchParams({access_token:t.accessToken,client_id:e.clientId}).toString(),{data:i,error:n}=await C("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(n||!i.user.email)return null;let s=await e.mapProfileToUser?.(i);return{user:{id:i.user.user_id,first_name:i.user.first_name,last_name:i.user.last_name,email:i.user.email,image:i.user.avatar,emailVerified:!!i.user.email,birthday:i.user.birthday,sex:i.user.sex,name:`${i.user.first_name} ${i.user.last_name}`,...s},data:i}},options:e}),zoom:e=>{let t={pkce:!0,...e};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:e,redirectURI:r,codeVerifier:i})=>{let n=new URLSearchParams({response_type:"code",redirect_uri:t.redirectURI?t.redirectURI:r,client_id:t.clientId,state:e});if(t.pkce){let e=await ew(i);n.set("code_challenge_method","S256"),n.set("code_challenge",e)}let s=new URL("https://zoom.us/oauth/authorize");return s.search=n.toString(),s},validateAuthorizationCode:async({code:e,redirectURI:r,codeVerifier:i})=>eR({code:e,redirectURI:t.redirectURI||r,codeVerifier:i,options:t,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await C("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${e.accessToken}`}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.display_name,image:r.pic_url,email:r.email,emailVerified:!!r.verified,...n},data:{...r}}}}},notion:e=>{let t="https://api.notion.com/v1/oauth/token";return{id:"notion",name:"Notion",createAuthorizationURL({state:t,scopes:r,loginHint:i,redirectURI:n}){let s=(e.disableDefaultScope,[]);return e.scope&&s.push(...e.scope),r&&s.push(...r),eO({id:"notion",options:e,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:s,state:t,redirectURI:n,loginHint:i,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:r,redirectURI:i})=>eR({code:r,redirectURI:i,options:e,tokenEndpoint:t,authentication:"basic"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>eI({refreshToken:r,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:t}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${t.accessToken}`,"Notion-Version":"2022-06-28"}});if(i||!r)return null;let n=r.bot?.owner?.user;if(!n)return null;let s=await e.mapProfileToUser?.(n);return{user:{id:n.id,name:n.name||"Notion User",email:n.person?.email||null,image:n.avatar_url,emailVerified:!!n.person?.email,...s},data:n}},options:e}},kakao:e=>({id:"kakao",name:"Kakao",createAuthorizationURL({state:t,scopes:r,redirectURI:i}){let n=e.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];return e.scope&&n.push(...e.scope),r&&n.push(...r),eO({id:"kakao",options:e,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:n,state:t,redirectURI:i})},validateAuthorizationCode:async({code:t,redirectURI:r})=>eR({code:t,redirectURI:r,options:e,tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(i||!r)return null;let n=await e.mapProfileToUser?.(r),s=r.kakao_account||{},a=s.profile||{};return{user:{id:String(r.id),name:a.nickname||s.name||void 0,email:s.email,image:a.profile_image_url||a.thumbnail_image_url,emailVerified:!!s.is_email_valid&&!!s.is_email_verified,...n},data:r}},options:e}),naver:e=>({id:"naver",name:"Naver",createAuthorizationURL({state:t,scopes:r,redirectURI:i}){let n=e.disableDefaultScope?[]:["profile","email"];return e.scope&&n.push(...e.scope),r&&n.push(...r),eO({id:"naver",options:e,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:n,state:t,redirectURI:i})},validateAuthorizationCode:async({code:t,redirectURI:r})=>eR({code:t,redirectURI:r,options:e,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>eI({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let{data:r,error:i}=await C("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${t.accessToken}`}});if(i||!r||"00"!==r.resultcode)return null;let n=await e.mapProfileToUser?.(r),s=r.response||{};return{user:{id:s.id,name:s.name||s.nickname,email:s.email,image:s.profile_image,emailVerified:!1,...n},data:r}},options:e}),line:e=>{let t="https://api.line.me/oauth2/v2.1/token";return{id:"line",name:"LINE",async createAuthorizationURL({state:t,scopes:r,codeVerifier:i,redirectURI:n,loginHint:s}){let a=e.disableDefaultScope?[]:["openid","profile","email"];return e.scope&&a.push(...e.scope),r&&a.push(...r),await eO({id:"line",options:e,authorizationEndpoint:"https://access.line.me/oauth2/v2.1/authorize",scopes:a,state:t,codeVerifier:i,redirectURI:n,loginHint:s})},validateAuthorizationCode:async({code:r,codeVerifier:i,redirectURI:n})=>eR({code:r,codeVerifier:i,redirectURI:n,options:e,tokenEndpoint:t}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>eI({refreshToken:r,options:{clientId:e.clientId,clientSecret:e.clientSecret},tokenEndpoint:t}),async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);let i=new URLSearchParams;i.set("id_token",t),i.set("client_id",e.clientId),r&&i.set("nonce",r);let{data:n,error:s}=await C("https://api.line.me/oauth2/v2.1/verify",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:i});return!s&&!!n&&n.aud===e.clientId&&(!r||!n.nonce||n.nonce===r)},async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);let r=null;if(t.idToken)try{r=d1(t.idToken)}catch{}if(!r){let{data:e}=await C("https://api.line.me/oauth2/v2.1/userinfo",{headers:{authorization:`Bearer ${t.accessToken}`}});r=e||null}if(!r)return null;let i=await e.mapProfileToUser?.(r),n=r.sub||r.userId,s=r.name||r.displayName,a=r.picture||r.pictureUrl||void 0;return{user:{id:n,name:s,email:r.email,image:a,emailVerified:!1,...i},data:r}},options:e}},paypal:e=>{let t="sandbox"===(e.environment||"sandbox"),r=t?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",i=t?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",n=t?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:t,codeVerifier:i,redirectURI:n}){if(!e.clientId||!e.clientSecret)throw dj.logger.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new d$.BetterAuthError("CLIENT_ID_AND_SECRET_REQUIRED");return await eO({id:"paypal",options:e,authorizationEndpoint:r,scopes:[],state:t,codeVerifier:i,redirectURI:n,prompt:e.prompt})},validateAuthorizationCode:async({code:t,redirectURI:r})=>{let n=o.base64.encode(`${e.clientId}:${e.clientSecret}`);try{let e=await C(i,{method:"POST",headers:{Authorization:`Basic ${n}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:t,redirect_uri:r}).toString()});if(!e.data)throw new d$.BetterAuthError("FAILED_TO_GET_ACCESS_TOKEN");let s=e.data;return{accessToken:s.access_token,refreshToken:s.refresh_token,accessTokenExpiresAt:s.expires_in?new Date(Date.now()+1e3*s.expires_in):void 0,idToken:s.id_token}}catch(e){throw dj.logger.error("PayPal token exchange failed:",e),new d$.BetterAuthError("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>{let r=o.base64.encode(`${e.clientId}:${e.clientSecret}`);try{let e=await C(i,{method:"POST",headers:{Authorization:`Basic ${r}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:t}).toString()});if(!e.data)throw new d$.BetterAuthError("FAILED_TO_REFRESH_ACCESS_TOKEN");let n=e.data;return{accessToken:n.access_token,refreshToken:n.refresh_token,accessTokenExpiresAt:n.expires_in?new Date(Date.now()+1e3*n.expires_in):void 0}}catch(e){throw dj.logger.error("PayPal token refresh failed:",e),new d$.BetterAuthError("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken(t,r){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,r);try{return!!d1(t).sub}catch(e){return dj.logger.error("Failed to verify PayPal ID token:",e),!1}},async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.accessToken)return dj.logger.error("Access token is required to fetch PayPal user info"),null;try{let r=await C(`${n}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${t.accessToken}`,Accept:"application/json"}});if(!r.data)return dj.logger.error("Failed to fetch user info from PayPal"),null;let i=r.data,s=await e.mapProfileToUser?.(i);return{user:{id:i.user_id,name:i.name,email:i.email,image:i.picture,emailVerified:i.email_verified,...s},data:i}}catch(e){return dj.logger.error("Failed to fetch user info from PayPal:",e),null}},options:e}}},ca=lx(Object.keys(cs)).or(o6());e.s(["a",()=>cu,"b",()=>cm,"c",()=>ch,"e",()=>cc,"f",()=>cp,"g",()=>cl,"l",()=>cf,"r",()=>cy,"s",()=>cd],61453);var dx=dx;let co=lK(lh({disableCookieCache:dx.boolean().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:dx.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()})),cu=()=>(0,dX.createAuthEndpoint)("/get-session",{method:"GET",query:co,requireHeaders:!0,metadata:{openapi:{description:"Get the current session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async e=>{try{let t=await e.getSignedCookie(e.context.authCookies.sessionToken.name,e.context.secret);if(!t)return null;let r=e.getCookie(e.context.authCookies.sessionData.name),i=r?(0,dz.s)(dG.binary.decode(o.base64Url.decode(r))):null;if(i&&!await (0,dB.createHMAC)("SHA-256","base64urlnopad").verify(e.context.secret,JSON.stringify({...i.session,expiresAt:i.expiresAt}),i.signature)){let t=e.context.authCookies.sessionData.name;return e.setCookie(t,"",{maxAge:0}),e.json(null)}let n=await e.getSignedCookie(e.context.authCookies.dontRememberToken.name,e.context.secret);if(i?.session&&e.context.options.session?.cookieCache?.enabled&&!e.query?.disableCookieCache){let t=i.session;if(!(i.expiresAt<Date.now()||t.session.expiresAt<new Date))return e.context.session=t,e.json(t);{let t=e.context.authCookies.sessionData.name;e.setCookie(t,"",{maxAge:0})}}let s=await e.context.internalAdapter.findSession(t);if(e.context.session=s,!s||s.session.expiresAt<new Date)return dJ(e),s&&await e.context.internalAdapter.deleteSession(s.session.token),e.json(null);if(n||e.query?.disableRefresh)return e.json(s);let a=e.context.sessionConfig.expiresIn,u=e.context.sessionConfig.updateAge;if(s.session.expiresAt.valueOf()-1e3*a+1e3*u<=Date.now()&&(!e.query?.disableRefresh||!e.context.options.session?.disableSessionRefresh)){let t=await e.context.internalAdapter.updateSession(s.session.token,{expiresAt:dU(e.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!t)return dJ(e),e.json(null,{status:401});let r=(t.expiresAt.valueOf()-Date.now())/1e3;return await dQ(e,{session:t,user:s.user},!1,{maxAge:r}),e.json({session:t,user:s.user})}return await dW(e,s,!!n),e.json(s)}catch(t){throw e.context.logger.error("INTERNAL_SERVER_ERROR",t),new eC.APIError("INTERNAL_SERVER_ERROR",{message:d$.BASE_ERROR_CODES.FAILED_TO_GET_SESSION})}}),cl=async(e,t)=>{if(e.context.session)return e.context.session;let r=await cu()({...e,asResponse:!1,headers:e.headers,returnHeaders:!1,query:{...t,...e.query}}).catch(e=>null);return e.context.session=r,r},cd=(0,dX.createAuthMiddleware)(async e=>{let t=await cl(e);if(!t?.session)throw new eC.APIError("UNAUTHORIZED");return{session:t}}),cc=(0,dX.createAuthMiddleware)(async e=>{let t=await cl(e,{disableCookieCache:!0});if(!t?.session)throw new eC.APIError("UNAUTHORIZED");return{session:t}});(0,dX.createAuthMiddleware)(async e=>{let t=await cl(e);if(!t?.session&&(e.request||e.headers))throw new eC.APIError("UNAUTHORIZED");return{session:t}});let cp=(0,dX.createAuthMiddleware)(async e=>{let t=await cl(e);if(!t?.session)throw new eC.APIError("UNAUTHORIZED");if(0===e.context.sessionConfig.freshAge)return{session:t};let r=e.context.sessionConfig.freshAge,i=t.session.updatedAt?.valueOf()||t.session.createdAt.valueOf();if(!(Date.now()-i<1e3*r))throw new eC.APIError("FORBIDDEN",{message:"Session is not fresh"});return{session:t}}),cf=()=>(0,dX.createAuthEndpoint)("/list-sessions",{method:"GET",use:[cd],requireHeaders:!0,metadata:{openapi:{description:"List all active sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async e=>{try{let t=(await e.context.internalAdapter.listSessions(e.context.session.user.id)).filter(e=>e.expiresAt>new Date);return e.json(t)}catch(t){throw e.context.logger.error(t),e.error("INTERNAL_SERVER_ERROR")}}),ch=(0,dX.createAuthEndpoint)("/revoke-session",{method:"POST",body:lh({token:o6().meta({description:"The token to revoke"})}),use:[cc],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async e=>{let t=e.body.token,r=await e.context.internalAdapter.findSession(t);if(!r)throw new eC.APIError("BAD_REQUEST",{message:"Session not found"});if(r.session.userId!==e.context.session.user.id)throw new eC.APIError("UNAUTHORIZED");try{await e.context.internalAdapter.deleteSession(t)}catch(t){throw e.context.logger.error(t&&"object"==typeof t&&"name"in t?t.name:"",t),new eC.APIError("INTERNAL_SERVER_ERROR")}return e.json({status:!0})}),cm=(0,dX.createAuthEndpoint)("/revoke-sessions",{method:"POST",use:[cc],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async e=>{try{await e.context.internalAdapter.deleteSessions(e.context.session.user.id)}catch(t){throw e.context.logger.error(t&&"object"==typeof t&&"name"in t?t.name:"",t),new eC.APIError("INTERNAL_SERVER_ERROR")}return e.json({status:!0})}),cy=(0,dX.createAuthEndpoint)("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[cc],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async e=>{let t=e.context.session;if(!t.user)throw new eC.APIError("UNAUTHORIZED");let r=(await e.context.internalAdapter.listSessions(t.user.id)).filter(e=>e.expiresAt>new Date).filter(t=>t.token!==e.context.session.session.token);return await Promise.all(r.map(t=>e.context.internalAdapter.deleteSession(t.token))),e.json({status:!0})});var cg=e.i(49330),c_=e.i(82318),cb=e.i(72381),cv=e.i(62160);e.s(["b",()=>cw,"d",()=>cO,"p",()=>cT],80387);let cE=new WeakMap;function cS(e,t){let r=t.fields,i={};for(let t in e){let n=r[t];if(!n){i[t]=e[t];continue}!1!==n.returned&&(i[t]=e[t])}return i}function cA(e,t){cE.has(e)||cE.set(e,new Map);let r=cE.get(e);if(r.has(t))return r.get(t);let i={..."user"===t?e.user?.additionalFields:{},..."session"===t?e.session?.additionalFields:{}};for(let r of e.plugins||[])r.schema&&r.schema[t]&&(i={...i,...r.schema[t].fields});return cE.get(e).set(t,i),i}function cT(e,t){return cS(t,{fields:cA(e,"user")})}function cw(e,t){return cS(t,{fields:cA(e,"session")})}function cO(e,t={},r){return function(e,t){let r=t.action||"create",i=t.fields,n=Object.assign(Object.create(null),null);for(let t in i){if(t in e){if(!1===i[t].input){if(void 0!==i[t].defaultValue&&"update"!==r){n[t]=i[t].defaultValue;continue}if(e[t])throw new eC.APIError("BAD_REQUEST",{message:`${t} is not allowed to be set`});continue}if(i[t].validator?.input&&void 0!==e[t]){n[t]=i[t].validator.input.parse(e[t]);continue}if(i[t].transform?.input&&void 0!==e[t]){n[t]=i[t].transform?.input(e[t]);continue}n[t]=e[t];continue}if(void 0!==i[t].defaultValue&&"create"===r){n[t]=i[t].defaultValue;continue}if(i[t].required&&"create"===r)throw new eC.APIError("BAD_REQUEST",{message:`${t} is required`})}return n}(t,{fields:cA(e,"user"),action:r})}e.s([],37430);var dx=dx;let cR=lh({id:o6(),createdAt:ll().default(()=>new Date),updatedAt:ll().default(()=>new Date)});function cI(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e))}function cC(e){return(...t)=>t.reduce((t,r)=>(function e(t,r,i=".",n){if(!cI(r))return e(t,{},i,n);let s=Object.assign({},r);for(let r in t){if("__proto__"===r||"constructor"===r)continue;let a=t[r];null!=a&&(n&&n(s,r,a,i)||(Array.isArray(a)&&Array.isArray(s[r])?s[r]=[...a,...s[r]]:cI(a)&&cI(s[r])?s[r]=e(a,s[r],(i?`${i}.`:"")+r.toString(),n):s[r]=a))}return s})(t,r,"",e),{})}cR.extend({email:o6().transform(e=>e.toLowerCase()),emailVerified:uJ().default(!1),name:o6(),image:o6().nullish()}),cR.extend({providerId:o6(),accountId:o6(),userId:dx.string(),accessToken:o6().nullish(),refreshToken:o6().nullish(),idToken:o6().nullish(),accessTokenExpiresAt:ll().nullish(),refreshTokenExpiresAt:ll().nullish(),scope:o6().nullish(),password:o6().nullish()}),cR.extend({userId:dx.string(),expiresAt:ll(),token:o6(),ipAddress:o6().nullish(),userAgent:o6().nullish()}),cR.extend({value:o6(),expiresAt:ll(),identifier:o6()}),lh({key:o6(),count:uF(),lastRequest:uF()}),e.i(12407),e.s(["createDefu",()=>cC,"defu",()=>cN],29776);let cN=cC();function cP(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function cD(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function cx(e,t,r=""){let i=e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name,n=e?.length,s=void 0!==t;if(!i||s&&n!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(s?` of length ${t}`:"")+", got "+(i?`length=${n}`:`type=${typeof e}`));return e}function cL(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function ck(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function cM(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}cC((e,t,r)=>{if(void 0!==e[t]&&"function"==typeof r)return e[t]=r(e[t]),!0}),cC((e,t,r)=>{if(Array.isArray(e[t])&&"function"==typeof r)return e[t]=r(e[t]),!0}),e.s(["hashPassword",()=>pQ,"signJWT",()=>pH,"symmetricDecrypt",()=>p0,"symmetricEncrypt",()=>pX,"verifyPassword",()=>pJ],5650);let c$=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],cU="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,cj=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),cB={_0:48,_9:57,A:65,F:70,a:97,f:102};function cz(e){return e>=cB._0&&e<=cB._9?e-cB._0:e>=cB.A&&e<=cB.F?e-(cB.A-10):e>=cB.a&&e<=cB.f?e-(cB.a-10):void 0}function cK(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw Error('"output" expected Uint8Array of length '+e+", got: "+t.length);if(r&&t.byteOffset%4!=0)throw Error("invalid output, must be aligned");return t}function cY(e){return Uint8Array.from(e)}function cF(e=32){let t="object"==typeof globalThis?globalThis.crypto:null;if("function"!=typeof t?.getRandomValues)throw Error("crypto.getRandomValues must be defined");return t.getRandomValues(new Uint8Array(e))}function cq(e,t=cF){let{nonceLength:r}=e;cD(r);let i=(e,t)=>{let r=function(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];cx(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}(e,t);return t.fill(0),r};return(n,...s)=>({encrypt(a){cx(a);let o=t(r),u=e(n,o,...s).encrypt(a);return u instanceof Promise?u.then(e=>i(o,e)):i(o,u)},decrypt(t){cx(t);let i=t.subarray(0,r),a=t.subarray(r);return e(n,i,...s).decrypt(a)}})}let cV=e=>Uint8Array.from(e.split(""),e=>e.charCodeAt(0)),cG=cV("expand 16-byte k"),cH=cV("expand 32-byte k"),cZ=ck(cG),cW=ck(cH);function cQ(e,t){return e<<t|e>>>32-t}function cJ(e){return e.byteOffset%4==0}let cX=0x100000000-1,c0=Uint32Array.of();function c1(e,t){let{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:a}=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return cD(n),cD(a),cP(s),cP(r),(t,o,u,l,d=0)=>{let c,p;cx(t,void 0,"key"),cx(o,void 0,"nonce"),cx(u,void 0,"data");let f=u.length;if(void 0===l&&(l=new Uint8Array(f)),cx(l,void 0,"output"),cD(d),d<0||d>=cX)throw Error("arx: counter overflow");if(l.length<f)throw Error(`arx: output (${l.length}) is shorter than data (${f})`);let h=[],m=t.length;if(32===m)h.push(c=cY(t)),p=cW;else if(16===m&&r)(c=new Uint8Array(32)).set(t),c.set(t,16),p=cZ,h.push(c);else throw cx(t,32,"arx key"),Error("invalid key size");cJ(o)||h.push(o=cY(o));let y=ck(c);if(i){if(24!==o.length)throw Error("arx: extended nonce must be 24 bytes");i(p,y,ck(o.subarray(0,16)),y),o=o.subarray(16)}let g=16-n;if(g!==o.length)throw Error(`arx: nonce must be ${g} or 16 bytes`);if(12!==g){let e=new Uint8Array(12);e.set(o,s?0:12-o.length),o=e,h.push(o)}return!function(e,t,r,i,n,s,a,o){let u=n.length,l=new Uint8Array(64),d=ck(l),c=cJ(n)&&cJ(s),p=c?ck(n):c0,f=c?ck(s):c0;for(let h=0;h<u;a++){if(e(t,r,i,d,a,o),a>=cX)throw Error("arx: counter overflow");let m=Math.min(64,u-h);if(c&&64===m){let e=h/4;if(h%4!=0)throw Error("arx: invalid block position");for(let t=0,r;t<16;t++)f[r=e+t]=p[r]^d[t];h+=64;continue}for(let e=0,t;e<m;e++)s[t=h+e]=n[t]^l[e];h+=m}}(e,p,y,ck(o),u,l,d,a),cM(...h),l}}function c4(e,t){return 255&e[t++]|(255&e[t++])<<8}class c2{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor(e){let t=c4(e=cY(cx(e,32,"key")),0),r=c4(e,2),i=c4(e,4),n=c4(e,6),s=c4(e,8),a=c4(e,10),o=c4(e,12),u=c4(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|n<<9)&8191,this.r[4]=(n>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|a<<2)&8191,this.r[7]=(a>>>11|o<<5)&8065,this.r[8]=(o>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let t=0;t<8;t++)this.pad[t]=c4(e,16+2*t)}process(e,t,r=!1){let{h:i,r:n}=this,s=n[0],a=n[1],o=n[2],u=n[3],l=n[4],d=n[5],c=n[6],p=n[7],f=n[8],h=n[9],m=c4(e,t+0),y=c4(e,t+2),g=c4(e,t+4),_=c4(e,t+6),b=c4(e,t+8),v=c4(e,t+10),E=c4(e,t+12),S=c4(e,t+14),A=i[0]+(8191&m),T=i[1]+((m>>>13|y<<3)&8191),w=i[2]+((y>>>10|g<<6)&8191),O=i[3]+((g>>>7|_<<9)&8191),R=i[4]+((_>>>4|b<<12)&8191),I=i[5]+(b>>>1&8191),C=i[6]+((b>>>14|v<<2)&8191),N=i[7]+((v>>>11|E<<5)&8191),P=i[8]+((E>>>8|S<<8)&8191),D=i[9]+(S>>>5|2048*!r),x=0,L=0+A*s+5*h*T+5*f*w+5*p*O+5*c*R;x=L>>>13,L&=8191,L+=5*d*I+5*l*C+5*u*N+5*o*P+5*a*D,x+=L>>>13,L&=8191;let k=x+A*a+T*s+5*h*w+5*f*O+5*p*R;x=k>>>13,k&=8191,k+=5*c*I+5*d*C+5*l*N+5*u*P+5*o*D,x+=k>>>13,k&=8191;let M=x+A*o+T*a+w*s+5*h*O+5*f*R;x=M>>>13,M&=8191,M+=5*p*I+5*c*C+5*d*N+5*l*P+5*u*D,x+=M>>>13,M&=8191;let $=x+A*u+T*o+w*a+O*s+5*h*R;x=$>>>13,$&=8191,$+=5*f*I+5*p*C+5*c*N+5*d*P+5*l*D,x+=$>>>13,$&=8191;let U=x+A*l+T*u+w*o+O*a+R*s;x=U>>>13,U&=8191,U+=5*h*I+5*f*C+5*p*N+5*c*P+5*d*D,x+=U>>>13,U&=8191;let j=x+A*d+T*l+w*u+O*o+R*a;x=j>>>13,j&=8191,j+=I*s+5*h*C+5*f*N+5*p*P+5*c*D,x+=j>>>13,j&=8191;let B=x+A*c+T*d+w*l+O*u+R*o;x=B>>>13,B&=8191,B+=I*a+C*s+5*h*N+5*f*P+5*p*D,x+=B>>>13,B&=8191;let z=x+A*p+T*c+w*d+O*l+R*u;x=z>>>13,z&=8191,z+=I*o+C*a+N*s+5*h*P+5*f*D,x+=z>>>13,z&=8191;let K=x+A*f+T*p+w*c+O*d+R*l;x=K>>>13,K&=8191,K+=I*u+C*o+N*a+P*s+5*h*D,x+=K>>>13,K&=8191;let Y=x+A*h+T*f+w*p+O*c+R*d;x=Y>>>13,Y&=8191,Y+=I*l+C*u+N*o+P*a+D*s,x+=Y>>>13,Y&=8191,L=8191&(x=(x=(x<<2)+x|0)+L|0),x>>>=13,k+=x,i[0]=L,i[1]=k,i[2]=M,i[3]=$,i[4]=U,i[5]=j,i[6]=B,i[7]=z,i[8]=K,i[9]=Y}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=i,i=e[t]>>>13,e[t]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+i,i=r[t]>>>13,r[t]&=8191;r[9]-=8192;let n=(1^i)-1;for(let e=0;e<10;e++)r[e]&=n;n=~n;for(let t=0;t<10;t++)e[t]=e[t]&n|r[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;cM(r)}update(e){cL(this),cx(e);let{buffer:t,blockLen:r}=this,i=(e=cY(e)).length;for(let n=0;n<i;){let s=Math.min(r-this.pos,i-n);if(s===r){for(;r<=i-n;n+=r)this.process(e,n);continue}t.set(e.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){cM(this.h,this.r,this.buffer,this.pad)}digestInto(e){cL(this);cx(e,void 0,"output");let t=this.outputLen;if(e.length<t)throw Error("digestInto() expects output buffer of length at least "+t);this.finished=!0;let{buffer:r,h:i}=this,{pos:n}=this;if(n){for(r[n++]=1;n<16;n++)r[n]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let t=0;t<8;t++)e[s++]=i[t]>>>0,e[s++]=i[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}let c6=function(e){let t=(t,r)=>e(r).update(t).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}(e=>new c2(e));function c3(e,t,r,i,n,s=20){let a=e[0],o=e[1],u=e[2],l=e[3],d=t[0],c=t[1],p=t[2],f=t[3],h=t[4],m=t[5],y=t[6],g=t[7],_=r[0],b=r[1],v=r[2],E=a,S=o,A=u,T=l,w=d,O=c,R=p,I=f,C=h,N=m,P=y,D=g,x=n,L=_,k=b,M=v;for(let e=0;e<s;e+=2)C=C+(x=cQ(x^(E=E+w|0),16))|0,E=E+(w=cQ(w^C,12))|0,C=C+(x=cQ(x^E,8))|0,w=cQ(w^C,7),N=N+(L=cQ(L^(S=S+O|0),16))|0,S=S+(O=cQ(O^N,12))|0,N=N+(L=cQ(L^S,8))|0,O=cQ(O^N,7),P=P+(k=cQ(k^(A=A+R|0),16))|0,A=A+(R=cQ(R^P,12))|0,P=P+(k=cQ(k^A,8))|0,R=cQ(R^P,7),D=D+(M=cQ(M^(T=T+I|0),16))|0,T=T+(I=cQ(I^D,12))|0,D=D+(M=cQ(M^T,8))|0,I=cQ(I^D,7),P=P+(M=cQ(M^(E=E+O|0),16))|0,E=E+(O=cQ(O^P,12))|0,P=P+(M=cQ(M^E,8))|0,O=cQ(O^P,7),D=D+(x=cQ(x^(S=S+R|0),16))|0,S=S+(R=cQ(R^D,12))|0,D=D+(x=cQ(x^S,8))|0,R=cQ(R^D,7),C=C+(L=cQ(L^(A=A+I|0),16))|0,A=A+(I=cQ(I^C,12))|0,C=C+(L=cQ(L^A,8))|0,I=cQ(I^C,7),N=N+(k=cQ(k^(T=T+w|0),16))|0,T=T+(w=cQ(w^N,12))|0,N=N+(k=cQ(k^T,8))|0,w=cQ(w^N,7);let $=0;i[$++]=a+E|0,i[$++]=o+S|0,i[$++]=u+A|0,i[$++]=l+T|0,i[$++]=d+w|0,i[$++]=c+O|0,i[$++]=p+R|0,i[$++]=f+I|0,i[$++]=h+C|0,i[$++]=m+N|0,i[$++]=y+P|0,i[$++]=g+D|0,i[$++]=n+x|0,i[$++]=_+L|0,i[$++]=b+k|0,i[$++]=v+M|0}let c5=c1(c3,{counterRight:!1,counterLength:4,allowShortKeys:!1}),c8=c1(c3,{counterRight:!1,counterLength:8,extendNonceFn:function(e,t,r,i){let n=e[0],s=e[1],a=e[2],o=e[3],u=t[0],l=t[1],d=t[2],c=t[3],p=t[4],f=t[5],h=t[6],m=t[7],y=r[0],g=r[1],_=r[2],b=r[3];for(let e=0;e<20;e+=2)p=p+(y=cQ(y^(n=n+u|0),16))|0,n=n+(u=cQ(u^p,12))|0,p=p+(y=cQ(y^n,8))|0,u=cQ(u^p,7),f=f+(g=cQ(g^(s=s+l|0),16))|0,s=s+(l=cQ(l^f,12))|0,f=f+(g=cQ(g^s,8))|0,l=cQ(l^f,7),h=h+(_=cQ(_^(a=a+d|0),16))|0,a=a+(d=cQ(d^h,12))|0,h=h+(_=cQ(_^a,8))|0,d=cQ(d^h,7),m=m+(b=cQ(b^(o=o+c|0),16))|0,o=o+(c=cQ(c^m,12))|0,m=m+(b=cQ(b^o,8))|0,c=cQ(c^m,7),h=h+(b=cQ(b^(n=n+l|0),16))|0,n=n+(l=cQ(l^h,12))|0,h=h+(b=cQ(b^n,8))|0,l=cQ(l^h,7),m=m+(y=cQ(y^(s=s+d|0),16))|0,s=s+(d=cQ(d^m,12))|0,m=m+(y=cQ(y^s,8))|0,d=cQ(d^m,7),p=p+(g=cQ(g^(a=a+c|0),16))|0,a=a+(c=cQ(c^p,12))|0,p=p+(g=cQ(g^a,8))|0,c=cQ(c^p,7),f=f+(_=cQ(_^(o=o+u|0),16))|0,o=o+(u=cQ(u^f,12))|0,f=f+(_=cQ(_^o,8))|0,u=cQ(u^f,7);let v=0;i[v++]=n,i[v++]=s,i[v++]=a,i[v++]=o,i[v++]=y,i[v++]=g,i[v++]=_,i[v++]=b},allowShortKeys:!1}),c9=new Uint8Array(16),c7=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(c9.subarray(r))},pe=new Uint8Array(32);function pt(e,t,r,i,n){void 0!==n&&cx(n,void 0,"AAD");let s=e(t,r,pe),a=function(e,t,r){cP(r);let i=new Uint8Array(16),n=new DataView(i.buffer,i.byteOffset,i.byteLength);return n.setBigUint64(0,BigInt(t),r),n.setBigUint64(8,BigInt(e),r),i}(i.length,n?n.length:0,!0),o=c6.create(s);n&&c7(o,n),c7(o,i),o.update(a);let u=o.digest();return cM(s,a),u}let pr=e=>(t,r,i)=>({encrypt(n,s){let a=n.length;(s=cK(a+16,s,!1)).set(n);let o=s.subarray(0,-16);e(t,r,o,o,1);let u=pt(e,t,r,o,i);return s.set(u,a),cM(u),s},decrypt(n,s){s=cK(n.length-16,s,!1);let a=n.subarray(0,-16),o=n.subarray(-16),u=pt(e,t,r,a,i);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}(o,u))throw Error("invalid tag");return s.set(n.subarray(0,-16)),e(t,r,s,s,1),cM(u),s}});pr(c5);let pi=((e,t)=>{function r(i,...n){if(cx(i,void 0,"key"),!c$)throw Error("Non little-endian hardware is not yet supported");void 0!==e.nonceLength&&cx(n[0],e.varSizeNonce?void 0:e.nonceLength,"nonce");let s=e.tagLength;s&&void 0!==n[1]&&cx(n[1],void 0,"AAD");let a=t(i,...n),o=(e,t)=>{if(void 0!==t){if(2!==e)throw Error("cipher output not supported");cx(t,void 0,"output")}},u=!1;return{encrypt(e,t){if(u)throw Error("cannot encrypt() twice with same key + nonce");return u=!0,cx(e),o(a.encrypt.length,t),a.encrypt(e,t)},decrypt(e,t){if(cx(e),s&&e.length<s)throw Error('"ciphertext" expected length bigger than tagLength='+s);return o(a.decrypt.length,t),a.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:24,tagLength:16},pr(c8)),pn=async(e,t,r)=>{let i=await ee(e,t,"sign");return H(e,i),new Uint8Array(await crypto.subtle.sign(G(e,i.algorithm),i,r))};class ps{#t;#h;#m;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#t=e}setProtectedHeader(e){if(this.#h)throw TypeError("setProtectedHeader can only be called once");return this.#h=e,this}setUnprotectedHeader(e){if(this.#m)throw TypeError("setUnprotectedHeader can only be called once");return this.#m=e,this}async sign(e,t){let r;if(!this.#h&&!this.#m)throw new B("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!er(this.#h,this.#m))throw new B("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let i={...this.#h,...this.#m},n=ec(B,new Map([["b64",!0]]),t?.crit,this.#h,i),s=!0;if(n.has("b64")&&"boolean"!=typeof(s=this.#h.b64))throw new B('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:a}=i;if("string"!=typeof a||!a)throw new B('JWS "alg" (Algorithm) Header Parameter missing or invalid');ed(a,e,"sign");let o=this.#t;s&&(o=N.encode(L(o)));let u=D(r=this.#h?N.encode(L(JSON.stringify(this.#h))):N.encode(""),N.encode("."),o),l=await eh(e,a),d={signature:L(await pn(a,l,u)),payload:""};return s&&(d.payload=P.decode(o)),this.#m&&(d.header=this.#m),this.#h&&(d.protected=P.decode(r)),d}}class pa{#y;constructor(e){this.#y=new ps(e)}setProtectedHeader(e){return this.#y.setProtectedHeader(e),this}async sign(e,t){let r=await this.#y.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}class po{#h;#g;constructor(e={}){this.#g=new eS(e)}setIssuer(e){return this.#g.iss=e,this}setSubject(e){return this.#g.sub=e,this}setAudience(e){return this.#g.aud=e,this}setJti(e){return this.#g.jti=e,this}setNotBefore(e){return this.#g.nbf=e,this}setExpirationTime(e){return this.#g.exp=e,this}setIssuedAt(e){return this.#g.iat=e,this}setProtectedHeader(e){return this.#h=e,this}async sign(e,t){let r=new pa(this.#g.data());if(r.setProtectedHeader(this.#h),Array.isArray(this.#h?.crit)&&this.#h.crit.includes("b64")&&!1===this.#h.b64)throw new z("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}function pu(e,t=""){if(!Number.isSafeInteger(e)||e<0){let r=t&&`"${t}" `;throw Error(`${r}expected integer >= 0, got ${e}`)}}function pl(e,t,r=""){let i=e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name,n=e?.length,s=void 0!==t;if(!i||s&&n!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(s?` of length ${t}`:"")+", got "+(i?`length=${n}`:`type=${typeof e}`));return e}function pd(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash must wrapped by utils.createHasher");pu(e.outputLen),pu(e.blockLen)}function pc(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function pp(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function pf(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function ph(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function pm(e,t){return e<<32-t|e>>>t}function py(e,t){return e<<t|e>>>32-t>>>0}let pg=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]?e=>e:function(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&0xff000000|t<<8&0xff0000|t>>>8&65280|t>>>24&255}return e},p_="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,pb={_0:48,_9:57,A:65,F:70,a:97,f:102};function pv(e){return e>=pb._0&&e<=pb._9?e-pb._0:e>=pb.A&&e<=pb.F?e-(pb.A-10):e>=pb.a&&e<=pb.f?e-(pb.a-10):void 0}let pE=async()=>{};async function pS(e,t,r){let i=Date.now();for(let n=0;n<e;n++){r(n);let e=Date.now()-i;e>=0&&e<t||(await pE(),i+=e)}}function pA(e,t=""){if("string"==typeof e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}return pl(e,void 0,t)}function pT(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("options must be object or undefined");return Object.assign(e,t)}class pw{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(e,t){if(pd(e),pl(t,void 0,"key"),this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let r=this.blockLen,i=new Uint8Array(r);i.set(t.length>r?e.create().update(t).digest():t);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),pf(i)}update(e){return pc(this),this.iHash.update(e),this}digestInto(e){pc(this),pl(e,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||=Object.create(Object.getPrototypeOf(this),{});let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:a}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let pO=(e,t,r)=>new pw(e,t).update(r).digest();function pR(e,t,r,i){var n;let s,{c:a,dkLen:o,DK:u,PRF:l,PRFSalt:d}=function(e,t,r,i){pd(e);let{c:n,dkLen:s,asyncTick:a}=pT({dkLen:32,asyncTick:10},i);if(pu(n,"c"),pu(s,"dkLen"),pu(a,"asyncTick"),n<1)throw Error("iterations (c) must be >= 1");let o=pA(t,"password"),u=pA(r,"salt"),l=new Uint8Array(s),d=pO.create(e,o),c=d._cloneInto().update(u);return{c:n,dkLen:s,asyncTick:a,DK:l,PRF:d,PRFSalt:c}}(e,t,r,i),c=new Uint8Array(4),p=ph(c),f=new Uint8Array(l.outputLen);for(let e=1,t=0;t<o;e++,t+=l.outputLen){let r=u.subarray(t,t+l.outputLen);p.setInt32(0,e,!1),(s=d._cloneInto(s)).update(c).digestInto(f),r.set(f.subarray(0,r.length));for(let e=1;e<a;e++){l._cloneInto(s).update(f).digestInto(f);for(let e=0;e<r.length;e++)r[e]^=f[e]}}return n=s,l.destroy(),d.destroy(),n&&n.destroy(),pf(f),u}pO.create=(e,t)=>new pw(e,t);class pI{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,t,r,i){this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=ph(this.buffer)}update(e){pc(this),pl(e);let{view:t,buffer:r,blockLen:i}=this,n=e.length;for(let s=0;s<n;){let a=Math.min(i-this.pos,n-s);if(a===i){let t=ph(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){pc(this);pl(e,void 0,"digestInto() output");let t=this.outputLen;if(e.length<t)throw Error('"digestInto() output" expected to be of length >='+t);this.finished=!0;let{buffer:r,view:i,blockLen:n,isLE:s}=this,{pos:a}=this;r[a++]=128,pf(this.buffer.subarray(a)),this.padOffset>n-a&&(this.process(i,0),a=0);for(let e=a;e<n;e++)r[e]=0;i.setBigUint64(n-8,BigInt(8*this.length),s),this.process(i,0);let o=ph(e),u=this.outputLen;if(u%4)throw Error("_sha2: outputLen must be aligned to 32bit");let l=u/4,d=this.get();if(l>d.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,d[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){(e||=new this.constructor).set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=n,e.length=i,e.pos=a,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let pC=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),pN=Uint32Array.from([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]),pP=Uint32Array.from([0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4]),pD=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]),px=BigInt(0x100000000-1),pL=BigInt(32),pk=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),pM=new Uint32Array(64);class p$ extends pI{constructor(e){super(64,e,8,!1)}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:a,H:o}=this;return[e,t,r,i,n,s,a,o]}set(e,t,r,i,n,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|a,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)pM[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=pM[e-15],r=pM[e-2],i=pm(t,7)^pm(t,18)^t>>>3,n=pm(r,17)^pm(r,19)^r>>>10;pM[e]=n+pM[e-7]+i+pM[e-16]|0}let{A:r,B:i,C:n,D:s,E:a,F:o,G:u,H:l}=this;for(let e=0;e<64;e++){var d,c,p,f;let t=l+(pm(a,6)^pm(a,11)^pm(a,25))+((d=a)&o^~d&u)+pk[e]+pM[e]|0,h=(pm(r,2)^pm(r,13)^pm(r,22))+((c=r)&(p=i)^c&(f=n)^p&f)|0;l=u,u=o,o=a,a=s+t|0,s=n,n=i,i=r,r=t+h|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,a=a+this.E|0,o=o+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,i,n,s,a,o,u,l)}roundClean(){pf(pM)}destroy(){this.set(0,0,0,0,0,0,0,0),pf(this.buffer)}}class pU extends p${A=0|pC[0];B=0|pC[1];C=0|pC[2];D=0|pC[3];E=0|pC[4];F=0|pC[5];G=0|pC[6];H=0|pC[7];constructor(){super(32)}}let pj=function(e,t=!1){let r=e.length,i=new Uint32Array(r),n=new Uint32Array(r);for(let s=0;s<r;s++){let{h:r,l:a}=function(e,t=!1){return t?{h:Number(e&px),l:Number(e>>pL&px)}:{h:0|Number(e>>pL&px),l:0|Number(e&px)}}(e[s],t);[i[s],n[s]]=[r,a]}return[i,n]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),pB=pj[0],pz=pj[1],pK=new Uint32Array(80),pY=new Uint32Array(80),pF=function(e,t={}){let r=(t,r)=>e(r).update(t).digest(),i=e(void 0);return r.outputLen=i.outputLen,r.blockLen=i.blockLen,r.create=t=>e(t),Object.assign(r,t),Object.freeze(r)}(()=>new pU,{oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,1])});function pq(e,t,r,i,n,s){let a=e[t++]^r[i++],o=e[t++]^r[i++],u=e[t++]^r[i++],l=e[t++]^r[i++],d=e[t++]^r[i++],c=e[t++]^r[i++],p=e[t++]^r[i++],f=e[t++]^r[i++],h=e[t++]^r[i++],m=e[t++]^r[i++],y=e[t++]^r[i++],g=e[t++]^r[i++],_=e[t++]^r[i++],b=e[t++]^r[i++],v=e[t++]^r[i++],E=e[t++]^r[i++],S=a,A=o,T=u,w=l,O=d,R=c,I=p,C=f,N=h,P=m,D=y,x=g,L=_,k=b,M=v,$=E;for(let e=0;e<8;e+=2)O^=py(S+L|0,7),N^=py(O+S|0,9),L^=py(N+O|0,13),S^=py(L+N|0,18),P^=py(R+A|0,7),k^=py(P+R|0,9),A^=py(k+P|0,13),R^=py(A+k|0,18),M^=py(D+I|0,7),T^=py(M+D|0,9),I^=py(T+M|0,13),D^=py(I+T|0,18),w^=py($+x|0,7),C^=py(w+$|0,9),x^=py(C+w|0,13),$^=py(x+C|0,18),A^=py(S+w|0,7),T^=py(A+S|0,9),w^=py(T+A|0,13),S^=py(w+T|0,18),I^=py(R+O|0,7),C^=py(I+R|0,9),O^=py(C+I|0,13),R^=py(O+C|0,18),x^=py(D+P|0,7),N^=py(x+D|0,9),P^=py(N+x|0,13),D^=py(P+N|0,18),L^=py($+M|0,7),k^=py(L+$|0,9),M^=py(k+L|0,13),$^=py(M+k|0,18);n[s++]=a+S|0,n[s++]=o+A|0,n[s++]=u+T|0,n[s++]=l+w|0,n[s++]=d+O|0,n[s++]=c+R|0,n[s++]=p+I|0,n[s++]=f+C|0,n[s++]=h+N|0,n[s++]=m+P|0,n[s++]=y+D|0,n[s++]=g+x|0,n[s++]=_+L|0,n[s++]=b+k|0,n[s++]=v+M|0,n[s++]=E+$|0}function pV(e,t,r,i,n){let s=i+0,a=i+16*n;for(let i=0;i<16;i++)r[a+i]=e[t+(2*n-1)*16+i];for(let i=0;i<n;i++,s+=16,t+=16)pq(r,a,e,t,r,s),i>0&&(a+=16),pq(r,s,e,t+=16,r,a)}async function pG(e,t,r){let{N:i,r:n,p:s,dkLen:a,blockSize32:o,V:u,B32:l,B:d,tmp:c,blockMixCb:p,asyncTick:f}=function(e,t,r){let{N:i,r:n,p:s,dkLen:a,asyncTick:o,maxmem:u,onProgress:l}=pT({dkLen:32,asyncTick:10,maxmem:0x40000400},r);if(pu(i,"N"),pu(n,"r"),pu(s,"p"),pu(a,"dkLen"),pu(o,"asyncTick"),pu(u,"maxmem"),void 0!==l&&"function"!=typeof l)throw Error("progressCb must be a function");let d=128*n,c=d/4;if(i<=1||(i&i-1)!=0||i>0x100000000)throw Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(s<1||s>0x1fffffffe0/d)throw Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(a<1||a>0x1fffffffe0)throw Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(d*(i+s)>u)throw Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+u);let p=pR(pF,e,t,{c:1,dkLen:d*s}),f=pp(p),h=pp(new Uint8Array(d*i)),m=pp(new Uint8Array(d)),y=()=>{};if(l){let e=2*i*s,t=Math.max(Math.floor(e/1e4),1),r=0;y=()=>{r++,l&&(!(r%t)||r===e)&&l(r/e)}}return{N:i,r:n,p:s,dkLen:a,blockSize32:c,V:h,B32:f,B:p,tmp:m,blockMixCb:y,asyncTick:o}}(e,t,r);pg(l);for(let e=0;e<s;e++){let t=o*e;for(let e=0;e<o;e++)u[e]=l[t+e];let r=0;await pS(i-1,f,()=>{pV(u,r,u,r+=o,n),p()}),pV(u,(i-1)*o,l,t,n),p(),await pS(i,f,()=>{let e=(l[t+o-16]&i-1)>>>0;for(let r=0;r<o;r++)c[r]=l[t+r]^u[e*o+r];pV(c,0,l,t,n),p()})}pg(l);let h=pR(pF,e,d,{c:1,dkLen:a});return pf(d,u,c),h}async function pH(e,t,r=3600){return await new po(e).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1e3)+r).sign(new TextEncoder().encode(t))}let pZ={N:16384,r:16,p:1,dkLen:64};async function pW(e,t){return await pG(e.normalize("NFKC"),t,{N:pZ.N,p:pZ.p,r:pZ.r,dkLen:pZ.dkLen,maxmem:128*pZ.N*pZ.r*2})}let pQ=async e=>{let t=cb.hex.encode(crypto.getRandomValues(new Uint8Array(16))),r=await pW(e,t);return`${t}:${cb.hex.encode(r)}`},pJ=async({hash:e,password:t})=>{let[r,i]=e.split(":");if(!r||!i)throw new d$.BetterAuthError("Invalid password hash");return function(e,t){let r=new Uint8Array(e),i=new Uint8Array(t),n=r.length^i.length,s=Math.max(r.length,i.length);for(let e=0;e<s;e++)n|=(e<r.length?r[e]:0)^(e<i.length?i[e]:0);return 0===n}(await pW(t,r),function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(p_)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=pv(e.charCodeAt(n)),s=pv(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}(i))},pX=async({key:e,data:t})=>{let r=await (0,c_.createHash)("SHA-256").digest(e),i=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(t);return function(e){if(cx(e),cU)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=cj[e[r]];return t}(cq(pi)(new Uint8Array(r)).encrypt(i))},p0=async({key:e,data:t})=>{let r=await (0,c_.createHash)("SHA-256").digest(e),i=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(cU)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=cz(e.charCodeAt(n)),s=cz(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}(t),n=cq(pi)(new Uint8Array(r));return new TextDecoder().decode(n.decrypt(i))};function p1(e){return"-"===e||"^"===e||"$"===e||"+"===e||"."===e||"("===e||")"===e||"|"===e||"["===e||"]"===e||"{"===e||"}"===e||"*"===e||"?"===e||"\\"===e?`\\${e}`:e}function p4(e,t){if("string"!=typeof t)throw TypeError(`Sample must be a string, but ${typeof t} given`);return e.test(t)}function p2(e,t){if("string"!=typeof e&&!Array.isArray(e))throw TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof e} given`);if(("string"==typeof t||"boolean"==typeof t)&&(t={separator:t}),2==arguments.length&&!(void 0===t||"object"==typeof t&&null!==t&&!Array.isArray(t)))throw TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof t} given`);if("\\"===(t=t||{}).separator)throw Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let r=function e(t,r=!0){if(Array.isArray(t)){let i=t.map(t=>`^${e(t,r)}$`);return`(?:${i.join("|")})`}let i="",n="",s=".";!0===r?(i="/",n="[/\\\\]",s="[^/\\\\]"):r&&((n=function(e){let t="";for(let r=0;r<e.length;r++)t+=p1(e[r]);return t}(i=r)).length>1?(n=`(?:${n})`,s=`((?!${n}).)`):s=`[^${n}]`);let a=r?`${n}+?`:"",o=r?`${n}*?`:"",u=r?t.split(i):[t],l="";for(let e=0;e<u.length;e++){let t=u[e],i=u[e+1],n="";if(t||!(e>0)){if(r&&(n=e===u.length-1?o:"**"!==i?a:""),r&&"**"===t){n&&(l+=0===e?"":n,l+=`(?:${s}*?${n})*?`);continue}for(let e=0;e<t.length;e++){let r=t[e];"\\"===r?e<t.length-1&&(l+=p1(t[e+1]),e++):"?"===r?l+=s:"*"===r?l+=`${s}*?`:l+=p1(r)}l+=n}}return l}(e,t.separator),i=RegExp(`^${r}$`,t.flags),n=p4.bind(null,i);return n.options=t,n.pattern=e,n.regexp=i,n}let p6=(0,dX.createAuthMiddleware)(async e=>{if(e.request?.method!=="POST"||!e.request)return;let t=e.request?.headers,r=e.request,{body:i,query:n,context:s}=e;if(function(e){let t=["accept","accept-language","content-language","content-type"],r=["application/x-www-form-urlencoded","multipart/form-data","text/plain"];for(let[i,n]of e.entries())if(!t.includes(i.toLowerCase())||"content-type"===i.toLowerCase()&&!r.includes(n?.split(";")[0]?.trim()?.toLowerCase()||""))return!1;return!0}(t)&&!e.context.skipCSRFCheck)throw new eC.APIError("FORBIDDEN",{message:"Invalid request"});let a=t?.get("origin")||t?.get("referer")||"",o=i?.callbackURL||n?.callbackURL,u=i?.redirectTo,l=i?.errorCallbackURL,d=i?.newUserCallbackURL,c=Array.isArray(s.options.trustedOrigins)?s.trustedOrigins:[...s.trustedOrigins,...await s.options.trustedOrigins?.(r)||[]],p=t?.has("cookie"),f=(t,r)=>{if(t&&!c.some(e=>((e,t)=>{if(e.startsWith("/"))return!1;if(t.includes("*")){if(t.includes("://"))return p2(t)(dF(e)||e);let r=dV(e);return!!r&&p2(t)(r)}let r=dq(e);return"http:"!==r&&"https:"!==r&&r?e.startsWith(t):t===dF(e)})(t,e)||t?.startsWith("/")&&"origin"!==r&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(t)))throw e.context.logger.error(`Invalid ${r}: ${t}`),e.context.logger.info(`If it's a valid URL, please add ${t} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${c}`),new eC.APIError("FORBIDDEN",{message:`Invalid ${r}`})};if(p&&!e.context.skipCSRFCheck&&!e.context.skipOriginCheck){if(!a||"null"===a)throw new eC.APIError("FORBIDDEN",{message:"Missing or null Origin"});f(a,"origin")}o&&f(o,"callbackURL"),u&&f(u,"redirectURL"),l&&f(l,"errorCallbackURL"),d&&f(d,"newUserCallbackURL")}),p3=e=>(0,dX.createAuthMiddleware)(async t=>{if(!t.request)return;let{context:r}=t,i=e(t),n=Array.isArray(r.options.trustedOrigins)?r.trustedOrigins:[...r.trustedOrigins,...await r.options.trustedOrigins?.(t.request)||[]],s=(e,r)=>{if(e&&!n.some(t=>((e,t)=>{if(e.startsWith("/"))return!1;if(t.includes("*")){if(t.includes("://"))return p2(t)(dF(e)||e);let r=dV(e);return!!r&&p2(t)(r)}let r=dq(e);return"http:"!==r&&"https:"!==r&&r?e.startsWith(t):t===dF(e)})(e,t)||e?.startsWith("/")&&"origin"!==r&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(e)))throw t.context.logger.error(`Invalid ${r}: ${e}`),t.context.logger.info(`If it's a valid URL, please add ${e} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${n}`),new eC.APIError("FORBIDDEN",{message:`Invalid ${r}`})};for(let e of Array.isArray(i)?i:[i])s(e,"callbackURL")});async function p5(e,t,r,i=3600){return await pH({email:t.toLowerCase(),updateTo:r},e,i)}async function p8(e,t){if(!e.context.options.emailVerification?.sendVerificationEmail)throw e.context.logger.error("Verification email isn't enabled."),new eC.APIError("BAD_REQUEST",{message:"Verification email isn't enabled"});let r=await p5(e.context.secret,t.email,void 0,e.context.options.emailVerification?.expiresIn),i=`${e.context.baseURL}/verify-email?token=${r}&callbackURL=${e.body.callbackURL||"/"}`;await e.context.options.emailVerification.sendVerificationEmail({user:t,url:i,token:r},e.request)}let p9=(0,dX.createAuthEndpoint)("/send-verification-email",{method:"POST",body:lh({email:o8().meta({description:"The email to send the verification email to"}),callbackURL:o6().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async e=>{if(!e.context.options.emailVerification?.sendVerificationEmail)throw e.context.logger.error("Verification email isn't enabled."),new eC.APIError("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:t}=e.body,r=await cl(e);if(!r){let r=await e.context.internalAdapter.findUserByEmail(t);return r&&await p8(e,r.user),e.json({status:!0})}if(r?.user.emailVerified)throw new eC.APIError("BAD_REQUEST",{message:"You can only send a verification email to an unverified email"});if(r?.user.email!==t)throw new eC.APIError("BAD_REQUEST",{message:"You can only send a verification email to your own email"});return await p8(e,r.user),e.json({status:!0})}),p7=(0,dX.createAuthEndpoint)("/verify-email",{method:"GET",query:lh({token:o6().meta({description:"The token to verify the email"}),callbackURL:o6().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[p3(e=>e.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string",description:"User ID"},email:{type:"string",description:"User email"},name:{type:"string",description:"User name"},image:{type:"string",description:"User image URL"},emailVerified:{type:"boolean",description:"Indicates if the user email is verified"},createdAt:{type:"string",description:"User creation date"},updatedAt:{type:"string",description:"User update date"}},required:["id","email","name","image","emailVerified","createdAt","updatedAt"]},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async e=>{let t;function r(t){if(e.query.callbackURL){if(e.query.callbackURL.includes("?"))throw e.redirect(`${e.query.callbackURL}&error=${t}`);throw e.redirect(`${e.query.callbackURL}?error=${t}`)}throw new eC.APIError("UNAUTHORIZED",{message:t})}let{token:i}=e.query;try{t=await eA(i,new TextEncoder().encode(e.context.secret),{algorithms:["HS256"]})}catch(e){if(e instanceof $)return r("token_expired");return r("invalid_token")}let n=lh({email:o6().email(),updateTo:o6().optional()}).parse(t.payload),s=await e.context.internalAdapter.findUserByEmail(n.email);if(!s)return r("user_not_found");if(n.updateTo){let t=await cl(e);if(!t||t.user.email!==n.email){if(e.query.callbackURL)throw e.redirect(`${e.query.callbackURL}?error=unauthorized`);return r("unauthorized")}let i=await e.context.internalAdapter.updateUserByEmail(n.email,{email:n.updateTo,emailVerified:!1},e),s=await p5(e.context.secret,n.updateTo);if(await e.context.options.emailVerification?.sendVerificationEmail?.({user:i,url:`${e.context.baseURL}/verify-email?token=${s}&callbackURL=${e.query.callbackURL||"/"}`,token:s},e.request),await dQ(e,{session:t.session,user:{...t.user,email:n.updateTo,emailVerified:!1}}),e.query.callbackURL)throw e.redirect(e.query.callbackURL);return e.json({status:!0,user:{id:i.id,email:i.email,name:i.name,image:i.image,emailVerified:i.emailVerified,createdAt:i.createdAt,updatedAt:i.updatedAt}})}e.context.options.emailVerification?.onEmailVerification&&await e.context.options.emailVerification.onEmailVerification(s.user,e.request);let a=await e.context.internalAdapter.updateUserByEmail(n.email,{emailVerified:!0},e);if(e.context.options.emailVerification?.afterEmailVerification&&await e.context.options.emailVerification.afterEmailVerification(a,e.request),e.context.options.emailVerification?.autoSignInAfterVerification){let t=await cl(e);if(t&&t.user.email===n.email)await dQ(e,{session:t.session,user:{...t.user,emailVerified:!0}});else{let t=await e.context.internalAdapter.createSession(s.user.id,e);if(!t)throw new eC.APIError("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await dQ(e,{session:t,user:{...s.user,emailVerified:!0}})}}if(e.query.callbackURL)throw e.redirect(e.query.callbackURL);return e.json({status:!0,user:null})}),fe={isAction:!1};async function ft(e,t){let r=e.body?.callbackURL||e.context.options.baseURL;if(!r)throw new eC.APIError("BAD_REQUEST",{message:"callbackURL is required"});let i=(0,cv.g)(128),n=(0,cv.g)(32),s=e.context.createAuthCookie("state",{maxAge:3e5});await e.setSignedCookie(s.name,n,e.context.secret,s.attributes);let a=JSON.stringify({callbackURL:r,codeVerifier:i,errorURL:e.body?.errorCallbackURL,newUserURL:e.body?.newUserCallbackURL,link:t,expiresAt:Date.now()+6e5,requestSignUp:e.body?.requestSignUp}),o=new Date;o.setMinutes(o.getMinutes()+10);let u=await e.context.internalAdapter.createVerificationValue({value:a,identifier:n,expiresAt:o},e);if(!u)throw e.context.logger.error("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database"),new eC.APIError("INTERNAL_SERVER_ERROR",{message:"Unable to create verification"});return{state:u.identifier,codeVerifier:i}}async function fr(e){let t=e.query.state||e.body.state,r=await e.context.internalAdapter.findVerificationValue(t);if(!r){e.context.logger.error("State Mismatch. Verification not found",{state:t});let r=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${r}?error=please_restart_the_process`)}let i=lh({callbackURL:o6(),codeVerifier:o6(),errorURL:o6().optional(),newUserURL:o6().optional(),expiresAt:uF(),link:lh({email:o6(),userId:dx.string()}).optional(),requestSignUp:uJ().optional()}).parse(JSON.parse(r.value));i.errorURL||(i.errorURL=`${e.context.baseURL}/error`);let n=e.context.createAuthCookie("state"),s=await e.getSignedCookie(n.name,e.context.secret);if(!e.context.oauthConfig?.skipStateCookieCheck&&(!s||s!==t)){let t=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${t}?error=state_mismatch`)}if(e.setCookie(n.name,"",{maxAge:0}),i.expiresAt<Date.now()){await e.context.internalAdapter.deleteVerificationValue(r.id);let t=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${t}?error=please_restart_the_process`)}return await e.context.internalAdapter.deleteVerificationValue(r.id),i}function fi(e,t){return t.options.account?.encryptOAuthTokens&&e?pX({key:t.secret,data:e}):e}async function fn(e,{userInfo:t,account:r,callbackURL:i,disableSignUp:n,overrideUserInfo:s}){let a=await e.context.internalAdapter.findOAuthUser(t.email.toLowerCase(),r.accountId,r.providerId).catch(t=>{dj.logger.error("Better auth was unable to query your database.\nError: ",t);let r=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;throw e.redirect(`${r}?error=internal_server_error`)}),o=a?.user,u=!o;if(a){let i=a.accounts.find(e=>e.providerId===r.providerId&&e.accountId===r.accountId);if(i){if(e.context.options.account?.updateAccountOnSignIn!==!1){let t=Object.fromEntries(Object.entries({idToken:r.idToken,accessToken:await fi(r.accessToken,e.context),refreshToken:await fi(r.refreshToken,e.context),accessTokenExpiresAt:r.accessTokenExpiresAt,refreshTokenExpiresAt:r.refreshTokenExpiresAt,scope:r.scope}).filter(([e,t])=>void 0!==t));Object.keys(t).length>0&&await e.context.internalAdapter.updateAccount(i.id,t,e)}t.emailVerified&&!a.user.emailVerified&&t.email.toLowerCase()===a.user.email&&await e.context.internalAdapter.updateUser(a.user.id,{emailVerified:!0})}else{let i=e.context.options.account?.accountLinking?.trustedProviders;if(!i?.includes(r.providerId)&&!t.emailVerified||e.context.options.account?.accountLinking?.enabled===!1)return(0,dj.isDevelopment)()&&dj.logger.warn(`User already exist but account isn't linked to ${r.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`),{error:"account not linked",data:null};try{await e.context.internalAdapter.linkAccount({providerId:r.providerId,accountId:t.id.toString(),userId:a.user.id,accessToken:await fi(r.accessToken,e.context),refreshToken:await fi(r.refreshToken,e.context),idToken:r.idToken,accessTokenExpiresAt:r.accessTokenExpiresAt,refreshTokenExpiresAt:r.refreshTokenExpiresAt,scope:r.scope},e)}catch(e){return dj.logger.error("Unable to link account",e),{error:"unable to link account",data:null}}t.emailVerified&&!a.user.emailVerified&&t.email.toLowerCase()===a.user.email&&await e.context.internalAdapter.updateUser(a.user.id,{emailVerified:!0})}if(s){let{id:r,...i}=t;await e.context.internalAdapter.updateUser(a.user.id,{...i,email:t.email.toLowerCase(),emailVerified:t.email.toLowerCase()===a.user.email&&a.user.emailVerified||t.emailVerified})}}else{if(n)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:n,...s}=t;if(o=await e.context.internalAdapter.createOAuthUser({...s,email:t.email.toLowerCase()},{accessToken:await fi(r.accessToken,e.context),refreshToken:await fi(r.refreshToken,e.context),idToken:r.idToken,accessTokenExpiresAt:r.accessTokenExpiresAt,refreshTokenExpiresAt:r.refreshTokenExpiresAt,scope:r.scope,providerId:r.providerId,accountId:t.id.toString()},e).then(e=>e?.user),!t.emailVerified&&o&&e.context.options.emailVerification?.sendOnSignUp){let t=await p5(e.context.secret,o.email,void 0,e.context.options.emailVerification?.expiresIn),r=`${e.context.baseURL}/verify-email?token=${t}&callbackURL=${i}`;await e.context.options.emailVerification?.sendVerificationEmail?.({user:o,url:r,token:t},e.request)}}catch(e){if(dj.logger.error(e),e instanceof eC.APIError)return{error:e.message,data:null,isRegister:!1};return{error:"unable to create user",data:null,isRegister:!1}}}if(!o)return{error:"unable to create user",data:null,isRegister:!1};let l=await e.context.internalAdapter.createSession(o.id,e);return l?{data:{session:l,user:o},error:null,isRegister:u}:{error:"unable to create session",data:null,isRegister:!1}}let fs=(0,dX.createAuthEndpoint)("/sign-in/social",{method:"POST",body:lh({callbackURL:o6().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:o6().optional(),errorCallbackURL:o6().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:ca,disableRedirect:uJ().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:lK(lh({token:o6().meta({description:"ID token from the provider"}),nonce:o6().meta({description:"Nonce used to generate the token"}).optional(),accessToken:o6().meta({description:"Access token from the provider"}).optional(),refreshToken:o6().meta({description:"Refresh token from the provider"}).optional(),expiresAt:uF().meta({description:"Expiry date of the token"}).optional()})),scopes:lc(o6()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:uJ().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:o6().meta({description:"The login hint to use for the authorization code request"}).optional()}),metadata:{openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token",url:{type:"null",nullable:!0},user:{type:"object",properties:{id:{type:"string"},email:{type:"string"},name:{type:"string",nullable:!0},image:{type:"string",nullable:!0},emailVerified:{type:"boolean"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","email","emailVerified","createdAt","updatedAt"]}}},required:["redirect","token","user"]}}}}}}}},async e=>{let t=e.context.socialProviders.find(t=>t.id===e.body.provider);if(!t)throw e.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:e.body.provider}),new eC.APIError("NOT_FOUND",{message:d$.BASE_ERROR_CODES.PROVIDER_NOT_FOUND});if(e.body.idToken){if(!t.verifyIdToken)throw e.context.logger.error("Provider does not support id token verification",{provider:e.body.provider}),new eC.APIError("NOT_FOUND",{message:d$.BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED});let{token:r,nonce:i}=e.body.idToken;if(!await t.verifyIdToken(r,i))throw e.context.logger.error("Invalid id token",{provider:e.body.provider}),new eC.APIError("UNAUTHORIZED",{message:d$.BASE_ERROR_CODES.INVALID_TOKEN});let n=await t.getUserInfo({idToken:r,accessToken:e.body.idToken.accessToken,refreshToken:e.body.idToken.refreshToken});if(!n||!n?.user)throw e.context.logger.error("Failed to get user info",{provider:e.body.provider}),new eC.APIError("UNAUTHORIZED",{message:d$.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO});if(!n.user.email)throw e.context.logger.error("User email not found",{provider:e.body.provider}),new eC.APIError("UNAUTHORIZED",{message:d$.BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND});let s=await fn(e,{userInfo:{...n.user,email:n.user.email,id:String(n.user.id),name:n.user.name||"",image:n.user.image,emailVerified:n.user.emailVerified||!1},account:{providerId:t.id,accountId:String(n.user.id),accessToken:e.body.idToken.accessToken},callbackURL:e.body.callbackURL,disableSignUp:t.disableImplicitSignUp&&!e.body.requestSignUp||t.disableSignUp});if(s.error)throw new eC.APIError("UNAUTHORIZED",{message:s.error});return await dQ(e,s.data),e.json({redirect:!1,token:s.data.session.token,url:void 0,user:{id:s.data.user.id,email:s.data.user.email,name:s.data.user.name,image:s.data.user.image,emailVerified:s.data.user.emailVerified,createdAt:s.data.user.createdAt,updatedAt:s.data.user.updatedAt}})}let{codeVerifier:r,state:i}=await ft(e),n=await t.createAuthorizationURL({state:i,codeVerifier:r,redirectURI:`${e.context.baseURL}/callback/${t.id}`,scopes:e.body.scopes,loginHint:e.body.loginHint});return e.json({url:n.toString(),redirect:!e.body.disableRedirect})}),fa=(0,dX.createAuthEndpoint)("/sign-in/email",{method:"POST",body:lh({email:o6().meta({description:"Email of the user"}),password:o6().meta({description:"Password of the user"}),callbackURL:o6().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:uJ().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{openapi:{description:"Sign in with email and password",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"null",nullable:!0},user:{type:"object",properties:{id:{type:"string"},email:{type:"string"},name:{type:"string",nullable:!0},image:{type:"string",nullable:!0},emailVerified:{type:"boolean"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","email","emailVerified","createdAt","updatedAt"]}},required:["redirect","token","user"]}}}}}}}},async e=>{if(!e.context.options?.emailAndPassword?.enabled)throw e.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new eC.APIError("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:t,password:r}=e.body;if(!o6().email().safeParse(t).success)throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.INVALID_EMAIL});let i=await e.context.internalAdapter.findUserByEmail(t,{includeAccounts:!0});if(!i)throw await e.context.password.hash(r),e.context.logger.error("User not found",{email:t}),new eC.APIError("UNAUTHORIZED",{message:d$.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD});let n=i.accounts.find(e=>"credential"===e.providerId);if(!n)throw e.context.logger.error("Credential account not found",{email:t}),new eC.APIError("UNAUTHORIZED",{message:d$.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD});let s=n?.password;if(!s)throw e.context.logger.error("Password not found",{email:t}),new eC.APIError("UNAUTHORIZED",{message:d$.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD});if(!await e.context.password.verify({hash:s,password:r}))throw e.context.logger.error("Invalid password"),new eC.APIError("UNAUTHORIZED",{message:d$.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD});if(e.context.options?.emailAndPassword?.requireEmailVerification&&!i.user.emailVerified){if(!e.context.options?.emailVerification?.sendVerificationEmail)throw new eC.APIError("FORBIDDEN",{message:d$.BASE_ERROR_CODES.EMAIL_NOT_VERIFIED});if(e.context.options?.emailVerification?.sendOnSignIn){let t=await p5(e.context.secret,i.user.email,void 0,e.context.options.emailVerification?.expiresIn),r=`${e.context.baseURL}/verify-email?token=${t}&callbackURL=${e.body.callbackURL||"/"}`;await e.context.options.emailVerification.sendVerificationEmail({user:i.user,url:r,token:t},e.request)}throw new eC.APIError("FORBIDDEN",{message:d$.BASE_ERROR_CODES.EMAIL_NOT_VERIFIED})}let a=await e.context.internalAdapter.createSession(i.user.id,e,!1===e.body.rememberMe);if(!a)throw e.context.logger.error("Failed to create session"),new eC.APIError("UNAUTHORIZED",{message:d$.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION});return await dQ(e,{session:a,user:i.user},!1===e.body.rememberMe),e.json({redirect:!!e.body.callbackURL,token:a.token,url:e.body.callbackURL,user:{id:i.user.id,email:i.user.email,name:i.user.name,image:i.user.image,emailVerified:i.user.emailVerified,createdAt:i.user.createdAt,updatedAt:i.user.updatedAt}})}),fo=lh({code:o6().optional(),error:o6().optional(),device_id:o6().optional(),error_description:o6().optional(),state:o6().optional(),user:o6().optional()}),fu=(0,dX.createAuthEndpoint)("/callback/:id",{method:["GET","POST"],body:fo.optional(),query:fo.optional(),metadata:fe},async e=>{let t,r,i,n=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;try{if("GET"===e.method)t=fo.parse(e.query);else if("POST"===e.method)t=fo.parse(e.body);else throw Error("Unsupported method")}catch(t){throw e.context.logger.error("INVALID_CALLBACK_REQUEST",t),e.redirect(`${n}?error=invalid_callback_request`)}let{code:s,error:a,state:o,error_description:u,device_id:l}=t;if(!o){e.context.logger.error("State not found",a);let t=n.includes("?")?"&":"?",r=`${n}${t}state=state_not_found`;throw e.redirect(r)}let{codeVerifier:d,callbackURL:c,link:p,errorURL:f,newUserURL:h,requestSignUp:m}=await fr(e);function y(t,r){let i=f??n,s=new URLSearchParams({error:t});r&&s.set("error_description",r);let a=i.includes("?")?"&":"?",o=`${i}${a}${s.toString()}`;throw e.redirect(o)}if(a&&y(a,u),!s)throw e.context.logger.error("Code not found"),y("no_code");let g=e.context.socialProviders.find(t=>t.id===e.params.id);if(!g)throw e.context.logger.error("Oauth provider with id",e.params.id,"not found"),y("oauth_provider_not_found");try{r=await g.validateAuthorizationCode({code:s,codeVerifier:d,deviceId:l,redirectURI:`${e.context.baseURL}/callback/${g.id}`})}catch(t){throw e.context.logger.error("",t),y("invalid_code")}let _=await g.getUserInfo({...r,user:e.body?.user?(0,dz.s)(e.body.user):void 0}).then(e=>e?.user);if(!_)return e.context.logger.error("Unable to get user info"),y("unable_to_get_user_info");if(!c)throw e.context.logger.error("No callback URL found"),y("no_callback_url");if(p){let t,i=e.context.options.account?.accountLinking?.trustedProviders;if(!i?.includes(g.id)&&!_.emailVerified||e.context.options.account?.accountLinking?.enabled===!1)return e.context.logger.error("Unable to link account - untrusted provider"),y("unable_to_link_account");if(_.email!==p.email&&e.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return y("email_doesn't_match");let n=await e.context.internalAdapter.findAccount(String(_.id));if(n){if(n.userId.toString()!==p.userId.toString())return y("account_already_linked_to_different_user");let t=Object.fromEntries(Object.entries({accessToken:await fi(r.accessToken,e.context),refreshToken:await fi(r.refreshToken,e.context),idToken:r.idToken,accessTokenExpiresAt:r.accessTokenExpiresAt,refreshTokenExpiresAt:r.refreshTokenExpiresAt,scope:r.scopes?.join(",")}).filter(([e,t])=>void 0!==t));await e.context.internalAdapter.updateAccount(n.id,t)}else if(!await e.context.internalAdapter.createAccount({userId:p.userId,providerId:g.id,accountId:String(_.id),...r,accessToken:await fi(r.accessToken,e.context),refreshToken:await fi(r.refreshToken,e.context),scope:r.scopes?.join(",")},e))return y("unable_to_link_account");try{t=c.toString()}catch{t=c}throw e.redirect(t)}if(!_.email)return e.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),y("email_not_found");let b=await fn(e,{userInfo:{..._,id:String(_.id),email:_.email,name:_.name||_.email},account:{providerId:g.id,accountId:String(_.id),...r,scope:r.scopes?.join(",")},callbackURL:c,disableSignUp:g.disableImplicitSignUp&&!m||g.options?.disableSignUp,overrideUserInfo:g.options?.overrideUserInfoOnSignIn});if(b.error)return e.context.logger.error(b.error.split(" ").join("_")),y(b.error.split(" ").join("_"));let{session:v,user:E}=b.data;await dQ(e,{session:v,user:E});try{i=(b.isRegister&&h||c).toString()}catch{i=b.isRegister&&h||c}throw e.redirect(i)}),fl=(0,dX.createAuthEndpoint)("/sign-out",{method:"POST",requireHeaders:!0,metadata:{openapi:{description:"Sign out the current user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async e=>{let t=await e.getSignedCookie(e.context.authCookies.sessionToken.name,e.context.secret);if(!t)throw dJ(e),new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.FAILED_TO_GET_SESSION});return await e.context.internalAdapter.deleteSession(t),dJ(e),e.json({success:!0})});function fd(e,t,r){let i=t?new URL(t,e.baseURL):new URL(`${e.baseURL}/error`);return r&&Object.entries(r).forEach(([e,t])=>i.searchParams.set(e,t)),i.href}let fc=(0,dX.createAuthEndpoint)("/request-password-reset",{method:"POST",body:lh({email:o8().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:o6().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async e=>{if(!e.context.options.emailAndPassword?.sendResetPassword)throw e.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new eC.APIError("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:t,redirectTo:r}=e.body,i=await e.context.internalAdapter.findUserByEmail(t,{includeAccounts:!0});if(!i)return e.context.logger.error("Reset Password: User not found",{email:t}),e.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let n=dU(e.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),s=(0,cg.g)(24);await e.context.internalAdapter.createVerificationValue({value:i.user.id,identifier:`reset-password:${s}`,expiresAt:n},e);let a=r?encodeURIComponent(r):"",o=`${e.context.baseURL}/reset-password/${s}?callbackURL=${a}`;return await e.context.options.emailAndPassword.sendResetPassword({user:i.user,url:o,token:s},e.request),e.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),fp=(0,dX.createAuthEndpoint)("/forget-password",{method:"POST",body:lh({email:o6().email().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:o6().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async e=>{if(!e.context.options.emailAndPassword?.sendResetPassword)throw e.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new eC.APIError("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:t,redirectTo:r}=e.body,i=await e.context.internalAdapter.findUserByEmail(t,{includeAccounts:!0});if(!i)return e.context.logger.error("Reset Password: User not found",{email:t}),e.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let n=dU(e.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),s=(0,cg.g)(24);await e.context.internalAdapter.createVerificationValue({value:i.user.id,identifier:`reset-password:${s}`,expiresAt:n},e);let a=r?encodeURIComponent(r):"",o=`${e.context.baseURL}/reset-password/${s}?callbackURL=${a}`;return await e.context.options.emailAndPassword.sendResetPassword({user:i.user,url:o,token:s},e.request),e.json({status:!0})}),ff=(0,dX.createAuthEndpoint)("/reset-password/:token",{method:"GET",query:lh({callbackURL:o6().meta({description:"The URL to redirect the user to reset their password"})}),use:[p3(e=>e.query.callbackURL)],metadata:{openapi:{description:"Redirects the user to the callback URL with the token",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async e=>{let{token:t}=e.params,{callbackURL:r}=e.query;if(!t||!r)throw e.redirect(fd(e.context,r,{error:"INVALID_TOKEN"}));let i=await e.context.internalAdapter.findVerificationValue(`reset-password:${t}`);if(!i||i.expiresAt<new Date)throw e.redirect(fd(e.context,r,{error:"INVALID_TOKEN"}));throw e.redirect(function(e,t,r){let i=new URL(t,e.baseURL);return r&&Object.entries(r).forEach(([e,t])=>i.searchParams.set(e,t)),i.href}(e.context,r,{token:t}))}),fh=ff,fm=(0,dX.createAuthEndpoint)("/reset-password",{method:"POST",query:lh({token:o6().optional()}).optional(),body:lh({newPassword:o6().meta({description:"The new password to set"}),token:o6().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{description:"Reset the password for a user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async e=>{let t=e.body.token||e.query?.token;if(!t)throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.INVALID_TOKEN});let{newPassword:r}=e.body,i=e.context.password?.config.minPasswordLength,n=e.context.password?.config.maxPasswordLength;if(r.length<i)throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.PASSWORD_TOO_SHORT});if(r.length>n)throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.PASSWORD_TOO_LONG});let s=`reset-password:${t}`,a=await e.context.internalAdapter.findVerificationValue(s);if(!a||a.expiresAt<new Date)throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.INVALID_TOKEN});let o=a.value,u=await e.context.password.hash(r);if((await e.context.internalAdapter.findAccounts(o)).find(e=>"credential"===e.providerId)?await e.context.internalAdapter.updatePassword(o,u,e):await e.context.internalAdapter.createAccount({userId:o,providerId:"credential",password:u,accountId:o},e),await e.context.internalAdapter.deleteVerificationValue(a.id),e.context.options.emailAndPassword?.onPasswordReset){let t=await e.context.internalAdapter.findUserById(o);t&&await e.context.options.emailAndPassword.onPasswordReset({user:t},e.request)}return e.context.options.emailAndPassword?.revokeSessionsOnPasswordReset&&await e.context.internalAdapter.deleteSessions(o),e.json({status:!0})}),fy=()=>(0,dX.createAuthEndpoint)("/update-user",{method:"POST",body:lO(o6().meta({description:"Field name must be a string"}),lt()),use:[cd],metadata:{$Infer:{body:{}},openapi:{description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user"}}}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the update was successful"}}}}}}}}}},async e=>{let t=e.body;if(t.email)throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.EMAIL_CAN_NOT_BE_UPDATED});let{name:r,image:i,...n}=t,s=e.context.session,a=cO(e.context.options,n,"update");if(void 0===i&&void 0===r&&0===Object.keys(a).length)throw new eC.APIError("BAD_REQUEST",{message:"No fields to update"});let o=await e.context.internalAdapter.updateUser(s.user.id,{name:r,image:i,...a},e);return await dQ(e,{session:s.session,user:o}),e.json({status:!0})}),fg=(0,dX.createAuthEndpoint)("/change-password",{method:"POST",body:lh({newPassword:o6().meta({description:"The new password to set"}),currentPassword:o6().meta({description:"The current password is required"}),revokeOtherSessions:uJ().meta({description:"Must be a boolean value"}).optional()}),use:[cc],metadata:{openapi:{description:"Change the password of the user",responses:{200:{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async e=>{let{newPassword:t,currentPassword:r,revokeOtherSessions:i}=e.body,n=e.context.session,s=e.context.password.config.minPasswordLength;if(t.length<s)throw e.context.logger.error("Password is too short"),new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.PASSWORD_TOO_SHORT});let a=e.context.password.config.maxPasswordLength;if(t.length>a)throw e.context.logger.error("Password is too long"),new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.PASSWORD_TOO_LONG});let o=(await e.context.internalAdapter.findAccounts(n.user.id)).find(e=>"credential"===e.providerId&&e.password);if(!o||!o.password)throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND});let u=await e.context.password.hash(t);if(!await e.context.password.verify({hash:o.password,password:r}))throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.INVALID_PASSWORD});await e.context.internalAdapter.updateAccount(o.id,{password:u});let l=null;if(i){await e.context.internalAdapter.deleteSessions(n.user.id);let t=await e.context.internalAdapter.createSession(n.user.id,e);if(!t)throw new eC.APIError("INTERNAL_SERVER_ERROR",{message:d$.BASE_ERROR_CODES.FAILED_TO_GET_SESSION});await dQ(e,{session:t,user:n.user}),l=t.token}return e.json({token:l,user:{id:n.user.id,email:n.user.email,name:n.user.name,image:n.user.image,emailVerified:n.user.emailVerified,createdAt:n.user.createdAt,updatedAt:n.user.updatedAt}})}),f_=(0,dX.createAuthEndpoint)("/set-password",{method:"POST",body:lh({newPassword:o6().meta({description:"The new password to set is required"})}),metadata:{SERVER_ONLY:!0},use:[cc]},async e=>{let{newPassword:t}=e.body,r=e.context.session,i=e.context.password.config.minPasswordLength;if(t.length<i)throw e.context.logger.error("Password is too short"),new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.PASSWORD_TOO_SHORT});let n=e.context.password.config.maxPasswordLength;if(t.length>n)throw e.context.logger.error("Password is too long"),new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.PASSWORD_TOO_LONG});let s=(await e.context.internalAdapter.findAccounts(r.user.id)).find(e=>"credential"===e.providerId&&e.password),a=await e.context.password.hash(t);if(!s)return await e.context.internalAdapter.linkAccount({userId:r.user.id,providerId:"credential",accountId:r.user.id,password:a},e),e.json({status:!0});throw new eC.APIError("BAD_REQUEST",{message:"user already has a password"})}),fb=(0,dX.createAuthEndpoint)("/delete-user",{method:"POST",use:[cc],body:lh({callbackURL:o6().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:o6().meta({description:"The password of the user is required to delete the user"}).optional(),token:o6().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{description:"Delete the user",responses:{200:{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async e=>{if(!e.context.options.user?.deleteUser?.enabled)throw e.context.logger.error("Delete user is disabled. Enable it in the options"),new eC.APIError("NOT_FOUND");let t=e.context.session;if(e.body.password){let r=(await e.context.internalAdapter.findAccounts(t.user.id)).find(e=>"credential"===e.providerId&&e.password);if(!r||!r.password)throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await e.context.password.verify({hash:r.password,password:e.body.password}))throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.INVALID_PASSWORD})}if(e.body.token)return await fv({...e,query:{token:e.body.token}}),e.json({success:!0,message:"User deleted"});if(e.context.options.user.deleteUser?.sendDeleteAccountVerification){let r=(0,cv.g)(32,"0-9","a-z");await e.context.internalAdapter.createVerificationValue({value:t.user.id,identifier:`delete-account-${r}`,expiresAt:new Date(Date.now()+1e3*(e.context.options.user.deleteUser?.deleteTokenExpiresIn||86400))},e);let i=`${e.context.baseURL}/delete-user/callback?token=${r}&callbackURL=${e.body.callbackURL||"/"}`;return await e.context.options.user.deleteUser.sendDeleteAccountVerification({user:t.user,url:i,token:r},e.request),e.json({success:!0,message:"Verification email sent"})}if(!e.body.password&&0!==e.context.sessionConfig.freshAge){let r=new Date(t.session.createdAt).getTime(),i=1e3*e.context.sessionConfig.freshAge;if(Date.now()-r>1e3*i)throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.SESSION_EXPIRED})}let r=e.context.options.user.deleteUser?.beforeDelete;r&&await r(t.user,e.request),await e.context.internalAdapter.deleteUser(t.user.id),await e.context.internalAdapter.deleteSessions(t.user.id),await e.context.internalAdapter.deleteAccounts(t.user.id),dJ(e);let i=e.context.options.user.deleteUser?.afterDelete;return i&&await i(t.user,e.request),e.json({success:!0,message:"User deleted"})}),fv=(0,dX.createAuthEndpoint)("/delete-user/callback",{method:"GET",query:lh({token:o6().meta({description:"The token to verify the deletion request"}),callbackURL:o6().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[p3(e=>e.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{200:{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async e=>{if(!e.context.options.user?.deleteUser?.enabled)throw e.context.logger.error("Delete user is disabled. Enable it in the options"),new eC.APIError("NOT_FOUND");let t=await cl(e);if(!t)throw new eC.APIError("NOT_FOUND",{message:d$.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO});let r=await e.context.internalAdapter.findVerificationValue(`delete-account-${e.query.token}`);if(!r||r.expiresAt<new Date||r.value!==t.user.id)throw new eC.APIError("NOT_FOUND",{message:d$.BASE_ERROR_CODES.INVALID_TOKEN});let i=e.context.options.user.deleteUser?.beforeDelete;i&&await i(t.user,e.request),await e.context.internalAdapter.deleteUser(t.user.id),await e.context.internalAdapter.deleteSessions(t.user.id),await e.context.internalAdapter.deleteAccounts(t.user.id),await e.context.internalAdapter.deleteVerificationValue(r.id),dJ(e);let n=e.context.options.user.deleteUser?.afterDelete;if(n&&await n(t.user,e.request),e.query.callbackURL)throw e.redirect(e.query.callbackURL||"/");return e.json({success:!0,message:"User deleted"})}),fE=(0,dX.createAuthEndpoint)("/change-email",{method:"POST",body:lh({newEmail:o8().meta({description:"The new email address to set must be a valid email address"}),callbackURL:o6().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[cc],metadata:{openapi:{responses:{200:{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},422:{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async e=>{if(!e.context.options.user?.changeEmail?.enabled)throw e.context.logger.error("Change email is disabled."),new eC.APIError("BAD_REQUEST",{message:"Change email is disabled"});let t=e.body.newEmail.toLowerCase();if(t===e.context.session.user.email)throw e.context.logger.error("Email is the same"),new eC.APIError("BAD_REQUEST",{message:"Email is the same"});if(await e.context.internalAdapter.findUserByEmail(t))throw e.context.logger.error("Email already exists"),new eC.APIError("BAD_REQUEST",{message:"Couldn't update your email"});if(!0!==e.context.session.user.emailVerified){if(await e.context.internalAdapter.findUserByEmail(t))throw new eC.APIError("UNPROCESSABLE_ENTITY",{message:d$.BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if(await e.context.internalAdapter.updateUserByEmail(e.context.session.user.email,{email:t},e),await dQ(e,{session:e.context.session.session,user:{...e.context.session.user,email:t}}),e.context.options.emailVerification?.sendVerificationEmail){let r=await p5(e.context.secret,t,void 0,e.context.options.emailVerification?.expiresIn),i=`${e.context.baseURL}/verify-email?token=${r}&callbackURL=${e.body.callbackURL||"/"}`;await e.context.options.emailVerification.sendVerificationEmail({user:{...e.context.session.user,email:t},url:i,token:r},e.request)}return e.json({status:!0})}if(!e.context.options.user.changeEmail.sendChangeEmailVerification)throw e.context.logger.error("Verification email isn't enabled."),new eC.APIError("BAD_REQUEST",{message:"Verification email isn't enabled"});let r=await p5(e.context.secret,e.context.session.user.email,t,e.context.options.emailVerification?.expiresIn),i=`${e.context.baseURL}/verify-email?token=${r}&callbackURL=${e.body.callbackURL||"/"}`;return await e.context.options.user.changeEmail.sendChangeEmailVerification({user:e.context.session.user,newEmail:t,url:i,token:r},e.request),e.json({status:!0})}),fS=(0,dX.createAuthEndpoint)("/error",{method:"GET",metadata:{...fe,openapi:{description:"Displays an error page",responses:{200:{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async e=>new Response(((e="Unknown")=>`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication Error</title>
    <style>
        :root {
            --bg-color: #f8f9fa;
            --text-color: #212529;
            --accent-color: #000000;
            --error-color: #dc3545;
            --border-color: #e9ecef;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            line-height: 1.5;
        }
        .error-container {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 2.5rem;
            text-align: center;
            max-width: 90%;
            width: 400px;
        }
        h1 {
            color: var(--error-color);
            font-size: 1.75rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        p {
            margin-bottom: 1.5rem;
            color: #495057;
        }
        .btn {
            background-color: var(--accent-color);
            color: #ffffff;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            display: inline-block;
            font-weight: 500;
            border: 2px solid var(--accent-color);
        }
        .btn:hover {
            background-color: #131721;
        }
        .error-code {
            font-size: 0.875rem;
            color: #6c757d;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
        }
        .icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <div class="error-container">
        <div class="icon">\u26A0\uFE0F</div>
        <h1>Better Auth Error</h1>
        <p>We encountered an issue while processing your request. Please try again or contact the application owner if the problem persists.</p>
        <a href="/" id="returnLink" class="btn">Return to Application</a>
        <div class="error-code">Error Code: <span id="errorCode">${e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}</span></div>
    </div>
</body>
</html>`)(new URL(e.request?.url||"").searchParams.get("error")||"Unknown"),{headers:{"Content-Type":"text/html"}})),fA=(0,dX.createAuthEndpoint)("/ok",{method:"GET",metadata:{...fe,openapi:{description:"Check if the API is working",responses:{200:{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async e=>e.json({ok:!0})),fT=(0,dX.createAuthEndpoint)("/list-accounts",{method:"GET",use:[cd],metadata:{openapi:{description:"List all accounts linked to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","scopes"]}}}}}}}}},async e=>{let t=e.context.session,r=await e.context.internalAdapter.findAccounts(t.user.id);return e.json(r.map(e=>({id:e.id,providerId:e.providerId,createdAt:e.createdAt,updatedAt:e.updatedAt,accountId:e.accountId,scopes:e.scope?.split(",")||[]})))}),fw=(0,dX.createAuthEndpoint)("/link-social",{method:"POST",requireHeaders:!0,body:lh({callbackURL:o6().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:ca,idToken:lh({token:o6(),nonce:o6().optional(),accessToken:o6().optional(),refreshToken:o6().optional(),scopes:lc(o6()).optional()}).optional(),requestSignUp:uJ().optional(),scopes:lc(o6()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:o6().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:uJ().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional()}),use:[cd],metadata:{openapi:{description:"Link a social account to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async e=>{let t=e.context.session,r=e.context.socialProviders.find(t=>t.id===e.body.provider);if(!r)throw e.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:e.body.provider}),new eC.APIError("NOT_FOUND",{message:d$.BASE_ERROR_CODES.PROVIDER_NOT_FOUND});if(e.body.idToken){if(!r.verifyIdToken)throw e.context.logger.error("Provider does not support id token verification",{provider:e.body.provider}),new eC.APIError("NOT_FOUND",{message:d$.BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED});let{token:i,nonce:n}=e.body.idToken;if(!await r.verifyIdToken(i,n))throw e.context.logger.error("Invalid id token",{provider:e.body.provider}),new eC.APIError("UNAUTHORIZED",{message:d$.BASE_ERROR_CODES.INVALID_TOKEN});let s=await r.getUserInfo({idToken:i,accessToken:e.body.idToken.accessToken,refreshToken:e.body.idToken.refreshToken});if(!s||!s?.user)throw e.context.logger.error("Failed to get user info",{provider:e.body.provider}),new eC.APIError("UNAUTHORIZED",{message:d$.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO});let a=String(s.user.id);if(!s.user.email)throw e.context.logger.error("User email not found",{provider:e.body.provider}),new eC.APIError("UNAUTHORIZED",{message:d$.BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND});if((await e.context.internalAdapter.findAccounts(t.user.id)).find(e=>e.providerId===r.id&&e.accountId===a))return e.json({url:"",status:!0,redirect:!1});let o=e.context.options.account?.accountLinking?.trustedProviders;if(!o?.includes(r.id)&&!s.user.emailVerified||e.context.options.account?.accountLinking?.enabled===!1)throw new eC.APIError("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(s.user.email!==t.user.email&&e.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new eC.APIError("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await e.context.internalAdapter.createAccount({userId:t.user.id,providerId:r.id,accountId:a,accessToken:e.body.idToken.accessToken,idToken:i,refreshToken:e.body.idToken.refreshToken,scope:e.body.idToken.scopes?.join(",")},e)}catch(e){throw new eC.APIError("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if(e.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await e.context.internalAdapter.updateUser(t.user.id,{name:s.user?.name,image:s.user?.image})}catch(e){console.warn("Could not update user - "+e.toString())}return e.json({url:"",status:!0,redirect:!1})}let i=await ft(e,{userId:t.user.id,email:t.user.email}),n=await r.createAuthorizationURL({state:i.state,codeVerifier:i.codeVerifier,redirectURI:`${e.context.baseURL}/callback/${r.id}`,scopes:e.body.scopes});return e.json({url:n.toString(),redirect:!e.body.disableRedirect})}),fO=(0,dX.createAuthEndpoint)("/unlink-account",{method:"POST",body:lh({providerId:o6(),accountId:o6().optional()}),use:[cp],metadata:{openapi:{description:"Unlink an account",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async e=>{let{providerId:t,accountId:r}=e.body,i=await e.context.internalAdapter.findAccounts(e.context.session.user.id);if(1===i.length&&!e.context.options.account?.accountLinking?.allowUnlinkingAll)throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.FAILED_TO_UNLINK_LAST_ACCOUNT});let n=i.find(e=>r?e.accountId===r&&e.providerId===t:e.providerId===t);if(!n)throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.ACCOUNT_NOT_FOUND});return await e.context.internalAdapter.deleteAccount(n.id),e.json({status:!0})}),fR=(0,dX.createAuthEndpoint)("/get-access-token",{method:"POST",body:lh({providerId:o6().meta({description:"The provider ID for the OAuth provider"}),accountId:o6().meta({description:"The account ID associated with the refresh token"}).optional(),userId:o6().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async e=>{let{providerId:t,accountId:r,userId:i}=e.body,n=e.request,s=await cl(e);if(n&&!s)throw e.error("UNAUTHORIZED");let a=s?.user?.id||i;if(!a)throw new eC.APIError("BAD_REQUEST",{message:"Either userId or session is required"});if(!e.context.socialProviders.find(e=>e.id===t))throw new eC.APIError("BAD_REQUEST",{message:`Provider ${t} is not supported.`});let o=(await e.context.internalAdapter.findAccounts(a)).find(e=>r?e.id===r&&e.providerId===t:e.providerId===t);if(!o)throw new eC.APIError("BAD_REQUEST",{message:"Account not found"});let u=e.context.socialProviders.find(e=>e.id===t);if(!u)throw new eC.APIError("BAD_REQUEST",{message:`Provider ${t} not found.`});try{let t=null,r=o.accessTokenExpiresAt&&new Date(o.accessTokenExpiresAt).getTime()-Date.now()<5e3;o.refreshToken&&r&&u.refreshAccessToken&&(t=await u.refreshAccessToken(o.refreshToken),await e.context.internalAdapter.updateAccount(o.id,{accessToken:await fi(t.accessToken,e.context),accessTokenExpiresAt:t.accessTokenExpiresAt,refreshToken:await fi(t.refreshToken,e.context),refreshTokenExpiresAt:t.refreshTokenExpiresAt}));let i={accessToken:await function(e,t){return e&&t.options.account?.encryptOAuthTokens?p0({key:t.secret,data:e}):e}(t?.accessToken??o.accessToken??"",e.context),accessTokenExpiresAt:t?.accessTokenExpiresAt??o.accessTokenExpiresAt??void 0,scopes:o.scope?.split(",")??[],idToken:t?.idToken??o.idToken??void 0};return e.json(i)}catch(e){throw new eC.APIError("BAD_REQUEST",{message:"Failed to get a valid access token",cause:e})}}),fI=(0,dX.createAuthEndpoint)("/refresh-token",{method:"POST",body:lh({providerId:o6().meta({description:"The provider ID for the OAuth provider"}),accountId:o6().meta({description:"The account ID associated with the refresh token"}).optional(),userId:o6().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async e=>{let{providerId:t,accountId:r,userId:i}=e.body,n=e.request,s=await cl(e);if(n&&!s)throw e.error("UNAUTHORIZED");let a=s?.user?.id||i;if(!a)throw new eC.APIError("BAD_REQUEST",{message:"Either userId or session is required"});let o=(await e.context.internalAdapter.findAccounts(a)).find(e=>r?e.id===r&&e.providerId===t:e.providerId===t);if(!o)throw new eC.APIError("BAD_REQUEST",{message:"Account not found"});let u=e.context.socialProviders.find(e=>e.id===t);if(!u)throw new eC.APIError("BAD_REQUEST",{message:`Provider ${t} not found.`});if(!u.refreshAccessToken)throw new eC.APIError("BAD_REQUEST",{message:`Provider ${t} does not support token refreshing.`});try{let t=await u.refreshAccessToken(o.refreshToken);return await e.context.internalAdapter.updateAccount(o.id,{accessToken:await fi(t.accessToken,e.context),refreshToken:await fi(t.refreshToken,e.context),accessTokenExpiresAt:t.accessTokenExpiresAt,refreshTokenExpiresAt:t.refreshTokenExpiresAt}),e.json(t)}catch(e){throw new eC.APIError("BAD_REQUEST",{message:"Failed to refresh access token",cause:e})}}),fC=(0,dX.createAuthEndpoint)("/account-info",{method:"POST",use:[cd],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},body:lh({accountId:o6().meta({description:"The provider given account id for which to get the account info"})})},async e=>{let t=await e.context.internalAdapter.findAccount(e.body.accountId);if(!t||t.userId!==e.context.session.user.id)throw new eC.APIError("BAD_REQUEST",{message:"Account not found"});let r=e.context.socialProviders.find(e=>e.id===t.providerId);if(!r)throw new eC.APIError("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${t.providerId} but it is not configured`});let i=await fR({...e,body:{accountId:t.id,providerId:t.providerId},returnHeaders:!1});if(!i.accessToken)throw new eC.APIError("BAD_REQUEST",{message:"Access token not found"});let n=await r.getUserInfo({...i,accessToken:i.accessToken});return e.json(n)}),fN=cC((e,t,r)=>{if(Array.isArray(e[t])&&Array.isArray(r))return e[t]=r,!0});function fP(e,t){let r={};for(let[i,n]of Object.entries(e))r[i]=async e=>{let r=await t,i={...e,context:{...r,returned:void 0,responseHeaders:void 0,session:null},path:n.path,headers:e?.headers?new Headers(e?.headers):void 0},{beforeHooks:s,afterHooks:a}=function(e){let t=e.options.plugins||[],r=[],i=[];e.options.hooks?.before&&r.push({matcher:()=>!0,handler:e.options.hooks.before}),e.options.hooks?.after&&i.push({matcher:()=>!0,handler:e.options.hooks.after});let n=t.map(e=>{if(e.hooks?.before)return e.hooks.before}).filter(e=>void 0!==e).flat(),s=t.map(e=>{if(e.hooks?.after)return e.hooks.after}).filter(e=>void 0!==e).flat();return n.length&&r.push(...n),s.length&&i.push(...s),{beforeHooks:r,afterHooks:i}}(r),o=await fD(i,s);if("context"in o&&o.context&&"object"==typeof o.context){let{headers:e,...t}=o.context;e&&e.forEach((e,t)=>{i.headers.set(t,e)}),i=fN(t,i)}else if(o)return e?.asResponse?(0,eC.toResponse)(o,{headers:e?.headers}):e?.returnHeaders?{headers:e?.headers,response:o}:o;i.asResponse=!1,i.returnHeaders=!0;let u=await n(i).catch(e=>{if(e instanceof eC.APIError)return{response:e,headers:e.headers?new Headers(e.headers):null};throw e});if(u&&u instanceof Response)return u;i.context.returned=u.response,i.context.responseHeaders=u.headers;let l=await fx(i,a);if(l.response&&(u.response=l.response),u.response instanceof eC.APIError&&(0,dj.shouldPublishLog)(r.logger.level,"debug")&&(u.response.stack=u.response.errorStack),u.response instanceof eC.APIError&&!e?.asResponse)throw u.response;return e?.asResponse?(0,eC.toResponse)(u.response,{headers:u.headers}):e?.returnHeaders?{headers:u.headers,response:u.response}:u.response},r[i].path=n.path,r[i].options=n.options;return r}async function fD(e,t){let r={};for(let i of t)if(i.matcher(e)){let t=await i.handler({...e,returnHeaders:!1}).catch(t=>{throw t instanceof eC.APIError&&(0,dj.shouldPublishLog)(e.context.logger.level,"debug")&&(t.stack=t.errorStack),t});if(t&&"object"==typeof t){if("context"in t&&"object"==typeof t.context){let{headers:e,...i}=t.context;e instanceof Headers&&(r.headers?e.forEach((e,t)=>{r.headers?.set(t,e)}):r.headers=e),r=fN(i,r);continue}return t}}return{context:r}}async function fx(e,t){for(let r of t)if(r.matcher(e)){let t=await r.handler(e).catch(t=>{if(t instanceof eC.APIError)return(0,dj.shouldPublishLog)(e.context.logger.level,"debug")&&(t.stack=t.errorStack),{response:t,headers:t.headers?new Headers(t.headers):null};throw t});t.headers&&t.headers.forEach((t,r)=>{e.context.responseHeaders?"set-cookie"===r.toLowerCase()?e.context.responseHeaders.append(r,t):e.context.responseHeaders.set(r,t):e.context.responseHeaders=new Headers({[r]:t})}),t.response&&(e.context.returned=t.response)}return{response:e.context.returned,headers:e.context.responseHeaders}}e.s(["g",()=>fL],42551);function fL(e,t){if(t.advanced?.ipAddress?.disableIpTracking)return null;if((0,dj.isTest)()||(0,dj.isDevelopment)())return"127.0.0.1";let r="headers"in e?e.headers:e;for(let e of t.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"]){let t="get"in r?r.get(e):r[e];if("string"==typeof t){var i;let e=t.split(",")[0].trim();if(i=e,dL.ipv4().safeParse(i).success||dL.ipv6().safeParse(i).success)return e}}return null}let fk=new Map;async function fM(e,t){if(!t.rateLimit.enabled)return;let r=new URL(e.url).pathname.replace(t.options.basePath||"/api/auth",""),i=t.rateLimit.window,n=t.rateLimit.max,s=fL(e,t.options);if(!s)return;let a=s+r,o=[{pathMatcher:e=>e.startsWith("/sign-in")||e.startsWith("/sign-up")||e.startsWith("/change-password")||e.startsWith("/change-email"),window:10,max:3}].find(e=>e.pathMatcher(r));for(let e of(o&&(i=o.window,n=o.max),t.options.plugins||[]))if(e.rateLimit){let t=e.rateLimit.find(e=>e.pathMatcher(r));if(t){i=t.window,n=t.max;break}}if(t.rateLimit.customRules){let s=Object.keys(t.rateLimit.customRules).find(e=>e.includes("*")?p2(e)(r):e===r);if(s){let r=t.rateLimit.customRules[s],a="function"==typeof r?await r(e):r;if(a&&(i=a.window,n=a.max),!1===a)return}}let u=function(e,t){if(e.options.rateLimit?.customStorage)return e.options.rateLimit.customStorage;let r=e.rateLimit.storage;if("secondary-storage"===r)return{get:async t=>{let r=await e.options.secondaryStorage?.get(t);return r?(0,dz.s)(r):void 0},set:async(r,i,n)=>{let s=t?.window??e.options.rateLimit?.window??10;await e.options.secondaryStorage?.set?.(r,JSON.stringify(i),s)}};if("memory"===r)return{get:async e=>fk.get(e),async set(e,t,r){fk.set(e,t)}};let i="rateLimit",n=e.adapter;return{get:async e=>{let t=(await n.findMany({model:i,where:[{field:"key",value:e}]}))[0];return"bigint"==typeof t?.lastRequest&&(t.lastRequest=Number(t.lastRequest)),t},set:async(t,r,s)=>{try{s?await n.updateMany({model:i,where:[{field:"key",value:t}],update:{count:r.count,lastRequest:r.lastRequest}}):await n.create({model:i,data:{key:t,count:r.count,lastRequest:r.lastRequest}})}catch(t){e.logger.error("Error setting rate limit",t)}}}}(t,{window:i}),l=await u.get(a),d=Date.now();if(l){var c,p,f,h;let e=d-l.lastRequest;if(c=n,p=i,f=l,Date.now()-f.lastRequest<1e3*p&&f.count>=c){return h=Math.ceil((l.lastRequest+1e3*i-Date.now())/1e3),new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":h.toString()}})}e>1e3*i?await u.set(a,{...l,count:1,lastRequest:d},!0):await u.set(a,{...l,count:l.count+1,lastRequest:d},!0)}else await u.set(a,{key:a,count:1,lastRequest:d})}function f$(e,t){let r=new Map;e.plugins?.forEach(e=>{if(e.endpoints){for(let[t,i]of Object.entries(e.endpoints))if(i&&"path"in i){let n=i.path,s=[];i.options&&"method"in i.options&&(Array.isArray(i.options.method)?s=i.options.method:"string"==typeof i.options.method&&(s=[i.options.method])),0===s.length&&(s=["*"]),r.has(n)||r.set(n,[]),r.get(n).push({pluginId:e.id,endpointKey:t,methods:s})}}});let i=[];for(let[e,t]of r.entries())if(t.length>1){let r=new Map,n=!1;for(let e of t)for(let i of e.methods)r.has(i)||r.set(i,[]),r.get(i).push(e.pluginId),r.get(i).length>1&&(n=!0),"*"===i&&t.length>1?n=!0:"*"!==i&&r.has("*")&&(n=!0);if(n){let n=[...new Set(t.map(e=>e.pluginId))],s=[];for(let[e,i]of r.entries())(i.length>1||"*"===e&&t.length>1||"*"!==e&&r.has("*"))&&s.push(e);i.push({path:e,plugins:n,conflictingMethods:s})}}if(i.length>0){let e=i.map(e=>`  - "${e.path}" [${e.conflictingMethods.join(", ")}] used by plugins: ${e.plugins.join(", ")}`).join("\n");t.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${e}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}function fU(e,t){let r=t.plugins?.reduce((e,t)=>({...e,...t.endpoints}),{})??{},i=t.plugins?.map(t=>t.middlewares?.map(t=>{let r=async r=>{let i=await e;return t.middleware({...r,context:{...i,...r.context}})};return r.options=t.middleware.options,{path:t.path,middleware:r}})).filter(e=>void 0!==e).flat()||[];return{api:fP({...{signInSocial:fs,callbackOAuth:fu,getSession:cu(),signOut:fl,signUpEmail:(0,dX.createAuthEndpoint)("/sign-up/email",{method:"POST",body:lO(o6(),lt()),metadata:{$Infer:{body:{}},openapi:{description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{200:{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},422:{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async e=>{let t;if(!e.context.options.emailAndPassword?.enabled||e.context.options.emailAndPassword?.disableSignUp)throw new eC.APIError("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let r=e.body,{name:i,email:n,password:s,image:a,callbackURL:o,rememberMe:u,...l}=r;if(!o8().safeParse(n).success)throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.INVALID_EMAIL});let d=e.context.password.config.minPasswordLength;if(s.length<d)throw e.context.logger.error("Password is too short"),new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.PASSWORD_TOO_SHORT});let c=e.context.password.config.maxPasswordLength;if(s.length>c)throw e.context.logger.error("Password is too long"),new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.PASSWORD_TOO_LONG});let p=await e.context.internalAdapter.findUserByEmail(n);if(p?.user)throw e.context.logger.info(`Sign-up attempt for existing email: ${n}`),new eC.APIError("UNPROCESSABLE_ENTITY",{message:d$.BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let f=await e.context.password.hash(s);try{let r=cO(e.context.options,l,"create");if(!(t=await e.context.internalAdapter.createUser({email:n.toLowerCase(),name:i,image:a,...r,emailVerified:!1},e)))throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.FAILED_TO_CREATE_USER})}catch(t){if((0,dj.isDevelopment)()&&e.context.logger.error("Failed to create user",t),t instanceof eC.APIError)throw t;throw e.context.logger?.error("Failed to create user",t),new eC.APIError("UNPROCESSABLE_ENTITY",{message:d$.BASE_ERROR_CODES.FAILED_TO_CREATE_USER,details:t})}if(!t)throw new eC.APIError("UNPROCESSABLE_ENTITY",{message:d$.BASE_ERROR_CODES.FAILED_TO_CREATE_USER});if(await e.context.internalAdapter.linkAccount({userId:t.id,providerId:"credential",accountId:t.id,password:f},e),e.context.options.emailVerification?.sendOnSignUp||e.context.options.emailAndPassword.requireEmailVerification){let i=await p5(e.context.secret,t.email,void 0,e.context.options.emailVerification?.expiresIn),n=`${e.context.baseURL}/verify-email?token=${i}&callbackURL=${r.callbackURL||"/"}`,s=e.request?[{user:t,url:n,token:i},e.request]:[{user:t,url:n,token:i}];await e.context.options.emailVerification?.sendVerificationEmail?.(...s)}if(!1===e.context.options.emailAndPassword.autoSignIn||e.context.options.emailAndPassword.requireEmailVerification)return e.json({token:null,user:{id:t.id,email:t.email,name:t.name,image:t.image,emailVerified:t.emailVerified,createdAt:t.createdAt,updatedAt:t.updatedAt}});let h=await e.context.internalAdapter.createSession(t.id,e,!1===u);if(!h)throw new eC.APIError("BAD_REQUEST",{message:d$.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION});return await dQ(e,{session:h,user:t},!1===u),e.json({token:h.token,user:{id:t.id,email:t.email,name:t.name,image:t.image,emailVerified:t.emailVerified,createdAt:t.createdAt,updatedAt:t.updatedAt}})}),signInEmail:fa,forgetPassword:fp,resetPassword:fm,verifyEmail:p7,sendVerificationEmail:p9,changeEmail:fE,changePassword:fg,setPassword:f_,updateUser:fy(),deleteUser:fb,forgetPasswordCallback:fh,requestPasswordReset:fc,requestPasswordResetCallback:ff,listSessions:cf(),revokeSession:ch,revokeSessions:cm,revokeOtherSessions:cy,linkSocialAccount:fw,listUserAccounts:fT,deleteUserCallback:fv,unlinkAccount:fO,refreshToken:fI,getAccessToken:fR,accountInfo:fC},...r,ok:fA,error:fS},e),middlewares:i}}let fj=(e,t)=>{let{api:r,middlewares:i}=fU(e,t),n=new URL(e.baseURL).pathname;return(0,eC.createRouter)(r,{routerContext:e,openapi:{disabled:!0},basePath:n,routerMiddleware:[{path:"/**",middleware:p6},...i],async onRequest(t){let r=e.options.disabledPaths||[],i=new URL(t.url).pathname.replace(n,"");if(r.includes(i))return new Response("Not Found",{status:404});for(let r of e.options.plugins||[])if(r.onRequest){let i=await r.onRequest(t,e);if(i&&"response"in i)return i.response;if(i&&"request"in i){let t=await fM(i.request,e);if(t)return t;return i.request}}return fM(t,e)},async onResponse(t){for(let r of e.options.plugins||[])if(r.onResponse){let i=await r.onResponse(t,e);if(i)return i.response}return t},onError(r){if(r instanceof eC.APIError&&"FOUND"===r.status)return;if(t.onAPIError?.throw)throw r;if(t.onAPIError?.onError)return void t.onAPIError.onError(r,e);let i=t.logger?.level,n="error"===i||"warn"===i||"debug"===i?dj.logger:void 0;if(t.logger?.disabled!==!0){if(r&&"object"==typeof r&&"message"in r&&"string"==typeof r.message&&(r.message.includes("no column")||r.message.includes("column")||r.message.includes("relation")||r.message.includes("table")||r.message.includes("does not exist")))return void e.logger?.error(r.message);r instanceof eC.APIError?("INTERNAL_SERVER_ERROR"===r.status&&e.logger.error(r.status,r),n?.error(r.message)):e.logger?.error(r&&"object"==typeof r&&"name"in r?r.name:"",r)}}})};e.s(["a",()=>yh,"c",()=>yf,"e",()=>yg],15465);var fB=e.i(99373);e.s(["c",()=>yd,"g",()=>yl,"k",()=>yc],95483);var fz=e.i(19254),fK=e.i(61761),fY=e.i(1765);function fF(e,t){return fY.RawNode.createWithChildren([fY.RawNode.createWithSql(`${e} `),fK.IdentifierNode.create(t)])}var fq=e.i(90476),fV=e.i(59094),fG=e.i(26951);class fH{#_;#b=new fW;#v;#E;constructor(e){this.#_=(0,fV.freeze)({...e})}async init(){this.#v=(0,fV.isFunction)(this.#_.database)?await this.#_.database():this.#_.database,this.#E=new fZ(this.#v),this.#_.onCreateConnection&&await this.#_.onCreateConnection(this.#E)}async acquireConnection(){return await this.#b.lock(),this.#E}async beginTransaction(e){await e.executeQuery(fq.CompiledQuery.raw("begin"))}async commitTransaction(e){await e.executeQuery(fq.CompiledQuery.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(fq.CompiledQuery.raw("rollback"))}async savepoint(e,t,r){await e.executeQuery(r(fF("savepoint",t),(0,fG.createQueryId)()))}async rollbackToSavepoint(e,t,r){await e.executeQuery(r(fF("rollback to",t),(0,fG.createQueryId)()))}async releaseSavepoint(e,t,r){await e.executeQuery(r(fF("release",t),(0,fG.createQueryId)()))}async releaseConnection(){this.#b.unlock()}async destroy(){this.#v?.close()}}class fZ{#v;constructor(e){this.#v=e}executeQuery(e){let{sql:t,parameters:r}=e,i=this.#v.prepare(t);if(i.reader)return Promise.resolve({rows:i.all(r)});let{changes:n,lastInsertRowid:s}=i.run(r);return Promise.resolve({numAffectedRows:null!=n?BigInt(n):void 0,insertId:null!=s?BigInt(s):void 0,rows:[]})}async *streamQuery(e,t){let{sql:r,parameters:i,query:n}=e,s=this.#v.prepare(r);if(fz.SelectQueryNode.is(n))for(let e of s.iterate(i))yield{rows:[e]};else throw Error("Sqlite driver only supports streaming of select queries")}}class fW{#S;#A;async lock(){for(;this.#S;)await this.#S;this.#S=new Promise(e=>{this.#A=e})}unlock(){let e=this.#A;this.#S=void 0,this.#A=void 0,e?.()}}var fQ=e.i(36306);let fJ=/"/g;class fX extends fQ.DefaultQueryCompiler{visitOrAction(e){this.append("or "),this.append(e.action)}getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(fJ,'""')}visitDefaultInsertValue(e){this.append("null")}}var f0=e.i(77033),f1=e.i(13031);class f4{#v;constructor(e){this.#v=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){return await this.#T(e)}async getMetadata(e){return{tables:await this.getTables(e)}}#w(e,t){let r=e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select(["name","sql","type"]).orderBy("name");return t.withInternalKyselyTables||(r=r.where("name","!=",f0.DEFAULT_MIGRATION_TABLE).where("name","!=",f0.DEFAULT_MIGRATION_LOCK_TABLE)),r}async #T(e){let t=await this.#w(this.#v,e).execute(),r=await this.#v.with("table_list",t=>this.#w(t,e)).selectFrom(["table_list as tl",f1.sql`pragma_table_info(tl.name)`.as("p")]).select(["tl.name as table","p.cid","p.name","p.type","p.notnull","p.dflt_value","p.pk"]).orderBy("tl.name").orderBy("p.cid").execute(),i={};for(let e of r)i[e.table]??=[],i[e.table].push(e);return t.map(({name:e,sql:t,type:r})=>{let n=t?.split(/[\(\),]/)?.find(e=>e.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),s=i[e]??[];if(!n){let e=s.filter(e=>e.pk>0);1===e.length&&"integer"===e[0].type.toLowerCase()&&(n=e[0].name)}return{name:e,isView:"view"===r,columns:s.map(e=>({name:e.name,dataType:e.type,isNullable:!e.notnull,isAutoIncrementing:e.name===n,hasDefaultValue:null!=e.dflt_value,comment:void 0}))}})}}class f2{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}class f6 extends f2{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,t){}async releaseMigrationLock(e,t){}}class f3{#_;constructor(e){this.#_=(0,fV.freeze)({...e})}createDriver(){return new fH(this.#_)}createQueryCompiler(){return new fX}createAdapter(){return new f6}createIntrospector(e){return new f4(e)}}function f5(e,t){var r;if(r=e,(0,fV.isObject)(r)&&(0,fV.isString)(r.stack)&&t.stack){let r=t.stack.split("\n").slice(1).join("\n");e.stack+=`
${r}`}return e}let f8=Symbol();class f9{#_;#O=new WeakMap;#R;constructor(e){this.#_=(0,fV.freeze)({...e})}async init(){this.#R=(0,fV.isFunction)(this.#_.pool)?await this.#_.pool():this.#_.pool}async acquireConnection(){let e=await this.#I(),t=this.#O.get(e);return!t&&(t=new f7(e),this.#O.set(e,t),this.#_?.onCreateConnection&&await this.#_.onCreateConnection(t)),this.#_?.onReserveConnection&&await this.#_.onReserveConnection(t),t}async #I(){return new Promise((e,t)=>{this.#R.getConnection(async(r,i)=>{r?t(r):e(i)})})}async beginTransaction(e,t){if(t.isolationLevel||t.accessMode){let r=[];t.isolationLevel&&r.push(`isolation level ${t.isolationLevel}`),t.accessMode&&r.push(t.accessMode);let i=`set transaction ${r.join(", ")}`;await e.executeQuery(fq.CompiledQuery.raw(i))}await e.executeQuery(fq.CompiledQuery.raw("begin"))}async commitTransaction(e){await e.executeQuery(fq.CompiledQuery.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(fq.CompiledQuery.raw("rollback"))}async savepoint(e,t,r){await e.executeQuery(r(fF("savepoint",t),(0,fG.createQueryId)()))}async rollbackToSavepoint(e,t,r){await e.executeQuery(r(fF("rollback to",t),(0,fG.createQueryId)()))}async releaseSavepoint(e,t,r){await e.executeQuery(r(fF("release savepoint",t),(0,fG.createQueryId)()))}async releaseConnection(e){e[f8]()}async destroy(){return new Promise((e,t)=>{this.#R.end(r=>{r?t(r):e()})})}}class f7{#C;constructor(e){this.#C=e}async executeQuery(e){try{let t=await this.#N(e);if((0,fV.isObject)(t)&&"insertId"in t&&"affectedRows"in t){let{insertId:e,affectedRows:r,changedRows:i}=t;return{insertId:null!=e&&"0"!==e.toString()?BigInt(e):void 0,numAffectedRows:null!=r?BigInt(r):void 0,numChangedRows:null!=i?BigInt(i):void 0,rows:[]}}if(Array.isArray(t))return{rows:t};return{rows:[]}}catch(e){throw f5(e,Error())}}#N(e){return new Promise((t,r)=>{this.#C.query(e.sql,e.parameters,(e,i)=>{e?r(e):t(i)})})}async *streamQuery(e,t){let r=this.#C.query(e.sql,e.parameters).stream({objectMode:!0});try{for await(let e of r)yield{rows:[e]}}catch(e){if(e&&"object"==typeof e&&"code"in e&&"ERR_STREAM_PREMATURE_CLOSE"===e.code)return;throw e}}[f8](){this.#C.release()}}var he=fQ;let ht=/`/g;class hr extends he.DefaultQueryCompiler{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(e){return e.replace(ht,"``")}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.using&&(this.append(" using "),this.visitNode(e.using)),e.table&&(this.append(" on "),this.visitNode(e.table)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.where&&(this.append(" "),this.visitNode(e.where))}}class hi{#v;constructor(e){this.#v=e}async getSchemas(){return(await this.#v.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(e=>({name:e.SCHEMA_NAME}))}async getTables(e={withInternalKyselyTables:!1}){let t=this.#v.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",e=>e.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA","columns.COLUMN_COMMENT"]).where("columns.TABLE_SCHEMA","=",f1.sql`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();e.withInternalKyselyTables||(t=t.where("columns.TABLE_NAME","!=",f0.DEFAULT_MIGRATION_TABLE).where("columns.TABLE_NAME","!=",f0.DEFAULT_MIGRATION_LOCK_TABLE));let r=await t.execute();return this.#P(r)}async getMetadata(e){return{tables:await this.getTables(e)}}#P(e){return e.reduce((e,t)=>{let r=e.find(e=>e.name===t.TABLE_NAME);return r||(r=(0,fV.freeze)({name:t.TABLE_NAME,isView:"VIEW"===t.TABLE_TYPE,schema:t.TABLE_SCHEMA,columns:[]}),e.push(r)),r.columns.push((0,fV.freeze)({name:t.COLUMN_NAME,dataType:t.DATA_TYPE,isNullable:"YES"===t.IS_NULLABLE,isAutoIncrementing:t.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:null!==t.COLUMN_DEFAULT,comment:""===t.COLUMN_COMMENT?void 0:t.COLUMN_COMMENT})),e},[])}}let hn="ea586330-2c93-47c8-908d-981d9d270f9d";class hs extends f2{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(e,t){await f1.sql`select get_lock(${f1.sql.lit(hn)}, ${f1.sql.lit(3600)})`.execute(e)}async releaseMigrationLock(e,t){await f1.sql`select release_lock(${f1.sql.lit(hn)})`.execute(e)}}class ha{#_;constructor(e){this.#_=e}createDriver(){return new f9(this.#_)}createQueryCompiler(){return new hr}createAdapter(){return new hs}createIntrospector(e){return new hi(e)}}let ho=Symbol();class hu{#_;#O=new WeakMap;#R;constructor(e){this.#_=(0,fV.freeze)({...e})}async init(){this.#R=(0,fV.isFunction)(this.#_.pool)?await this.#_.pool():this.#_.pool}async acquireConnection(){let e=await this.#R.connect(),t=this.#O.get(e);return!t&&(t=new hl(e,{cursor:this.#_.cursor??null}),this.#O.set(e,t),this.#_.onCreateConnection&&await this.#_.onCreateConnection(t)),this.#_.onReserveConnection&&await this.#_.onReserveConnection(t),t}async beginTransaction(e,t){if(t.isolationLevel||t.accessMode){let r="start transaction";t.isolationLevel&&(r+=` isolation level ${t.isolationLevel}`),t.accessMode&&(r+=` ${t.accessMode}`),await e.executeQuery(fq.CompiledQuery.raw(r))}else await e.executeQuery(fq.CompiledQuery.raw("begin"))}async commitTransaction(e){await e.executeQuery(fq.CompiledQuery.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(fq.CompiledQuery.raw("rollback"))}async savepoint(e,t,r){await e.executeQuery(r(fF("savepoint",t),(0,fG.createQueryId)()))}async rollbackToSavepoint(e,t,r){await e.executeQuery(r(fF("rollback to",t),(0,fG.createQueryId)()))}async releaseSavepoint(e,t,r){await e.executeQuery(r(fF("release",t),(0,fG.createQueryId)()))}async releaseConnection(e){e[ho]()}async destroy(){if(this.#R){let e=this.#R;this.#R=void 0,await e.end()}}}class hl{#D;#x;constructor(e,t){this.#D=e,this.#x=t}async executeQuery(e){try{let{command:t,rowCount:r,rows:i}=await this.#D.query(e.sql,[...e.parameters]);return{numAffectedRows:"INSERT"===t||"UPDATE"===t||"DELETE"===t||"MERGE"===t?BigInt(r):void 0,rows:i??[]}}catch(e){throw f5(e,Error())}}async *streamQuery(e,t){if(!this.#x.cursor)throw Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(t)||t<=0)throw Error("chunkSize must be a positive integer");let r=this.#D.query(new this.#x.cursor(e.sql,e.parameters.slice()));try{for(;;){let e=await r.read(t);if(0===e.length)break;yield{rows:e}}}finally{await r.close()}}[ho](){this.#D.release()}}class hd{#v;constructor(e){this.#v=e}async getSchemas(){return(await this.#v.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(e=>({name:e.nspname}))}async getTables(e={withInternalKyselyTables:!1}){let t=this.#v.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",f1.sql`col_description(a.attrelid, a.attnum)`.as("column_description"),f1.sql`pg_get_serial_sequence(quote_ident(ns.nspname) || '.' || quote_ident(c.relname), a.attname)`.as("auto_incrementing")]).where("c.relkind","in",["r","v","p"]).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("ns.nspname","!=","crdb_internal").where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();e.withInternalKyselyTables||(t=t.where("c.relname","!=",f0.DEFAULT_MIGRATION_TABLE).where("c.relname","!=",f0.DEFAULT_MIGRATION_LOCK_TABLE));let r=await t.execute();return this.#P(r)}async getMetadata(e){return{tables:await this.getTables(e)}}#P(e){return e.reduce((e,t)=>{let r=e.find(e=>e.name===t.table&&e.schema===t.schema);return r||(r=(0,fV.freeze)({name:t.table,isView:"v"===t.table_type,schema:t.schema,columns:[]}),e.push(r)),r.columns.push((0,fV.freeze)({name:t.column,dataType:t.type,dataTypeSchema:t.type_schema,isNullable:!t.not_null,isAutoIncrementing:null!==t.auto_incrementing,hasDefaultValue:t.has_default,comment:t.column_description??void 0})),e},[])}}var hc=fQ;let hp=/"/g;class hf extends hc.DefaultQueryCompiler{sanitizeIdentifier(e){return e.replace(hp,'""')}}let hh=BigInt("3853314791062309107");class hm extends f2{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e,t){await f1.sql`select pg_advisory_xact_lock(${f1.sql.lit(hh)})`.execute(e)}async releaseMigrationLock(e,t){}}class hy{#_;constructor(e){this.#_=e}createDriver(){return new hu(this.#_)}createQueryCompiler(){return new hf}createAdapter(){return new hm}createIntrospector(e){return new hd(e)}}class hg extends f2{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock(e){await f1.sql`exec sp_getapplock @DbPrincipal = ${f1.sql.lit("dbo")}, @Resource = ${f1.sql.lit(f0.DEFAULT_MIGRATION_TABLE)}, @LockMode = ${f1.sql.lit("Exclusive")}`.execute(e)}async releaseMigrationLock(){}}var h_=e.i(18728),hb=e.i(86474);let hv=Symbol(),hE=Symbol(),hS=Symbol();class hA{#_;#R;constructor(e){this.#_=(0,fV.freeze)({...e});let{tarn:t,tedious:r,validateConnections:i}=this.#_,{validateConnections:n,...s}=t.options;this.#R=new t.Pool({...s,create:async()=>{let e=await r.connectionFactory();return await new hT(e,r).connect()},destroy:async e=>{await e[hE]()},validate:!1===i||!1===n?void 0:e=>e[hS]()})}async init(){}async acquireConnection(){return await this.#R.acquire().promise}async beginTransaction(e,t){await e.beginTransaction(t)}async commitTransaction(e){await e.commitTransaction()}async rollbackTransaction(e){await e.rollbackTransaction()}async savepoint(e,t){await e.savepoint(t)}async rollbackToSavepoint(e,t){await e.rollbackTransaction(t)}async releaseConnection(e){(this.#_.resetConnectionsOnRelease||this.#_.tedious.resetConnectionOnRelease)&&await e[hv](),this.#R.release(e)}async destroy(){await this.#R.destroy()}}class hT{#E;#L;#k;constructor(e,t){this.#E=e,this.#L=!1,this.#k=t}async beginTransaction(e){let{isolationLevel:t}=e;await new Promise((e,r)=>this.#E.beginTransaction(t=>{t?r(t):e(void 0)},t?(0,h_.randomString)(8):void 0,t?this.#M(t):void 0))}async commitTransaction(){await new Promise((e,t)=>this.#E.commitTransaction(r=>{r?t(r):e(void 0)}))}async connect(){let{promise:e,reject:t,resolve:r}=new hb.Deferred;function i(){t(Error("The connection ended without ever completing the connection"))}return this.#E.connect(e=>{if(e)return t(e);r()}),this.#E.on("error",e=>{e instanceof Error&&"code"in e&&"ESOCKET"===e.code&&(this.#L=!0),console.error(e),t(e)}),this.#E.once("end",i),await e,this.#E.off("end",i),this}async executeQuery(e){try{let t=new hb.Deferred,r=new hw({compiledQuery:e,tedious:this.#k,onDone:t});this.#E.execSql(r.request);let{rowCount:i,rows:n}=await t.promise;return{numAffectedRows:void 0!==i?BigInt(i):void 0,rows:n}}catch(e){throw f5(e,Error())}}async rollbackTransaction(e){await new Promise((t,r)=>this.#E.rollbackTransaction(e=>{e?r(e):t(void 0)},e))}async savepoint(e){await new Promise((t,r)=>this.#E.saveTransaction(e=>{e?r(e):t(void 0)},e))}async *streamQuery(e,t){if(!Number.isInteger(t)||t<=0)throw Error("chunkSize must be a positive integer");let r=new hw({compiledQuery:e,streamChunkSize:t,tedious:this.#k});this.#E.execSql(r.request);try{for(;;){let e=await r.readChunk();if(0===e.length||(yield{rows:e},e.length<t))break}}finally{await this.#$(r)}}#M(e){let{ISOLATION_LEVEL:t}=this.#k,r={"read committed":t.READ_COMMITTED,"read uncommitted":t.READ_UNCOMMITTED,"repeatable read":t.REPEATABLE_READ,serializable:t.SERIALIZABLE,snapshot:t.SNAPSHOT}[e];if(void 0===r)throw Error(`Unknown isolation level: ${e}`);return r}#$(e){return new Promise(t=>{e.request.once("requestCompleted",t),this.#E.cancel()||(e.request.off("requestCompleted",t),t())})}[hE](){return"closed"in this.#E&&this.#E.closed?Promise.resolve():new Promise(e=>{this.#E.once("end",e),this.#E.close()})}async [hv](){await new Promise((e,t)=>{this.#E.reset(r=>{if(r)return t(r);e()})})}async [hS](){if(this.#L||this.#U())return!1;try{let e=new hb.Deferred,t=new hw({compiledQuery:fq.CompiledQuery.raw("select 1"),onDone:e,tedious:this.#k});return this.#E.execSql(t.request),await e.promise,!0}catch{return!1}}#U(){return"closed"in this.#E&&!!this.#E.closed}}class hw{#j;#B;#z;#K;#k;#Y;constructor(e){let{compiledQuery:t,onDone:r,streamChunkSize:i,tedious:n}=e;if(this.#B=[],this.#z=i,this.#K={},this.#k=n,r){let e="onDone";this.#K[e]=(t,i)=>{if("chunkReady"!==t){if(delete this.#K[e],"error"===t)return r.reject(i);r.resolve({rowCount:this.#Y,rows:this.#B})}}}this.#j=new this.#k.Request(t.sql,(e,t)=>{if(e)return Object.values(this.#K).forEach(t=>t("error",e instanceof AggregateError?e.errors:e));this.#Y=t}),this.#F(t.parameters),this.#q()}get request(){return this.#j}readChunk(){let e=this.readChunk.name;return new Promise((t,r)=>{this.#K[e]=(i,n)=>{if(delete this.#K[e],"error"===i)return r(n);t(this.#B.splice(0,this.#z))},this.#j.resume()})}#F(e){for(let t=0;t<e.length;t++){let r=e[t];this.#j.addParameter(String(t+1),this.#V(r),r)}}#q(){let e=this.#z?()=>{this.#z<=this.#B.length&&(this.#j.pause(),Object.values(this.#K).forEach(e=>e("chunkReady")))}:()=>{},t=t=>{let r={};for(let e of t)r[e.metadata.colName]=e.value;this.#B.push(r),e()};this.#j.on("row",t),this.#j.once("requestCompleted",()=>{Object.values(this.#K).forEach(e=>e("completed")),this.#j.off("row",t)})}#V(e){if((0,fV.isNull)(e)||(0,fV.isUndefined)(e)||(0,fV.isString)(e))return this.#k.TYPES.NVarChar;if((0,fV.isBigInt)(e)||(0,fV.isNumber)(e)&&e%1==0)if(e<-0x80000000||e>0x7fffffff)return this.#k.TYPES.BigInt;else return this.#k.TYPES.Int;return(0,fV.isNumber)(e)?this.#k.TYPES.Float:(0,fV.isBoolean)(e)?this.#k.TYPES.Bit:(0,fV.isDate)(e)?this.#k.TYPES.DateTime:(0,fV.isBuffer)(e)?this.#k.TYPES.VarBinary:this.#k.TYPES.NVarChar}}class hO{#v;constructor(e){this.#v=e}async getSchemas(){return await this.#v.selectFrom("sys.schemas").select("name").execute()}async getTables(e={withInternalKyselyTables:!1}){let t=await this.#v.selectFrom("sys.tables as tables").leftJoin("sys.schemas as table_schemas","table_schemas.schema_id","tables.schema_id").innerJoin("sys.columns as columns","columns.object_id","tables.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",e=>e.onRef("comments.major_id","=","tables.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).$if(!e.withInternalKyselyTables,e=>e.where("tables.name","!=",f0.DEFAULT_MIGRATION_TABLE).where("tables.name","!=",f0.DEFAULT_MIGRATION_LOCK_TABLE)).select(["tables.name as table_name",e=>e.ref("tables.type").$castTo().as("table_type"),"table_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"]).unionAll(this.#v.selectFrom("sys.views as views").leftJoin("sys.schemas as view_schemas","view_schemas.schema_id","views.schema_id").innerJoin("sys.columns as columns","columns.object_id","views.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",e=>e.onRef("comments.major_id","=","views.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).select(["views.name as table_name","views.type as table_type","view_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"])).orderBy("table_schema_name").orderBy("table_name").orderBy("column_name").execute(),r={};for(let e of t){let t=`${e.table_schema_name}.${e.table_name}`;(r[t]=r[t]||(0,fV.freeze)({columns:[],isView:"V "===e.table_type,name:e.table_name,schema:e.table_schema_name??void 0})).columns.push((0,fV.freeze)({dataType:e.type_name,dataTypeSchema:e.type_schema_name??void 0,hasDefaultValue:e.column_default_object_id>0||"NOT_APPLICABLE"!==e.column_generated_always_type||e.column_is_identity||e.column_is_computed||e.column_is_rowguidcol,isAutoIncrementing:e.column_is_identity,isNullable:e.column_is_nullable&&e.type_is_nullable,name:e.column_name,comment:e.column_comment??void 0}))}return Object.values(r)}async getMetadata(e){return{tables:await this.getTables(e)}}}var hR=fQ;let hI=/^[a-z0-9_]$/i;class hC extends hR.DefaultQueryCompiler{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset(e){super.visitOffset(e),this.append(" rows")}compileColumnAlterations(e){let t={};for(let r of e)t[r.kind]||(t[r.kind]=[]),t[r.kind].push(r);let r=!0;t.AddColumnNode&&(this.append("add "),this.compileList(t.AddColumnNode),r=!1),t.AlterColumnNode&&(r||this.append(", "),this.compileList(t.AlterColumnNode)),t.DropColumnNode&&(r||this.append(", "),this.append("drop column "),this.compileList(t.DropColumnNode)),t.ModifyColumnNode&&(r||this.append(", "),this.compileList(t.ModifyColumnNode)),t.RenameColumnNode&&(r||this.append(", "),this.compileList(t.RenameColumnNode))}visitAddColumn(e){this.visitNode(e.column)}visitDropColumn(e){this.visitNode(e.column)}visitMergeQuery(e){super.visitMergeQuery(e),this.append(";")}visitCollate(e){this.append("collate ");let{name:t}=e.collation;for(let e of t)if(!hI.test(e))throw Error(`Invalid collation: ${t}`);this.append(t)}announcesNewColumnDataType(){return!1}}class hN{#_;constructor(e){this.#_=e}createDriver(){return new hA(this.#_)}createQueryCompiler(){return new hC}createAdapter(){return new hg}createIntrospector(e){return new hO(e)}}let hP=(0,fV.freeze)({is:e=>"AlterTableNode"===e.kind,create:e=>(0,fV.freeze)({kind:"AlterTableNode",table:e}),cloneWithTableProps:(e,t)=>(0,fV.freeze)({...e,...t}),cloneWithColumnAlteration:(e,t)=>(0,fV.freeze)({...e,columnAlterations:e.columnAlterations?[...e.columnAlterations,t]:[t]})}),hD=(0,fV.freeze)({is:e=>"CreateIndexNode"===e.kind,create:e=>(0,fV.freeze)({kind:"CreateIndexNode",name:fK.IdentifierNode.create(e)}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t}),cloneWithColumns:(e,t)=>(0,fV.freeze)({...e,columns:[...e.columns||[],...t]})}),hx=(0,fV.freeze)({is:e=>"CreateSchemaNode"===e.kind,create:(e,t)=>(0,fV.freeze)({kind:"CreateSchemaNode",schema:fK.IdentifierNode.create(e),...t}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t})});var hL=e.i(69972),hk=e.i(66586);let hM=(0,fV.freeze)({is:e=>"DropIndexNode"===e.kind,create:(e,t)=>(0,fV.freeze)({kind:"DropIndexNode",name:hk.SchemableIdentifierNode.create(e),...t}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t})}),h$=(0,fV.freeze)({is:e=>"DropSchemaNode"===e.kind,create:(e,t)=>(0,fV.freeze)({kind:"DropSchemaNode",schema:fK.IdentifierNode.create(e),...t}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t})}),hU=(0,fV.freeze)({is:e=>"DropTableNode"===e.kind,create:(e,t)=>(0,fV.freeze)({kind:"DropTableNode",table:e,...t}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t})});var hj=e.i(92465);let hB=(0,fV.freeze)({is:e=>"AddColumnNode"===e.kind,create:e=>(0,fV.freeze)({kind:"AddColumnNode",column:e})});var hz=e.i(81196);let hK=(0,fV.freeze)({is:e=>"ColumnDefinitionNode"===e.kind,create:(e,t)=>(0,fV.freeze)({kind:"ColumnDefinitionNode",column:hz.ColumnNode.create(e),dataType:t}),cloneWithFrontModifier:(e,t)=>(0,fV.freeze)({...e,frontModifiers:e.frontModifiers?(0,fV.freeze)([...e.frontModifiers,t]):[t]}),cloneWithEndModifier:(e,t)=>(0,fV.freeze)({...e,endModifiers:e.endModifiers?(0,fV.freeze)([...e.endModifiers,t]):[t]}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t})}),hY=(0,fV.freeze)({is:e=>"DropColumnNode"===e.kind,create:e=>(0,fV.freeze)({kind:"DropColumnNode",column:hz.ColumnNode.create(e)})}),hF=(0,fV.freeze)({is:e=>"RenameColumnNode"===e.kind,create:(e,t)=>(0,fV.freeze)({kind:"RenameColumnNode",column:hz.ColumnNode.create(e),renameTo:hz.ColumnNode.create(t)})}),hq=(0,fV.freeze)({is:e=>"CheckConstraintNode"===e.kind,create:(e,t)=>(0,fV.freeze)({kind:"CheckConstraintNode",expression:e,name:t?fK.IdentifierNode.create(t):void 0})}),hV=["no action","restrict","cascade","set null","set default"],hG=(0,fV.freeze)({is:e=>"ReferencesNode"===e.kind,create:(e,t)=>(0,fV.freeze)({kind:"ReferencesNode",table:e,columns:(0,fV.freeze)([...t])}),cloneWithOnDelete:(e,t)=>(0,fV.freeze)({...e,onDelete:t}),cloneWithOnUpdate:(e,t)=>(0,fV.freeze)({...e,onUpdate:t})});var hH=e.i(44550),hZ=e.i(58390),hW=e.i(44473),hQ=e.i(4196);function hJ(e){return(0,hW.isOperationNodeSource)(e)?e.toOperationNode():hQ.ValueNode.createImmediate(e)}let hX=(0,fV.freeze)({is:e=>"GeneratedNode"===e.kind,create:e=>(0,fV.freeze)({kind:"GeneratedNode",...e}),createWithExpression:e=>(0,fV.freeze)({kind:"GeneratedNode",always:!0,expression:e}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t})}),h0=(0,fV.freeze)({is:e=>"DefaultValueNode"===e.kind,create:e=>(0,fV.freeze)({kind:"DefaultValueNode",defaultValue:e})});function h1(e){if(hV.includes(e))return e;throw Error(`invalid OnModifyForeignAction ${e}`)}class h4{#G;constructor(e){this.#G=e}autoIncrement(){return new h4(hK.cloneWith(this.#G,{autoIncrement:!0}))}identity(){return new h4(hK.cloneWith(this.#G,{identity:!0}))}primaryKey(){return new h4(hK.cloneWith(this.#G,{primaryKey:!0}))}references(e){let t=(0,hZ.parseStringReference)(e);if(!t.table||hH.SelectAllNode.is(t.column))throw Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new h4(hK.cloneWith(this.#G,{references:hG.create(t.table,[t.column])}))}onDelete(e){if(!this.#G.references)throw Error("on delete constraint can only be added for foreign keys");return new h4(hK.cloneWith(this.#G,{references:hG.cloneWithOnDelete(this.#G.references,h1(e))}))}onUpdate(e){if(!this.#G.references)throw Error("on update constraint can only be added for foreign keys");return new h4(hK.cloneWith(this.#G,{references:hG.cloneWithOnUpdate(this.#G.references,h1(e))}))}unique(){return new h4(hK.cloneWith(this.#G,{unique:!0}))}notNull(){return new h4(hK.cloneWith(this.#G,{notNull:!0}))}unsigned(){return new h4(hK.cloneWith(this.#G,{unsigned:!0}))}defaultTo(e){return new h4(hK.cloneWith(this.#G,{defaultTo:h0.create(hJ(e))}))}check(e){return new h4(hK.cloneWith(this.#G,{check:hq.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new h4(hK.cloneWith(this.#G,{generated:hX.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new h4(hK.cloneWith(this.#G,{generated:hX.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new h4(hK.cloneWith(this.#G,{generated:hX.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#G.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new h4(hK.cloneWith(this.#G,{generated:hX.cloneWith(this.#G.generated,{stored:!0})}))}modifyFront(e){return new h4(hK.cloneWithFrontModifier(this.#G,e.toOperationNode()))}nullsNotDistinct(){return new h4(hK.cloneWith(this.#G,{nullsNotDistinct:!0}))}ifNotExists(){return new h4(hK.cloneWith(this.#G,{ifNotExists:!0}))}modifyEnd(e){return new h4(hK.cloneWithEndModifier(this.#G,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#G}}let h2=(0,fV.freeze)({is:e=>"ModifyColumnNode"===e.kind,create:e=>(0,fV.freeze)({kind:"ModifyColumnNode",column:e})});var h6=e.i(75670);let h3=(0,fV.freeze)({is:e=>"ForeignKeyConstraintNode"===e.kind,create:(e,t,r,i)=>(0,fV.freeze)({kind:"ForeignKeyConstraintNode",columns:e,references:hG.create(t,r),name:i?fK.IdentifierNode.create(i):void 0}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t})});class h5{#G;constructor(e){this.#G=e}onDelete(e){return new h5(h3.cloneWith(this.#G,{onDelete:h1(e)}))}onUpdate(e){return new h5(h3.cloneWith(this.#G,{onUpdate:h1(e)}))}deferrable(){return new h5(h3.cloneWith(this.#G,{deferrable:!0}))}notDeferrable(){return new h5(h3.cloneWith(this.#G,{deferrable:!1}))}initiallyDeferred(){return new h5(h3.cloneWith(this.#G,{initiallyDeferred:!0}))}initiallyImmediate(){return new h5(h3.cloneWith(this.#G,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#G}}let h8=(0,fV.freeze)({is:e=>"AddConstraintNode"===e.kind,create:e=>(0,fV.freeze)({kind:"AddConstraintNode",constraint:e})}),h9=(0,fV.freeze)({is:e=>"UniqueConstraintNode"===e.kind,create:(e,t,r)=>(0,fV.freeze)({kind:"UniqueConstraintNode",columns:(0,fV.freeze)(e.map(hz.ColumnNode.create)),name:t?fK.IdentifierNode.create(t):void 0,nullsNotDistinct:r}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t})}),h7=(0,fV.freeze)({is:e=>"DropConstraintNode"===e.kind,create:e=>(0,fV.freeze)({kind:"DropConstraintNode",constraintName:fK.IdentifierNode.create(e)}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t})}),me=(0,fV.freeze)({is:e=>"AlterColumnNode"===e.kind,create:(e,t,r)=>(0,fV.freeze)({kind:"AlterColumnNode",column:hz.ColumnNode.create(e),[t]:r})});class mt{#H;constructor(e){this.#H=e}setDataType(e){return new mr(me.create(this.#H,"dataType",(0,h6.parseDataTypeExpression)(e)))}setDefault(e){return new mr(me.create(this.#H,"setDefault",hJ(e)))}dropDefault(){return new mr(me.create(this.#H,"dropDefault",!0))}setNotNull(){return new mr(me.create(this.#H,"setNotNull",!0))}dropNotNull(){return new mr(me.create(this.#H,"dropNotNull",!0))}$call(e){return e(this)}}class mr{#Z;constructor(e){this.#Z=e}toOperationNode(){return this.#Z}}class mi{#W;constructor(e){this.#W=(0,fV.freeze)(e)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}class mn{#W;constructor(e){this.#W=(0,fV.freeze)(e)}onDelete(e){return new mn({...this.#W,constraintBuilder:this.#W.constraintBuilder.onDelete(e)})}onUpdate(e){return new mn({...this.#W,constraintBuilder:this.#W.constraintBuilder.onUpdate(e)})}deferrable(){return new mn({...this.#W,constraintBuilder:this.#W.constraintBuilder.deferrable()})}notDeferrable(){return new mn({...this.#W,constraintBuilder:this.#W.constraintBuilder.notDeferrable()})}initiallyDeferred(){return new mn({...this.#W,constraintBuilder:this.#W.constraintBuilder.initiallyDeferred()})}initiallyImmediate(){return new mn({...this.#W,constraintBuilder:this.#W.constraintBuilder.initiallyImmediate()})}$call(e){return e(this)}toOperationNode(){return this.#W.executor.transformQuery(hP.cloneWithTableProps(this.#W.node,{addConstraint:h8.create(this.#W.constraintBuilder.toOperationNode())}),this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}class ms{#W;constructor(e){this.#W=(0,fV.freeze)(e)}ifExists(){return new ms({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{dropConstraint:h7.cloneWith(this.#W.node.dropConstraint,{ifExists:!0})})})}cascade(){return new ms({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{dropConstraint:h7.cloneWith(this.#W.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new ms({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{dropConstraint:h7.cloneWith(this.#W.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}let ma=(0,fV.freeze)({is:e=>"PrimaryKeyConstraintNode"===e.kind,create:(e,t)=>(0,fV.freeze)({kind:"PrimaryKeyConstraintNode",columns:(0,fV.freeze)(e.map(hz.ColumnNode.create)),name:t?fK.IdentifierNode.create(t):void 0}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t})}),mo=(0,fV.freeze)({is:e=>"AddIndexNode"===e.kind,create:e=>(0,fV.freeze)({kind:"AddIndexNode",name:fK.IdentifierNode.create(e)}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t}),cloneWithColumns:(e,t)=>(0,fV.freeze)({...e,columns:[...e.columns||[],...t]})});class mu{#W;constructor(e){this.#W=(0,fV.freeze)(e)}unique(){return new mu({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{addIndex:mo.cloneWith(this.#W.node.addIndex,{unique:!0})})})}column(e){return new mu({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{addIndex:mo.cloneWithColumns(this.#W.node.addIndex,[(0,hZ.parseOrderedColumnName)(e)])})})}columns(e){return new mu({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{addIndex:mo.cloneWithColumns(this.#W.node.addIndex,e.map(hZ.parseOrderedColumnName))})})}expression(e){return new mu({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{addIndex:mo.cloneWithColumns(this.#W.node.addIndex,[e.toOperationNode()])})})}using(e){return new mu({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{addIndex:mo.cloneWith(this.#W.node.addIndex,{using:fY.RawNode.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}class ml{#G;constructor(e){this.#G=e}nullsNotDistinct(){return new ml(h9.cloneWith(this.#G,{nullsNotDistinct:!0}))}deferrable(){return new ml(h9.cloneWith(this.#G,{deferrable:!0}))}notDeferrable(){return new ml(h9.cloneWith(this.#G,{deferrable:!1}))}initiallyDeferred(){return new ml(h9.cloneWith(this.#G,{initiallyDeferred:!0}))}initiallyImmediate(){return new ml(h9.cloneWith(this.#G,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#G}}class md{#G;constructor(e){this.#G=e}deferrable(){return new md(ma.cloneWith(this.#G,{deferrable:!0}))}notDeferrable(){return new md(ma.cloneWith(this.#G,{deferrable:!1}))}initiallyDeferred(){return new md(ma.cloneWith(this.#G,{initiallyDeferred:!0}))}initiallyImmediate(){return new md(ma.cloneWith(this.#G,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#G}}class mc{#G;constructor(e){this.#G=e}$call(e){return e(this)}toOperationNode(){return this.#G}}let mp=(0,fV.freeze)({is:e=>"RenameConstraintNode"===e.kind,create:(e,t)=>(0,fV.freeze)({kind:"RenameConstraintNode",oldName:fK.IdentifierNode.create(e),newName:fK.IdentifierNode.create(t)})});class mf{#W;constructor(e){this.#W=(0,fV.freeze)(e)}renameTo(e){return new mi({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{renameTo:(0,hj.parseTable)(e)})})}setSchema(e){return new mi({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{setSchema:fK.IdentifierNode.create(e)})})}alterColumn(e,t){let r=t(new mt(e));return new mh({...this.#W,node:hP.cloneWithColumnAlteration(this.#W.node,r.toOperationNode())})}dropColumn(e){return new mh({...this.#W,node:hP.cloneWithColumnAlteration(this.#W.node,hY.create(e))})}renameColumn(e,t){return new mh({...this.#W,node:hP.cloneWithColumnAlteration(this.#W.node,hF.create(e,t))})}addColumn(e,t,r=fV.noop){let i=r(new h4(hK.create(e,(0,h6.parseDataTypeExpression)(t))));return new mh({...this.#W,node:hP.cloneWithColumnAlteration(this.#W.node,hB.create(i.toOperationNode()))})}modifyColumn(e,t,r=fV.noop){let i=r(new h4(hK.create(e,(0,h6.parseDataTypeExpression)(t))));return new mh({...this.#W,node:hP.cloneWithColumnAlteration(this.#W.node,h2.create(i.toOperationNode()))})}addUniqueConstraint(e,t,r=fV.noop){let i=r(new ml(h9.create(t,e)));return new mi({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{addConstraint:h8.create(i.toOperationNode())})})}addCheckConstraint(e,t,r=fV.noop){let i=r(new mc(hq.create(t.toOperationNode(),e)));return new mi({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{addConstraint:h8.create(i.toOperationNode())})})}addForeignKeyConstraint(e,t,r,i,n=fV.noop){let s=n(new h5(h3.create(t.map(hz.ColumnNode.create),(0,hj.parseTable)(r),i.map(hz.ColumnNode.create),e)));return new mn({...this.#W,constraintBuilder:s})}addPrimaryKeyConstraint(e,t,r=fV.noop){let i=r(new md(ma.create(t,e)));return new mi({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{addConstraint:h8.create(i.toOperationNode())})})}dropConstraint(e){return new ms({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{dropConstraint:h7.create(e)})})}renameConstraint(e,t){return new ms({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{renameConstraint:mp.create(e,t)})})}addIndex(e){return new mu({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{addIndex:mo.create(e)})})}dropIndex(e){return new mi({...this.#W,node:hP.cloneWithTableProps(this.#W.node,{dropIndex:hM.create(e)})})}$call(e){return e(this)}}class mh{#W;constructor(e){this.#W=(0,fV.freeze)(e)}alterColumn(e,t){let r=t(new mt(e));return new mh({...this.#W,node:hP.cloneWithColumnAlteration(this.#W.node,r.toOperationNode())})}dropColumn(e){return new mh({...this.#W,node:hP.cloneWithColumnAlteration(this.#W.node,hY.create(e))})}renameColumn(e,t){return new mh({...this.#W,node:hP.cloneWithColumnAlteration(this.#W.node,hF.create(e,t))})}addColumn(e,t,r=fV.noop){let i=r(new h4(hK.create(e,(0,h6.parseDataTypeExpression)(t))));return new mh({...this.#W,node:hP.cloneWithColumnAlteration(this.#W.node,hB.create(i.toOperationNode()))})}modifyColumn(e,t,r=fV.noop){let i=r(new h4(hK.create(e,(0,h6.parseDataTypeExpression)(t))));return new mh({...this.#W,node:hP.cloneWithColumnAlteration(this.#W.node,h2.create(i.toOperationNode()))})}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}var mm=e.i(54996),my=e.i(92868),mg=e.i(36300),m_=e.i(93846);class mb extends mg.OperationNodeTransformer{transformPrimitiveValueList(e){return m_.ValueListNode.create(e.values.map(hQ.ValueNode.createImmediate))}transformValue(e){return hQ.ValueNode.createImmediate(e.value)}}class mv{#W;constructor(e){this.#W=(0,fV.freeze)(e)}ifNotExists(){return new mv({...this.#W,node:hD.cloneWith(this.#W.node,{ifNotExists:!0})})}unique(){return new mv({...this.#W,node:hD.cloneWith(this.#W.node,{unique:!0})})}nullsNotDistinct(){return new mv({...this.#W,node:hD.cloneWith(this.#W.node,{nullsNotDistinct:!0})})}on(e){return new mv({...this.#W,node:hD.cloneWith(this.#W.node,{table:(0,hj.parseTable)(e)})})}column(e){return new mv({...this.#W,node:hD.cloneWithColumns(this.#W.node,[(0,hZ.parseOrderedColumnName)(e)])})}columns(e){return new mv({...this.#W,node:hD.cloneWithColumns(this.#W.node,e.map(hZ.parseOrderedColumnName))})}expression(e){return new mv({...this.#W,node:hD.cloneWithColumns(this.#W.node,[e.toOperationNode()])})}using(e){return new mv({...this.#W,node:hD.cloneWith(this.#W.node,{using:fY.RawNode.createWithSql(e)})})}where(...e){let t=new mb;return new mv({...this.#W,node:my.QueryNode.cloneWithWhere(this.#W.node,t.transformNode((0,mm.parseValueBinaryOperationOrExpression)(e),this.#W.queryId))})}$call(e){return e(this)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}class mE{#W;constructor(e){this.#W=(0,fV.freeze)(e)}ifNotExists(){return new mE({...this.#W,node:hx.cloneWith(this.#W.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}var mS=e.i(69918);class mA{#W;constructor(e){this.#W=(0,fV.freeze)(e)}temporary(){return new mA({...this.#W,node:hL.CreateTableNode.cloneWith(this.#W.node,{temporary:!0})})}onCommit(e){return new mA({...this.#W,node:hL.CreateTableNode.cloneWith(this.#W.node,{onCommit:function(e){if(hL.ON_COMMIT_ACTIONS.includes(e))return e;throw Error(`invalid OnCommitAction ${e}`)}(e)})})}ifNotExists(){return new mA({...this.#W,node:hL.CreateTableNode.cloneWith(this.#W.node,{ifNotExists:!0})})}addColumn(e,t,r=fV.noop){let i=r(new h4(hK.create(e,(0,h6.parseDataTypeExpression)(t))));return new mA({...this.#W,node:hL.CreateTableNode.cloneWithColumn(this.#W.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,t,r=fV.noop){let i=r(new md(ma.create(t,e)));return new mA({...this.#W,node:hL.CreateTableNode.cloneWithConstraint(this.#W.node,i.toOperationNode())})}addUniqueConstraint(e,t,r=fV.noop){let i=r(new ml(h9.create(t,e)));return new mA({...this.#W,node:hL.CreateTableNode.cloneWithConstraint(this.#W.node,i.toOperationNode())})}addCheckConstraint(e,t,r=fV.noop){let i=r(new mc(hq.create(t.toOperationNode(),e)));return new mA({...this.#W,node:hL.CreateTableNode.cloneWithConstraint(this.#W.node,i.toOperationNode())})}addForeignKeyConstraint(e,t,r,i,n=fV.noop){let s=n(new h5(h3.create(t.map(hz.ColumnNode.create),(0,hj.parseTable)(r),i.map(hz.ColumnNode.create),e)));return new mA({...this.#W,node:hL.CreateTableNode.cloneWithConstraint(this.#W.node,s.toOperationNode())})}modifyFront(e){return new mA({...this.#W,node:hL.CreateTableNode.cloneWithFrontModifier(this.#W.node,e.toOperationNode())})}modifyEnd(e){return new mA({...this.#W,node:hL.CreateTableNode.cloneWithEndModifier(this.#W.node,e.toOperationNode())})}as(e){return new mA({...this.#W,node:hL.CreateTableNode.cloneWith(this.#W.node,{selectQuery:(0,mS.parseExpression)(e)})})}$call(e){return e(this)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}class mT{#W;constructor(e){this.#W=(0,fV.freeze)(e)}on(e){return new mT({...this.#W,node:hM.cloneWith(this.#W.node,{table:(0,hj.parseTable)(e)})})}ifExists(){return new mT({...this.#W,node:hM.cloneWith(this.#W.node,{ifExists:!0})})}cascade(){return new mT({...this.#W,node:hM.cloneWith(this.#W.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}class mw{#W;constructor(e){this.#W=(0,fV.freeze)(e)}ifExists(){return new mw({...this.#W,node:h$.cloneWith(this.#W.node,{ifExists:!0})})}cascade(){return new mw({...this.#W,node:h$.cloneWith(this.#W.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}class mO{#W;constructor(e){this.#W=(0,fV.freeze)(e)}ifExists(){return new mO({...this.#W,node:hU.cloneWith(this.#W.node,{ifExists:!0})})}cascade(){return new mO({...this.#W,node:hU.cloneWith(this.#W.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}var mR=e.i(99948),mI=e.i(78655);class mC{#Q=new mb;transformQuery(e){return this.#Q.transformNode(e.node,e.queryId)}transformResult(e){return Promise.resolve(e.result)}}class mN{#W;constructor(e){this.#W=(0,fV.freeze)(e)}temporary(){return new mN({...this.#W,node:mI.CreateViewNode.cloneWith(this.#W.node,{temporary:!0})})}materialized(){return new mN({...this.#W,node:mI.CreateViewNode.cloneWith(this.#W.node,{materialized:!0})})}ifNotExists(){return new mN({...this.#W,node:mI.CreateViewNode.cloneWith(this.#W.node,{ifNotExists:!0})})}orReplace(){return new mN({...this.#W,node:mI.CreateViewNode.cloneWith(this.#W.node,{orReplace:!0})})}columns(e){return new mN({...this.#W,node:mI.CreateViewNode.cloneWith(this.#W.node,{columns:e.map(hZ.parseColumnName)})})}as(e){let t=e.withPlugin(new mC).toOperationNode();return new mN({...this.#W,node:mI.CreateViewNode.cloneWith(this.#W.node,{as:t})})}$call(e){return e(this)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}let mP=(0,fV.freeze)({is:e=>"DropViewNode"===e.kind,create:e=>(0,fV.freeze)({kind:"DropViewNode",name:hk.SchemableIdentifierNode.create(e)}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t})});class mD{#W;constructor(e){this.#W=(0,fV.freeze)(e)}materialized(){return new mD({...this.#W,node:mP.cloneWith(this.#W.node,{materialized:!0})})}ifExists(){return new mD({...this.#W,node:mP.cloneWith(this.#W.node,{ifExists:!0})})}cascade(){return new mD({...this.#W,node:mP.cloneWith(this.#W.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}let mx=(0,fV.freeze)({is:e=>"CreateTypeNode"===e.kind,create:e=>(0,fV.freeze)({kind:"CreateTypeNode",name:e}),cloneWithEnum:(e,t)=>(0,fV.freeze)({...e,enum:m_.ValueListNode.create(t.map(hQ.ValueNode.createImmediate))})});class mL{#W;constructor(e){this.#W=(0,fV.freeze)(e)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}asEnum(e){return new mL({...this.#W,node:mx.cloneWithEnum(this.#W.node,e)})}$call(e){return e(this)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}let mk=(0,fV.freeze)({is:e=>"DropTypeNode"===e.kind,create:e=>(0,fV.freeze)({kind:"DropTypeNode",name:e}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t})});class mM{#W;constructor(e){this.#W=(0,fV.freeze)(e)}ifExists(){return new mM({...this.#W,node:mk.cloneWith(this.#W.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}function m$(e){if(!e.includes("."))return hk.SchemableIdentifierNode.create(e);{let t=e.split(".").map(mU);if(2===t.length)return hk.SchemableIdentifierNode.createWithSchema(t[0],t[1]);throw Error(`invalid schemable identifier ${e}`)}}function mU(e){return e.trim()}let mj=(0,fV.freeze)({is:e=>"RefreshMaterializedViewNode"===e.kind,create:e=>(0,fV.freeze)({kind:"RefreshMaterializedViewNode",name:hk.SchemableIdentifierNode.create(e)}),cloneWith:(e,t)=>(0,fV.freeze)({...e,...t})});class mB{#W;constructor(e){this.#W=(0,fV.freeze)(e)}concurrently(){return new mB({...this.#W,node:mj.cloneWith(this.#W.node,{concurrently:!0,withNoData:!1})})}withData(){return new mB({...this.#W,node:mj.cloneWith(this.#W.node,{withNoData:!1})})}withNoData(){return new mB({...this.#W,node:mj.cloneWith(this.#W.node,{withNoData:!0,concurrently:!1})})}$call(e){return e(this)}toOperationNode(){return this.#W.executor.transformQuery(this.#W.node,this.#W.queryId)}compile(){return this.#W.executor.compileQuery(this.toOperationNode(),this.#W.queryId)}async execute(){await this.#W.executor.executeQuery(this.compile())}}class mz{#J;constructor(e){this.#J=e}createTable(e){return new mA({queryId:(0,fG.createQueryId)(),executor:this.#J,node:hL.CreateTableNode.create((0,hj.parseTable)(e))})}dropTable(e){return new mO({queryId:(0,fG.createQueryId)(),executor:this.#J,node:hU.create((0,hj.parseTable)(e))})}createIndex(e){return new mv({queryId:(0,fG.createQueryId)(),executor:this.#J,node:hD.create(e)})}dropIndex(e){return new mT({queryId:(0,fG.createQueryId)(),executor:this.#J,node:hM.create(e)})}createSchema(e){return new mE({queryId:(0,fG.createQueryId)(),executor:this.#J,node:hx.create(e)})}dropSchema(e){return new mw({queryId:(0,fG.createQueryId)(),executor:this.#J,node:h$.create(e)})}alterTable(e){return new mf({queryId:(0,fG.createQueryId)(),executor:this.#J,node:hP.create((0,hj.parseTable)(e))})}createView(e){return new mN({queryId:(0,fG.createQueryId)(),executor:this.#J,node:mI.CreateViewNode.create(e)})}refreshMaterializedView(e){return new mB({queryId:(0,fG.createQueryId)(),executor:this.#J,node:mj.create(e)})}dropView(e){return new mD({queryId:(0,fG.createQueryId)(),executor:this.#J,node:mP.create(e)})}createType(e){return new mL({queryId:(0,fG.createQueryId)(),executor:this.#J,node:mx.create(m$(e))})}dropType(e){return new mM({queryId:(0,fG.createQueryId)(),executor:this.#J,node:mk.create(m$(e))})}withPlugin(e){return new mz(this.#J.withPlugin(e))}withoutPlugins(){return new mz(this.#J.withoutPlugins())}withSchema(e){return new mz(this.#J.withPluginAtFront(new mR.WithSchemaPlugin(e)))}}var mK=e.i(70445),mY=e.i(26015);class mF{ref(e){return new mK.DynamicReferenceBuilder(e)}table(e){return new mY.DynamicTableBuilder(e)}}class mq{#X;constructor(e){this.#X=e}async provideConnection(e){let t=await this.#X.acquireConnection();try{return await e(t)}finally{await this.#X.releaseConnection(t)}}}var mV=e.i(78800),mG=e.i(52564);class mH extends mG.QueryExecutorBase{#ee;#et;#er;constructor(e,t,r,i=[]){super(i),this.#ee=e,this.#et=t,this.#er=r}get adapter(){return this.#et}compileQuery(e,t){return this.#ee.compileQuery(e,t)}provideConnection(e){return this.#er.provideConnection(e)}withPlugins(e){return new mH(this.#ee,this.#et,this.#er,[...this.plugins,...e])}withPlugin(e){return new mH(this.#ee,this.#et,this.#er,[...this.plugins,e])}withPluginAtFront(e){return new mH(this.#ee,this.#et,this.#er,[e,...this.plugins])}withConnectionProvider(e){return new mH(this.#ee,this.#et,e,[...this.plugins])}withoutPlugins(){return new mH(this.#ee,this.#et,this.#er,[])}}function mZ(){return"undefined"!=typeof performance&&(0,fV.isFunction)(performance.now)?performance.now():Date.now()}class mW{#X;#ei;#en;#es;#ea;#O=new WeakSet;constructor(e,t){this.#es=!1,this.#X=e,this.#ei=t}async init(){if(this.#ea)throw Error("driver has already been destroyed");this.#en||(this.#en=this.#X.init().then(()=>{this.#es=!0}).catch(e=>(this.#en=void 0,Promise.reject(e)))),await this.#en}async acquireConnection(){if(this.#ea)throw Error("driver has already been destroyed");this.#es||await this.init();let e=await this.#X.acquireConnection();return this.#O.has(e)||(this.#eo()&&this.#eu(e),this.#O.add(e)),e}async releaseConnection(e){await this.#X.releaseConnection(e)}beginTransaction(e,t){return this.#X.beginTransaction(e,t)}commitTransaction(e){return this.#X.commitTransaction(e)}rollbackTransaction(e){return this.#X.rollbackTransaction(e)}savepoint(e,t,r){if(this.#X.savepoint)return this.#X.savepoint(e,t,r);throw Error("The `savepoint` method is not supported by this driver")}rollbackToSavepoint(e,t,r){if(this.#X.rollbackToSavepoint)return this.#X.rollbackToSavepoint(e,t,r);throw Error("The `rollbackToSavepoint` method is not supported by this driver")}releaseSavepoint(e,t,r){if(this.#X.releaseSavepoint)return this.#X.releaseSavepoint(e,t,r);throw Error("The `releaseSavepoint` method is not supported by this driver")}async destroy(){this.#en&&(await this.#en,this.#ea||(this.#ea=this.#X.destroy().catch(e=>(this.#ea=void 0,Promise.reject(e)))),await this.#ea)}#eo(){return this.#ei.isLevelEnabled("query")||this.#ei.isLevelEnabled("error")}#eu(e){let t=e.executeQuery,r=e.streamQuery,i=this;e.executeQuery=async r=>{let n,s=mZ();try{return await t.call(e,r)}catch(e){throw n=e,await i.#el(e,r,s),e}finally{n||await i.#ed(r,s)}},e.streamQuery=async function*(t,n){let s,a=mZ();try{for await(let i of r.call(e,t,n))yield i}catch(e){throw s=e,await i.#el(e,t,a),e}finally{s||await i.#ed(t,a,!0)}}}async #el(e,t,r){await this.#ei.error(()=>({level:"error",error:e,query:t,queryDurationMillis:this.#ec(r)}))}async #ed(e,t,r=!1){await this.#ei.query(()=>({level:"query",isStream:r,query:e,queryDurationMillis:this.#ec(t)}))}#ec(e){return mZ()-e}}let mQ=()=>{};class mJ{#E;#ep;constructor(e){this.#E=e}async provideConnection(e){for(;this.#ep;)await this.#ep.catch(mQ);return this.#ep=this.#ef(e).finally(()=>{this.#ep=void 0}),this.#ep}async #ef(e){return await e(this.#E)}}let mX=["read only","read write"],m0=["read uncommitted","read committed","repeatable read","serializable","snapshot"];function m1(e){if(e.accessMode&&!mX.includes(e.accessMode))throw Error(`invalid transaction access mode ${e.accessMode}`);if(e.isolationLevel&&!m0.includes(e.isolationLevel))throw Error(`invalid transaction isolation level ${e.isolationLevel}`)}var m4=e.i(25176);(0,fV.freeze)(["query","error"]);class m2{#eh;#em;constructor(e){(0,fV.isFunction)(e)?(this.#em=e,this.#eh=(0,fV.freeze)({query:!0,error:!0})):(this.#em=m6,this.#eh=(0,fV.freeze)({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#eh[e]}async query(e){this.#eh.query&&await this.#em(e())}async error(e){this.#eh.error&&await this.#em(e())}}function m6(e){if("query"===e.level){let t=`kysely:query:${e.isStream?"stream:":""}`;console.log(`${t} ${e.query.sql}`),console.log(`${t} duration: ${e.queryDurationMillis.toFixed(1)}ms`)}else"error"===e.level&&(e.error instanceof Error?console.error(`kysely:error: ${e.error.stack??e.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:e.error,query:e.query.sql,queryDurationMillis:e.queryDurationMillis})}`))}var m3=e.i(91658),m5=e.i(2757),m8=e.i(46599),m9=e.i(68599);Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");class m7 extends mV.QueryCreator{#W;constructor(e){let t,r;if(function(e){return(0,fV.isObject)(e)&&(0,fV.isObject)(e.config)&&(0,fV.isObject)(e.driver)&&(0,fV.isObject)(e.executor)&&(0,fV.isObject)(e.dialect)}(e))t={executor:e.executor},r={...e};else{let i=e.dialect,n=i.createDriver(),s=i.createQueryCompiler(),a=i.createAdapter(),o=new mW(n,new m2(e.log??[])),u=new mH(s,a,new mq(o),e.plugins??[]);t={executor:u},r={config:e,executor:u,dialect:i,driver:o}}super(t),this.#W=(0,fV.freeze)(r)}get schema(){return new mz(this.#W.executor)}get dynamic(){return new mF}get introspection(){return this.#W.dialect.createIntrospector(this.withoutPlugins())}case(e){return new m3.CaseBuilder({node:m5.CaseNode.create((0,fV.isUndefined)(e)?void 0:(0,mS.parseExpression)(e))})}get fn(){return(0,m4.createFunctionModule)()}transaction(){return new yr({...this.#W})}startTransaction(){return new yi({...this.#W})}connection(){return new yt({...this.#W})}withPlugin(e){return new m7({...this.#W,executor:this.#W.executor.withPlugin(e)})}withoutPlugins(){return new m7({...this.#W,executor:this.#W.executor.withoutPlugins()})}withSchema(e){return new m7({...this.#W,executor:this.#W.executor.withPluginAtFront(new mR.WithSchemaPlugin(e))})}withTables(){return new m7({...this.#W})}async destroy(){await this.#W.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#W.executor}executeQuery(e,t){void 0!==t&&(0,m9.logOnce)("Passing `queryId` in `db.executeQuery` is deprecated and will result in a compile-time error in the future.");let r=(0,fV.isObject)(e)&&(0,fV.isFunction)(e.compile)?e.compile():e;return this.getExecutor().executeQuery(r)}async [Symbol.asyncDispose](){await this.destroy()}}class ye extends m7{#W;constructor(e){super(e),this.#W=e}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new ye({...this.#W,executor:this.#W.executor.withPlugin(e)})}withoutPlugins(){return new ye({...this.#W,executor:this.#W.executor.withoutPlugins()})}withSchema(e){return new ye({...this.#W,executor:this.#W.executor.withPluginAtFront(new mR.WithSchemaPlugin(e))})}withTables(){return new ye({...this.#W})}}class yt{#W;constructor(e){this.#W=(0,fV.freeze)(e)}async execute(e){return this.#W.executor.provideConnection(async t=>{let r=this.#W.executor.withConnectionProvider(new mJ(t)),i=new m7({...this.#W,executor:r});return await e(i)})}}class yr{#W;constructor(e){this.#W=(0,fV.freeze)(e)}setAccessMode(e){return new yr({...this.#W,accessMode:e})}setIsolationLevel(e){return new yr({...this.#W,isolationLevel:e})}async execute(e){let{isolationLevel:t,accessMode:r,...i}=this.#W,n={isolationLevel:t,accessMode:r};return m1(n),this.#W.executor.provideConnection(async t=>{let r=this.#W.executor.withConnectionProvider(new mJ(t)),s=new ye({...i,executor:r}),a=!1;try{await this.#W.driver.beginTransaction(t,n),a=!0;let r=await e(s);return await this.#W.driver.commitTransaction(t),r}catch(e){throw a&&await this.#W.driver.rollbackTransaction(t),e}})}}class yi{#W;constructor(e){this.#W=(0,fV.freeze)(e)}setAccessMode(e){return new yi({...this.#W,accessMode:e})}setIsolationLevel(e){return new yi({...this.#W,isolationLevel:e})}async execute(){let{isolationLevel:e,accessMode:t,...r}=this.#W,i={isolationLevel:e,accessMode:t};m1(i);let n=await (0,m8.provideControlledConnection)(this.#W.executor);return await this.#W.driver.beginTransaction(n.connection,i),new yn({...r,connection:n,executor:this.#W.executor.withConnectionProvider(new mJ(n.connection))})}}class yn extends ye{#W;#ey;#eg;constructor(e){let t={isCommitted:!1,isRolledBack:!1},{connection:r,...i}=e={...e,executor:new yo(e.executor,t)};super(i),this.#W=(0,fV.freeze)(e),this.#eg=t;let n=(0,fG.createQueryId)();this.#ey=t=>e.executor.compileQuery(t,n)}get isCommitted(){return this.#eg.isCommitted}get isRolledBack(){return this.#eg.isRolledBack}commit(){return ya(this.#eg),new ys(async()=>{await this.#W.driver.commitTransaction(this.#W.connection.connection),this.#eg.isCommitted=!0,this.#W.connection.release()})}rollback(){return ya(this.#eg),new ys(async()=>{await this.#W.driver.rollbackTransaction(this.#W.connection.connection),this.#eg.isRolledBack=!0,this.#W.connection.release()})}savepoint(e){return ya(this.#eg),new ys(async()=>(await this.#W.driver.savepoint?.(this.#W.connection.connection,e,this.#ey),new yn({...this.#W})))}rollbackToSavepoint(e){return ya(this.#eg),new ys(async()=>(await this.#W.driver.rollbackToSavepoint?.(this.#W.connection.connection,e,this.#ey),new yn({...this.#W})))}releaseSavepoint(e){return ya(this.#eg),new ys(async()=>(await this.#W.driver.releaseSavepoint?.(this.#W.connection.connection,e,this.#ey),new yn({...this.#W})))}withPlugin(e){return new yn({...this.#W,executor:this.#W.executor.withPlugin(e)})}withoutPlugins(){return new yn({...this.#W,executor:this.#W.executor.withoutPlugins()})}withSchema(e){return new yn({...this.#W,executor:this.#W.executor.withPluginAtFront(new mR.WithSchemaPlugin(e))})}withTables(){return new yn({...this.#W})}}class ys{#e_;constructor(e){this.#e_=e}async execute(){return await this.#e_()}}function ya(e){if(e.isCommitted)throw Error("Transaction is already committed");if(e.isRolledBack)throw Error("Transaction is already rolled back")}class yo{#J;#eg;constructor(e,t){e instanceof yo?this.#J=e.#J:this.#J=e,this.#eg=t}get adapter(){return this.#J.adapter}get plugins(){return this.#J.plugins}transformQuery(e,t){return this.#J.transformQuery(e,t)}compileQuery(e,t){return this.#J.compileQuery(e,t)}provideConnection(e){return this.#J.provideConnection(e)}executeQuery(e){return ya(this.#eg),this.#J.executeQuery(e)}stream(e,t){return ya(this.#eg),this.#J.stream(e,t)}withConnectionProvider(e){return new yo(this.#J.withConnectionProvider(e),this.#eg)}withPlugin(e){return new yo(this.#J.withPlugin(e),this.#eg)}withPlugins(e){return new yo(this.#J.withPlugins(e),this.#eg)}withPluginAtFront(e){return new yo(this.#J.withPluginAtFront(e),this.#eg)}withoutPlugins(){return new yo(this.#J.withoutPlugins(),this.#eg)}}var yu=e.i(24788);function yl(e){if(!e)return null;if("dialect"in e)return yl(e.dialect);if("createDriver"in e){if(e instanceof f3)return"sqlite";if(e instanceof ha)return"mysql";if(e instanceof hy)return"postgres";if(e instanceof hN)return"mssql"}return"aggregate"in e?"sqlite":"getConnection"in e?"mysql":"connect"in e?"postgres":"fileControl"in e||"open"in e&&"close"in e&&"prepare"in e?"sqlite":null}let yd=async t=>{let r,i=t.database;if(!i)return{kysely:null,databaseType:null,transaction:void 0};if("db"in i)return{kysely:i.db,databaseType:i.type,transaction:i.transaction};if("dialect"in i)return{kysely:new m7({dialect:i.dialect}),databaseType:i.type,transaction:i.transaction};let n=yl(i);if("createDriver"in i&&(r=i),"aggregate"in i&&!("createSession"in i)&&(r=new f3({database:i})),"getConnection"in i&&(r=new ha(i)),"connect"in i&&(r=new hy({pool:i})),"fileControl"in i){let{BunSqliteDialect:t}=await e.A(8812);r=new t({database:i})}if("createSession"in i){let t;try{({DatabaseSync:t}=await import("node:sqlite"))}catch(e){if(null!==e&&"object"==typeof e&&"code"in e&&"ERR_UNKNOWN_BUILTIN_MODULE"!==e.code)throw e}if(t&&i instanceof t){let{NodeSqliteDialect:t}=await e.A(22180);r=new t({database:i})}}return{kysely:r?new m7({dialect:r}):null,databaseType:n,transaction:void 0}},yc=(e,t)=>{let r=null,i=e=>({getFieldName:r,schema:i,getDefaultModelName:n})=>{let s=async(i,n,s,a)=>{if(t?.type==="mysql"){await n.execute();let t=i.id?"id":a.length>0&&a[0]?.field?a[0].field:"id";if(!i.id&&0===a.length)return await e.selectFrom(s).selectAll().orderBy(r({model:s,field:t}),"desc").limit(1).executeTakeFirst();let o=i[t]||a[0]?.value;return await e.selectFrom(s).selectAll().orderBy(r({model:s,field:t}),"desc").where(r({model:s,field:t}),"=",o).limit(1).executeTakeFirst()}return t?.type==="mssql"?await n.outputAll("inserted").executeTakeFirst():await n.returningAll().executeTakeFirst()};function a(e){function r(e){for(let i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;let n=e[i];n instanceof Date&&t?.type==="mysql"||"object"==typeof n&&null!==n&&r(n)}}if(Array.isArray(e))for(let t=0;t<e.length;t++){let i=e[t];"object"==typeof i&&null!==i&&r(i)}else"object"==typeof e&&null!==e&&r(e);return e}function o(e,n){if(!n)return{and:null,or:null};let s=[],a=[];return n.forEach(n=>{let{field:o,value:u,operator:l="=",connector:d="AND"}=n,c=r({model:e,field:o});u=function(e,r,n){if("id"===n)return e;let{type:s="sqlite"}=t||{},a=i[r]?.fields[n];return(a||(a=Object.values(i).find(e=>e.modelName===r)),"boolean"===a.type&&("sqlite"===s||"mssql"===s)&&null!=e)?+!!e:"date"===a.type&&e&&e instanceof Date&&"sqlite"===s?e.toISOString():e}(u,e,o);let p=e=>"in"===l.toLowerCase()?e(c,"in",Array.isArray(u)?u:[u]):"not_in"===l.toLowerCase()?e(c,"not in",Array.isArray(u)?u:[u]):"contains"===l?e(c,"like",`%${u}%`):"starts_with"===l?e(c,"like",`${u}%`):"ends_with"===l?e(c,"like",`%${u}`):e(c,"eq"===l?"=":"ne"===l?"<>":"gt"===l?">":"gte"===l?">=":"lt"===l?"<":"lte"===l?"<=":l,u);"OR"===d?a.push(p):s.push(p)}),{and:s.length?s:null,or:a.length?a:null}}return{async create({data:t,model:r}){let i=e.insertInto(r).values(t);return a(await s(t,i,r,[]))},async findOne({model:t,where:r,select:i}){let{and:n,or:s}=o(t,r),u=e.selectFrom(t).selectAll();n&&(u=u.where(e=>e.and(n.map(t=>t(e))))),s&&(u=u.where(e=>e.or(s.map(t=>t(e)))));let l=await u.executeTakeFirst();return l?a(l):null},async findMany({model:i,where:n,limit:s,offset:u,sortBy:l}){let{and:d,or:c}=o(i,n),p=e.selectFrom(i);d&&(p=p.where(e=>e.and(d.map(t=>t(e))))),c&&(p=p.where(e=>e.or(c.map(t=>t(e))))),t?.type==="mssql"?u||(p=p.top(s||100)):p=p.limit(s||100),l&&(p=p.orderBy(r({model:i,field:l.field}),l.direction)),u&&(t?.type==="mssql"?(l||(p=p.orderBy(r({model:i,field:"id"}))),p=p.offset(u).fetch(s||100)):p=p.offset(u));let f=await p.selectAll().execute();return f?a(f):[]},async update({model:t,where:r,update:i}){let{and:n,or:u}=o(t,r),l=e.updateTable(t).set(i);return n&&(l=l.where(e=>e.and(n.map(t=>t(e))))),u&&(l=l.where(e=>e.or(u.map(t=>t(e))))),a(await s(i,l,t,r))},async updateMany({model:t,where:r,update:i}){let{and:n,or:s}=o(t,r),a=e.updateTable(t).set(i);return n&&(a=a.where(e=>e.and(n.map(t=>t(e))))),s&&(a=a.where(e=>e.or(s.map(t=>t(e))))),(await a.execute()).length},async count({model:t,where:r}){let{and:i,or:n}=o(t,r),s=e.selectFrom(t).select(e.fn.count("id").as("count"));i&&(s=s.where(e=>e.and(i.map(t=>t(e))))),n&&(s=s.where(e=>e.or(n.map(t=>t(e)))));let a=await s.execute();return"number"==typeof a[0].count?a[0].count:"bigint"==typeof a[0].count?Number(a[0].count):parseInt(a[0].count)},async delete({model:t,where:r}){let{and:i,or:n}=o(t,r),s=e.deleteFrom(t);i&&(s=s.where(e=>e.and(i.map(t=>t(e))))),n&&(s=s.where(e=>e.or(n.map(t=>t(e))))),await s.execute()},async deleteMany({model:t,where:r}){let{and:i,or:n}=o(t,r),s=e.deleteFrom(t);return i&&(s=s.where(e=>e.and(i.map(t=>t(e))))),n&&(s=s.where(e=>e.or(n.map(t=>t(e))))),(await s.execute()).length},options:t}},n=null;n={config:{adapterId:"kysely",adapterName:"Kysely Adapter",usePlural:t?.usePlural,debugLogs:t?.debugLogs,supportsBooleans:t?.type!=="sqlite"&&t?.type!=="mssql"&&t?.type!=="mysql"&&!!t?.type,supportsDates:t?.type!=="sqlite"&&t?.type!=="mssql"&&!!t?.type,supportsJSON:!1,transaction:!!t?.transaction&&(t=>e.transaction().execute(e=>t((0,yu.c)({config:n.config,adapter:i(e)})(r))))},adapter:i(e)};let s=(0,yu.c)(n);return e=>(r=e,s(e))};e.s(["m",()=>yp],16218);let yp=(e,t)=>{let r=null,i=(0,yu.c)({config:{adapterId:"memory",adapterName:"Memory Adapter",usePlural:!1,debugLogs:t?.debugLogs||!1,customTransformInput:t=>t.options.advanced?.database?.useNumberId&&"id"===t.field&&"create"===t.action?e[t.model].length+1:t.data,transaction:async t=>{let n=structuredClone(e);try{return await t(i(r))}catch(t){throw Object.keys(e).forEach(t=>{e[t]=n[t]}),t}}},adapter:({getFieldName:t,options:r,debugLog:i})=>{function n(t,r){let i=e[r];if(!i)throw dj.logger.error(`[MemoryAdapter] Model ${r} not found in the DB`,Object.keys(e)),Error(`Model ${r} not found`);let n=(e,t)=>{let{field:r,value:i,operator:n}=t;switch(n){case"in":if(!Array.isArray(i))throw Error("Value must be an array");return i.includes(e[r]);case"not_in":if(!Array.isArray(i))throw Error("Value must be an array");return!i.includes(e[r]);case"contains":return e[r].includes(i);case"starts_with":return e[r].startsWith(i);case"ends_with":return e[r].endsWith(i);case"ne":return e[r]!==i;case"gt":return null!=i&&e[r]>i;case"gte":return null!=i&&e[r]>=i;case"lt":return null!=i&&e[r]<i;case"lte":return null!=i&&e[r]<=i;default:return e[r]===i}};return i.filter(e=>{if(!t.length||0===t.length)return!0;let r=n(e,t[0]);for(let i of t){let t=n(e,i);r="OR"===i.connector?r||t:r&&t}return r})}return{create:async({model:t,data:i})=>(r.advanced?.database?.useNumberId&&(i.id=e[t].length+1),e[t]||(e[t]=[]),e[t].push(i),i),findOne:async({model:e,where:t})=>n(t,e)[0]||null,findMany:async({model:r,where:i,sortBy:s,limit:a,offset:o})=>{let u=e[r];return i&&(u=n(i,r)),s&&(u=u.sort((e,i)=>{let n=t({model:r,field:s.field}),a=e[n],o=i[n],u=0;return u=null==a&&null==o?0:null==a?-1:null==o?1:"string"==typeof a&&"string"==typeof o?a.localeCompare(o):a instanceof Date&&o instanceof Date?a.getTime()-o.getTime():"number"==typeof a&&"number"==typeof o?a-o:"boolean"==typeof a&&"boolean"==typeof o?a===o?0:a?1:-1:String(a).localeCompare(String(o)),"asc"===s.direction?u:-u})),void 0!==o&&(u=u.slice(o)),void 0!==a&&(u=u.slice(0,a)),u||[]},count:async({model:t,where:r})=>r?n(r,t).length:e[t].length,update:async({model:e,where:t,update:r})=>{let i=n(t,e);return i.forEach(e=>{Object.assign(e,r)}),i[0]||null},delete:async({model:t,where:r})=>{let i=e[t],s=n(r,t);e[t]=i.filter(e=>!s.includes(e))},deleteMany:async({model:t,where:r})=>{let i=e[t],s=n(r,t),a=0;return e[t]=i.filter(e=>s.includes(e)?(a++,!1):!s.includes(e)),a},updateMany({model:e,where:t,update:r}){let i=n(t,e);return i.forEach(e=>{Object.assign(e,r)}),i[0]||null}}}});return e=>(r=e,i(e))},yf=(e,t)=>{let r=t.logger,i=t.options,n=i.secondaryStorage,s=i.session?.expiresIn||604800,{createWithHooks:a,updateWithHooks:o,updateManyWithHooks:u}=function(e,t){let r=t.hooks;return{createWithHooks:async function(t,i,n,s,a){let o=t;for(let e of r||[]){let t=e[i]?.create?.before;if(t){let e=await t(o,s);if(!1===e)return null;"object"==typeof e&&"data"in e&&(o={...o,...e.data})}}let u=n?await n.fn(o):null,l=!n||n.executeMainFn?await (a||e).create({model:i,data:o,forceAllowId:!0}):u;for(let e of r||[]){let t=e[i]?.create?.after;t&&await t(l,s)}return l},updateWithHooks:async function(t,i,n,s,a,o){let u=t;for(let e of r||[]){let r=e[n]?.update?.before;if(r){let e=await r(t,a);if(!1===e)return null;u="object"==typeof e?e.data:e}}let l=s?await s.fn(u):null,d=!s||s.executeMainFn?await (o||e).update({model:n,update:u,where:i}):l;for(let e of r||[]){let t=e[n]?.update?.after;t&&await t(d,a)}return d},updateManyWithHooks:async function(t,i,n,s,a,o){let u=t;for(let e of r||[]){let r=e[n]?.update?.before;if(r){let e=await r(t,a);if(!1===e)return null;u="object"==typeof e?e.data:e}}let l=s?await s.fn(u):null,d=!s||s.executeMainFn?await (o||e).updateMany({model:n,update:u,where:i}):l;for(let e of r||[]){let t=e[n]?.update?.after;t&&await t(d,a)}return d}}}(e,t);async function l(e){if(!n)return;let t=await n.get(`active-sessions-${e.id}`);if(!t)return;let r=Date.now(),i=((0,dz.s)(t)||[]).filter(e=>e.expiresAt>r);await Promise.all(i.map(async({token:t})=>{let i=await n.get(t);if(!i)return;let s=(0,dz.s)(i);if(!s)return;let a=Math.max(Math.floor(new Date(s.session.expiresAt).getTime()-r)/1e3,0);await n.set(t,JSON.stringify({session:s.session,user:e}),Math.floor(a))}))}return{createOAuthUser:async(t,r,i)=>e.transaction(async e=>{let n=await a({createdAt:new Date,updatedAt:new Date,...t},"user",void 0,i,e),s=await a({...r,userId:n.id,createdAt:new Date,updatedAt:new Date},"account",void 0,i,e);return{user:n,account:s}}),createUser:async(e,t,r)=>await a({createdAt:new Date,updatedAt:new Date,...e,email:e.email?.toLowerCase()},"user",void 0,t,r),createAccount:async(e,t,r)=>await a({createdAt:new Date,updatedAt:new Date,...e},"account",void 0,t,r),listSessions:async(r,i)=>{if(n){let e=await n.get(`active-sessions-${r}`);if(!e)return[];let i=(0,dz.s)(e)||[],s=Date.now(),a=i.filter(e=>e.expiresAt>s),o=[];for(let e of a){let r=await n.get(e.token);if(r){let e=(0,dz.s)(r);if(!e)return[];let i=cw(t.options,{...e.session,expiresAt:new Date(e.session.expiresAt)});o.push(i)}}return o}return await (i||e).findMany({model:"session",where:[{field:"userId",value:r}]})},listUsers:async(t,r,i,n,s)=>await (s||e).findMany({model:"user",limit:t,offset:r,sortBy:i,where:n}),countTotalUsers:async(t,r)=>{let i=await (r||e).count({model:"user",where:t});return"string"==typeof i?parseInt(i):i},deleteUser:async(t,r)=>{n&&await n.delete(`active-sessions-${t}`),(!n||i.session?.storeSessionInDatabase)&&await (r||e).deleteMany({model:"session",where:[{field:"userId",value:t}]}),await (r||e).deleteMany({model:"account",where:[{field:"userId",value:t}]}),await (r||e).delete({model:"user",where:[{field:"id",value:t}]})},createSession:async(t,r,o,u,l,d)=>{let c=r.headers||r.request?.headers,{id:p,...f}=u||{},h={ipAddress:(r.request||r.headers)&&fL(r.request||r.headers,r.context.options)||"",userAgent:c?.get("user-agent")||"",...f,expiresAt:o?dU(86400,"sec"):dU(s,"sec"),userId:t,token:(0,cg.g)(32),createdAt:new Date,updatedAt:new Date,...l?f:{}};return await a(h,"session",n?{fn:async r=>{let i=await n.get(`active-sessions-${t}`),s=[],a=Date.now();i&&(s=(s=(0,dz.s)(i)||[]).filter(e=>e.expiresAt>a));let o=s.sort((e,t)=>e.expiresAt-t.expiresAt),u=o.at(-1)?.expiresAt;o.push({token:h.token,expiresAt:h.expiresAt.getTime()}),(!u||u<h.expiresAt.getTime())&&(u=h.expiresAt.getTime());let l=Math.max(Math.floor((u-a)/1e3),0);l>0&&await n.set(`active-sessions-${t}`,JSON.stringify(o),l);let d=await e.findOne({model:"user",where:[{field:"id",value:t}]}),c=Math.max(Math.floor((h.expiresAt.getTime()-a)/1e3),0);return c>0&&await n.set(h.token,JSON.stringify({session:r,user:d}),c),r},executeMainFn:i.session?.storeSessionInDatabase}:void 0,r,d)},findSession:async(r,s)=>{if(n){let e=await n.get(r);if(!e&&!i.session?.storeSessionInDatabase)return null;if(e){let r=(0,dz.s)(e);return r?{session:cw(t.options,{...r.session,expiresAt:new Date(r.session.expiresAt),createdAt:new Date(r.session.createdAt),updatedAt:new Date(r.session.updatedAt)}),user:cT(t.options,{...r.user,createdAt:new Date(r.user.createdAt),updatedAt:new Date(r.user.updatedAt)})}:null}}let a=await (s||e).findOne({model:"session",where:[{value:r,field:"token"}]});if(!a)return null;let o=await (s||e).findOne({model:"user",where:[{value:a.userId,field:"id"}]});return o?{session:cw(t.options,a),user:cT(t.options,o)}:null},findSessions:async(t,r)=>{if(n){let e=[];for(let r of t){let t=await n.get(r);if(t){let r=(0,dz.s)(t);if(!r)return[];let i={session:{...r.session,expiresAt:new Date(r.session.expiresAt)},user:{...r.user,createdAt:new Date(r.user.createdAt),updatedAt:new Date(r.user.updatedAt)}};e.push(i)}}return e}let i=await (r||e).findMany({model:"session",where:[{field:"token",value:t,operator:"in"}]}),s=i.map(e=>e.userId);if(!s.length)return[];let a=await (r||e).findMany({model:"user",where:[{field:"id",value:s,operator:"in"}]});return i.map(e=>{let t=a.find(t=>t.id===e.userId);return t?{session:e,user:t}:null})},updateSession:async(e,t,r,s)=>await o(t,[{field:"token",value:e}],"session",n?{async fn(t){let r=await n.get(e);if(!r)return null;{let e=(0,dz.s)(r);return e?{...e.session,...t}:null}},executeMainFn:i.session?.storeSessionInDatabase}:void 0,r,s),deleteSession:async(s,a)=>{if(n){let e=await n.get(s);if(e){let{session:t}=(0,dz.s)(e)??{};if(!t)return void r.error("Session not found in secondary storage");let i=t.userId,a=await n.get(`active-sessions-${i}`);if(a){let e=(0,dz.s)(a)||[],t=Date.now(),r=e.filter(e=>e.expiresAt>t&&e.token!==s),o=r.sort((e,t)=>e.expiresAt-t.expiresAt),u=o.at(-1)?.expiresAt;r.length>0&&u&&u>Date.now()?await n.set(`active-sessions-${i}`,JSON.stringify(r),Math.floor((u-t)/1e3)):await n.delete(`active-sessions-${i}`)}else r.error("Active sessions list not found in secondary storage")}if(await n.delete(s),!i.session?.storeSessionInDatabase||t.options.session?.preserveSessionInDatabase)return}await (a||e).delete({model:"session",where:[{field:"token",value:s}]})},deleteAccounts:async(t,r)=>{await (r||e).deleteMany({model:"account",where:[{field:"userId",value:t}]})},deleteAccount:async(t,r)=>{await (r||e).delete({model:"account",where:[{field:"id",value:t}]})},deleteSessions:async(r,s)=>{if(n){if("string"==typeof r){let e=await n.get(`active-sessions-${r}`),t=e?(0,dz.s)(e):[];if(!t)return;for(let e of t)await n.delete(e.token)}else for(let e of r)await n.get(e)&&await n.delete(e);if(!i.session?.storeSessionInDatabase||t.options.session?.preserveSessionInDatabase)return}await (s||e).deleteMany({model:"session",where:[{field:Array.isArray(r)?"token":"userId",value:r,operator:Array.isArray(r)?"in":void 0}]})},findOAuthUser:async(t,r,i,n)=>{let s=await (n||e).findMany({model:"account",where:[{value:r,field:"accountId"}]}).then(e=>e.find(e=>e.providerId===i));if(s){let r=await (n||e).findOne({model:"user",where:[{value:s.userId,field:"id"}]});if(r)return{user:r,accounts:[s]};{let r=await (n||e).findOne({model:"user",where:[{value:t.toLowerCase(),field:"email"}]});return r?{user:r,accounts:[s]}:null}}{let r=await (n||e).findOne({model:"user",where:[{value:t.toLowerCase(),field:"email"}]});if(!r)return null;{let t=await (n||e).findMany({model:"account",where:[{value:r.id,field:"userId"}]});return{user:r,accounts:t||[]}}}},findUserByEmail:async(t,r,i)=>{let n=await (i||e).findOne({model:"user",where:[{value:t.toLowerCase(),field:"email"}]});if(!n)return null;if(r?.includeAccounts){let t=await (i||e).findMany({model:"account",where:[{value:n.id,field:"userId"}]});return{user:n,accounts:t}}return{user:n,accounts:[]}},findUserById:async(t,r)=>await (r||e).findOne({model:"user",where:[{field:"id",value:t}]}),linkAccount:async(e,t,r)=>await a({createdAt:new Date,updatedAt:new Date,...e},"account",void 0,t,r),updateUser:async(e,t,r,i)=>{let n=await o(t,[{field:"id",value:e}],"user",void 0,r,i);return await l(n),await l(n),n},updateUserByEmail:async(e,t,r,i)=>{let n=await o(t,[{field:"email",value:e.toLowerCase()}],"user",void 0,r,i);return await l(n),await l(n),n},updatePassword:async(e,t,r,i)=>{await u({password:t},[{field:"userId",value:e},{field:"providerId",value:"credential"}],"account",void 0,r,i)},findAccounts:async(t,r)=>await (r||e).findMany({model:"account",where:[{field:"userId",value:t}]}),findAccount:async(t,r)=>await (r||e).findOne({model:"account",where:[{field:"accountId",value:t}]}),findAccountByProviderId:async(t,r,i)=>await (i||e).findOne({model:"account",where:[{field:"accountId",value:t},{field:"providerId",value:r}]}),findAccountByUserId:async(t,r)=>await (r||e).findMany({model:"account",where:[{field:"userId",value:t}]}),updateAccount:async(e,t,r,i)=>await o(t,[{field:"id",value:e}],"account",void 0,r,i),createVerificationValue:async(e,t,r)=>await a({createdAt:new Date,updatedAt:new Date,...e},"verification",void 0,t,r),findVerificationValue:async(t,r)=>{let n=await (r||e).findMany({model:"verification",where:[{field:"identifier",value:t}],sortBy:{field:"createdAt",direction:"desc"},limit:1});return i.verification?.disableCleanup||await (r||e).deleteMany({model:"verification",where:[{field:"expiresAt",value:new Date,operator:"lt"}]}),n[0]},deleteVerificationValue:async(t,r)=>{await (r||e).delete({model:"verification",where:[{field:"id",value:t}]})},deleteVerificationByIdentifier:async(t,r)=>{await (r||e).delete({model:"verification",where:[{field:"identifier",value:t}]})},updateVerificationValue:async(e,t,r,i)=>await o(t,[{field:"id",value:e}],"verification",void 0,r,i)}};async function yh(e){if(!e.database){let t=Object.keys((0,fB.g)(e)).reduce((e,t)=>(e[t]=[],e),{});return dj.logger.warn("No database configuration provided. Using memory adapter in development"),yp(t)(e)}if("function"==typeof e.database)return e.database(e);let{kysely:t,databaseType:r,transaction:i}=await yd(e);if(!t)throw new d$.BetterAuthError("Failed to initialize database adapter");return yc(t,{type:r||"sqlite",debugLogs:"debugLogs"in e.database&&e.database.debugLogs,transaction:i})(e)}let ym={postgres:{string:["character varying","varchar","text"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},mysql:{string:["varchar","text"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},mssql:{string:["varchar","nvarchar"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]}};async function yy(e){try{let t=await f1.sql`SHOW search_path`.execute(e);if(t.rows[0]?.search_path)return t.rows[0].search_path.split(",").map(e=>e.trim()).map(e=>e.replace(/^["']|["']$/g,"")).filter(e=>!e.startsWith("$"))[0]||"public"}catch(e){}return"public"}async function yg(e){let t=function(e){let t=(0,fB.g)(e),r={};for(let e in t){let i=t[e],n=i.fields,s={};if(Object.entries(n).forEach(([e,r])=>{if(s[r.fieldName||e]=r,r.references){let i=t[r.references.model];i&&(s[r.fieldName||e].references={...r.references,model:i.modelName,field:r.references.field})}}),r[i.modelName]){r[i.modelName].fields={...r[i.modelName].fields,...s};continue}r[i.modelName]={fields:s,order:i.order||1/0}}return r}(e),r=(0,dj.createLogger)(e.logger),{kysely:i,databaseType:n}=await yd(e);n||(r.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),n="sqlite"),i||(r.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1));let s="public";if("postgres"===n){s=await yy(i),r.debug(`PostgreSQL migration: Using schema '${s}' (from search_path)`);try{(await f1.sql`
				SELECT schema_name 
				FROM information_schema.schemata 
				WHERE schema_name = ${s}
			`.execute(i)).rows[0]||r.warn(`Schema '${s}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`)}catch(e){r.debug(`Could not verify schema existence: ${e instanceof Error?e.message:String(e)}`)}}let a=await i.introspection.getTables(),o=a;if("postgres"===n)try{let e=await f1.sql`
				SELECT table_name 
				FROM information_schema.tables 
				WHERE table_schema = ${s}
				AND table_type = 'BASE TABLE'
			`.execute(i),t=new Set(e.rows.map(e=>e.table_name));o=a.filter(e=>e.schema===s&&t.has(e.name)),r.debug(`Found ${o.length} table(s) in schema '${s}': ${o.map(e=>e.name).join(", ")||"(none)"}`)}catch(e){r.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${e instanceof Error?e.message:String(e)}`)}let u=[],l=[];for(let[e,i]of Object.entries(t)){let t=o.find(t=>t.name===e);if(!t){let t=u.findIndex(t=>t.table===e),r={table:e,fields:i.fields,order:i.order||1/0},n=u.findIndex(e=>(e.order||1/0)>r.order);-1===n?-1===t?u.push(r):u[t].fields={...u[t].fields,...i.fields}:u.splice(n,0,r);continue}let s={};for(let[a,o]of Object.entries(i.fields)){let i=t.columns.find(e=>e.name===a);if(!i){s[a]=o;continue}!function(e,t,r){if("string[]"===t||"number[]"===t)return e.toLowerCase().includes("json");let i=ym[r];return(Array.isArray(t)?i.string.map(e=>e.toLowerCase()):i[t].map(e=>e.toLowerCase())).includes(e.toLowerCase().split("(")[0].trim())}(i.dataType,o.type,n)&&r.warn(`Field ${a} in table ${e} has a different type in the database. Expected ${o.type} but got ${i.dataType}.`)}Object.keys(s).length>0&&l.push({table:e,fields:s,order:i.order||1/0})}let d=[];function c(t,r){let i=t.type,s={string:{sqlite:"text",postgres:"text",mysql:t.unique?"varchar(255)":t.references?"varchar(36)":"text",mssql:t.unique||t.sortable?"varchar(255)":t.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:t.bigint?"bigint":"integer",postgres:t.bigint?"bigint":"integer",mysql:t.bigint?"bigint":"integer",mssql:t.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:f1.sql`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:e.advanced?.database?.useNumberId?"serial":"text",mysql:e.advanced?.database?.useNumberId?"integer":"varchar(36)",mssql:e.advanced?.database?.useNumberId?"integer":"varchar(36)",sqlite:e.advanced?.database?.useNumberId?"integer":"text"},foreignKeyId:{postgres:e.advanced?.database?.useNumberId?"integer":"text",mysql:e.advanced?.database?.useNumberId?"integer":"varchar(36)",mssql:e.advanced?.database?.useNumberId?"integer":"varchar(36)",sqlite:e.advanced?.database?.useNumberId?"integer":"text"}};return"id"===r||t.references?.field==="id"?"id"===r?s.id[n]:s.foreignKeyId[n]:"sqlite"===n&&("string[]"===i||"number[]"===i)?"text":"string[]"===i||"number[]"===i?"jsonb":Array.isArray(i)?"text":s[i][n||"sqlite"]}if(l.length)for(let e of l)for(let[t,r]of Object.entries(e.fields)){let s=c(r,t),a=i.schema.alterTable(e.table).addColumn(t,s,e=>(e=!1!==r.required?e.notNull():e,r.references&&(e=e.references(`${r.references.model}.${r.references.field}`).onDelete(r.references.onDelete||"cascade")),r.unique&&(e=e.unique()),"date"===r.type&&"function"==typeof r.defaultValue&&("postgres"===n||"mysql"===n||"mssql"===n)&&(e="mysql"===n?e.defaultTo(f1.sql`CURRENT_TIMESTAMP(3)`):e.defaultTo(f1.sql`CURRENT_TIMESTAMP`)),e));d.push(a)}if(u.length)for(let t of u){let r=i.schema.createTable(t.table).addColumn("id",e.advanced?.database?.useNumberId?"postgres"===n?"serial":"integer":"mysql"===n||"mssql"===n?"varchar(36)":"text",t=>e.advanced?.database?.useNumberId?"postgres"===n||"sqlite"===n?t.primaryKey().notNull():"mssql"===n?t.identity().primaryKey().notNull():t.autoIncrement().primaryKey().notNull():t.primaryKey().notNull());for(let[e,i]of Object.entries(t.fields)){let t=c(i,e);r=r.addColumn(e,t,e=>(e=!1!==i.required?e.notNull():e,i.references&&(e=e.references(`${i.references.model}.${i.references.field}`).onDelete(i.references.onDelete||"cascade")),i.unique&&(e=e.unique()),"date"===i.type&&"function"==typeof i.defaultValue&&("postgres"===n||"mysql"===n||"mssql"===n)&&(e="mysql"===n?e.defaultTo(f1.sql`CURRENT_TIMESTAMP(3)`):e.defaultTo(f1.sql`CURRENT_TIMESTAMP`)),e))}d.push(r)}return{toBeCreated:u,toBeAdded:l,runMigrations:async function(){for(let e of d)await e.execute()},compileMigrations:async function(){return d.map(e=>e.compile().sql).join(";\n\n")+";"}}}async function y_(e,t){let r=await t.context.internalAdapter.findAccounts(e),i=r?.find(e=>"credential"===e.providerId),n=i?.password;if(!i||!n||!t.body.password)throw new eC.APIError("BAD_REQUEST",{message:"No password credential found"});if(!await t.context.password.verify({hash:n,password:t.body.password}))throw new eC.APIError("BAD_REQUEST",{message:"Invalid password"});return!0}async function yb(e){let t=await (0,c_.createHash)("SHA-256").digest(e);return o.base64.encode(t)}async function yv(){if(i)return i;try{let e="undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!e)return;let t=e=>Function("mm","return import(mm)")(e),[{default:r},{default:n}]=await Promise.all([t("fs/promises"),t("path")]),s=await r.readFile(n.join(e,"package.json"),"utf-8");return i=JSON.parse(s)}catch{}}async function yE(e){if(i)return i.dependencies?.[e]||i.devDependencies?.[e]||i.peerDependencies?.[e];try{let t="undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!t)throw Error("no-cwd");let r=e=>Function("mm","return import(mm)")(e),[{default:i},{default:n}]=await Promise.all([r("fs/promises"),r("path")]),s=n.join(t,"node_modules",e,"package.json"),a=await i.readFile(s,"utf-8");return JSON.parse(a).version||await yS(e)||void 0}catch{}return await yS(e)}async function yS(e){let t=await yv();if(t)return({...t.dependencies,...t.devDependencies,...t.peerDependencies})[e]}async function yA(){let e=await yv();return e?.name}e.s(["c",()=>y_],23390),e.s(["createTelemetry",()=>yj],16694);let yT=null;async function yw(e){if(yT)return yT;let t=await yA();return t?yT=await yb(e?e+t:t):e?yT=await yb(e):yT=(0,d0.createRandomStringGenerator)("a-z","A-Z","0-9")(32)}let yO=e=>Function("mm","return import(mm)")(e);function yR(){let e=(...e)=>e.some(e=>!!dj.env[e]);return e("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent?"cloudflare":e("VERCEL","VERCEL_URL","VERCEL_ENV")?"vercel":e("NETLIFY","NETLIFY_URL")?"netlify":e("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID")?"render":e("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT")?"aws":e("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE")?"gcp":e("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME")?"azure":e("DENO_DEPLOYMENT_ID","DENO_REGION")?"deno-deploy":e("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID")?"fly-io":e("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME")?"railway":e("DYNO","HEROKU_APP_NAME")?"heroku":e("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN")?"digitalocean":e("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME")?"koyeb":null}async function yI(){try{if("cloudflare"===yR())return"cloudflare";let e=await yO("os"),t=e.cpus();return{deploymentVendor:yR(),systemPlatform:e.platform(),systemRelease:e.release(),systemArchitecture:e.arch(),cpuCount:t.length,cpuModel:t.length?t[0].model:null,cpuSpeed:t.length?t[0].speed:null,memory:e.totalmem(),isWSL:await yD(),isDocker:await yP(),isTTY:"undefined"!=typeof process&&process.stdout?process.stdout.isTTY:null}}catch(e){return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}async function yC(){if("cloudflare"===yR())return!1;try{return(await yO("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function yN(){if("cloudflare"===yR())return!1;try{return(await yO("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function yP(){return"cloudflare"!==yR()&&(void 0===n&&(n=await yC()||await yN()),n)}async function yD(){try{if("cloudflare"===yR()||"undefined"==typeof process||process?.platform!=="linux")return!1;let e=await yO("fs");if((await yO("os")).release().toLowerCase().includes("microsoft")){if(await yL())return!1;return!0}return!!e.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!await yL()}catch{return!1}}let yx=async()=>{if("cloudflare"===yR())return!1;try{return(await yO("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function yL(){return void 0===s&&(s=await yx()||await yP()),s}let yk={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function yM(){for(let[e,t]of Object.entries(yk)){let r=await yE(e);if(r)return{name:t,version:r}}}let y$={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function yU(){for(let[e,t]of Object.entries(y$)){let r=await yE(e);if(r)return{name:t,version:r}}}async function yj(e,t){let r,i=e.telemetry?.debug||(0,dj.getBooleanEnvVar)("BETTER_AUTH_TELEMETRY_DEBUG",!1),n=dj.ENV.BETTER_AUTH_TELEMETRY_ENDPOINT,s=async e=>{try{t?.customTrack?await t.customTrack(e):i?await Promise.resolve(dj.logger.info("telemetry event",JSON.stringify(e,null,2))):await C(n,{method:"POST",body:e})}catch{}},a=async()=>{let r=e.telemetry?.enabled!==void 0&&e.telemetry.enabled;return((0,dj.getBooleanEnvVar)("BETTER_AUTH_TELEMETRY",!1)||r)&&(t?.skipTestCheck||!(0,dj.isTest)())},o=await a();if(o){var u;r=await yw(e.baseURL),s({type:"init",payload:{config:{database:void 0,adapter:u?.adapter,emailVerification:{sendVerificationEmail:!!e.emailVerification?.sendVerificationEmail,sendOnSignUp:!!e.emailVerification?.sendOnSignUp,sendOnSignIn:!!e.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!e.emailVerification?.autoSignInAfterVerification,expiresIn:e.emailVerification?.expiresIn,onEmailVerification:!!e.emailVerification?.onEmailVerification,afterEmailVerification:!!e.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!e.emailAndPassword?.enabled,disableSignUp:!!e.emailAndPassword?.disableSignUp,requireEmailVerification:!!e.emailAndPassword?.requireEmailVerification,maxPasswordLength:e.emailAndPassword?.maxPasswordLength,minPasswordLength:e.emailAndPassword?.minPasswordLength,sendResetPassword:!!e.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:e.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!e.emailAndPassword?.onPasswordReset,password:{hash:!!e.emailAndPassword?.password?.hash,verify:!!e.emailAndPassword?.password?.verify},autoSignIn:!!e.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!e.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys(e.socialProviders||{}).map(t=>{let r=e.socialProviders?.[t];return r?{id:t,mapProfileToUser:!!r.mapProfileToUser,disableDefaultScope:!!r.disableDefaultScope,disableIdTokenSignIn:!!r.disableIdTokenSignIn,disableImplicitSignUp:r.disableImplicitSignUp,disableSignUp:r.disableSignUp,getUserInfo:!!r.getUserInfo,overrideUserInfoOnSignIn:!!r.overrideUserInfoOnSignIn,prompt:r.prompt,verifyIdToken:!!r.verifyIdToken,scope:r.scope,refreshAccessToken:!!r.refreshAccessToken}:{}}),plugins:e.plugins?.map(e=>e.id.toString()),user:{modelName:e.user?.modelName,fields:e.user?.fields,additionalFields:e.user?.additionalFields,changeEmail:{enabled:e.user?.changeEmail?.enabled,sendChangeEmailVerification:!!e.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:e.verification?.modelName,disableCleanup:e.verification?.disableCleanup,fields:e.verification?.fields},session:{modelName:e.session?.modelName,additionalFields:e.session?.additionalFields,cookieCache:{enabled:e.session?.cookieCache?.enabled,maxAge:e.session?.cookieCache?.maxAge},disableSessionRefresh:e.session?.disableSessionRefresh,expiresIn:e.session?.expiresIn,fields:e.session?.fields,freshAge:e.session?.freshAge,preserveSessionInDatabase:e.session?.preserveSessionInDatabase,storeSessionInDatabase:e.session?.storeSessionInDatabase,updateAge:e.session?.updateAge},account:{modelName:e.account?.modelName,fields:e.account?.fields,encryptOAuthTokens:e.account?.encryptOAuthTokens,updateAccountOnSignIn:e.account?.updateAccountOnSignIn,accountLinking:{enabled:e.account?.accountLinking?.enabled,trustedProviders:e.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:e.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:e.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!e.hooks?.after,before:!!e.hooks?.before},secondaryStorage:!!e.secondaryStorage,advanced:{cookiePrefix:!!e.advanced?.cookiePrefix,cookies:!!e.advanced?.cookies,crossSubDomainCookies:{domain:!!e.advanced?.crossSubDomainCookies?.domain,enabled:e.advanced?.crossSubDomainCookies?.enabled,additionalCookies:e.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!e.advanced?.database?.useNumberId,generateId:e.advanced?.database?.generateId,defaultFindManyLimit:e.advanced?.database?.defaultFindManyLimit},useSecureCookies:e.advanced?.useSecureCookies,ipAddress:{disableIpTracking:e.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:e.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:e.advanced?.disableCSRFCheck,cookieAttributes:{expires:e.advanced?.defaultCookieAttributes?.expires,secure:e.advanced?.defaultCookieAttributes?.secure,sameSite:e.advanced?.defaultCookieAttributes?.sameSite,domain:!!e.advanced?.defaultCookieAttributes?.domain,path:e.advanced?.defaultCookieAttributes?.path,httpOnly:e.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:e.trustedOrigins?.length,rateLimit:{storage:e.rateLimit?.storage,modelName:e.rateLimit?.modelName,window:e.rateLimit?.window,customStorage:!!e.rateLimit?.customStorage,enabled:e.rateLimit?.enabled,max:e.rateLimit?.max},onAPIError:{errorURL:e.onAPIError?.errorURL,onError:!!e.onAPIError?.onError,throw:e.onAPIError?.throw},logger:{disabled:e.logger?.disabled,level:e.logger?.level,log:!!e.logger?.log},databaseHooks:{user:{create:{after:!!e.databaseHooks?.user?.create?.after,before:!!e.databaseHooks?.user?.create?.before},update:{after:!!e.databaseHooks?.user?.update?.after,before:!!e.databaseHooks?.user?.update?.before}},session:{create:{after:!!e.databaseHooks?.session?.create?.after,before:!!e.databaseHooks?.session?.create?.before},update:{after:!!e.databaseHooks?.session?.update?.after,before:!!e.databaseHooks?.session?.update?.before}},account:{create:{after:!!e.databaseHooks?.account?.create?.after,before:!!e.databaseHooks?.account?.create?.before},update:{after:!!e.databaseHooks?.account?.update?.after,before:!!e.databaseHooks?.account?.update?.before}},verification:{create:{after:!!e.databaseHooks?.verification?.create?.after,before:!!e.databaseHooks?.verification?.create?.before},update:{after:!!e.databaseHooks?.verification?.update?.after,before:!!e.databaseHooks?.verification?.update?.before}}}},runtime:"undefined"!=typeof Deno?{name:"deno",version:Deno?.version?.deno??null}:"undefined"!=typeof Bun?{name:"bun",version:Bun?.version??null}:"undefined"!=typeof process&&process?.versions?.node?{name:"node",version:process.versions.node??null}:{name:"edge",version:null},database:await yM(),framework:await yU(),environment:"production"===(0,dj.getEnvVar)("NODE_ENV")?"production":"false"!==dj.env.CI&&("BUILD_ID"in dj.env||"BUILD_NUMBER"in dj.env||"CI"in dj.env||"CI_APP_ID"in dj.env||"CI_BUILD_ID"in dj.env||"CI_BUILD_NUMBER"in dj.env||"CI_NAME"in dj.env||"CONTINUOUS_INTEGRATION"in dj.env||"RUN_ID"in dj.env)?"ci":(0,dj.isTest)()?"test":"development",systemInfo:await yI(),packageManager:function(){let e=dj.env.npm_config_user_agent;if(!e)return;let t=e.split(" ")[0],r=t.lastIndexOf("/"),i=t.substring(0,r);return{name:"npminstall"===i?"cnpm":i,version:t.substring(r+1)}}()},anonymousId:r})}return{publish:async t=>{o&&(r||(r=await yw(e.baseURL)),await s({type:t.type,payload:t.payload,anonymousId:r}))}}}let yB="better-auth-secret-123456789";function yz(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}let yK=async e=>{var t;let r,i=await yh(e),n=e.plugins||[],s=(t=e,t.advanced?.crossSubDomainCookies?.enabled,[]),a=(0,dj.createLogger)(e.logger),o=dY(e.baseURL,e.basePath),u=e.secret||dj.env.BETTER_AUTH_SECRET||dj.env.AUTH_SECRET||yB;u===yB&&dj.isProduction&&a.error("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config."),f$(e={...e,secret:u,baseURL:o?new URL(o).origin:"",basePath:e.basePath||"/api/auth",plugins:n.concat(s)},a);let l=dZ(e),d=(0,fB.g)(e),c=Object.entries(e.socialProviders||{}).map(([e,t])=>{if(null==t||!1===t.enabled)return null;t.clientId||a.warn(`Social provider ${e} is missing clientId or clientSecret`);let r=cs[e](t);return r.disableImplicitSignUp=t.disableImplicitSignUp,r}).filter(e=>null!==e),{publish:p}=await yj(e,{adapter:i.id,database:"function"==typeof e.database?"adapter":yl(e.database)||"unknown"}),f={appName:e.appName||"Better Auth",socialProviders:c,options:e,tables:d,trustedOrigins:function(e){let t=dY(e.baseURL,e.basePath);if(!t)return[];let r=[new URL(t).origin];e.trustedOrigins&&Array.isArray(e.trustedOrigins)&&r.push(...e.trustedOrigins);let i=dj.env.BETTER_AUTH_TRUSTED_ORIGINS;if(i&&r.push(...i.split(",")),r.filter(e=>!e).length)throw new d$.BetterAuthError("A provided trusted origin is invalid, make sure your trusted origins list is properly defined.");return r}(e),baseURL:o||"",sessionConfig:{updateAge:e.session?.updateAge!==void 0?e.session.updateAge:86400,expiresIn:e.session?.expiresIn||604800,freshAge:e.session?.freshAge===void 0?86400:e.session.freshAge},secret:u,rateLimit:{...e.rateLimit,enabled:e.rateLimit?.enabled??dj.isProduction,window:e.rateLimit?.window||10,max:e.rateLimit?.max||100,storage:e.rateLimit?.storage||(e.secondaryStorage?"secondary-storage":"memory")},authCookies:l,logger:a,generateId:({model:t,size:r})=>"function"==typeof e.advanced?.generateId?e.advanced.generateId({model:t,size:r}):"function"==typeof e?.advanced?.database?.generateId?e.advanced.database.generateId({model:t,size:r}):(0,cg.g)(r),session:null,secondaryStorage:e.secondaryStorage,password:{hash:e.emailAndPassword?.password?.hash||pQ,verify:e.emailAndPassword?.password?.verify||pJ,config:{minPasswordLength:e.emailAndPassword?.minPasswordLength||8,maxPasswordLength:e.emailAndPassword?.maxPasswordLength||128},checkPassword:y_},setNewSession(e){this.newSession=e},newSession:null,adapter:i,internalAdapter:yf(i,{options:e,logger:a,hooks:e.databaseHooks?[e.databaseHooks]:[]}),createAuthCookie:dH(e),async runMigrations(){if(!e.database||"updateMany"in e.database)throw new d$.BetterAuthError("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:t}=await yg(e);await t()},publishTelemetry:p,skipCSRFCheck:!!e.advanced?.disableCSRFCheck,skipOriginCheck:e.advanced?.disableOriginCheck!==void 0?e.advanced.disableOriginCheck:!!(0,dj.isTest)()},h=yY(f);return yz(h)?{context:r}=await h:{context:r}=h,r};async function yY(e){let t=e.options,r=t.plugins||[],i=e,n=[];for(let e of r)if(e.init){let r,s=e.init(i);if("object"==typeof(r=yz(s)?await s:s)){if(r.options){let{databaseHooks:e,...i}=r.options;e&&n.push(e),t=cN(t,i)}r.context&&(i={...i,...r.context})}}return n.push(t.databaseHooks),i.internalAdapter=yf(e.adapter,{options:t,logger:e.logger,hooks:n.filter(e=>void 0!==e),generateId:e.generateId}),i.options=t,{context:i}}let yF=e=>{let t=yK(e),{api:r}=fU(t,e),i=e.plugins?.reduce((e,t)=>t.$ERROR_CODES?{...e,...t.$ERROR_CODES}:e,{});return{handler:async r=>{let i=await t,n=i.options.basePath||"/api/auth";if(!i.options.baseURL){let e=dY(void 0,n,r);if(e)i.baseURL=e,i.options.baseURL=dF(i.baseURL)||void 0;else throw new d$.BetterAuthError("Could not get base URL from request. Please provide a valid base URL.")}i.trustedOrigins=[...e.trustedOrigins?Array.isArray(e.trustedOrigins)?e.trustedOrigins:await e.trustedOrigins(r):[],i.options.baseURL];let{handler:s}=fj(i,e);return s(r)},api:r,options:e,$context:t,$Infer:{},$ERROR_CODES:{...i,...d$.BASE_ERROR_CODES}}}},49436,e=>{"use strict";e.s([],49436),e.i(9662),e.i(74094),e.i(12700),e.i(34075),e.i(61788),e.i(8369),e.i(49330),e.i(16694),e.i(31428),e.i(61453),e.i(36870),e.i(30501),e.i(35972),e.i(23770),e.i(37430),e.i(12407),e.i(22381),e.i(63129),e.i(73088),e.i(20354),e.i(36255),e.i(91488),e.i(80387),e.i(39127),e.i(82318),e.i(72381),e.i(62160),e.i(42551),e.i(29776),e.i(5650),e.i(15465),e.i(99373),e.i(95483),e.i(24788),e.i(16218),e.i(89222),e.i(23390)},51374,e=>{"use strict";e.s(["betterAuth",()=>t.b]);var t=e.i(61788)},88501,e=>{"use strict";e.s(["drizzleAdapter",()=>a],88501);var t=e.i(24788);e.i(12407),e.i(20354),e.i(9662),e.i(99373),e.i(49330),e.i(39127),e.i(31428),e.i(82318),e.i(30501),e.i(72381);var r=e.i(12700);e.i(62160),t.c,e.i(56325),e.i(44988);var i=e.i(18899),n=e.i(49129),s=e.i(75225);let a=(e,a)=>{let o=null,u=e=>({getFieldName:t,debugLog:o})=>{function u(t){let i=a.schema||e._.fullSchema;if(!i)throw new r.BetterAuthError("Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.");let n=i[t];if(!n)throw new r.BetterAuthError(`[# Drizzle Adapter]: The model "${t}" was not found in the schema object. Please pass the schema directly to the adapter options.`);return n}let l=async(t,o,l,c)=>{if("mysql"!==a.provider)return(await o.returning())[0];await o.execute();let p=u(t),f=o.config?.values;if(c?.length){let r=d(c.map(e=>void 0!==l[e.field]?{...e,value:l[e.field]}:e),t);return(await e.select().from(p).where(...r))[0]}if(f&&f[0]?.id?.value){let t=f[0]?.id?.value;return t||(t=(await e.select({id:i.sql`LAST_INSERT_ID()`}).from(p).orderBy((0,n.desc)(p.id)).limit(1))[0].id),(await e.select().from(p).where((0,s.eq)(p.id,t)).limit(1).execute())[0]}if(l.id)return(await e.select().from(p).where((0,s.eq)(p.id,l.id)).limit(1).execute())[0];if(!("id"in p))throw new r.BetterAuthError(`The model "${t}" does not have an "id" field. Please use the "id" field as your primary key.`);return(await e.select().from(p).orderBy((0,n.desc)(p.id)).limit(1).execute())[0]};function d(e,i){let n=u(i);if(!e)return[];if(1===e.length){let a=e[0];if(!a)return[];let o=t({model:i,field:a.field});if(!n[o])throw new r.BetterAuthError(`The field "${a.field}" does not exist in the schema for the model "${i}". Please update your schema.`);if("in"===a.operator){if(!Array.isArray(a.value))throw new r.BetterAuthError(`The value for the field "${a.field}" must be an array when using the "in" operator.`);return[(0,s.inArray)(n[o],a.value)]}if("not_in"===a.operator){if(!Array.isArray(a.value))throw new r.BetterAuthError(`The value for the field "${a.field}" must be an array when using the "not_in" operator.`);return[(0,s.notInArray)(n[o],a.value)]}return"contains"===a.operator?[(0,s.like)(n[o],`%${a.value}%`)]:"starts_with"===a.operator?[(0,s.like)(n[o],`${a.value}%`)]:"ends_with"===a.operator?[(0,s.like)(n[o],`%${a.value}`)]:"lt"===a.operator?[(0,s.lt)(n[o],a.value)]:"lte"===a.operator?[(0,s.lte)(n[o],a.value)]:"ne"===a.operator?[(0,s.ne)(n[o],a.value)]:"gt"===a.operator?[(0,s.gt)(n[o],a.value)]:"gte"===a.operator?[(0,s.gte)(n[o],a.value)]:[(0,s.eq)(n[o],a.value)]}let a=e.filter(e=>"AND"===e.connector||!e.connector),o=e.filter(e=>"OR"===e.connector),l=(0,s.and)(...a.map(e=>{let a=t({model:i,field:e.field});if("in"===e.operator){if(!Array.isArray(e.value))throw new r.BetterAuthError(`The value for the field "${e.field}" must be an array when using the "in" operator.`);return(0,s.inArray)(n[a],e.value)}if("not_in"===e.operator){if(!Array.isArray(e.value))throw new r.BetterAuthError(`The value for the field "${e.field}" must be an array when using the "not_in" operator.`);return(0,s.notInArray)(n[a],e.value)}return(0,s.eq)(n[a],e.value)})),d=(0,s.or)(...o.map(e=>{let r=t({model:i,field:e.field});return(0,s.eq)(n[r],e.value)})),c=[];return a.length&&c.push(l),o.length&&c.push(d),c}return{async create({model:t,data:i}){let n=u(t);if(!n)throw new r.BetterAuthError("Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.");for(let e in i)if(!n[e])throw new r.BetterAuthError(`The field "${e}" does not exist in the "${t}" schema. Please update your drizzle schema or re-generate using "npx @better-auth/cli generate".`);let s=e.insert(n).values(i);return await l(t,s,i)},async findOne({model:t,where:r}){let i=u(t),n=d(r,t),s=await e.select().from(i).where(...n);return s.length?s[0]:null},async findMany({model:r,where:i,sortBy:s,limit:a,offset:o}){let l=u(r),c=i?d(i,r):[],p=s?.direction==="desc"?n.desc:n.asc,f=e.select().from(l).limit(a||100).offset(o||0);return s?.field&&f.orderBy(p(l[t({model:r,field:s?.field})])),await f.where(...c)},async count({model:t,where:r}){let n=u(t),s=r?d(r,t):[];return(await e.select({count:i.sql`count(${i.sql.raw("*")})`.mapWith(Number)}).from(n).where(...s))[0].count},async update({model:t,where:r,update:i}){let n=u(t),s=d(r,t),a=e.update(n).set(i).where(...s);return await l(t,a,i,r)},async updateMany({model:t,where:r,update:i}){let n=u(t),s=d(r,t),a=e.update(n).set(i).where(...s);return await a},async delete({model:t,where:r}){let i=u(t),n=d(r,t),s=e.delete(i).where(...n);return await s},async deleteMany({model:t,where:r}){let i=u(t),n=d(r,t),s=e.delete(i).where(...n);return await s},options:a}},l=null;l={config:{adapterId:"drizzle",adapterName:"Drizzle Adapter",usePlural:a.usePlural??!1,debugLogs:a.debugLogs??!1,transaction:!!a.transaction&&(r=>e.transaction(e=>r((0,t.c)({config:l.config,adapter:u(e)})(o))))},adapter:u(e)};let d=(0,t.c)(l);return e=>(o=e,d(e))}},42836,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VerbatimString=void 0,r.VerbatimString=class extends String{format;constructor(e,t){super(t),this.format=e}}},28307,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MultiErrorReply=r.CommandTimeoutDuringMaintenanceError=r.SocketTimeoutDuringMaintenanceError=r.TimeoutError=r.BlobError=r.SimpleError=r.ErrorReply=r.ReconnectStrategyError=r.RootNodesUnavailableError=r.SocketClosedUnexpectedlyError=r.DisconnectsClientError=r.ClientOfflineError=r.ClientClosedError=r.SocketTimeoutError=r.ConnectionTimeoutError=r.WatchError=r.AbortError=void 0,r.AbortError=class extends Error{constructor(){super("The command was aborted")}},r.WatchError=class extends Error{constructor(e="One (or more) of the watched keys has been changed"){super(e)}},r.ConnectionTimeoutError=class extends Error{constructor(){super("Connection timeout")}},r.SocketTimeoutError=class extends Error{constructor(e){super(`Socket timeout timeout. Expecting data, but didn't receive any in ${e}ms.`)}},r.ClientClosedError=class extends Error{constructor(){super("The client is closed")}},r.ClientOfflineError=class extends Error{constructor(){super("The client is offline")}},r.DisconnectsClientError=class extends Error{constructor(){super("Disconnects client")}},r.SocketClosedUnexpectedlyError=class extends Error{constructor(){super("Socket closed unexpectedly")}},r.RootNodesUnavailableError=class extends Error{constructor(){super("All the root nodes are unavailable")}},r.ReconnectStrategyError=class extends Error{originalError;socketError;constructor(e,t){super(e.message),this.originalError=e,this.socketError=t}};class i extends Error{}r.ErrorReply=i,r.SimpleError=class extends i{},r.BlobError=class extends i{};class n extends Error{}r.TimeoutError=n,r.SocketTimeoutDuringMaintenanceError=class extends n{constructor(e){super(`Socket timeout during maintenance. Expecting data, but didn't receive any in ${e}ms.`)}},r.CommandTimeoutDuringMaintenanceError=class extends n{constructor(e){super(`Command timeout during maintenance. Waited to write command for more than ${e}ms.`)}},r.MultiErrorReply=class extends i{replies;errorIndexes;constructor(e,t){super(`${t.length} commands failed, see .replies and .errorIndexes for more information`),this.replies=e,this.errorIndexes=t}*errors(){for(let e of this.errorIndexes)yield this.replies[e]}}},79121,(e,t,r)=>{"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.Decoder=r.PUSH_TYPE_MAPPING=r.RESP_TYPES=void 0;let n=e.r(42836),s=e.r(28307);r.RESP_TYPES={NULL:95,BOOLEAN:35,NUMBER:58,BIG_NUMBER:40,DOUBLE:44,SIMPLE_STRING:43,BLOB_STRING:36,VERBATIM_STRING:61,SIMPLE_ERROR:45,BLOB_ERROR:33,ARRAY:42,SET:126,MAP:37,PUSH:62};let a={"\r":13,t:116,"+":43,"-":45,0:48,".":46,i:105,n:110,E:69,e:101};r.PUSH_TYPE_MAPPING={[r.RESP_TYPES.BLOB_STRING]:Buffer};class o{onReply;onErrorReply;onPush;getTypeMapping;#eb=0;#ev;constructor(e){this.onReply=e.onReply,this.onErrorReply=e.onErrorReply,this.onPush=e.onPush,this.getTypeMapping=e.getTypeMapping}reset(){this.#eb=0,this.#ev=void 0}write(e){if(this.#eb>=e.length||this.#ev&&(this.#ev(e)||this.#eb>=e.length)){this.#eb-=e.length;return}do{let t=e[this.#eb];if(++this.#eb===e.length){this.#ev=this.#eE.bind(this,t);break}if(this.#eS(t,e))break}while(this.#eb<e.length)this.#eb-=e.length}#eE(e,t){return this.#ev=void 0,this.#eS(e,t)}#eS(e,t){switch(e){case r.RESP_TYPES.NULL:return this.onReply(this.#eA()),!1;case r.RESP_TYPES.BOOLEAN:return this.#eT(this.onReply,this.#ew(t));case r.RESP_TYPES.NUMBER:return this.#eT(this.onReply,this.#eO(this.getTypeMapping()[r.RESP_TYPES.NUMBER],t));case r.RESP_TYPES.BIG_NUMBER:return this.#eT(this.onReply,this.#eR(this.getTypeMapping()[r.RESP_TYPES.BIG_NUMBER],t));case r.RESP_TYPES.DOUBLE:return this.#eT(this.onReply,this.#eI(this.getTypeMapping()[r.RESP_TYPES.DOUBLE],t));case r.RESP_TYPES.SIMPLE_STRING:return this.#eT(this.onReply,this.#eC(this.getTypeMapping()[r.RESP_TYPES.SIMPLE_STRING],t));case r.RESP_TYPES.BLOB_STRING:return this.#eT(this.onReply,this.#eN(this.getTypeMapping()[r.RESP_TYPES.BLOB_STRING],t));case r.RESP_TYPES.VERBATIM_STRING:return this.#eT(this.onReply,this.#eP(this.getTypeMapping()[r.RESP_TYPES.VERBATIM_STRING],t));case r.RESP_TYPES.SIMPLE_ERROR:return this.#eT(this.onErrorReply,this.#eD(t));case r.RESP_TYPES.BLOB_ERROR:return this.#eT(this.onErrorReply,this.#ex(t));case r.RESP_TYPES.ARRAY:return this.#eT(this.onReply,this.#eL(this.getTypeMapping(),t));case r.RESP_TYPES.SET:return this.#eT(this.onReply,this.#ek(this.getTypeMapping(),t));case r.RESP_TYPES.MAP:return this.#eT(this.onReply,this.#eM(this.getTypeMapping(),t));case r.RESP_TYPES.PUSH:return this.#eT(this.onPush,this.#eL(r.PUSH_TYPE_MAPPING,t));default:throw Error(`Unknown RESP type ${e} "${String.fromCharCode(e)}"`)}}#eT(e,t){return"function"==typeof t?(this.#ev=this.#e$.bind(this,e,t),!0):(e(t),!1)}#e$(e,t,r){return this.#ev=void 0,this.#eT(e,t(r))}#eA(){return this.#eb+=2,null}#ew(e){let t=e[this.#eb]===a.t;return this.#eb+=3,t}#eO(e,t){if(e===String)return this.#eC(String,t);switch(t[this.#eb]){case a["+"]:return this.#eU(!1,t);case a["-"]:return this.#eU(!0,t);default:return this.#ej(!1,this.#eB.bind(this,0),t)}}#eU(e,t){let r=this.#eB.bind(this,0);return++this.#eb===t.length?this.#ej.bind(this,e,r):this.#ej(e,r,t)}#ej(e,t,r){let i=t(r);return"function"==typeof i?this.#ej.bind(this,e,i):e?-i:i}#eB(e,t){let r=this.#eb;do{let i=t[r];if(i===a["\r"])return this.#eb=r+2,e;e=10*e+i-a["0"]}while(++r<t.length)return this.#eb=r,this.#eB.bind(this,e)}#eR(e,t){if(e===String)return this.#eC(String,t);switch(t[this.#eb]){case a["+"]:return this.#ez(!1,t);case a["-"]:return this.#ez(!0,t);default:return this.#eK(!1,this.#eY.bind(this,0n),t)}}#ez(e,t){let r=this.#eY.bind(this,0n);return++this.#eb===t.length?this.#eK.bind(this,e,r):this.#eK(e,r,t)}#eK(e,t,r){let i=t(r);return"function"==typeof i?this.#eK.bind(this,e,i):e?-i:i}#eY(e,t){let r=this.#eb;do{let i=t[r];if(i===a["\r"])return this.#eb=r+2,e;e=10n*e+BigInt(i-a["0"])}while(++r<t.length)return this.#eb=r,this.#eY.bind(this,e)}#eI(e,t){if(e===String)return this.#eC(String,t);switch(t[this.#eb]){case a.n:return this.#eb+=5,NaN;case a["+"]:return this.#eF(!1,t);case a["-"]:return this.#eF(!0,t);default:return this.#eq(!1,0,t)}}#eF(e,t){return++this.#eb===t.length?this.#eq.bind(this,e,0):this.#eq(e,0,t)}#eq(e,t,r){return r[this.#eb]===a.i?(this.#eb+=5,e?-1/0:1/0):this.#eV(e,t,r)}#eV(e,t,r){let i=this.#eb;do{let n=r[i];switch(n){case a["."]:return this.#eb=i+1,this.#eb<r.length?this.#eG(e,0,t,r):this.#eG.bind(this,e,0,t);case a.E:case a.e:this.#eb=i+1;let s=e?-t:t;return this.#eb<r.length?this.#eH(s,r):this.#eH.bind(this,s);case a["\r"]:return this.#eb=i+2,e?-t:t;default:t=10*t+n-a["0"]}}while(++i<r.length)return this.#eb=i,this.#eV.bind(this,e,t)}static #eZ=[.1,.01,.001,1e-4,1e-5,1e-6,1e-7,1e-8,1e-9,1e-10,1e-11,1e-12,1e-13,1e-14,1e-15,1e-16,1e-17];#eG(e,t,r,n){let s=this.#eb;do{let o=n[s];switch(o){case a.E:case a.e:this.#eb=s+1;let u=e?-r:r;return this.#eb===n.length?this.#eH.bind(this,u):this.#eH(u,n);case a["\r"]:return this.#eb=s+2,e?-r:r}t<i.#eZ.length&&(r+=(o-a["0"])*i.#eZ[t++])}while(++s<n.length)return this.#eb=s,this.#eG.bind(this,e,t,r)}#eH(e,t){switch(t[this.#eb]){case a["+"]:return++this.#eb===t.length?this.#eW.bind(this,!1,e,0):this.#eW(!1,e,0,t);case a["-"]:return++this.#eb===t.length?this.#eW.bind(this,!0,e,0):this.#eW(!0,e,0,t)}return this.#eW(!1,e,0,t)}#eW(e,t,r,i){let n=this.#eb;do{let s=i[n];if(s===a["\r"])return this.#eb=n+2,t*10**(e?-r:r);r=10*r+s-a["0"]}while(++n<i.length)return this.#eb=n,this.#eW.bind(this,e,t,r)}#eQ(e,t){for(;e[t]!==a["\r"];)if(++t===e.length)return this.#eb=e.length,-1;return this.#eb=t+2,t}#eC(e,t){let r=this.#eb,i=this.#eQ(t,r);if(-1===i)return this.#eJ.bind(this,[t.subarray(r)],e);let n=t.subarray(r,i);return e===Buffer?n:n.toString()}#eJ(e,t,r){let i=this.#eb,n=this.#eQ(r,i);if(-1===n)return e.push(r.subarray(i)),this.#eJ.bind(this,e,t);e.push(r.subarray(i,n));let s=Buffer.concat(e);return t===Buffer?s:s.toString()}#eN(e,t){if(t[this.#eb]===a["-"])return this.#eb+=4,null;let r=this.#eB(0,t);return"function"==typeof r?this.#eX.bind(this,r,e):this.#eb>=t.length?this.#e0.bind(this,r,e):this.#e0(r,e,t)}#eX(e,t,r){let i=e(r);return"function"==typeof i?this.#eX.bind(this,i,t):this.#eb>=r.length?this.#e0.bind(this,i,t):this.#e0(i,t,r)}#e1(e,t,r,i){let n=this.#eb+e;if(n>=i.length){let n=i.subarray(this.#eb);return this.#eb=i.length,this.#e4.bind(this,e-n.length,[n],t,r)}let s=i.subarray(this.#eb,n);return this.#eb=n+t,r===Buffer?s:s.toString()}#e4(e,t,r,i,n){let s=this.#eb+e;if(s>=n.length){let s=n.subarray(this.#eb);return t.push(s),this.#eb=n.length,this.#e4.bind(this,e-s.length,t,r,i)}t.push(n.subarray(this.#eb,s)),this.#eb=s+r;let a=Buffer.concat(t);return i===Buffer?a:a.toString()}#e0(e,t,r){return this.#e1(e,2,t,r)}#eP(e,t){return this.#e2(this.#eB.bind(this,0),e,t)}#e2(e,t,r){let i=e(r);return"function"==typeof i?this.#e2.bind(this,i,t):this.#e6(i,t,r)}#e6(e,t,r){let i=e-4;return t===n.VerbatimString?this.#e3(i,r):(this.#eb+=4,this.#eb>=r.length?this.#e0.bind(this,i,t):this.#e0(i,t,r))}#e3(e,t){let r=this.#e1.bind(this,3,1,String);return this.#eb>=t.length?this.#e5.bind(this,e,r):this.#e5(e,r,t)}#e5(e,t,r){let i=t(r);return"function"==typeof i?this.#e5.bind(this,e,i):this.#e8(e,i,r)}#e8(e,t,r){return this.#e9(t,this.#e0.bind(this,e,String),r)}#e9(e,t,r){let i=t(r);return"function"==typeof i?this.#e9.bind(this,e,i):new n.VerbatimString(e,i)}#eD(e){let t=this.#eC(String,e);return"function"==typeof t?this.#e7.bind(this,t):new s.SimpleError(t)}#e7(e,t){let r=e(t);return"function"==typeof r?this.#e7.bind(this,r):new s.SimpleError(r)}#ex(e){let t=this.#eN(String,e);return"function"==typeof t?this.#te.bind(this,t):new s.BlobError(t)}#te(e,t){let r=e(t);return"function"==typeof r?this.#te.bind(this,r):new s.BlobError(r)}#tt(e,t){let r=t[this.#eb];return++this.#eb===t.length?this.#tr.bind(this,r,e):this.#tr(r,e,t)}#tr(e,t,i){switch(e){case r.RESP_TYPES.NULL:return this.#eA();case r.RESP_TYPES.BOOLEAN:return this.#ew(i);case r.RESP_TYPES.NUMBER:return this.#eO(t[r.RESP_TYPES.NUMBER],i);case r.RESP_TYPES.BIG_NUMBER:return this.#eR(t[r.RESP_TYPES.BIG_NUMBER],i);case r.RESP_TYPES.DOUBLE:return this.#eI(t[r.RESP_TYPES.DOUBLE],i);case r.RESP_TYPES.SIMPLE_STRING:return this.#eC(t[r.RESP_TYPES.SIMPLE_STRING],i);case r.RESP_TYPES.BLOB_STRING:return this.#eN(t[r.RESP_TYPES.BLOB_STRING],i);case r.RESP_TYPES.VERBATIM_STRING:return this.#eP(t[r.RESP_TYPES.VERBATIM_STRING],i);case r.RESP_TYPES.SIMPLE_ERROR:return this.#eD(i);case r.RESP_TYPES.BLOB_ERROR:return this.#ex(i);case r.RESP_TYPES.ARRAY:return this.#eL(t,i);case r.RESP_TYPES.SET:return this.#ek(t,i);case r.RESP_TYPES.MAP:return this.#eM(t,i);default:throw Error(`Unknown RESP type ${e} "${String.fromCharCode(e)}"`)}}#eL(e,t){return t[this.#eb]===a["-"]?(this.#eb+=4,null):this.#ti(this.#eB(0,t),e,t)}#ti(e,t,r){return"function"==typeof e?this.#tn.bind(this,e,t):this.#ts(Array(e),0,t,r)}#tn(e,t,r){return this.#ti(e(r),t,r)}#ts(e,t,r,i){for(let n=t;n<e.length;n++){if(this.#eb>=i.length)return this.#ts.bind(this,e,n,r);let t=this.#tt(r,i);if("function"==typeof t)return this.#ta.bind(this,e,n,t,r);e[n]=t}return e}#ta(e,t,r,i,n){let s=r(n);return"function"==typeof s?this.#ta.bind(this,e,t,s,i):(e[t++]=s,this.#ts(e,t,i,n))}#ek(e,t){let r=this.#eB(0,t);return"function"==typeof r?this.#to.bind(this,r,e):this.#tu(r,e,t)}#to(e,t,r){let i=e(r);return"function"==typeof i?this.#to.bind(this,i,t):this.#tu(i,t,r)}#tu(e,t,i){return t[r.RESP_TYPES.SET]===Set?this.#tl(new Set,e,t,i):this.#ts(Array(e),0,t,i)}#tl(e,t,r,i){for(;t>0;){if(this.#eb>=i.length)return this.#tl.bind(this,e,t,r);let n=this.#tt(r,i);if("function"==typeof n)return this.#td.bind(this,e,t,n,r);e.add(n),--t}return e}#td(e,t,r,i,n){let s=r(n);return"function"==typeof s?this.#td.bind(this,e,t,s,i):(e.add(s),this.#tl(e,t-1,i,n))}#eM(e,t){let r=this.#eB(0,t);return"function"==typeof r?this.#tc.bind(this,r,e):this.#tp(r,e,t)}#tc(e,t,r){let i=e(r);return"function"==typeof i?this.#tc.bind(this,i,t):this.#tp(i,t,r)}#tp(e,t,i){switch(t[r.RESP_TYPES.MAP]){case Map:return this.#tf(new Map,e,t,i);case Array:return this.#ts(Array(2*e),0,t,i);default:return this.#th(Object.create(null),e,t,i)}}#tf(e,t,r,i){for(;t>0;){if(this.#eb>=i.length)return this.#tf.bind(this,e,t,r);let n=this.#tm(r,i);if("function"==typeof n)return this.#ty.bind(this,e,t,n,r);if(this.#eb>=i.length)return this.#tg.bind(this,e,t,n,this.#tt.bind(this,r),r);let s=this.#tt(r,i);if("function"==typeof s)return this.#tg.bind(this,e,t,n,s,r);e.set(n,s),--t}return e}#tm(e,t){let r=t[this.#eb];return++this.#eb===t.length?this.#t_.bind(this,r,e):this.#t_(r,e,t)}#t_(e,t,i){switch(e){case r.RESP_TYPES.SIMPLE_STRING:return this.#eC(String,i);case r.RESP_TYPES.BLOB_STRING:return this.#eN(String,i);default:return this.#tr(e,t,i)}}#ty(e,t,r,i,n){let s=r(n);if("function"==typeof s)return this.#ty.bind(this,e,t,s,i);if(this.#eb>=n.length)return this.#tg.bind(this,e,t,s,this.#tt.bind(this,i),i);let a=this.#tt(i,n);return"function"==typeof a?this.#tg.bind(this,e,t,s,a,i):(e.set(s,a),this.#tf(e,t-1,i,n))}#tg(e,t,r,i,n,s){let a=i(s);return"function"==typeof a?this.#tg.bind(this,e,t,r,a,n):(e.set(r,a),this.#tf(e,t-1,n,s))}#th(e,t,r,i){for(;t>0;){if(this.#eb>=i.length)return this.#th.bind(this,e,t,r);let n=this.#tm(r,i);if("function"==typeof n)return this.#tb.bind(this,e,t,n,r);if(this.#eb>=i.length)return this.#tv.bind(this,e,t,n,this.#tt.bind(this,r),r);let s=this.#tt(r,i);if("function"==typeof s)return this.#tv.bind(this,e,t,n,s,r);e[n]=s,--t}return e}#tb(e,t,r,i,n){let s=r(n);if("function"==typeof s)return this.#tb.bind(this,e,t,s,i);if(this.#eb>=n.length)return this.#tv.bind(this,e,t,s,this.#tt.bind(this,i),i);let a=this.#tt(i,n);return"function"==typeof a?this.#tv.bind(this,e,t,s,a,i):(e[s]=a,this.#th(e,t-1,i,n))}#tv(e,t,r,i,n,s){let a=i(s);return"function"==typeof a?this.#tv.bind(this,e,t,r,a,n):(e[r]=a,this.#th(e,t-1,n,s))}}r.Decoder=o,i=o},49638,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.scriptSha1=r.defineScript=void 0;let i=e.r(66680);function n(e){return(0,i.createHash)("sha1").update(e).digest("hex")}r.defineScript=function(e){return{...e,SHA1:n(e.SCRIPT)}},r.scriptSha1=n},20623,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ACL","CAT"),t&&e.push(t)},transformReply:void 0}},47491,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ACL","DELUSER"),e.pushVariadic(t)},transformReply:void 0}},9655,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("ACL","DRYRUN",t,...r)},transformReply:void 0}},48712,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ACL","GENPASS"),t&&e.push(t.toString())},transformReply:void 0}},64102,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ACL","GETUSER",t)},transformReply:{2:e=>({flags:e[1],passwords:e[3],commands:e[5],keys:e[7],channels:e[9],selectors:e[11]?.map(e=>({commands:e[1],keys:e[3],channels:e[5]}))}),3:void 0}}},55463,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("ACL","LIST")},transformReply:void 0}},14815,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("ACL","LOAD")},transformReply:void 0}},59369,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BasicCommandParser=void 0,r.BasicCommandParser=class{#tE=[];#tS=[];preserve;get redisArgs(){return this.#tE}get keys(){return this.#tS}get firstKey(){return this.#tS[0]}get cacheKey(){let e=Array(2*this.#tE.length);for(let t=0;t<this.#tE.length;t++)e[t]=this.#tE[t].length,e[t+this.#tE.length]=this.#tE[t];return e.join("_")}push(...e){this.#tE.push(...e)}pushVariadic(e){if(Array.isArray(e))for(let t of e)this.push(t);else this.push(e)}pushVariadicWithLength(e){Array.isArray(e)?this.#tE.push(e.length.toString()):this.#tE.push("1"),this.pushVariadic(e)}pushVariadicNumber(e){if(Array.isArray(e))for(let t of e)this.push(t.toString());else this.push(e.toString())}pushKey(e){this.#tS.push(e),this.#tE.push(e)}pushKeysLength(e){Array.isArray(e)?this.#tE.push(e.length.toString()):this.#tE.push("1"),this.pushKeys(e)}pushKeys(e){Array.isArray(e)?(this.#tS.push(...e),this.#tE.push(...e)):(this.#tS.push(e),this.#tE.push(e))}}},52135,(e,t,r)=>{"use strict";var i,n,s;Object.defineProperty(r,"__esModule",{value:!0}),r.transformRedisJsonNullReply=r.transformRedisJsonReply=r.transformRedisJsonArgument=r.transformStreamsMessagesReplyResp3=r.transformStreamsMessagesReplyResp2=r.transformStreamMessagesReply=r.transformStreamMessageNullReply=r.transformStreamMessageReply=r.parseArgs=r.parseZKeysArguments=r.transformRangeReply=r.parseSlotRangesArguments=r.transformFunctionListItemReply=r.RedisFunctionFlags=r.transformCommandReply=r.CommandCategories=r.CommandFlags=r.parseOptionalVariadicArgument=r.pushVariadicArgument=r.pushVariadicNumberArguments=r.pushVariadicArguments=r.pushEvalArguments=r.evalFirstKeyIndex=r.transformPXAT=r.transformEXAT=r.transformSortedSetReply=r.transformTuplesReply=r.createTransformTuplesReplyFunc=r.transformTuplesToMap=r.transformNullableDoubleReply=r.createTransformNullableDoubleReplyResp2Func=r.transformDoubleArrayReply=r.createTransformDoubleReplyResp2Func=r.transformDoubleReply=r.transformStringDoubleArgument=r.transformDoubleArgument=r.transformBooleanArrayReply=r.transformBooleanReply=r.isArrayReply=r.isNullReply=void 0;let a=e.r(59369),o=e.r(79121);function u(e){return null===e}function l(e){switch(e){case 1/0:return"+inf";case-1/0:return"-inf";default:return e.toString()}}function d(e,t){return i=>r.transformDoubleReply[2](i,e,t)}function c(e,t,r){switch(r?r[o.RESP_TYPES.MAP]:void 0){case Array:return e;case Map:{let t=new Map;for(let r=0;r<e.length;r+=2)t.set(e[r].toString(),e[r+1]);return t}default:{let t=Object.create(null);for(let r=0;r<e.length;r+=2)t[e[r].toString()]=e[r+1];return t}}}function p(e,t){e.push(t.start.toString(),t.end.toString())}function f(e){return"string"==typeof e||e instanceof Buffer}function h(e,t){let[r,i]=t;return{id:r,message:c(i,void 0,e)}}function m(e,t){return e.map(h.bind(void 0,t))}function y(e){return JSON.parse(e.toString())}r.isNullReply=u,r.isArrayReply=function(e){return Array.isArray(e)},r.transformBooleanReply={2:e=>1===e,3:void 0},r.transformBooleanArrayReply={2:e=>e.map(r.transformBooleanReply[2]),3:void 0},r.transformDoubleArgument=l,r.transformStringDoubleArgument=function(e){return"number"!=typeof e?e:l(e)},r.transformDoubleReply={2:(e,t,r)=>{if((r?r[o.RESP_TYPES.DOUBLE]:void 0)===String)return e;{let t;switch(e.toString()){case"inf":case"+inf":t=1/0;case"-inf":t=-1/0;case"nan":t=NaN;default:t=Number(e)}return t}},3:void 0},r.createTransformDoubleReplyResp2Func=d,r.transformDoubleArrayReply={2:(e,t,r)=>e.map(d(t,r)),3:void 0},r.createTransformNullableDoubleReplyResp2Func=function(e,t){return i=>r.transformNullableDoubleReply[2](i,e,t)},r.transformNullableDoubleReply={2:(e,t,i)=>null===e?null:r.transformDoubleReply[2](e,t,i),3:void 0},r.transformTuplesToMap=function(e,t){let r=Object.create(null);for(let i=0;i<e.length;i+=2)r[e[i].toString()]=t(e[i+1]);return r},r.createTransformTuplesReplyFunc=function(e,t){return r=>c(r,e,t)},r.transformTuplesReply=c,r.transformSortedSetReply={2:(e,t,i)=>{let n=[];for(let s=0;s<e.length;s+=2)n.push({value:e[s],score:r.transformDoubleReply[2](e[s+1],t,i)});return n},3:e=>e.map(e=>{let[t,r]=e;return{value:t,score:r}})},r.transformEXAT=function(e){return("number"==typeof e?e:Math.floor(e.getTime()/1e3)).toString()},r.transformPXAT=function(e){return("number"==typeof e?e:e.getTime()).toString()},r.evalFirstKeyIndex=function(e){return e?.keys?.[0]},r.pushEvalArguments=function(e,t){return t?.keys?e.push(t.keys.length.toString(),...t.keys):e.push("0"),t?.arguments&&e.push(...t.arguments),e},r.pushVariadicArguments=function(e,t){return Array.isArray(t)?e=e.concat(t):e.push(t),e},r.pushVariadicNumberArguments=function(e,t){if(Array.isArray(t))for(let r of t)e.push(r.toString());else e.push(t.toString());return e},r.pushVariadicArgument=function(e,t){return Array.isArray(t)?e.push(t.length.toString(),...t):e.push("1",t),e},r.parseOptionalVariadicArgument=function(e,t,r){void 0!==r&&(e.push(t),e.pushVariadicWithLength(r))},function(e){e.WRITE="write",e.READONLY="readonly",e.DENYOOM="denyoom",e.ADMIN="admin",e.PUBSUB="pubsub",e.NOSCRIPT="noscript",e.RANDOM="random",e.SORT_FOR_SCRIPT="sort_for_script",e.LOADING="loading",e.STALE="stale",e.SKIP_MONITOR="skip_monitor",e.ASKING="asking",e.FAST="fast",e.MOVABLEKEYS="movablekeys"}(i||(r.CommandFlags=i={})),function(e){e.KEYSPACE="@keyspace",e.READ="@read",e.WRITE="@write",e.SET="@set",e.SORTEDSET="@sortedset",e.LIST="@list",e.HASH="@hash",e.STRING="@string",e.BITMAP="@bitmap",e.HYPERLOGLOG="@hyperloglog",e.GEO="@geo",e.STREAM="@stream",e.PUBSUB="@pubsub",e.ADMIN="@admin",e.FAST="@fast",e.SLOW="@slow",e.BLOCKING="@blocking",e.DANGEROUS="@dangerous",e.CONNECTION="@connection",e.TRANSACTION="@transaction",e.SCRIPTING="@scripting"}(n||(r.CommandCategories=n={})),r.transformCommandReply=function([e,t,r,i,n,s,a]){return{name:e,arity:t,flags:new Set(r),firstKeyIndex:i,lastKeyIndex:n,step:s,categories:new Set(a)}},function(e){e.NO_WRITES="no-writes",e.ALLOW_OOM="allow-oom",e.ALLOW_STALE="allow-stale",e.NO_CLUSTER="no-cluster"}(s||(r.RedisFunctionFlags=s={})),r.transformFunctionListItemReply=function(e){return{libraryName:e[1],engine:e[3],functions:e[5].map(e=>({name:e[1],description:e[3],flags:e[5]}))}},r.parseSlotRangesArguments=function(e,t){if(Array.isArray(t))for(let r of t)p(e,r);else p(e,t)},r.transformRangeReply=function([e,t]){return{start:e,end:t}},r.parseZKeysArguments=function(e,t){if(Array.isArray(t)){if(e.push(t.length.toString()),t.length)if(f(t[0]))e.pushKeys(t);else{for(let r=0;r<t.length;r++)e.pushKey(t[r].key);e.push("WEIGHTS");for(let r=0;r<t.length;r++)e.push(l(t[r].weight))}}else e.push("1"),f(t)?e.pushKey(t):(e.pushKey(t.key),e.push("WEIGHTS",l(t.weight)))},r.parseArgs=function(e,...t){let r=new a.BasicCommandParser;e.parseCommand(r,...t);let i=r.redisArgs;return r.preserve&&(i.preserve=r.preserve),i},r.transformStreamMessageReply=h,r.transformStreamMessageNullReply=function(e,t){return u(t)?t:h(e,t)},r.transformStreamMessagesReply=m,r.transformStreamsMessagesReplyResp2=function(e,t,r){if(null===e)return null;r&&r[o.RESP_TYPES.MAP];{let t=[];for(let r=0;r<e.length;r++){let i=e[r];t.push({name:i[0],messages:m(i[1])})}return t}},r.transformStreamsMessagesReplyResp3=function(e){if(null===e)return null;if(e instanceof Map){let t=new Map;for(let[r,i]of e)t.set(r.toString(),m(i));return t}if(e instanceof Array){let t=[];for(let r=0;r<e.length;r+=2){let i=e[r],n=e[r+1];t.push(i),t.push(m(n))}return t}{let t=Object.create(null);for(let[r,i]of Object.entries(e))t[r]=m(i);return t}},r.transformRedisJsonArgument=function(e){return JSON.stringify(e)},r.transformRedisJsonReply=y,r.transformRedisJsonNullReply=function(e){return u(e)?e:y(e)}},97473,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ACL","LOG"),void 0!=t&&e.push(t.toString())},transformReply:{2:(e,t,r)=>e.map(e=>({count:e[1],reason:e[3],context:e[5],object:e[7],username:e[9],"age-seconds":i.transformDoubleReply[2](e[11],t,r),"client-info":e[13],"entry-id":e[15],"timestamp-created":e[17],"timestamp-last-updated":e[19]})),3:void 0}}},7482,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:i(e.r(97473)).default.IS_READ_ONLY,parseCommand(e){e.push("ACL","LOG","RESET")},transformReply:void 0}},197,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("ACL","SAVE")},transformReply:void 0}},40305,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("ACL","SETUSER",t),e.pushVariadic(r)},transformReply:void 0}},85002,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("ACL","USERS")},transformReply:void 0}},70221,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("ACL","WHOAMI")},transformReply:void 0}},11390,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("APPEND",t,r)},transformReply:void 0}},31916,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ASKING_CMD=void 0,r.ASKING_CMD="ASKING",r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push(r.ASKING_CMD)},transformReply:void 0}},69079,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,{username:t,password:r}){e.push("AUTH"),void 0!==t&&e.push(t),e.push(r)},transformReply:void 0}},3562,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("BGREWRITEAOF")},transformReply:void 0}},64264,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("BGSAVE"),t?.SCHEDULE&&e.push("SCHEDULE")},transformReply:void 0}},92385,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("BITCOUNT"),e.pushKey(t),r&&(e.push(r.start.toString()),e.push(r.end.toString()),r.mode&&e.push(r.mode))},transformReply:void 0}},25704,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){for(let i of(e.push("BITFIELD_RO"),e.pushKey(t),r))e.push("GET"),e.push(i.encoding),e.push(i.offset.toString())},transformReply:void 0}},37706,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){for(let i of(e.push("BITFIELD"),e.pushKey(t),r))switch(i.operation){case"GET":e.push("GET",i.encoding,i.offset.toString());break;case"SET":e.push("SET",i.encoding,i.offset.toString(),i.value.toString());break;case"INCRBY":e.push("INCRBY",i.encoding,i.offset.toString(),i.increment.toString());break;case"OVERFLOW":e.push("OVERFLOW",i.behavior)}},transformReply:void 0}},56036,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("BITOP",t),e.pushKey(r),e.pushKeys(i)},transformReply:void 0}},12611,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i,n,s){e.push("BITPOS"),e.pushKey(t),e.push(r.toString()),void 0!==i&&e.push(i.toString()),void 0!==n&&e.push(n.toString()),s&&e.push(s)},transformReply:void 0}},77990,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i,n,s){e.push("BLMOVE"),e.pushKeys([t,r]),e.push(i,n,s.toString())},transformReply:void 0}},77964,(e,t,r)=>{"use strict";function i(e,t,r,i){e.pushKeysLength(t),e.push(r),i?.COUNT!==void 0&&e.push("COUNT",i.COUNT.toString())}Object.defineProperty(r,"__esModule",{value:!0}),r.parseLMPopArguments=void 0,r.parseLMPopArguments=i,r.default={IS_READ_ONLY:!1,parseCommand(e,...t){e.push("LMPOP"),i(e,...t)},transformReply:void 0}},13494,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(77964));r.default={IS_READ_ONLY:!1,parseCommand(e,t,...r){e.push("BLMPOP",t.toString()),(0,a.parseLMPopArguments)(e,...r)},transformReply:a.default.transformReply}},56233,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("BLPOP"),e.pushKeys(t),e.push(r.toString())},transformReply:e=>null===e?null:{key:e[0],element:e[1]}}},24243,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("BRPOP"),e.pushKeys(t),e.push(r.toString())},transformReply:i(e.r(56233)).default.transformReply}},41622,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("BRPOPLPUSH"),e.pushKeys([t,r]),e.push(i.toString())},transformReply:void 0}},95272,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseZMPopArguments=void 0;let i=e.r(52135);function n(e,t,r,i){e.pushKeysLength(t),e.push(r),i?.COUNT&&e.push("COUNT",i.COUNT.toString())}r.parseZMPopArguments=n,r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("ZMPOP"),n(e,t,r,i)},transformReply:{2:(e,t,r)=>null===e?null:{key:e[0],members:e[1].map(e=>{let[n,s]=e;return{value:n,score:i.transformDoubleReply[2](s,t,r)}})},3:e=>null===e?null:{key:e[0],members:i.transformSortedSetReply[3](e[1])}}}},43039,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(95272));r.default={IS_READ_ONLY:!1,parseCommand(e,t,...r){e.push("BZMPOP",t.toString()),(0,a.parseZMPopArguments)(e,...r)},transformReply:a.default.transformReply}},18738,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("BZPOPMAX"),e.pushKeys(t),e.push(r.toString())},transformReply:{2:(e,t,r)=>null===e?null:{key:e[0],value:e[1],score:i.transformDoubleReply[2](e[2],t,r)},3:e=>null===e?null:{key:e[0],value:e[1],score:e[2]}}}},95530,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(18738));r.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(e,t,r){e.push("BZPOPMIN"),e.pushKeys(t),e.push(r.toString())},transformReply:n.default.transformReply}},37569,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLIENT","CACHING",t?"YES":"NO")},transformReply:void 0}},49324,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLIENT","GETNAME")},transformReply:void 0}},30315,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLIENT","GETREDIR")},transformReply:void 0}},50566,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLIENT","ID")},transformReply:void 0}},72352,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=/([^\s=]+)=([^\s]*)/g;r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLIENT","INFO")},transformReply(e){let t={};for(let r of e.toString().matchAll(i))t[r[1]]=r[2];let r={id:Number(t.id),addr:t.addr,fd:Number(t.fd),name:t.name,age:Number(t.age),idle:Number(t.idle),flags:t.flags,db:Number(t.db),sub:Number(t.sub),psub:Number(t.psub),multi:Number(t.multi),qbuf:Number(t.qbuf),qbufFree:Number(t["qbuf-free"]),argvMem:Number(t["argv-mem"]),obl:Number(t.obl),oll:Number(t.oll),omem:Number(t.omem),totMem:Number(t["tot-mem"]),events:t.events,cmd:t.cmd,user:t.user,libName:t["lib-name"],libVer:t["lib-ver"]};return void 0!==t.laddr&&(r.laddr=t.laddr),void 0!==t.redir&&(r.redir=Number(t.redir)),void 0!==t.ssub&&(r.ssub=Number(t.ssub)),void 0!==t["multi-mem"]&&(r.multiMem=Number(t["multi-mem"])),void 0!==t.resp&&(r.resp=Number(t.resp)),r}}},42431,(e,t,r)=>{"use strict";function i(e,t){if(t===r.CLIENT_KILL_FILTERS.SKIP_ME)return void e.push("SKIPME");switch(e.push(t.filter),t.filter){case r.CLIENT_KILL_FILTERS.ADDRESS:e.push(t.address);break;case r.CLIENT_KILL_FILTERS.LOCAL_ADDRESS:e.push(t.localAddress);break;case r.CLIENT_KILL_FILTERS.ID:e.push("number"==typeof t.id?t.id.toString():t.id);break;case r.CLIENT_KILL_FILTERS.TYPE:e.push(t.type);break;case r.CLIENT_KILL_FILTERS.USER:e.push(t.username);break;case r.CLIENT_KILL_FILTERS.SKIP_ME:e.push(t.skipMe?"yes":"no");break;case r.CLIENT_KILL_FILTERS.MAXAGE:e.push(t.maxAge.toString())}}Object.defineProperty(r,"__esModule",{value:!0}),r.CLIENT_KILL_FILTERS=void 0,r.CLIENT_KILL_FILTERS={ADDRESS:"ADDR",LOCAL_ADDRESS:"LADDR",ID:"ID",TYPE:"TYPE",USER:"USER",SKIP_ME:"SKIPME",MAXAGE:"MAXAGE"},r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){if(e.push("CLIENT","KILL"),Array.isArray(t))for(let r of t)i(e,r);else i(e,t)},transformReply:void 0}},32568,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(72352));r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLIENT","LIST"),t&&(void 0!==t.TYPE?e.push("TYPE",t.TYPE):(e.push("ID"),e.pushVariadic(t.ID)))},transformReply(e){let t=e.toString().split("\n"),r=t.length-1,i=[];for(let e=0;e<r;e++)i.push(n.default.transformReply(t[e]));return i}}},36311,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLIENT","NO-EVICT",t?"ON":"OFF")},transformReply:void 0}},11613,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLIENT","NO-TOUCH",t?"ON":"OFF")},transformReply:void 0}},70691,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("CLIENT","PAUSE",t.toString()),r&&e.push(r)},transformReply:void 0}},67109,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLIENT","SETNAME",t)},transformReply:void 0}},78239,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){if(e.push("CLIENT","TRACKING",t?"ON":"OFF"),t){var i,n,s;if(r?.REDIRECT&&e.push("REDIRECT",r.REDIRECT.toString()),i=r,i?.BCAST===!0){if(e.push("BCAST"),r?.PREFIX)if(Array.isArray(r.PREFIX))for(let t of r.PREFIX)e.push("PREFIX",t);else e.push("PREFIX",r.PREFIX)}else{(n=r,n?.OPTIN===!0)?e.push("OPTIN"):(s=r,s?.OPTOUT===!0&&e.push("OPTOUT"))}r?.NOLOOP&&e.push("NOLOOP")}},transformReply:void 0}},46940,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLIENT","TRACKINGINFO")},transformReply:{2:e=>({flags:e[1],redirect:e[3],prefixes:e[5]}),3:void 0}}},88744,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLIENT","UNPAUSE")},transformReply:void 0}},99107,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","ADDSLOTS"),e.pushVariadicNumber(t)},transformReply:void 0}},48744,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","ADDSLOTSRANGE"),(0,i.parseSlotRangesArguments)(e,t)},transformReply:void 0}},45505,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","BUMPEPOCH")},transformReply:void 0}},91430,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","COUNT-FAILURE-REPORTS",t)},transformReply:void 0}},28886,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","COUNTKEYSINSLOT",t.toString())},transformReply:void 0}},23791,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","DELSLOTS"),e.pushVariadicNumber(t)},transformReply:void 0}},80111,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","DELSLOTSRANGE"),(0,i.parseSlotRangesArguments)(e,t)},transformReply:void 0}},65671,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FAILOVER_MODES=void 0,r.FAILOVER_MODES={FORCE:"FORCE",TAKEOVER:"TAKEOVER"},r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","FAILOVER"),t?.mode&&e.push(t.mode)},transformReply:void 0}},3259,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","FLUSHSLOTS")},transformReply:void 0}},57103,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","FORGET",t)},transformReply:void 0}},50563,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("CLUSTER","GETKEYSINSLOT",t.toString(),r.toString())},transformReply:void 0}},67883,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","INFO")},transformReply:void 0}},7662,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","KEYSLOT",t)},transformReply:void 0}},90119,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","LINKS")},transformReply:{2:e=>e.map(e=>({direction:e[1],node:e[3],"create-time":e[5],events:e[7],"send-buffer-allocated":e[9],"send-buffer-used":e[11]})),3:void 0}}},5712,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("CLUSTER","MEET",t,r.toString())},transformReply:void 0}},36116,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","MYID")},transformReply:void 0}},14448,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","MYSHARDID")},transformReply:void 0}},26700,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","NODES")},transformReply:void 0}},70569,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","REPLICAS",t)},transformReply:void 0}},38562,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","REPLICATE",t)},transformReply:void 0}},15528,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","RESET"),t?.mode&&e.push(t.mode)},transformReply:void 0}},49200,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","SAVECONFIG")},transformReply:void 0}},87934,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","SET-CONFIG-EPOCH",t.toString())},transformReply:void 0}},37295,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CLUSTER_SLOT_STATES=void 0,r.CLUSTER_SLOT_STATES={IMPORTING:"IMPORTING",MIGRATING:"MIGRATING",STABLE:"STABLE",NODE:"NODE"},r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("CLUSTER","SETSLOT",t.toString(),r),i&&e.push(i)},transformReply:void 0}},939,(e,t,r)=>{"use strict";function i(e){let[t,r,i]=e;return{host:t,port:r,id:i}}Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","SLOTS")},transformReply:e=>e.map(([e,t,r,...n])=>({from:e,to:t,master:i(r),replicas:n.map(i)}))}},91759,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("COMMAND","COUNT")},transformReply:void 0}},14919,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("COMMAND","GETKEYS"),e.push(...t)},transformReply:void 0}},11386,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("COMMAND","GETKEYSANDFLAGS"),e.push(...t)},transformReply:e=>e.map(e=>{let[t,r]=e;return{key:t,flags:r}})}},85601,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("COMMAND","INFO",...t)},transformReply:e=>e.map(e=>e?(0,i.transformCommandReply)(e):null)}},41977,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.COMMAND_LIST_FILTER_BY=void 0,r.COMMAND_LIST_FILTER_BY={MODULE:"MODULE",ACLCAT:"ACLCAT",PATTERN:"PATTERN"},r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("COMMAND","LIST"),t?.FILTERBY&&e.push("FILTERBY",t.FILTERBY.type,t.FILTERBY.value)},transformReply:void 0}},24192,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("COMMAND")},transformReply:e=>e.map(i.transformCommandReply)}},61997,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CONFIG","GET"),e.pushVariadic(t)},transformReply:{2:e.r(52135).transformTuplesReply,3:void 0}}},48164,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CONFIG","RESETSTAT")},transformReply:void 0}},31715,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CONFIG","REWRITE")},transformReply:void 0}},20591,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,...[t,r]){if(e.push("CONFIG","SET"),"string"==typeof t||t instanceof Buffer)e.push(t,r);else for(let[r,i]of Object.entries(t))e.push(r,i)},transformReply:void 0}},85877,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("COPY"),e.pushKeys([t,r]),i?.DB&&e.push("DB",i.DB.toString()),i?.REPLACE&&e.push("REPLACE")},transformReply:void 0}},8628,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("DBSIZE")},transformReply:void 0}},71501,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t){e.push("DECR"),e.pushKey(t)},transformReply:void 0}},44117,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("DECRBY"),e.pushKey(t),e.push(r.toString())},transformReply:void 0}},4570,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("DEL"),e.pushKeys(t)},transformReply:void 0}},68965,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("DUMP"),e.pushKey(t)},transformReply:void 0}},76776,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ECHO",t)},transformReply:void 0}},39358,(e,t,r)=>{"use strict";function i(e,t,r){e.push(t),r?.keys?e.pushKeysLength(r.keys):e.push("0"),r?.arguments&&e.push(...r.arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.parseEvalArguments=void 0,r.parseEvalArguments=i,r.default={IS_READ_ONLY:!1,parseCommand(...e){e[0].push("EVAL"),i(...e)},transformReply:void 0}},2573,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(39358));r.default={IS_READ_ONLY:!0,parseCommand(...e){e[0].push("EVAL_RO"),(0,a.parseEvalArguments)(...e)},transformReply:a.default.transformReply}},70337,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(39358));r.default={IS_READ_ONLY:!0,parseCommand(...e){e[0].push("EVALSHA_RO"),(0,a.parseEvalArguments)(...e)},transformReply:a.default.transformReply}},42798,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(39358));r.default={IS_READ_ONLY:!1,parseCommand(...e){e[0].push("EVALSHA"),(0,a.parseEvalArguments)(...e)},transformReply:a.default.transformReply}},55816,(e,t,r)=>{"use strict";function i(e,{longitude:t,latitude:r,member:i}){e.push(t.toString(),r.toString(),i)}Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n){if(e.push("GEOADD"),e.pushKey(t),n?.condition?e.push(n.condition):n?.NX?e.push("NX"):n?.XX&&e.push("XX"),n?.CH&&e.push("CH"),Array.isArray(r))for(let t of r)i(e,t);else i(e,r)},transformReply:void 0}},18782,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i,n){e.push("GEODIST"),e.pushKey(t),e.push(r,i),n&&e.push(n)},transformReply:e=>null===e?null:Number(e)}},88047,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("GEOHASH"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},40215,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("GEOPOS"),e.pushKey(t),e.pushVariadic(r)},transformReply:e=>e.map(e=>null===e?null:{longitude:e[0],latitude:e[1]})}},81457,(e,t,r)=>{"use strict";function i(e,t,r,i,s){e.pushKey(t),"string"==typeof r||r instanceof Buffer?e.push("FROMMEMBER",r):e.push("FROMLONLAT",r.longitude.toString(),r.latitude.toString()),"radius"in i?e.push("BYRADIUS",i.radius.toString(),i.unit):e.push("BYBOX",i.width.toString(),i.height.toString(),i.unit),n(e,s)}function n(e,t){t?.SORT&&e.push(t.SORT),t?.COUNT&&("number"==typeof t.COUNT?e.push("COUNT",t.COUNT.toString()):(e.push("COUNT",t.COUNT.value.toString()),t.COUNT.ANY&&e.push("ANY")))}Object.defineProperty(r,"__esModule",{value:!0}),r.parseGeoSearchOptions=r.parseGeoSearchArguments=void 0,r.parseGeoSearchArguments=i,r.parseGeoSearchOptions=n,r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,n,s){e.push("GEOSEARCH"),i(e,t,r,n,s)},transformReply:void 0}},67660,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseGeoRadiusArguments=void 0;let i=e.r(81457);function n(e,t,r,n,s,a){e.pushKey(t),e.push(r.longitude.toString(),r.latitude.toString(),n.toString(),s),(0,i.parseGeoSearchOptions)(e,a)}r.parseGeoRadiusArguments=n,r.default={IS_READ_ONLY:!1,parseCommand:(...e)=>(e[0].push("GEORADIUS"),n(...e)),transformReply:void 0}},88462,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.GEO_REPLY_WITH=void 0;let n=i(e.r(81457));r.GEO_REPLY_WITH={DISTANCE:"WITHDIST",HASH:"WITHHASH",COORDINATES:"WITHCOORD"},r.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(e,t,r,i,s,a){n.default.parseCommand(e,t,r,i,a),e.push(...s),e.preserve=s},transformReply(e,t){let i=new Set(t),n=0,s=i.has(r.GEO_REPLY_WITH.DISTANCE)&&++n,a=i.has(r.GEO_REPLY_WITH.HASH)&&++n,o=i.has(r.GEO_REPLY_WITH.COORDINATES)&&++n;return e.map(e=>{let t={member:e[0]};if(s&&(t.distance=e[s]),a&&(t.hash=e[a]),o){let[r,i]=e[o];t.coordinates={longitude:r,latitude:i}}return t})}}},71587,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.parseGeoRadiusWithArguments=void 0;let o=s(e.r(67660)),u=a(e.r(88462));function l(e,t,r,i,n,s,a){(0,o.parseGeoRadiusArguments)(e,t,r,i,n,a),e.pushVariadic(s),e.preserve=s}r.parseGeoRadiusWithArguments=l,r.default={IS_READ_ONLY:o.default.IS_READ_ONLY,parseCommand(e,t,r,i,n,s,a){e.push("GEORADIUS"),l(e,t,r,i,n,s,a)},transformReply:u.default.transformReply}},61423,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(71587);r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(...e){e[0].push("GEORADIUS_RO"),(0,n.parseGeoRadiusWithArguments)(...e)},transformReply:i(e.r(71587)).default.transformReply}},68295,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(67660));r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(...e){e[0].push("GEORADIUS_RO"),(0,a.parseGeoRadiusArguments)(...e)},transformReply:a.default.transformReply}},54541,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(67660));r.default={IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand(e,t,r,i,n,s,o){e.push("GEORADIUS"),(0,a.parseGeoRadiusArguments)(e,t,r,i,n,o),o?.STOREDIST?e.push("STOREDIST"):e.push("STORE"),e.pushKey(s)},transformReply:void 0}},47417,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseGeoRadiusByMemberArguments=void 0;let i=e.r(81457);function n(e,t,r,n,s,a){e.pushKey(t),e.push(r,n.toString(),s),(0,i.parseGeoSearchOptions)(e,a)}r.parseGeoRadiusByMemberArguments=n,r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i,s,a){e.push("GEORADIUSBYMEMBER"),n(e,t,r,i,s,a)},transformReply:void 0}},70469,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.parseGeoRadiusByMemberWithArguments=void 0;let n=i(e.r(47417)),s=e.r(81457),a=i(e.r(88462));function o(e,t,r,i,n,a,o){e.pushKey(t),e.push(r,i.toString(),n),(0,s.parseGeoSearchOptions)(e,o),e.push(...a),e.preserve=a}r.parseGeoRadiusByMemberWithArguments=o,r.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(e,t,r,i,n,s,a){e.push("GEORADIUSBYMEMBER"),o(e,t,r,i,n,s,a)},transformReply:a.default.transformReply}},57423,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(70469));r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(...e){e[0].push("GEORADIUSBYMEMBER_RO"),(0,a.parseGeoRadiusByMemberWithArguments)(...e)},transformReply:a.default.transformReply}},33254,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(47417));r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(...e){e[0].push("GEORADIUSBYMEMBER_RO"),(0,a.parseGeoRadiusByMemberArguments)(...e)},transformReply:a.default.transformReply}},16179,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(47417));r.default={IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand(e,t,r,i,n,s,o){e.push("GEORADIUSBYMEMBER"),(0,a.parseGeoRadiusByMemberArguments)(e,t,r,i,n,o),o?.STOREDIST?e.push("STOREDIST"):e.push("STORE"),e.pushKey(s)},transformReply:void 0}},97401,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(81457);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n,s,a){e.push("GEOSEARCHSTORE"),void 0!==t&&e.pushKey(t),(0,i.parseGeoSearchArguments)(e,r,n,s,a),a?.STOREDIST&&e.push("STOREDIST")},transformReply:void 0}},93567,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("GET"),e.pushKey(t)},transformReply:void 0}},96033,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("GETBIT"),e.pushKey(t),e.push(r.toString())},transformReply:void 0}},85176,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("GETDEL"),e.pushKey(t)},transformReply:void 0}},40201,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){if(e.push("GETEX"),e.pushKey(t),"type"in r)switch(r.type){case"EX":case"PX":e.push(r.type,r.value.toString());break;case"EXAT":case"PXAT":e.push(r.type,(0,i.transformEXAT)(r.value));break;case"PERSIST":e.push("PERSIST")}else"EX"in r?e.push("EX",r.EX.toString()):"PX"in r?e.push("PX",r.PX.toString()):"EXAT"in r?e.push("EXAT",(0,i.transformEXAT)(r.EXAT)):"PXAT"in r?e.push("PXAT",(0,i.transformPXAT)(r.PXAT)):e.push("PERSIST")},transformReply:void 0}},55951,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("GETRANGE"),e.pushKey(t),e.push(r.toString(),i.toString())},transformReply:void 0}},57330,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("GETSET"),e.pushKey(t),e.push(r)},transformReply:void 0}},37405,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("EXISTS"),e.pushKeys(t)},transformReply:void 0}},7917,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r,i){e.push("EXPIRE"),e.pushKey(t),e.push(r.toString()),i&&e.push(i)},transformReply:void 0}},29287,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={parseCommand(e,t,r,n){e.push("EXPIREAT"),e.pushKey(t),e.push((0,i.transformEXAT)(r)),n&&e.push(n)},transformReply:void 0}},78098,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("EXPIRETIME"),e.pushKey(t)},transformReply:void 0}},33424,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.REDIS_FLUSH_MODES=void 0,r.REDIS_FLUSH_MODES={ASYNC:"ASYNC",SYNC:"SYNC"},r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t){e.push("FLUSHALL"),t&&e.push(t)},transformReply:void 0}},77430,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t){e.push("FLUSHDB"),t&&e.push(t)},transformReply:void 0}},34751,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(39358));r.default={IS_READ_ONLY:!1,parseCommand(...e){e[0].push("FCALL"),(0,a.parseEvalArguments)(...e)},transformReply:a.default.transformReply}},8004,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(39358));r.default={IS_READ_ONLY:!1,parseCommand(...e){e[0].push("FCALL_RO"),(0,a.parseEvalArguments)(...e)},transformReply:a.default.transformReply}},61322,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t){e.push("FUNCTION","DELETE",t)},transformReply:void 0}},53823,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("FUNCTION","DUMP")},transformReply:void 0}},9910,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t){e.push("FUNCTION","FLUSH"),t&&e.push(t)},transformReply:void 0}},7254,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("FUNCTION","KILL")},transformReply:void 0}},80765,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t){e.push("FUNCTION","LIST"),t?.LIBRARYNAME&&e.push("LIBRARYNAME",t.LIBRARYNAME)},transformReply:{2:e=>e.map(e=>({library_name:e[1],engine:e[3],functions:e[5].map(e=>({name:e[1],description:e[3],flags:e[5]}))})),3:void 0}}},69445,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(80765));r.default={NOT_KEYED_COMMAND:n.default.NOT_KEYED_COMMAND,IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(...e){n.default.parseCommand(...e),e[0].push("WITHCODE")},transformReply:{2:e=>e.map(e=>({library_name:e[1],engine:e[3],functions:e[5].map(e=>({name:e[1],description:e[3],flags:e[5]})),library_code:e[7]})),3:void 0}}},52379,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("FUNCTION","LOAD"),r?.REPLACE&&e.push("REPLACE"),e.push(t)},transformReply:void 0}},65461,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("FUNCTION","RESTORE",t),r?.mode&&e.push(r.mode)},transformReply:void 0}},3957,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("FUNCTION","STATS")},transformReply:{2:e=>({running_script:function(e){return(0,i.isNullReply)(e)?null:{name:e[1],command:e[3],duration_ms:e[5]}}(e[1]),engines:function(e){let t=Object.create(null);for(let r=0;r<e.length;r++){let i=e[r],n=e[++r];t[i.toString()]={libraries_count:n[1],functions_count:n[3]}}return t}(e[3])}),3:void 0}}},78962,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("HDEL"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},33307,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("HELLO"),t&&(e.push(t.toString()),r?.AUTH&&e.push("AUTH",r.AUTH.username,r.AUTH.password),r?.SETNAME&&e.push("SETNAME",r.SETNAME))},transformReply:{2:e=>({server:e[1],version:e[3],proto:e[5],id:e[7],mode:e[9],role:e[11],modules:e[13]}),3:void 0}}},49925,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("HEXISTS"),e.pushKey(t),e.push(r)},transformReply:void 0}},6723,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HASH_EXPIRATION=void 0,r.HASH_EXPIRATION={FIELD_NOT_EXISTS:-2,CONDITION_NOT_MET:0,UPDATED:1,DELETED:2},r.default={parseCommand(e,t,r,i,n){e.push("HEXPIRE"),e.pushKey(t),e.push(i.toString()),n&&e.push(n),e.push("FIELDS"),e.pushVariadicWithLength(r)},transformReply:void 0}},69146,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={parseCommand(e,t,r,n,s){e.push("HEXPIREAT"),e.pushKey(t),e.push((0,i.transformEXAT)(n)),s&&e.push(s),e.push("FIELDS"),e.pushVariadicWithLength(r)},transformReply:void 0}},92528,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HASH_EXPIRATION_TIME=void 0,r.HASH_EXPIRATION_TIME={FIELD_NOT_EXISTS:-2,NO_EXPIRATION:-1},r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("HEXPIRETIME"),e.pushKey(t),e.push("FIELDS"),e.pushVariadicWithLength(r)},transformReply:void 0}},91962,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("HGET"),e.pushKey(t),e.push(r)},transformReply:void 0}},99025,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("HGETALL"),e.pushKey(t)},TRANSFORM_LEGACY_REPLY:!0,transformReply:{2:e.r(52135).transformTuplesReply,3:void 0}}},99809,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("HGETDEL"),e.pushKey(t),e.push("FIELDS"),e.pushVariadicWithLength(r)},transformReply:void 0}},20798,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r,i){e.push("HGETEX"),e.pushKey(t),i?.expiration&&("string"==typeof i.expiration?e.push(i.expiration):"PERSIST"===i.expiration.type?e.push("PERSIST"):e.push(i.expiration.type,i.expiration.value.toString())),e.push("FIELDS"),e.pushVariadicWithLength(r)},transformReply:void 0}},19556,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r,i){e.push("HINCRBY"),e.pushKey(t),e.push(r,i.toString())},transformReply:void 0}},59229,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r,i){e.push("HINCRBYFLOAT"),e.pushKey(t),e.push(r,i.toString())},transformReply:void 0}},58802,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("HKEYS"),e.pushKey(t)},transformReply:void 0}},65689,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("HLEN"),e.pushKey(t)},transformReply:void 0}},46049,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("HMGET"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},79812,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("HPERSIST"),e.pushKey(t),e.push("FIELDS"),e.pushVariadicWithLength(r)},transformReply:void 0}},51408,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r,i,n){e.push("HPEXPIRE"),e.pushKey(t),e.push(i.toString()),n&&e.push(n),e.push("FIELDS"),e.pushVariadicWithLength(r)},transformReply:void 0}},55450,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,n,s){e.push("HPEXPIREAT"),e.pushKey(t),e.push((0,i.transformPXAT)(n)),s&&e.push(s),e.push("FIELDS"),e.pushVariadicWithLength(r)},transformReply:void 0}},94728,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("HPEXPIRETIME"),e.pushKey(t),e.push("FIELDS"),e.pushVariadicWithLength(r)},transformReply:void 0}},1346,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("HPTTL"),e.pushKey(t),e.push("FIELDS"),e.pushVariadicWithLength(r)},transformReply:void 0}},46549,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("HRANDFIELD"),e.pushKey(t),e.push(r.toString(),"WITHVALUES")},transformReply:{2:e=>{let t=[],r=0;for(;r<e.length;)t.push({field:e[r++],value:e[r++]});return t},3:e=>e.map(e=>{let[t,r]=e;return{field:t,value:r}})}}},25958,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("HRANDFIELD"),e.pushKey(t),e.push(r.toString())},transformReply:void 0}},26759,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("HRANDFIELD"),e.pushKey(t)},transformReply:void 0}},55108,(e,t,r)=>{"use strict";function i(e,t,r){e.push(t),r?.MATCH&&e.push("MATCH",r.MATCH),r?.COUNT&&e.push("COUNT",r.COUNT.toString())}Object.defineProperty(r,"__esModule",{value:!0}),r.pushScanArguments=r.parseScanArguments=void 0,r.parseScanArguments=i,r.pushScanArguments=function(e,t,r){return e.push(t.toString()),r?.MATCH&&e.push("MATCH",r.MATCH),r?.COUNT&&e.push("COUNT",r.COUNT.toString()),e},r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("SCAN"),i(e,t,r),r?.TYPE&&e.push("TYPE",r.TYPE)},transformReply:([e,t])=>({cursor:e,keys:t})}},54485,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(55108);r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,n){e.push("HSCAN"),e.pushKey(t),(0,i.parseScanArguments)(e,r,n)},transformReply([e,t]){let r=[],i=0;for(;i<t.length;)r.push({field:t[i++],value:t[i++]});return{cursor:e,entries:r}}}},88132,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(54485));r.default={IS_READ_ONLY:!0,parseCommand(...e){let t=e[0];n.default.parseCommand(...e),t.push("NOVALUES")},transformReply:([e,t])=>({cursor:e,fields:t})}},17127,(e,t,r)=>{"use strict";function i(e){return"number"==typeof e?e.toString():e}Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,...[t,r,n]){e.push("HSET"),e.pushKey(t),"string"==typeof r||"number"==typeof r||r instanceof Buffer?e.push(i(r),i(n)):r instanceof Map?function(e,t){for(let[r,n]of t.entries())e.push(i(r),i(n))}(e,r):Array.isArray(r)?function e(t,r){for(let n of r){if(Array.isArray(n)){e(t,n);continue}t.push(i(n))}}(e,r):function(e,t){for(let r of Object.keys(t))e.push(i(r),i(t[r]))}(e,r)},transformReply:void 0}},67420,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(59369);function n(e){return"number"==typeof e?e.toString():e}r.default={parseCommand(e,t,r,s){e.push("HSETEX"),e.pushKey(t),s?.mode&&e.push(s.mode),s?.expiration&&("string"==typeof s.expiration?e.push(s.expiration):"KEEPTTL"===s.expiration.type?e.push("KEEPTTL"):e.push(s.expiration.type,s.expiration.value.toString())),e.push("FIELDS"),r instanceof Map?function(e,t){for(let[r,i]of(e.push(t.size.toString()),t.entries()))e.push(n(r),n(i))}(e,r):Array.isArray(r)?function(e,t){let r=new i.BasicCommandParser;if(function e(t,r){for(let i of r){if(Array.isArray(i)){e(t,i);continue}t.push(n(i))}}(r,t),r.redisArgs.length%2!=0)throw Error("invalid number of arguments, expected key value ....[key value] pairs, got key without value");e.push((r.redisArgs.length/2).toString()),e.push(...r.redisArgs)}(e,r):function(e,t){let r=Object.keys(t).length;if(0==r)throw Error("object without keys");for(let i of(e.push(r.toString()),Object.keys(t)))e.push(n(i),n(t[i]))}(e,r)},transformReply:void 0}},87274,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("HSETNX"),e.pushKey(t),e.push(r,i)},transformReply:void 0}},51043,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("HSTRLEN"),e.pushKey(t),e.push(r)},transformReply:void 0}},85364,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("HTTL"),e.pushKey(t),e.push("FIELDS"),e.pushVariadicWithLength(r)},transformReply:void 0}},68767,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("HVALS"),e.pushKey(t)},transformReply:void 0}},28686,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t){e.push("INCR"),e.pushKey(t)},transformReply:void 0}},69481,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("INCRBY"),e.pushKey(t),e.push(r.toString())},transformReply:void 0}},46084,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("INCRBYFLOAT"),e.pushKey(t),e.push(r.toString())},transformReply:void 0}},65927,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("INFO"),t&&e.push(t)},transformReply:void 0}},29997,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("KEYS",t)},transformReply:void 0}},47096,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("LASTSAVE")},transformReply:void 0}},57710,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("LATENCY","DOCTOR")},transformReply:void 0}},89448,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LATENCY_EVENTS=void 0,r.LATENCY_EVENTS={ACTIVE_DEFRAG_CYCLE:"active-defrag-cycle",AOF_FSYNC_ALWAYS:"aof-fsync-always",AOF_STAT:"aof-stat",AOF_REWRITE_DIFF_WRITE:"aof-rewrite-diff-write",AOF_RENAME:"aof-rename",AOF_WRITE:"aof-write",AOF_WRITE_ACTIVE_CHILD:"aof-write-active-child",AOF_WRITE_ALONE:"aof-write-alone",AOF_WRITE_PENDING_FSYNC:"aof-write-pending-fsync",COMMAND:"command",EXPIRE_CYCLE:"expire-cycle",EVICTION_CYCLE:"eviction-cycle",EVICTION_DEL:"eviction-del",FAST_COMMAND:"fast-command",FORK:"fork",RDB_UNLINK_TEMP_FILE:"rdb-unlink-temp-file"},r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("LATENCY","GRAPH",t)},transformReply:void 0}},78765,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("LATENCY","HISTORY",t)},transformReply:void 0}},44980,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("LATENCY","LATEST")},transformReply:void 0}},35300,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LATENCY_EVENTS=void 0;let i=e.r(89448);Object.defineProperty(r,"LATENCY_EVENTS",{enumerable:!0,get:function(){return i.LATENCY_EVENTS}}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,...t){let r=["LATENCY","RESET"];t.length>0&&r.push(...t),e.push(...r)},transformReply:void 0}},87941,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("LCS"),e.pushKeys([t,r])},transformReply:void 0}},30075,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(87941));r.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(e,t,r,i){n.default.parseCommand(e,t,r),e.push("IDX"),i?.MINMATCHLEN&&e.push("MINMATCHLEN",i.MINMATCHLEN.toString())},transformReply:{2:e=>({matches:e[1],len:e[3]}),3:void 0}}},78723,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(30075));r.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];n.default.parseCommand(...e),t.push("WITHMATCHLEN")},transformReply:{2:e=>({matches:e[1],len:e[3]}),3:void 0}}},21666,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(87941));r.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];n.default.parseCommand(...e),t.push("LEN")},transformReply:void 0}},95434,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("LINDEX"),e.pushKey(t),e.push(r.toString())},transformReply:void 0}},28693,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,i,n){e.push("LINSERT"),e.pushKey(t),e.push(r,i,n)},transformReply:void 0}},3667,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("LLEN"),e.pushKey(t)},transformReply:void 0}},95016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i,n){e.push("LMOVE"),e.pushKeys([t,r]),e.push(i,n)},transformReply:void 0}},83336,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,...r){e.push("LOLWUT"),t&&(e.push("VERSION",t.toString()),e.pushVariadic(r.map(String)))},transformReply:void 0}},7664,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t){e.push("LPOP"),e.pushKey(t)},transformReply:void 0}},82901,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(7664));r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){n.default.parseCommand(e,t),e.push(r.toString())},transformReply:void 0}},10514,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("LPOS"),e.pushKey(t),e.push(r),i?.RANK!==void 0&&e.push("RANK",i.RANK.toString()),i?.MAXLEN!==void 0&&e.push("MAXLEN",i.MAXLEN.toString())},transformReply:void 0}},53475,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(10514));r.default={CACHEABLE:n.default.CACHEABLE,IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(e,t,r,i,s){n.default.parseCommand(e,t,r,s),e.push("COUNT",i.toString())},transformReply:void 0}},41995,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("LPUSH"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},99138,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("LPUSHX"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},74786,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("LRANGE"),e.pushKey(t),e.push(r.toString(),i.toString())},transformReply:void 0}},24126,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("LREM"),e.pushKey(t),e.push(r.toString()),e.push(i)},transformReply:void 0}},64020,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("LSET"),e.pushKey(t),e.push(r.toString(),i)},transformReply:void 0}},73732,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r,i){e.push("LTRIM"),e.pushKey(t),e.push(r.toString(),i.toString())},transformReply:void 0}},40364,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("MEMORY","DOCTOR")},transformReply:void 0}},74458,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("MEMORY","MALLOC-STATS")},transformReply:void 0}},62189,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e){e.push("MEMORY","PURGE")},transformReply:void 0}},11949,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("MEMORY","STATS")},transformReply:{2:(e,t,r)=>{let n={},s=0;for(;s<e.length;)switch(e[s].toString()){case"dataset.percentage":case"peak.percentage":case"allocator-fragmentation.ratio":case"allocator-rss.ratio":case"rss-overhead.ratio":case"fragmentation":n[e[s++]]=i.transformDoubleReply[2](e[s++],t,r);break;default:n[e[s++]]=e[s++]}return n},3:void 0}}},98477,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("MEMORY","USAGE"),e.pushKey(t),r?.SAMPLES&&e.push("SAMPLES",r.SAMPLES.toString())},transformReply:void 0}},76180,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("MGET"),e.pushKeys(t)},transformReply:void 0}},39172,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i,n,s,a){e.push("MIGRATE",t,r.toString());let o=Array.isArray(i);o?e.push(""):e.push(i),e.push(n.toString(),s.toString()),a?.COPY&&e.push("COPY"),a?.REPLACE&&e.push("REPLACE"),a?.AUTH&&(a.AUTH.username?e.push("AUTH2",a.AUTH.username,a.AUTH.password):e.push("AUTH",a.AUTH.password)),o&&(e.push("KEYS"),e.pushVariadic(i))},transformReply:void 0}},37366,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("MODULE","LIST")},transformReply:{2:e=>e.map(e=>({name:e[1],ver:e[3]})),3:void 0}}},10202,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("MODULE","LOAD",t),r&&e.push(...r)},transformReply:void 0}},2654,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("MODULE","UNLOAD",t)},transformReply:void 0}},62492,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("MOVE"),e.pushKey(t),e.push(r.toString())},transformReply:void 0}},93241,(e,t,r)=>{"use strict";function i(e,t){if(Array.isArray(t)){if(0==t.length)throw Error("empty toSet Argument");if(Array.isArray(t[0]))for(let r of t)e.pushKey(r[0]),e.push(r[1]);else for(let r=0;r<t.length;r+=2)e.pushKey(t[r]),e.push(t[r+1])}else for(let r of Object.entries(t))e.pushKey(r[0]),e.push(r[1])}Object.defineProperty(r,"__esModule",{value:!0}),r.parseMSetArguments=void 0,r.parseMSetArguments=i,r.default={IS_READ_ONLY:!0,parseCommand:(e,t)=>(e.push("MSET"),i(e,t)),transformReply:void 0}},22182,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(93241);r.default={IS_READ_ONLY:!0,parseCommand:(e,t)=>(e.push("MSETNX"),(0,i.parseMSetArguments)(e,t)),transformReply:void 0}},69758,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("OBJECT","ENCODING"),e.pushKey(t)},transformReply:void 0}},58500,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("OBJECT","FREQ"),e.pushKey(t)},transformReply:void 0}},96913,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("OBJECT","IDLETIME"),e.pushKey(t)},transformReply:void 0}},47125,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("OBJECT","REFCOUNT"),e.pushKey(t)},transformReply:void 0}},34651,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t){e.push("PERSIST"),e.pushKey(t)},transformReply:void 0}},2408,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("PEXPIRE"),e.pushKey(t),e.push(r.toString()),i&&e.push(i)},transformReply:void 0}},14483,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,n){e.push("PEXPIREAT"),e.pushKey(t),e.push((0,i.transformPXAT)(r)),n&&e.push(n)},transformReply:void 0}},13780,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("PEXPIRETIME"),e.pushKey(t)},transformReply:void 0}},25891,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("PFADD"),e.pushKey(t),r&&e.pushVariadic(r)},transformReply:void 0}},26743,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("PFCOUNT"),e.pushKeys(t)},transformReply:void 0}},54072,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("PFMERGE"),e.pushKey(t),r&&e.pushKeys(r)},transformReply:void 0}},72434,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("PING"),t&&e.push(t)},transformReply:void 0}},96363,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r,i){e.push("PSETEX"),e.pushKey(t),e.push(r.toString(),i)},transformReply:void 0}},19586,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("PTTL"),e.pushKey(t)},transformReply:void 0}},29531,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,IS_FORWARD_COMMAND:!0,parseCommand(e,t,r){e.push("PUBLISH",t,r)},transformReply:void 0}},70021,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("PUBSUB","CHANNELS"),t&&e.push(t)},transformReply:void 0}},27068,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("PUBSUB","NUMPAT")},transformReply:void 0}},51094,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("PUBSUB","NUMSUB"),t&&e.pushVariadic(t)},transformReply(e){let t=Object.create(null),r=0;for(;r<e.length;)t[e[r++].toString()]=Number(e[r++]);return t}}},71738,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("PUBSUB","SHARDNUMSUB"),t&&e.pushVariadic(t)},transformReply(e){let t=Object.create(null);for(let r=0;r<e.length;r+=2)t[e[r].toString()]=e[r+1];return t}}},35814,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("PUBSUB","SHARDCHANNELS"),t&&e.push(t)},transformReply:void 0}},1232,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("RANDOMKEY")},transformReply:void 0}},48841,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("READONLY")},transformReply:void 0}},98767,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("RENAME"),e.pushKeys([t,r])},transformReply:void 0}},42947,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("RENAMENX"),e.pushKeys([t,r])},transformReply:void 0}},72036,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("REPLICAOF",t,r.toString())},transformReply:void 0}},42954,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("RESTORE-ASKING")},transformReply:void 0}},72305,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i,n){e.push("RESTORE"),e.pushKey(t),e.push(r.toString(),i),n?.REPLACE&&e.push("REPLACE"),n?.ABSTTL&&e.push("ABSTTL"),n?.IDLETIME&&e.push("IDLETIME",n.IDLETIME.toString()),n?.FREQ&&e.push("FREQ",n.FREQ.toString())},transformReply:void 0}},22366,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("ROLE")},transformReply(e){switch(e[0]){case"master":{let[t,r,i]=e;return{role:t,replicationOffest:r,replicas:i.map(e=>{let[t,r,i]=e;return{host:t,port:Number(r),replicationOffest:Number(i)}})}}case"slave":{let[t,r,i,n,s]=e;return{role:t,master:{host:r,port:i},state:n,dataReceived:s}}case"sentinel":{let[t,r]=e;return{role:t,masterNames:r}}}}}},95803,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("RPOP"),e.pushKey(t),e.push(r.toString())},transformReply:void 0}},60381,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t){e.push("RPOP"),e.pushKey(t)},transformReply:void 0}},4568,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("RPOPLPUSH"),e.pushKeys([t,r])},transformReply:void 0}},25278,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("RPUSH"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},86344,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("RPUSHX"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},78911,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("SADD"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},86693,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SCARD"),e.pushKey(t)},transformReply:void 0}},44560,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SCRIPT","DEBUG",t)},transformReply:void 0}},97692,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SCRIPT","EXISTS"),e.pushVariadic(t)},transformReply:void 0}},47168,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SCRIPT","FLUSH"),t&&e.push(t)},transformReply:void 0}},17191,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("SCRIPT","KILL")},transformReply:void 0}},34621,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SCRIPT","LOAD",t)},transformReply:void 0}},92721,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SDIFF"),e.pushKeys(t)},transformReply:void 0}},76424,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("SDIFFSTORE"),e.pushKey(t),e.pushKeys(r)},transformReply:void 0}},885,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r,i){e.push("SET"),e.pushKey(t),e.push("number"==typeof r?r.toString():r),i?.expiration?"string"==typeof i.expiration?e.push(i.expiration):"KEEPTTL"===i.expiration.type?e.push("KEEPTTL"):e.push(i.expiration.type,i.expiration.value.toString()):i?.EX!==void 0?e.push("EX",i.EX.toString()):i?.PX!==void 0?e.push("PX",i.PX.toString()):i?.EXAT!==void 0?e.push("EXAT",i.EXAT.toString()):i?.PXAT!==void 0?e.push("PXAT",i.PXAT.toString()):i?.KEEPTTL&&e.push("KEEPTTL"),i?.condition?e.push(i.condition):i?.NX?e.push("NX"):i?.XX&&e.push("XX"),i?.GET&&e.push("GET")},transformReply:void 0}},8607,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("SETBIT"),e.pushKey(t),e.push(r.toString(),i.toString())},transformReply:void 0}},98393,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r,i){e.push("SETEX"),e.pushKey(t),e.push(r.toString(),i)},transformReply:void 0}},14454,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("SETNX"),e.pushKey(t),e.push(r)},transformReply:void 0}},65791,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r,i){e.push("SETRANGE"),e.pushKey(t),e.push(r.toString(),i)},transformReply:void 0}},14796,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SINTER"),e.pushKeys(t)},transformReply:void 0}},37469,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("SINTERCARD"),e.pushKeysLength(t),"number"==typeof r?e.push("LIMIT",r.toString()):r?.LIMIT!==void 0&&e.push("LIMIT",r.LIMIT.toString())},transformReply:void 0}},20788,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("SINTERSTORE"),e.pushKey(t),e.pushKeys(r)},transformReply:void 0}},99403,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("SISMEMBER"),e.pushKey(t),e.push(r)},transformReply:void 0}},16788,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SMEMBERS"),e.pushKey(t)},transformReply:{2:void 0,3:void 0}}},49966,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("SMISMEMBER"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},53159,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("SMOVE"),e.pushKeys([t,r]),e.push(i)},transformReply:void 0}},92129,(e,t,r)=>{"use strict";function i(e,t,r){if(e.pushKey(t),r?.BY&&e.push("BY",r.BY),r?.LIMIT&&e.push("LIMIT",r.LIMIT.offset.toString(),r.LIMIT.count.toString()),r?.GET)if(Array.isArray(r.GET))for(let t of r.GET)e.push("GET",t);else e.push("GET",r.GET);r?.DIRECTION&&e.push(r.DIRECTION),r?.ALPHA&&e.push("ALPHA")}Object.defineProperty(r,"__esModule",{value:!0}),r.parseSortArguments=void 0,r.parseSortArguments=i,r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("SORT"),i(e,t,r)},transformReply:void 0}},20114,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(92129));r.default={IS_READ_ONLY:!0,parseCommand(...e){e[0].push("SORT_RO"),(0,a.parseSortArguments)(...e)},transformReply:a.default.transformReply}},21548,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(92129));r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){n.default.parseCommand(e,t,i),e.push("STORE",r)},transformReply:void 0}},60230,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("SPOP"),e.pushKey(t),e.push(r.toString())},transformReply:void 0}},93783,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("SPOP"),e.pushKey(t)},transformReply:void 0}},14052,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("SPUBLISH"),e.pushKey(t),e.push(r)},transformReply:void 0}},91569,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("SRANDMEMBER"),e.pushKey(t)},transformReply:void 0}},88877,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(91569));r.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(e,t,r){n.default.parseCommand(e,t),e.push(r.toString())},transformReply:void 0}},45871,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("SREM"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},85386,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(55108);r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,n){e.push("SSCAN"),e.pushKey(t),(0,i.parseScanArguments)(e,r,n)},transformReply:([e,t])=>({cursor:e,members:t})}},3268,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("STRLEN"),e.pushKey(t)},transformReply:void 0}},1088,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SUNION"),e.pushKeys(t)},transformReply:void 0}},84053,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("SUNIONSTORE"),e.pushKey(t),e.pushKeys(r)},transformReply:void 0}},61175,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("SWAPDB",t.toString(),r.toString())},transformReply:void 0}},17090,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("TIME")},transformReply:void 0}},82230,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("TOUCH"),e.pushKeys(t)},transformReply:void 0}},57246,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("TTL"),e.pushKey(t)},transformReply:void 0}},19455,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("TYPE"),e.pushKey(t)},transformReply:void 0}},2178,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("UNLINK"),e.pushKeys(t)},transformReply:void 0}},46715,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("WAIT",t.toString(),r.toString())},transformReply:void 0}},84832,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("XACK"),e.pushKey(t),e.push(r),e.pushVariadic(i)},transformReply:void 0}},39487,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i,n){e.push("XACKDEL"),e.pushKey(t),e.push(r),n&&e.push(n),e.push("IDS"),e.pushVariadicWithLength(i)},transformReply:void 0}},37120,(e,t,r)=>{"use strict";function i(e,t,r,i,n,s){for(let[a,o]of(t.push("XADD"),t.pushKey(r),e&&t.push(e),s?.TRIM&&(s.TRIM.strategy&&t.push(s.TRIM.strategy),s.TRIM.strategyModifier&&t.push(s.TRIM.strategyModifier),t.push(s.TRIM.threshold.toString()),s.TRIM.limit&&t.push("LIMIT",s.TRIM.limit.toString()),s.TRIM.policy&&t.push(s.TRIM.policy)),t.push(i),Object.entries(n)))t.push(a,o)}Object.defineProperty(r,"__esModule",{value:!0}),r.parseXAddArguments=void 0,r.parseXAddArguments=i,r.default={IS_READ_ONLY:!1,parseCommand:(...e)=>i(void 0,...e),transformReply:void 0}},99407,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(37120);r.default={IS_READ_ONLY:!1,parseCommand:(...e)=>(0,i.parseXAddArguments)("NOMKSTREAM",...e),transformReply:void 0}},59602,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i,n,s,a){e.push("XAUTOCLAIM"),e.pushKey(t),e.push(r,i,n.toString(),s),a?.COUNT&&e.push("COUNT",a.COUNT.toString())},transformReply:(e,t,r)=>({nextId:e[0],messages:e[1].map(i.transformStreamMessageNullReply.bind(void 0,r)),deletedMessages:e[2]})}},48507,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(59602));r.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];n.default.parseCommand(...e),t.push("JUSTID")},transformReply:e=>({nextId:e[0],messages:e[1],deletedMessages:e[2]})}},77275,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i,n,s,a){e.push("XCLAIM"),e.pushKey(t),e.push(r,i,n.toString()),e.pushVariadic(s),a?.IDLE!==void 0&&e.push("IDLE",a.IDLE.toString()),a?.TIME!==void 0&&e.push("TIME",(a.TIME instanceof Date?a.TIME.getTime():a.TIME).toString()),a?.RETRYCOUNT!==void 0&&e.push("RETRYCOUNT",a.RETRYCOUNT.toString()),a?.FORCE&&e.push("FORCE"),a?.LASTID!==void 0&&e.push("LASTID",a.LASTID)},transformReply:(e,t,r)=>e.map(i.transformStreamMessageNullReply.bind(void 0,r))}},79268,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(77275));r.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];n.default.parseCommand(...e),t.push("JUSTID")},transformReply:void 0}},6427,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("XDEL"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},23438,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("XDELEX"),e.pushKey(t),i&&e.push(i),e.push("IDS"),e.pushVariadicWithLength(r)},transformReply:void 0}},81486,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i,n){e.push("XGROUP","CREATE"),e.pushKey(t),e.push(r,i),n?.MKSTREAM&&e.push("MKSTREAM"),n?.ENTRIESREAD&&e.push("ENTRIESREAD",n.ENTRIESREAD.toString())},transformReply:void 0}},47063,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("XGROUP","CREATECONSUMER"),e.pushKey(t),e.push(r,i)},transformReply:void 0}},10890,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("XGROUP","DELCONSUMER"),e.pushKey(t),e.push(r,i)},transformReply:void 0}},99281,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("XGROUP","DESTROY"),e.pushKey(t),e.push(r)},transformReply:void 0}},18745,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i,n){e.push("XGROUP","SETID"),e.pushKey(t),e.push(r,i),n?.ENTRIESREAD&&e.push("ENTRIESREAD",n.ENTRIESREAD.toString())},transformReply:void 0}},89096,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("XINFO","CONSUMERS"),e.pushKey(t),e.push(r)},transformReply:{2:e=>e.map(e=>({name:e[1],pending:e[3],idle:e[5],inactive:e[7]})),3:void 0}}},14673,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("XINFO","GROUPS"),e.pushKey(t)},transformReply:{2:e=>e.map(e=>({name:e[1],consumers:e[3],pending:e[5],"last-delivered-id":e[7],"entries-read":e[9],lag:e[11]})),3:void 0}}},98504,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);function n(e){if((0,i.isNullReply)(e))return e;let[t,r]=e;return{id:t,message:(0,i.transformTuplesReply)(r)}}r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("XINFO","STREAM"),e.pushKey(t)},transformReply:{2(e){let t={};for(let r=0;r<e.length;r+=2)switch(e[r]){case"first-entry":case"last-entry":t[e[r]]=n(e[r+1]);break;default:t[e[r]]=e[r+1]}return t},3:e=>(e instanceof Map?(e.set("first-entry",n(e.get("first-entry"))),e.set("last-entry",n(e.get("last-entry")))):e instanceof Array?(e[17]=n(e[17]),e[19]=n(e[19])):(e["first-entry"]=n(e["first-entry"]),e["last-entry"]=n(e["last-entry"])),e)}}},73733,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("XLEN"),e.pushKey(t)},transformReply:void 0}},62473,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i,n,s,a){e.push("XPENDING"),e.pushKey(t),e.push(r),a?.IDLE!==void 0&&e.push("IDLE",a.IDLE.toString()),e.push(i,n,s.toString()),a?.consumer&&e.push(a.consumer)},transformReply:e=>e.map(e=>({id:e[0],consumer:e[1],millisecondsSinceLastDelivery:e[2],deliveriesCounter:e[3]}))}},13493,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("XPENDING"),e.pushKey(t),e.push(r)},transformReply(e){let t=e[3];return{pending:e[0],firstId:e[1],lastId:e[2],consumers:null===t?null:t.map(e=>{let[t,r]=e;return{name:t,deliveriesCounter:Number(r)}})}}}},50853,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.xRangeArguments=void 0;let i=e.r(52135);function n(e,t,r){let i=[e,t];return r?.COUNT&&i.push("COUNT",r.COUNT.toString()),i}r.xRangeArguments=n,r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,...r){e.push("XRANGE"),e.pushKey(t),e.pushVariadic(n(r[0],r[1],r[2]))},transformReply:(e,t,r)=>e.map(i.transformStreamMessageReply.bind(void 0,r))}},30967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pushXReadStreams=void 0;let i=e.r(52135);function n(e,t){if(e.push("STREAMS"),Array.isArray(t)){for(let r=0;r<t.length;r++)e.pushKey(t[r].key);for(let r=0;r<t.length;r++)e.push(t[r].id)}else e.pushKey(t.key),e.push(t.id)}r.pushXReadStreams=n,r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("XREAD"),r?.COUNT&&e.push("COUNT",r.COUNT.toString()),r?.BLOCK!==void 0&&e.push("BLOCK",r.BLOCK.toString()),n(e,t)},transformReply:{2:i.transformStreamsMessagesReplyResp2,3:void 0},unstableResp3:!0}},74576,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(30967);r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,n,s){e.push("XREADGROUP","GROUP",t,r),s?.COUNT!==void 0&&e.push("COUNT",s.COUNT.toString()),s?.BLOCK!==void 0&&e.push("BLOCK",s.BLOCK.toString()),s?.NOACK&&e.push("NOACK"),(0,i.pushXReadStreams)(e,n)},transformReply:{2:e.r(52135).transformStreamsMessagesReplyResp2,3:void 0},unstableResp3:!0}},17137,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(50853));r.default={CACHEABLE:a.default.CACHEABLE,IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand(e,t,...r){e.push("XREVRANGE"),e.pushKey(t),e.pushVariadic((0,a.xRangeArguments)(r[0],r[1],r[2]))},transformReply:a.default.transformReply}},98600,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("XSETID"),e.pushKey(t),e.push(r),i?.ENTRIESADDED&&e.push("ENTRIESADDED",i.ENTRIESADDED.toString()),i?.MAXDELETEDID&&e.push("MAXDELETEDID",i.MAXDELETEDID)},transformReply:void 0}},15066,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i,n){e.push("XTRIM"),e.pushKey(t),e.push(r),n?.strategyModifier&&e.push(n.strategyModifier),e.push(i.toString()),n?.LIMIT&&e.push("LIMIT",n.LIMIT.toString()),n?.policy&&e.push(n.policy)},transformReply:void 0}},55618,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pushMembers=void 0;let i=e.r(52135);function n(e,t){if(Array.isArray(t))for(let r of t)s(e,r);else s(e,t)}function s(e,t){e.push((0,i.transformDoubleArgument)(t.score),t.value)}r.default={parseCommand(e,t,r,i){e.push("ZADD"),e.pushKey(t),i?.condition?e.push(i.condition):i?.NX?e.push("NX"):i?.XX&&e.push("XX"),i?.comparison?e.push(i.comparison):i?.LT?e.push("LT"):i?.GT&&e.push("GT"),i?.CH&&e.push("CH"),n(e,r)},transformReply:i.transformDoubleReply},r.pushMembers=n},19583,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(55618);r.default={parseCommand(e,t,r,n){e.push("ZADD"),e.pushKey(t),n?.condition&&e.push(n.condition),n?.comparison&&e.push(n.comparison),n?.CH&&e.push("CH"),e.push("INCR"),(0,i.pushMembers)(e,r)},transformReply:e.r(52135).transformNullableDoubleReply}},75794,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ZCARD"),e.pushKey(t)},transformReply:void 0}},98973,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,n){e.push("ZCOUNT"),e.pushKey(t),e.push((0,i.transformStringDoubleArgument)(r),(0,i.transformStringDoubleArgument)(n))},transformReply:void 0}},28334,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("ZDIFF"),e.pushKeysLength(t)},transformReply:void 0}},23121,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(52135),s=i(e.r(28334));r.default={IS_READ_ONLY:s.default.IS_READ_ONLY,parseCommand(e,t){s.default.parseCommand(e,t),e.push("WITHSCORES")},transformReply:n.transformSortedSetReply}},44859,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("ZDIFFSTORE"),e.pushKey(t),e.pushKeysLength(r)},transformReply:void 0}},45368,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={parseCommand(e,t,r,n){e.push("ZINCRBY"),e.pushKey(t),e.push((0,i.transformDoubleArgument)(r),n)},transformReply:i.transformDoubleReply}},31480,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseZInterArguments=void 0;let i=e.r(52135);function n(e,t,r){(0,i.parseZKeysArguments)(e,t),r?.AGGREGATE&&e.push("AGGREGATE",r.AGGREGATE)}r.parseZInterArguments=n,r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("ZINTER"),n(e,t,r)},transformReply:void 0}},84814,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(52135),s=i(e.r(31480));r.default={IS_READ_ONLY:s.default.IS_READ_ONLY,parseCommand(...e){s.default.parseCommand(...e),e[0].push("WITHSCORES")},transformReply:n.transformSortedSetReply}},65335,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("ZINTERCARD"),e.pushKeysLength(t),"number"==typeof r?e.push("LIMIT",r.toString()):r?.LIMIT&&e.push("LIMIT",r.LIMIT.toString())},transformReply:void 0}},85442,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(31480);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n){e.push("ZINTERSTORE"),e.pushKey(t),(0,i.parseZInterArguments)(e,r,n)},transformReply:void 0}},65468,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("ZLEXCOUNT"),e.pushKey(t),e.push(r),e.push(i)},transformReply:void 0}},97424,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("ZMSCORE"),e.pushKey(t),e.pushVariadic(r)},transformReply:{2:(e,t,r)=>e.map((0,i.createTransformNullableDoubleReplyResp2Func)(t,r)),3:void 0}}},76383,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("ZPOPMAX"),e.pushKey(t),e.push(r.toString())},transformReply:e.r(52135).transformSortedSetReply}},99190,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("ZPOPMAX"),e.pushKey(t)},transformReply:{2:(e,t,r)=>0===e.length?null:{value:e[0],score:i.transformDoubleReply[2](e[1],t,r)},3:e=>0===e.length?null:{value:e[0],score:e[1]}}}},65649,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("ZPOPMIN"),e.pushKey(t),e.push(r.toString())},transformReply:e.r(52135).transformSortedSetReply}},58852,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("ZPOPMIN"),e.pushKey(t)},transformReply:i(e.r(99190)).default.transformReply}},92505,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("ZRANDMEMBER"),e.pushKey(t)},transformReply:void 0}},43041,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(92505));r.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(e,t,r){n.default.parseCommand(e,t),e.push(r.toString())},transformReply:void 0}},28038,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(52135),s=i(e.r(43041));r.default={IS_READ_ONLY:s.default.IS_READ_ONLY,parseCommand(e,t,r){s.default.parseCommand(e,t,r),e.push("WITHSCORES")},transformReply:n.transformSortedSetReply}},3079,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.zRangeArgument=void 0;let i=e.r(52135);function n(e,t,r){let n=[(0,i.transformStringDoubleArgument)(e),(0,i.transformStringDoubleArgument)(t)];switch(r?.BY){case"SCORE":n.push("BYSCORE");break;case"LEX":n.push("BYLEX")}return r?.REV&&n.push("REV"),r?.LIMIT&&n.push("LIMIT",r.LIMIT.offset.toString(),r.LIMIT.count.toString()),n}r.zRangeArgument=n,r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i,s){e.push("ZRANGE"),e.pushKey(t),e.pushVariadic(n(r,i,s))},transformReply:void 0}},66445,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(52135),s=i(e.r(3079));r.default={CACHEABLE:s.default.CACHEABLE,IS_READ_ONLY:s.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];s.default.parseCommand(...e),t.push("WITHSCORES")},transformReply:n.transformSortedSetReply}},58711,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,n,s){e.push("ZRANGEBYLEX"),e.pushKey(t),e.push((0,i.transformStringDoubleArgument)(r),(0,i.transformStringDoubleArgument)(n)),s?.LIMIT&&e.push("LIMIT",s.LIMIT.offset.toString(),s.LIMIT.count.toString())},transformReply:void 0}},47843,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,n,s){e.push("ZRANGEBYSCORE"),e.pushKey(t),e.push((0,i.transformStringDoubleArgument)(r),(0,i.transformStringDoubleArgument)(n)),s?.LIMIT&&e.push("LIMIT",s.LIMIT.offset.toString(),s.LIMIT.count.toString())},transformReply:void 0}},72757,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(52135),s=i(e.r(47843));r.default={CACHEABLE:s.default.CACHEABLE,IS_READ_ONLY:s.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];s.default.parseCommand(...e),t.push("WITHSCORES")},transformReply:n.transformSortedSetReply}},35096,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n,s,a){switch(e.push("ZRANGESTORE"),e.pushKey(t),e.pushKey(r),e.push((0,i.transformStringDoubleArgument)(n),(0,i.transformStringDoubleArgument)(s)),a?.BY){case"SCORE":e.push("BYSCORE");break;case"LEX":e.push("BYLEX")}a?.REV&&e.push("REV"),a?.LIMIT&&e.push("LIMIT",a.LIMIT.offset.toString(),a.LIMIT.count.toString())},transformReply:void 0}},55428,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n){e.push("ZREMRANGEBYSCORE"),e.pushKey(t),e.push((0,i.transformStringDoubleArgument)(r),(0,i.transformStringDoubleArgument)(n))},transformReply:void 0}},20311,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("ZRANK"),e.pushKey(t),e.push(r)},transformReply:void 0}},80457,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(20311));r.default={CACHEABLE:n.default.CACHEABLE,IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];n.default.parseCommand(...e),t.push("WITHSCORE")},transformReply:{2:e=>null===e?null:{rank:e[0],score:Number(e[1])},3:e=>null===e?null:{rank:e[0],score:e[1]}}}},4723,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("ZREM"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},53410,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n){e.push("ZREMRANGEBYLEX"),e.pushKey(t),e.push((0,i.transformStringDoubleArgument)(r),(0,i.transformStringDoubleArgument)(n))},transformReply:void 0}},51602,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("ZREMRANGEBYRANK"),e.pushKey(t),e.push(r.toString(),i.toString())},transformReply:void 0}},85643,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("ZREVRANK"),e.pushKey(t),e.push(r)},transformReply:void 0}},37073,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(55108),n=e.r(52135);r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,n){e.push("ZSCAN"),e.pushKey(t),(0,i.parseScanArguments)(e,r,n)},transformReply:([e,t])=>({cursor:e,members:n.transformSortedSetReply[2](t)})}},42874,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("ZSCORE"),e.pushKey(t),e.push(r)},transformReply:e.r(52135).transformNullableDoubleReply}},55586,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("ZUNION"),(0,i.parseZKeysArguments)(e,t),r?.AGGREGATE&&e.push("AGGREGATE",r.AGGREGATE)},transformReply:void 0}},95311,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(52135),s=i(e.r(55586));r.default={IS_READ_ONLY:s.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];s.default.parseCommand(...e),t.push("WITHSCORES")},transformReply:n.transformSortedSetReply}},39844,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n){e.push("ZUNIONSTORE"),e.pushKey(t),(0,i.parseZKeysArguments)(e,r),n?.AGGREGATE&&e.push("AGGREGATE",n.AGGREGATE)},transformReply:void 0}},32088,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={parseCommand(e,t,r,n,s){for(let n of(e.push("VADD"),e.pushKey(t),s?.REDUCE!==void 0&&e.push("REDUCE",s.REDUCE.toString()),e.push("VALUES",r.length.toString()),r))e.push((0,i.transformDoubleArgument)(n));e.push(n),s?.CAS&&e.push("CAS"),s?.QUANT&&e.push(s.QUANT),s?.EF!==void 0&&e.push("EF",s.EF.toString()),s?.SETATTR&&e.push("SETATTR",JSON.stringify(s.SETATTR)),s?.M!==void 0&&e.push("M",s.M.toString())},transformReply:i.transformBooleanReply}},84617,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("VCARD"),e.pushKey(t)},transformReply:void 0}},12259,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("VDIM"),e.pushKey(t)},transformReply:void 0}},31031,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("VEMB"),e.pushKey(t),e.push(r)},transformReply:e.r(52135).transformDoubleArrayReply}},82203,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(52135),s=i(e.r(31031));r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){s.default.parseCommand(e,t,r),e.push("RAW")},transformReply:{2:e=>({quantization:e[0],raw:e[1],l2Norm:n.transformDoubleReply[2](e[2]),...void 0!==e[3]&&{quantizationRange:n.transformDoubleReply[2](e[3])}}),3:e=>({quantization:e[0],raw:e[1],l2Norm:e[2],quantizationRange:e[3]})}}},65508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("VGETATTR"),e.pushKey(t),e.push(r)},transformReply:e.r(52135).transformRedisJsonNullReply}},25427,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("VINFO"),e.pushKey(t)},transformReply:{2:e=>{let t=Object.create(null);for(let r=0;r<e.length;r+=2)t[e[r].toString()]=e[r+1];return t},3:void 0}}},85967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("VLINKS"),e.pushKey(t),e.push(r)},transformReply:void 0}},87619,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(52135),s=i(e.r(85967));r.default={IS_READ_ONLY:s.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];s.default.parseCommand(...e),t.push("WITHSCORES")},transformReply:{2:function(e){let t=[];for(let r of e){let e=Object.create(null);for(let t=0;t<r.length;t+=2){let i=r[t],s=n.transformDoubleReply[2](r[t+1]);e[i.toString()]=s}t.push(e)}return t},3:void 0}}},31139,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("VRANDMEMBER"),e.pushKey(t),void 0!==r&&e.push(r.toString())},transformReply:void 0}},92963,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){e.push("VREM"),e.pushKey(t),e.push(r)},transformReply:e.r(52135).transformBooleanReply}},24798,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r,i){e.push("VSETATTR"),e.pushKey(t),e.push(r),"object"==typeof i&&null!==i?e.push(JSON.stringify(i)):e.push(i)},transformReply:e.r(52135).transformBooleanReply}},44325,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,n){if(e.push("VSIM"),e.pushKey(t),Array.isArray(r))for(let t of(e.push("VALUES",r.length.toString()),r))e.push((0,i.transformDoubleArgument)(t));else e.push("ELE",r);n?.COUNT!==void 0&&e.push("COUNT",n.COUNT.toString()),n?.EPSILON!==void 0&&e.push("EPSILON",n.EPSILON.toString()),n?.EF!==void 0&&e.push("EF",n.EF.toString()),n?.FILTER&&e.push("FILTER",n.FILTER),n?.["FILTER-EF"]!==void 0&&e.push("FILTER-EF",n["FILTER-EF"].toString()),n?.TRUTH&&e.push("TRUTH"),n?.NOTHREAD&&e.push("NOTHREAD")},transformReply:void 0}},11640,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(52135),s=i(e.r(44325));r.default={IS_READ_ONLY:s.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];s.default.parseCommand(...e),t.push("WITHSCORES")},transformReply:{2:e=>{let t={};for(let r=0;r<e.length;r+=2)t[e[r].toString()]=n.transformDoubleReply[2](e[r+1]);return t},3:void 0}}},8495,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.REDIS_FLUSH_MODES=r.COMMAND_LIST_FILTER_BY=r.CLUSTER_SLOT_STATES=r.FAILOVER_MODES=r.CLIENT_KILL_FILTERS=void 0;let o=a(e.r(20623)),u=a(e.r(47491)),l=a(e.r(9655)),d=a(e.r(48712)),c=a(e.r(64102)),p=a(e.r(55463)),f=a(e.r(14815)),h=a(e.r(7482)),m=a(e.r(97473)),y=a(e.r(197)),g=a(e.r(40305)),_=a(e.r(85002)),b=a(e.r(70221)),v=a(e.r(11390)),E=a(e.r(31916)),S=a(e.r(69079)),A=a(e.r(3562)),T=a(e.r(64264)),w=a(e.r(92385)),O=a(e.r(25704)),R=a(e.r(37706)),I=a(e.r(56036)),C=a(e.r(12611)),N=a(e.r(77990)),P=a(e.r(13494)),D=a(e.r(56233)),x=a(e.r(24243)),L=a(e.r(41622)),k=a(e.r(43039)),M=a(e.r(18738)),$=a(e.r(95530)),U=a(e.r(37569)),j=a(e.r(49324)),B=a(e.r(30315)),z=a(e.r(50566)),K=a(e.r(72352)),Y=s(e.r(42431));Object.defineProperty(r,"CLIENT_KILL_FILTERS",{enumerable:!0,get:function(){return Y.CLIENT_KILL_FILTERS}});let F=a(e.r(32568)),q=a(e.r(36311)),V=a(e.r(11613)),G=a(e.r(70691)),H=a(e.r(67109)),Z=a(e.r(78239)),W=a(e.r(46940)),Q=a(e.r(88744)),J=a(e.r(99107)),X=a(e.r(48744)),ee=a(e.r(45505)),et=a(e.r(91430)),er=a(e.r(28886)),ei=a(e.r(23791)),en=a(e.r(80111)),es=s(e.r(65671));Object.defineProperty(r,"FAILOVER_MODES",{enumerable:!0,get:function(){return es.FAILOVER_MODES}});let ea=a(e.r(3259)),eo=a(e.r(57103)),eu=a(e.r(50563)),el=a(e.r(67883)),ed=a(e.r(7662)),ec=a(e.r(90119)),ep=a(e.r(5712)),ef=a(e.r(36116)),eh=a(e.r(14448)),em=a(e.r(26700)),ey=a(e.r(70569)),eg=a(e.r(38562)),e_=a(e.r(15528)),eb=a(e.r(49200)),ev=a(e.r(87934)),eE=s(e.r(37295));Object.defineProperty(r,"CLUSTER_SLOT_STATES",{enumerable:!0,get:function(){return eE.CLUSTER_SLOT_STATES}});let eS=a(e.r(939)),eA=a(e.r(91759)),eT=a(e.r(14919)),ew=a(e.r(11386)),eO=a(e.r(85601)),eR=s(e.r(41977));Object.defineProperty(r,"COMMAND_LIST_FILTER_BY",{enumerable:!0,get:function(){return eR.COMMAND_LIST_FILTER_BY}});let eI=a(e.r(24192)),eC=a(e.r(61997)),eN=a(e.r(48164)),eP=a(e.r(31715)),eD=a(e.r(20591)),ex=a(e.r(85877)),eL=a(e.r(8628)),ek=a(e.r(71501)),eM=a(e.r(44117)),e$=a(e.r(4570)),eU=a(e.r(68965)),ej=a(e.r(76776)),eB=a(e.r(2573)),ez=a(e.r(39358)),eK=a(e.r(70337)),eY=a(e.r(42798)),eF=a(e.r(55816)),eq=a(e.r(18782)),eV=a(e.r(88047)),eG=a(e.r(40215)),eH=a(e.r(61423)),eZ=a(e.r(68295)),eW=a(e.r(54541)),eQ=a(e.r(71587)),eJ=a(e.r(67660)),eX=a(e.r(57423)),e0=a(e.r(33254)),e1=a(e.r(16179)),e4=a(e.r(70469)),e2=a(e.r(47417)),e6=a(e.r(88462)),e3=a(e.r(81457)),e5=a(e.r(97401)),e8=a(e.r(93567)),e9=a(e.r(96033)),e7=a(e.r(85176)),te=a(e.r(40201)),tt=a(e.r(55951)),tr=a(e.r(57330)),ti=a(e.r(37405)),tn=a(e.r(7917)),ts=a(e.r(29287)),ta=a(e.r(78098)),to=s(e.r(33424));Object.defineProperty(r,"REDIS_FLUSH_MODES",{enumerable:!0,get:function(){return to.REDIS_FLUSH_MODES}});let tu=a(e.r(77430)),tl=a(e.r(34751)),td=a(e.r(8004)),tc=a(e.r(61322)),tp=a(e.r(53823)),tf=a(e.r(9910)),th=a(e.r(7254)),tm=a(e.r(69445)),ty=a(e.r(80765)),tg=a(e.r(52379)),t_=a(e.r(65461)),tb=a(e.r(3957)),tv=a(e.r(78962)),tE=a(e.r(33307)),tS=a(e.r(49925)),tA=a(e.r(6723)),tT=a(e.r(69146)),tw=a(e.r(92528)),tO=a(e.r(91962)),tR=a(e.r(99025)),tI=a(e.r(99809)),tC=a(e.r(20798)),tN=a(e.r(19556)),tP=a(e.r(59229)),tD=a(e.r(58802)),tx=a(e.r(65689)),tL=a(e.r(46049)),tk=a(e.r(79812)),tM=a(e.r(51408)),t$=a(e.r(55450)),tU=a(e.r(94728)),tj=a(e.r(1346)),tB=a(e.r(46549)),tz=a(e.r(25958)),tK=a(e.r(26759)),tY=a(e.r(54485)),tF=a(e.r(88132)),tq=a(e.r(17127)),tV=a(e.r(67420)),tG=a(e.r(87274)),tH=a(e.r(51043)),tZ=a(e.r(85364)),tW=a(e.r(68767)),tQ=a(e.r(28686)),tJ=a(e.r(69481)),tX=a(e.r(46084)),t0=a(e.r(65927)),t1=a(e.r(29997)),t4=a(e.r(47096)),t2=a(e.r(57710)),t6=a(e.r(89448)),t3=a(e.r(78765)),t5=a(e.r(44980)),t8=a(e.r(35300)),t9=a(e.r(78723)),t7=a(e.r(30075)),re=a(e.r(21666)),rt=a(e.r(87941)),rr=a(e.r(95434)),ri=a(e.r(28693)),rn=a(e.r(3667)),rs=a(e.r(95016)),ra=a(e.r(77964)),ro=a(e.r(83336)),ru=a(e.r(82901)),rl=a(e.r(7664)),rd=a(e.r(53475)),rc=a(e.r(10514)),rp=a(e.r(41995)),rf=a(e.r(99138)),rh=a(e.r(74786)),rm=a(e.r(24126)),ry=a(e.r(64020)),rg=a(e.r(73732)),r_=a(e.r(40364)),rb=a(e.r(74458)),rv=a(e.r(62189)),rE=a(e.r(11949)),rS=a(e.r(98477)),rA=a(e.r(76180)),rT=a(e.r(39172)),rw=a(e.r(37366)),rO=a(e.r(10202)),rR=a(e.r(2654)),rI=a(e.r(62492)),rC=a(e.r(93241)),rN=a(e.r(22182)),rP=a(e.r(69758)),rD=a(e.r(58500)),rx=a(e.r(96913)),rL=a(e.r(47125)),rk=a(e.r(34651)),rM=a(e.r(2408)),r$=a(e.r(14483)),rU=a(e.r(13780)),rj=a(e.r(25891)),rB=a(e.r(26743)),rz=a(e.r(54072)),rK=a(e.r(72434)),rY=a(e.r(96363)),rF=a(e.r(19586)),rq=a(e.r(29531)),rV=a(e.r(70021)),rG=a(e.r(27068)),rH=a(e.r(51094)),rZ=a(e.r(71738)),rW=a(e.r(35814)),rQ=a(e.r(1232)),rJ=a(e.r(48841)),rX=a(e.r(98767)),r0=a(e.r(42947)),r1=a(e.r(72036)),r4=a(e.r(42954)),r2=a(e.r(72305)),r6=a(e.r(22366)),r3=a(e.r(95803)),r5=a(e.r(60381)),r8=a(e.r(4568)),r9=a(e.r(25278)),r7=a(e.r(86344)),ie=a(e.r(78911)),it=a(e.r(55108)),ir=a(e.r(86693)),ii=a(e.r(44560)),is=a(e.r(97692)),ia=a(e.r(47168)),io=a(e.r(17191)),iu=a(e.r(34621)),il=a(e.r(92721)),id=a(e.r(76424)),ic=a(e.r(885)),ip=a(e.r(8607)),ih=a(e.r(98393)),im=a(e.r(14454)),iy=a(e.r(65791)),ig=a(e.r(14796)),i_=a(e.r(37469)),ib=a(e.r(20788)),iv=a(e.r(99403)),iE=a(e.r(16788)),iS=a(e.r(49966)),iA=a(e.r(53159)),iT=a(e.r(20114)),iw=a(e.r(21548)),iO=a(e.r(92129)),iR=a(e.r(60230)),iI=a(e.r(93783)),iC=a(e.r(14052)),iN=a(e.r(88877)),iP=a(e.r(91569)),iD=a(e.r(45871)),ix=a(e.r(85386)),iL=a(e.r(3268)),ik=a(e.r(1088)),iM=a(e.r(84053)),i$=a(e.r(61175)),iU=a(e.r(17090)),ij=a(e.r(82230)),iB=a(e.r(57246)),iz=a(e.r(19455)),iK=a(e.r(2178)),iY=a(e.r(46715)),iF=a(e.r(84832)),iq=a(e.r(39487)),iV=a(e.r(99407)),iG=a(e.r(37120)),iH=a(e.r(48507)),iZ=a(e.r(59602)),iW=a(e.r(79268)),iQ=a(e.r(77275)),iJ=a(e.r(6427)),iX=a(e.r(23438)),i0=a(e.r(81486)),i1=a(e.r(47063)),i4=a(e.r(10890)),i2=a(e.r(99281)),i6=a(e.r(18745)),i3=a(e.r(89096)),i5=a(e.r(14673)),i8=a(e.r(98504)),i9=a(e.r(73733)),i7=a(e.r(62473)),ne=a(e.r(13493)),nt=a(e.r(50853)),nr=a(e.r(30967)),ni=a(e.r(74576)),nn=a(e.r(17137)),ns=a(e.r(98600)),na=a(e.r(15066)),no=a(e.r(19583)),nu=a(e.r(55618)),nl=a(e.r(75794)),nd=a(e.r(98973)),nc=a(e.r(23121)),np=a(e.r(28334)),nf=a(e.r(44859)),nh=a(e.r(45368)),nm=a(e.r(84814)),ny=a(e.r(31480)),ng=a(e.r(65335)),n_=a(e.r(85442)),nb=a(e.r(65468)),nv=a(e.r(95272)),nE=a(e.r(97424)),nS=a(e.r(76383)),nA=a(e.r(99190)),nT=a(e.r(65649)),nw=a(e.r(58852)),nO=a(e.r(28038)),nR=a(e.r(43041)),nI=a(e.r(92505)),nC=a(e.r(66445)),nN=a(e.r(3079)),nP=a(e.r(58711)),nD=a(e.r(72757)),nx=a(e.r(47843)),nL=a(e.r(35096)),nk=a(e.r(55428)),nM=a(e.r(80457)),n$=a(e.r(20311)),nU=a(e.r(4723)),nj=a(e.r(53410)),nB=a(e.r(51602)),nz=a(e.r(85643)),nK=a(e.r(37073)),nY=a(e.r(42874)),nF=a(e.r(95311)),nq=a(e.r(55586)),nV=a(e.r(39844)),nG=a(e.r(32088)),nH=a(e.r(84617)),nZ=a(e.r(12259)),nW=a(e.r(31031)),nQ=a(e.r(82203)),nJ=a(e.r(65508)),nX=a(e.r(25427)),n0=a(e.r(85967)),n1=a(e.r(87619)),n4=a(e.r(31139)),n2=a(e.r(92963)),n6=a(e.r(24798)),n3=a(e.r(44325)),n5=a(e.r(11640));r.default={ACL_CAT:o.default,aclCat:o.default,ACL_DELUSER:u.default,aclDelUser:u.default,ACL_DRYRUN:l.default,aclDryRun:l.default,ACL_GENPASS:d.default,aclGenPass:d.default,ACL_GETUSER:c.default,aclGetUser:c.default,ACL_LIST:p.default,aclList:p.default,ACL_LOAD:f.default,aclLoad:f.default,ACL_LOG_RESET:h.default,aclLogReset:h.default,ACL_LOG:m.default,aclLog:m.default,ACL_SAVE:y.default,aclSave:y.default,ACL_SETUSER:g.default,aclSetUser:g.default,ACL_USERS:_.default,aclUsers:_.default,ACL_WHOAMI:b.default,aclWhoAmI:b.default,APPEND:v.default,append:v.default,ASKING:E.default,asking:E.default,AUTH:S.default,auth:S.default,BGREWRITEAOF:A.default,bgRewriteAof:A.default,BGSAVE:T.default,bgSave:T.default,BITCOUNT:w.default,bitCount:w.default,BITFIELD_RO:O.default,bitFieldRo:O.default,BITFIELD:R.default,bitField:R.default,BITOP:I.default,bitOp:I.default,BITPOS:C.default,bitPos:C.default,BLMOVE:N.default,blMove:N.default,BLMPOP:P.default,blmPop:P.default,BLPOP:D.default,blPop:D.default,BRPOP:x.default,brPop:x.default,BRPOPLPUSH:L.default,brPopLPush:L.default,BZMPOP:k.default,bzmPop:k.default,BZPOPMAX:M.default,bzPopMax:M.default,BZPOPMIN:$.default,bzPopMin:$.default,CLIENT_CACHING:U.default,clientCaching:U.default,CLIENT_GETNAME:j.default,clientGetName:j.default,CLIENT_GETREDIR:B.default,clientGetRedir:B.default,CLIENT_ID:z.default,clientId:z.default,CLIENT_INFO:K.default,clientInfo:K.default,CLIENT_KILL:Y.default,clientKill:Y.default,CLIENT_LIST:F.default,clientList:F.default,"CLIENT_NO-EVICT":q.default,clientNoEvict:q.default,"CLIENT_NO-TOUCH":V.default,clientNoTouch:V.default,CLIENT_PAUSE:G.default,clientPause:G.default,CLIENT_SETNAME:H.default,clientSetName:H.default,CLIENT_TRACKING:Z.default,clientTracking:Z.default,CLIENT_TRACKINGINFO:W.default,clientTrackingInfo:W.default,CLIENT_UNPAUSE:Q.default,clientUnpause:Q.default,CLUSTER_ADDSLOTS:J.default,clusterAddSlots:J.default,CLUSTER_ADDSLOTSRANGE:X.default,clusterAddSlotsRange:X.default,CLUSTER_BUMPEPOCH:ee.default,clusterBumpEpoch:ee.default,"CLUSTER_COUNT-FAILURE-REPORTS":et.default,clusterCountFailureReports:et.default,CLUSTER_COUNTKEYSINSLOT:er.default,clusterCountKeysInSlot:er.default,CLUSTER_DELSLOTS:ei.default,clusterDelSlots:ei.default,CLUSTER_DELSLOTSRANGE:en.default,clusterDelSlotsRange:en.default,CLUSTER_FAILOVER:es.default,clusterFailover:es.default,CLUSTER_FLUSHSLOTS:ea.default,clusterFlushSlots:ea.default,CLUSTER_FORGET:eo.default,clusterForget:eo.default,CLUSTER_GETKEYSINSLOT:eu.default,clusterGetKeysInSlot:eu.default,CLUSTER_INFO:el.default,clusterInfo:el.default,CLUSTER_KEYSLOT:ed.default,clusterKeySlot:ed.default,CLUSTER_LINKS:ec.default,clusterLinks:ec.default,CLUSTER_MEET:ep.default,clusterMeet:ep.default,CLUSTER_MYID:ef.default,clusterMyId:ef.default,CLUSTER_MYSHARDID:eh.default,clusterMyShardId:eh.default,CLUSTER_NODES:em.default,clusterNodes:em.default,CLUSTER_REPLICAS:ey.default,clusterReplicas:ey.default,CLUSTER_REPLICATE:eg.default,clusterReplicate:eg.default,CLUSTER_RESET:e_.default,clusterReset:e_.default,CLUSTER_SAVECONFIG:eb.default,clusterSaveConfig:eb.default,"CLUSTER_SET-CONFIG-EPOCH":ev.default,clusterSetConfigEpoch:ev.default,CLUSTER_SETSLOT:eE.default,clusterSetSlot:eE.default,CLUSTER_SLOTS:eS.default,clusterSlots:eS.default,COMMAND_COUNT:eA.default,commandCount:eA.default,COMMAND_GETKEYS:eT.default,commandGetKeys:eT.default,COMMAND_GETKEYSANDFLAGS:ew.default,commandGetKeysAndFlags:ew.default,COMMAND_INFO:eO.default,commandInfo:eO.default,COMMAND_LIST:eR.default,commandList:eR.default,COMMAND:eI.default,command:eI.default,CONFIG_GET:eC.default,configGet:eC.default,CONFIG_RESETASTAT:eN.default,configResetStat:eN.default,CONFIG_REWRITE:eP.default,configRewrite:eP.default,CONFIG_SET:eD.default,configSet:eD.default,COPY:ex.default,copy:ex.default,DBSIZE:eL.default,dbSize:eL.default,DECR:ek.default,decr:ek.default,DECRBY:eM.default,decrBy:eM.default,DEL:e$.default,del:e$.default,DUMP:eU.default,dump:eU.default,ECHO:ej.default,echo:ej.default,EVAL_RO:eB.default,evalRo:eB.default,EVAL:ez.default,eval:ez.default,EVALSHA_RO:eK.default,evalShaRo:eK.default,EVALSHA:eY.default,evalSha:eY.default,EXISTS:ti.default,exists:ti.default,EXPIRE:tn.default,expire:tn.default,EXPIREAT:ts.default,expireAt:ts.default,EXPIRETIME:ta.default,expireTime:ta.default,FLUSHALL:to.default,flushAll:to.default,FLUSHDB:tu.default,flushDb:tu.default,FCALL:tl.default,fCall:tl.default,FCALL_RO:td.default,fCallRo:td.default,FUNCTION_DELETE:tc.default,functionDelete:tc.default,FUNCTION_DUMP:tp.default,functionDump:tp.default,FUNCTION_FLUSH:tf.default,functionFlush:tf.default,FUNCTION_KILL:th.default,functionKill:th.default,FUNCTION_LIST_WITHCODE:tm.default,functionListWithCode:tm.default,FUNCTION_LIST:ty.default,functionList:ty.default,FUNCTION_LOAD:tg.default,functionLoad:tg.default,FUNCTION_RESTORE:t_.default,functionRestore:t_.default,FUNCTION_STATS:tb.default,functionStats:tb.default,GEOADD:eF.default,geoAdd:eF.default,GEODIST:eq.default,geoDist:eq.default,GEOHASH:eV.default,geoHash:eV.default,GEOPOS:eG.default,geoPos:eG.default,GEORADIUS_RO_WITH:eH.default,geoRadiusRoWith:eH.default,GEORADIUS_RO:eZ.default,geoRadiusRo:eZ.default,GEORADIUS_STORE:eW.default,geoRadiusStore:eW.default,GEORADIUS_WITH:eQ.default,geoRadiusWith:eQ.default,GEORADIUS:eJ.default,geoRadius:eJ.default,GEORADIUSBYMEMBER_RO_WITH:eX.default,geoRadiusByMemberRoWith:eX.default,GEORADIUSBYMEMBER_RO:e0.default,geoRadiusByMemberRo:e0.default,GEORADIUSBYMEMBER_STORE:e1.default,geoRadiusByMemberStore:e1.default,GEORADIUSBYMEMBER_WITH:e4.default,geoRadiusByMemberWith:e4.default,GEORADIUSBYMEMBER:e2.default,geoRadiusByMember:e2.default,GEOSEARCH_WITH:e6.default,geoSearchWith:e6.default,GEOSEARCH:e3.default,geoSearch:e3.default,GEOSEARCHSTORE:e5.default,geoSearchStore:e5.default,GET:e8.default,get:e8.default,GETBIT:e9.default,getBit:e9.default,GETDEL:e7.default,getDel:e7.default,GETEX:te.default,getEx:te.default,GETRANGE:tt.default,getRange:tt.default,GETSET:tr.default,getSet:tr.default,HDEL:tv.default,hDel:tv.default,HELLO:tE.default,hello:tE.default,HEXISTS:tS.default,hExists:tS.default,HEXPIRE:tA.default,hExpire:tA.default,HEXPIREAT:tT.default,hExpireAt:tT.default,HEXPIRETIME:tw.default,hExpireTime:tw.default,HGET:tO.default,hGet:tO.default,HGETALL:tR.default,hGetAll:tR.default,HGETDEL:tI.default,hGetDel:tI.default,HGETEX:tC.default,hGetEx:tC.default,HINCRBY:tN.default,hIncrBy:tN.default,HINCRBYFLOAT:tP.default,hIncrByFloat:tP.default,HKEYS:tD.default,hKeys:tD.default,HLEN:tx.default,hLen:tx.default,HMGET:tL.default,hmGet:tL.default,HPERSIST:tk.default,hPersist:tk.default,HPEXPIRE:tM.default,hpExpire:tM.default,HPEXPIREAT:t$.default,hpExpireAt:t$.default,HPEXPIRETIME:tU.default,hpExpireTime:tU.default,HPTTL:tj.default,hpTTL:tj.default,HRANDFIELD_COUNT_WITHVALUES:tB.default,hRandFieldCountWithValues:tB.default,HRANDFIELD_COUNT:tz.default,hRandFieldCount:tz.default,HRANDFIELD:tK.default,hRandField:tK.default,HSCAN:tY.default,hScan:tY.default,HSCAN_NOVALUES:tF.default,hScanNoValues:tF.default,HSET:tq.default,hSet:tq.default,HSETEX:tV.default,hSetEx:tV.default,HSETNX:tG.default,hSetNX:tG.default,HSTRLEN:tH.default,hStrLen:tH.default,HTTL:tZ.default,hTTL:tZ.default,HVALS:tW.default,hVals:tW.default,INCR:tQ.default,incr:tQ.default,INCRBY:tJ.default,incrBy:tJ.default,INCRBYFLOAT:tX.default,incrByFloat:tX.default,INFO:t0.default,info:t0.default,KEYS:t1.default,keys:t1.default,LASTSAVE:t4.default,lastSave:t4.default,LATENCY_DOCTOR:t2.default,latencyDoctor:t2.default,LATENCY_GRAPH:t6.default,latencyGraph:t6.default,LATENCY_HISTORY:t3.default,latencyHistory:t3.default,LATENCY_LATEST:t5.default,latencyLatest:t5.default,LATENCY_RESET:t8.default,latencyReset:t8.default,LCS_IDX_WITHMATCHLEN:t9.default,lcsIdxWithMatchLen:t9.default,LCS_IDX:t7.default,lcsIdx:t7.default,LCS_LEN:re.default,lcsLen:re.default,LCS:rt.default,lcs:rt.default,LINDEX:rr.default,lIndex:rr.default,LINSERT:ri.default,lInsert:ri.default,LLEN:rn.default,lLen:rn.default,LMOVE:rs.default,lMove:rs.default,LMPOP:ra.default,lmPop:ra.default,LOLWUT:ro.default,LPOP_COUNT:ru.default,lPopCount:ru.default,LPOP:rl.default,lPop:rl.default,LPOS_COUNT:rd.default,lPosCount:rd.default,LPOS:rc.default,lPos:rc.default,LPUSH:rp.default,lPush:rp.default,LPUSHX:rf.default,lPushX:rf.default,LRANGE:rh.default,lRange:rh.default,LREM:rm.default,lRem:rm.default,LSET:ry.default,lSet:ry.default,LTRIM:rg.default,lTrim:rg.default,MEMORY_DOCTOR:r_.default,memoryDoctor:r_.default,"MEMORY_MALLOC-STATS":rb.default,memoryMallocStats:rb.default,MEMORY_PURGE:rv.default,memoryPurge:rv.default,MEMORY_STATS:rE.default,memoryStats:rE.default,MEMORY_USAGE:rS.default,memoryUsage:rS.default,MGET:rA.default,mGet:rA.default,MIGRATE:rT.default,migrate:rT.default,MODULE_LIST:rw.default,moduleList:rw.default,MODULE_LOAD:rO.default,moduleLoad:rO.default,MODULE_UNLOAD:rR.default,moduleUnload:rR.default,MOVE:rI.default,move:rI.default,MSET:rC.default,mSet:rC.default,MSETNX:rN.default,mSetNX:rN.default,OBJECT_ENCODING:rP.default,objectEncoding:rP.default,OBJECT_FREQ:rD.default,objectFreq:rD.default,OBJECT_IDLETIME:rx.default,objectIdleTime:rx.default,OBJECT_REFCOUNT:rL.default,objectRefCount:rL.default,PERSIST:rk.default,persist:rk.default,PEXPIRE:rM.default,pExpire:rM.default,PEXPIREAT:r$.default,pExpireAt:r$.default,PEXPIRETIME:rU.default,pExpireTime:rU.default,PFADD:rj.default,pfAdd:rj.default,PFCOUNT:rB.default,pfCount:rB.default,PFMERGE:rz.default,pfMerge:rz.default,PING:rK.default,ping:rK.default,PSETEX:rY.default,pSetEx:rY.default,PTTL:rF.default,pTTL:rF.default,PUBLISH:rq.default,publish:rq.default,PUBSUB_CHANNELS:rV.default,pubSubChannels:rV.default,PUBSUB_NUMPAT:rG.default,pubSubNumPat:rG.default,PUBSUB_NUMSUB:rH.default,pubSubNumSub:rH.default,PUBSUB_SHARDNUMSUB:rZ.default,pubSubShardNumSub:rZ.default,PUBSUB_SHARDCHANNELS:rW.default,pubSubShardChannels:rW.default,RANDOMKEY:rQ.default,randomKey:rQ.default,READONLY:rJ.default,readonly:rJ.default,RENAME:rX.default,rename:rX.default,RENAMENX:r0.default,renameNX:r0.default,REPLICAOF:r1.default,replicaOf:r1.default,"RESTORE-ASKING":r4.default,restoreAsking:r4.default,RESTORE:r2.default,restore:r2.default,RPOP_COUNT:r3.default,rPopCount:r3.default,ROLE:r6.default,role:r6.default,RPOP:r5.default,rPop:r5.default,RPOPLPUSH:r8.default,rPopLPush:r8.default,RPUSH:r9.default,rPush:r9.default,RPUSHX:r7.default,rPushX:r7.default,SADD:ie.default,sAdd:ie.default,SCAN:it.default,scan:it.default,SCARD:ir.default,sCard:ir.default,SCRIPT_DEBUG:ii.default,scriptDebug:ii.default,SCRIPT_EXISTS:is.default,scriptExists:is.default,SCRIPT_FLUSH:ia.default,scriptFlush:ia.default,SCRIPT_KILL:io.default,scriptKill:io.default,SCRIPT_LOAD:iu.default,scriptLoad:iu.default,SDIFF:il.default,sDiff:il.default,SDIFFSTORE:id.default,sDiffStore:id.default,SET:ic.default,set:ic.default,SETBIT:ip.default,setBit:ip.default,SETEX:ih.default,setEx:ih.default,SETNX:im.default,setNX:im.default,SETRANGE:iy.default,setRange:iy.default,SINTER:ig.default,sInter:ig.default,SINTERCARD:i_.default,sInterCard:i_.default,SINTERSTORE:ib.default,sInterStore:ib.default,SISMEMBER:iv.default,sIsMember:iv.default,SMEMBERS:iE.default,sMembers:iE.default,SMISMEMBER:iS.default,smIsMember:iS.default,SMOVE:iA.default,sMove:iA.default,SORT_RO:iT.default,sortRo:iT.default,SORT_STORE:iw.default,sortStore:iw.default,SORT:iO.default,sort:iO.default,SPOP_COUNT:iR.default,sPopCount:iR.default,SPOP:iI.default,sPop:iI.default,SPUBLISH:iC.default,sPublish:iC.default,SRANDMEMBER_COUNT:iN.default,sRandMemberCount:iN.default,SRANDMEMBER:iP.default,sRandMember:iP.default,SREM:iD.default,sRem:iD.default,SSCAN:ix.default,sScan:ix.default,STRLEN:iL.default,strLen:iL.default,SUNION:ik.default,sUnion:ik.default,SUNIONSTORE:iM.default,sUnionStore:iM.default,SWAPDB:i$.default,swapDb:i$.default,TIME:iU.default,time:iU.default,TOUCH:ij.default,touch:ij.default,TTL:iB.default,ttl:iB.default,TYPE:iz.default,type:iz.default,UNLINK:iK.default,unlink:iK.default,WAIT:iY.default,wait:iY.default,XACK:iF.default,xAck:iF.default,XACKDEL:iq.default,xAckDel:iq.default,XADD_NOMKSTREAM:iV.default,xAddNoMkStream:iV.default,XADD:iG.default,xAdd:iG.default,XAUTOCLAIM_JUSTID:iH.default,xAutoClaimJustId:iH.default,XAUTOCLAIM:iZ.default,xAutoClaim:iZ.default,XCLAIM_JUSTID:iW.default,xClaimJustId:iW.default,XCLAIM:iQ.default,xClaim:iQ.default,XDEL:iJ.default,xDel:iJ.default,XDELEX:iX.default,xDelEx:iX.default,XGROUP_CREATE:i0.default,xGroupCreate:i0.default,XGROUP_CREATECONSUMER:i1.default,xGroupCreateConsumer:i1.default,XGROUP_DELCONSUMER:i4.default,xGroupDelConsumer:i4.default,XGROUP_DESTROY:i2.default,xGroupDestroy:i2.default,XGROUP_SETID:i6.default,xGroupSetId:i6.default,XINFO_CONSUMERS:i3.default,xInfoConsumers:i3.default,XINFO_GROUPS:i5.default,xInfoGroups:i5.default,XINFO_STREAM:i8.default,xInfoStream:i8.default,XLEN:i9.default,xLen:i9.default,XPENDING_RANGE:i7.default,xPendingRange:i7.default,XPENDING:ne.default,xPending:ne.default,XRANGE:nt.default,xRange:nt.default,XREAD:nr.default,xRead:nr.default,XREADGROUP:ni.default,xReadGroup:ni.default,XREVRANGE:nn.default,xRevRange:nn.default,XSETID:ns.default,xSetId:ns.default,XTRIM:na.default,xTrim:na.default,ZADD_INCR:no.default,zAddIncr:no.default,ZADD:nu.default,zAdd:nu.default,ZCARD:nl.default,zCard:nl.default,ZCOUNT:nd.default,zCount:nd.default,ZDIFF_WITHSCORES:nc.default,zDiffWithScores:nc.default,ZDIFF:np.default,zDiff:np.default,ZDIFFSTORE:nf.default,zDiffStore:nf.default,ZINCRBY:nh.default,zIncrBy:nh.default,ZINTER_WITHSCORES:nm.default,zInterWithScores:nm.default,ZINTER:ny.default,zInter:ny.default,ZINTERCARD:ng.default,zInterCard:ng.default,ZINTERSTORE:n_.default,zInterStore:n_.default,ZLEXCOUNT:nb.default,zLexCount:nb.default,ZMPOP:nv.default,zmPop:nv.default,ZMSCORE:nE.default,zmScore:nE.default,ZPOPMAX_COUNT:nS.default,zPopMaxCount:nS.default,ZPOPMAX:nA.default,zPopMax:nA.default,ZPOPMIN_COUNT:nT.default,zPopMinCount:nT.default,ZPOPMIN:nw.default,zPopMin:nw.default,ZRANDMEMBER_COUNT_WITHSCORES:nO.default,zRandMemberCountWithScores:nO.default,ZRANDMEMBER_COUNT:nR.default,zRandMemberCount:nR.default,ZRANDMEMBER:nI.default,zRandMember:nI.default,ZRANGE_WITHSCORES:nC.default,zRangeWithScores:nC.default,ZRANGE:nN.default,zRange:nN.default,ZRANGEBYLEX:nP.default,zRangeByLex:nP.default,ZRANGEBYSCORE_WITHSCORES:nD.default,zRangeByScoreWithScores:nD.default,ZRANGEBYSCORE:nx.default,zRangeByScore:nx.default,ZRANGESTORE:nL.default,zRangeStore:nL.default,ZRANK_WITHSCORE:nM.default,zRankWithScore:nM.default,ZRANK:n$.default,zRank:n$.default,ZREM:nU.default,zRem:nU.default,ZREMRANGEBYLEX:nj.default,zRemRangeByLex:nj.default,ZREMRANGEBYRANK:nB.default,zRemRangeByRank:nB.default,ZREMRANGEBYSCORE:nk.default,zRemRangeByScore:nk.default,ZREVRANK:nz.default,zRevRank:nz.default,ZSCAN:nK.default,zScan:nK.default,ZSCORE:nY.default,zScore:nY.default,ZUNION_WITHSCORES:nF.default,zUnionWithScores:nF.default,ZUNION:nq.default,zUnion:nq.default,ZUNIONSTORE:nV.default,zUnionStore:nV.default,VADD:nG.default,vAdd:nG.default,VCARD:nH.default,vCard:nH.default,VDIM:nZ.default,vDim:nZ.default,VEMB:nW.default,vEmb:nW.default,VEMB_RAW:nQ.default,vEmbRaw:nQ.default,VGETATTR:nJ.default,vGetAttr:nJ.default,VINFO:nX.default,vInfo:nX.default,VLINKS:n0.default,vLinks:n0.default,VLINKS_WITHSCORES:n1.default,vLinksWithScores:n1.default,VRANDMEMBER:n4.default,vRandMember:n4.default,VREM:n2.default,vRem:n2.default,VSETATTR:n6.default,vSetAttr:n6.default,VSIM:n3.default,vSim:n3.default,VSIM_WITHSCORES:n5.default,vSimWithScores:n5.default}},40468,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.emitDiagnostics=r.dbgMaintenance=r.MAINTENANCE_EVENTS=void 0;let n=e.r(4446),s=e.r(19901),a=i(e.r(57328)),o=e.r(36340),u=i(e.r(77652));r.MAINTENANCE_EVENTS={PAUSE_WRITING:"pause-writing",RESUME_WRITING:"resume-writing",TIMEOUTS_UPDATE:"timeouts-update"};let l={MOVING:"MOVING",MIGRATING:"MIGRATING",MIGRATED:"MIGRATED",FAILING_OVER:"FAILING_OVER",FAILED_OVER:"FAILED_OVER"};async function d(e,t,i){let o;if((0,a.default)(void 0!==i.maintEndpointType),"auto"!==i.maintEndpointType)return(0,r.dbgMaintenance)(`Determine endpoint type: ${i.maintEndpointType}`),i.maintEndpointType;let u=function(e){let t=(0,n.isIP)(e);if(4===t){let t=e.split(".").map(Number);return 10===t[0]||172===t[0]&&t[1]>=16&&t[1]<=31||192===t[0]&&168===t[1]}return 6===t&&(e.startsWith("fc")||e.startsWith("fd")||"::1"===e||e.startsWith("fe80"))}((0,n.isIP)(t)?t:(await (0,s.lookup)(t,{family:0})).address);return o=e?u?"internal-fqdn":"external-fqdn":u?"internal-ip":"external-ip",(0,r.dbgMaintenance)(`Determine endpoint type: ${o}`),o}r.dbgMaintenance=(...e)=>{if(process.env.REDIS_DEBUG_MAINTENANCE)return console.log("[MNT]",...e)},r.emitDiagnostics=e=>{process.env.REDIS_EMIT_DIAGNOSTICS&&u.default.channel("redis.maintenance").publish(e)},r.default=class{#tA;#x;#tT=0;#D;static setupDefaultMaintOptions(e){void 0===e.maintNotifications&&(e.maintNotifications=e?.RESP===3?"auto":"disabled"),void 0===e.maintEndpointType&&(e.maintEndpointType="auto"),void 0===e.maintRelaxedSocketTimeout&&(e.maintRelaxedSocketTimeout=1e4),void 0===e.maintRelaxedCommandTimeout&&(e.maintRelaxedCommandTimeout=1e4)}static async getHandshakeCommand(e){if("disabled"===e.maintNotifications)return;let t=e.url?new URL(e.url).hostname:e.socket?.host;if(!t)return;let i=e.socket?.tls??!1;return{cmd:["CLIENT","MAINT_NOTIFICATIONS","ON","moving-endpoint-type",await d(i,t,e)],errorHandler:t=>{if((0,r.dbgMaintenance)("handshake failed:",t),"enabled"===e.maintNotifications)throw t}}}constructor(e,t,r){this.#tA=e,this.#x=r,this.#D=t,this.#tA.addPushHandler(this.#tw)}#tw=e=>{if((0,r.dbgMaintenance)("ONPUSH:",e.map(String)),!Array.isArray(e)||!["MOVING","MIGRATING","MIGRATED","FAILING_OVER","FAILED_OVER"].includes(String(e[0])))return!1;let t=String(e[0]);switch((0,r.emitDiagnostics)({type:t,timestamp:Date.now(),data:{push:e.map(String)}}),t){case l.MOVING:{let t=e[2],i=e[3]?String(e[3]):null;return(0,r.dbgMaintenance)("Received MOVING:",t,i),this.#tO(t,i),!0}case l.MIGRATING:case l.FAILING_OVER:return(0,r.dbgMaintenance)("Received MIGRATING|FAILING_OVER"),this.#tR(),!0;case l.MIGRATED:case l.FAILED_OVER:return(0,r.dbgMaintenance)("Received MIGRATED|FAILED_OVER"),this.#tI(),!0}return!1};#tO=async(e,t)=>{let i,n;if(this.#tR(),null===t){(0,a.default)("none"===this.#x.maintEndpointType),(0,a.default)(void 0!==this.#x.socket),(0,a.default)("host"in this.#x.socket),(0,a.default)("string"==typeof this.#x.socket.host),i=this.#x.socket.host,(0,a.default)("number"==typeof this.#x.socket.port),n=this.#x.socket.port;let t=1e3*e/2;(0,r.dbgMaintenance)(`Wait for ${t}ms`),await (0,o.setTimeout)(t)}else{let e=t.split(":");i=e[0],n=Number(e[1])}(0,r.dbgMaintenance)("Pausing writing of new commands to old socket"),this.#D._pause(),(0,r.dbgMaintenance)("Creating new tmp client");let s=performance.now();if(this.#x.url){let e=new URL(this.#x.url);e.hostname=i,e.port=String(n),this.#x.url=e.toString()}else this.#x.socket={...this.#x.socket,host:i,port:n};let u=this.#D.duplicate();u.on("error",e=>{(0,r.dbgMaintenance)("[ERR]",e)}),(0,r.dbgMaintenance)(`Tmp client created in ${(performance.now()-s).toFixed(2)}ms`),(0,r.dbgMaintenance)(`Set timeout for tmp client to ${this.#x.maintRelaxedSocketTimeout}`),u._maintenanceUpdate({relaxedCommandTimeout:this.#x.maintRelaxedCommandTimeout,relaxedSocketTimeout:this.#x.maintRelaxedSocketTimeout}),(0,r.dbgMaintenance)(`Connecting tmp client: ${i}:${n}`),s=performance.now(),await u.connect(),(0,r.dbgMaintenance)(`Connected to tmp client in ${(performance.now()-s).toFixed(2)}ms`),(0,r.dbgMaintenance)("Wait for all in-flight commands to complete"),await this.#tA.waitForInflightCommandsToComplete(),(0,r.dbgMaintenance)("In-flight commands completed"),(0,r.dbgMaintenance)("Swap client sockets...");let l=this.#D._ejectSocket(),d=u._ejectSocket();this.#D._insertSocket(d),u._insertSocket(l),u.destroy(),(0,r.dbgMaintenance)("Swap client sockets done."),(0,r.dbgMaintenance)("Resume writing"),this.#D._unpause(),this.#tI()};#tR=()=>{if(this.#tT++,this.#tT>1)return void(0,r.dbgMaintenance)("Timeout relaxation already done");let e={relaxedCommandTimeout:this.#x.maintRelaxedCommandTimeout,relaxedSocketTimeout:this.#x.maintRelaxedSocketTimeout};this.#D._maintenanceUpdate(e)};#tI=()=>{if(this.#tT=Math.max(this.#tT-1,0),this.#tT>0)return void(0,r.dbgMaintenance)("Not ready to unrelax timeouts yet");this.#D._maintenanceUpdate({relaxedCommandTimeout:void 0,relaxedSocketTimeout:void 0})}}},10057,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(87769),s=i(e.r(61095)),a=i(e.r(85560)),o=e.r(28307),u=e.r(36340),l=e.r(40468);class d extends n.EventEmitter{#tC;#tN;#tP;#tD;#tx;#tL;#tk;#tM=!1;get isOpen(){return this.#tM}#t$=!1;get isReady(){return this.#t$}#tU=!1;#tj=0;get socketEpoch(){return this.#tj}constructor(e,t){super(),this.#tC=e,this.#tN=t?.connectTimeout??5e3,this.#tP=this.#tB(t),this.#tD=this.#tz(t),this.#tx=t?.socketTimeout}#tB(e){let t=e?.reconnectStrategy;return!1===t||"number"==typeof t?()=>t:t?(e,r)=>{try{let i=t(e,r);if(!1!==i&&!(i instanceof Error)&&"number"!=typeof i)throw TypeError(`Reconnect strategy should return \`false | Error | number\`, got ${i} instead`);return i}catch(t){return this.emit("error",t),this.defaultReconnectStrategy(e,t)}}:this.defaultReconnectStrategy}#tz(e){if(e?.tls===!0){let t={...e,port:e?.port??6379,noDelay:e?.noDelay??!0,keepAlive:e?.keepAlive??!0,keepAliveInitialDelay:e?.keepAliveInitialDelay??5e3,timeout:void 0,onread:void 0,readable:!0,writable:!0};return{create:()=>a.default.connect(t),event:"secureConnect"}}if(e&&"path"in e){let t={...e,timeout:void 0,onread:void 0,readable:!0,writable:!0};return{create:()=>s.default.createConnection(t),event:"connect"}}let t={...e,port:e?.port??6379,noDelay:e?.noDelay??!0,keepAlive:e?.keepAlive??!0,keepAliveInitialDelay:e?.keepAliveInitialDelay??5e3,timeout:void 0,onread:void 0,readable:!0,writable:!0};return{create:()=>s.default.createConnection(t),event:"connect"}}#tK(e,t){let r=this.#tP(e,t);return!1===r?(this.#tM=!1,this.emit("error",t),t):r instanceof Error?(this.#tM=!1,this.emit("error",t),new o.ReconnectStrategyError(r,t)):r}async connect(){if(this.#tM)throw Error("Socket already opened");return this.#tM=!0,this.#tY()}async #tY(){let e=0;do try{this.#tk=await this.#tF(),this.emit("connect");try{await this.#tC()}catch(e){throw this.#tk.destroy(),this.#tk=void 0,e}this.#t$=!0,this.#tj++,this.emit("ready")}catch(r){let t=this.#tK(e++,r);if("number"!=typeof t)throw t;this.emit("error",r),await (0,u.setTimeout)(t),this.emit("reconnecting")}while(this.#tM&&!this.#t$)}setMaintenanceTimeout(e){if((0,l.dbgMaintenance)(`Set socket timeout to ${e}`),this.#tL===e)return void(0,l.dbgMaintenance)(`Socket already set maintenanceCommandTimeout to ${e}, skipping`);this.#tL=e,void 0!==e?this.#tk?.setTimeout(e):this.#tk?.setTimeout(this.#tx??0)}async #tF(){let e,t=this.#tD.create();return void 0!==this.#tN&&(e=()=>t.destroy(new o.ConnectionTimeoutError),t.once("timeout",e),t.setTimeout(this.#tN)),this.#tU&&t.unref(),await (0,n.once)(t,this.#tD.event),e&&t.removeListener("timeout",e),this.#tx&&(t.once("timeout",()=>{let e=this.#tL?new o.SocketTimeoutDuringMaintenanceError(this.#tL):new o.SocketTimeoutError(this.#tx);t.destroy(e)}),t.setTimeout(this.#tx)),t.once("error",e=>this.#tq(e)).once("close",e=>{!e&&this.#tM&&this.#tk===t&&this.#tq(new o.SocketClosedUnexpectedlyError)}).on("drain",()=>this.emit("drain")).on("data",e=>this.emit("data",e)),t}#tq(e){let t=this.#t$;this.#t$=!1,this.emit("error",e),t&&this.#tM&&"number"==typeof this.#tK(0,e)&&(this.emit("reconnecting"),this.#tY().catch(()=>{}))}write(e){if(this.#tk){for(let t of(this.#tk.cork(),e)){for(let e of t)this.#tk.write(e);if(this.#tk.writableNeedDrain)break}this.#tk.uncork()}}async quit(e){if(!this.#tM)throw new o.ClientClosedError;this.#tM=!1;let t=await e();return this.destroySocket(),t}close(){if(!this.#tM)throw new o.ClientClosedError;this.#tM=!1}destroy(){if(!this.#tM)throw new o.ClientClosedError;this.#tM=!1,this.destroySocket()}destroySocket(){this.#t$=!1,this.#tk&&(this.#tk.destroy(),this.#tk=void 0),this.emit("end")}ref(){this.#tU=!1,this.#tk?.ref()}unref(){this.#tU=!0,this.#tk?.unref()}defaultReconnectStrategy(e,t){return!(t instanceof o.SocketTimeoutError)&&Math.min(50*Math.pow(2,e),2e3)+Math.floor(200*Math.random())}}r.default=d},73183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Token=void 0,r.Token=class{value;expiresAtMs;receivedAtMs;constructor(e,t,r){this.value=e,this.expiresAtMs=t,this.receivedAtMs=r}getTtlMs(e){return this.expiresAtMs<e?0:this.expiresAtMs-e}}},63826,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TokenManager=r.IDPError=void 0;let i=e.r(73183);class n extends Error{message;isRetryable;constructor(e,t){super(e),this.message=e,this.isRetryable=t,this.name="IDPError"}}r.IDPError=n,r.TokenManager=class{identityProvider;config;currentToken=null;refreshTimeout=null;listener=null;retryAttempt=0;constructor(e,t){if(this.identityProvider=e,this.config=t,this.config.expirationRefreshRatio>1)throw Error("expirationRefreshRatio must be less than or equal to 1");if(this.config.expirationRefreshRatio<0)throw Error("expirationRefreshRatio must be greater or equal to 0")}start(e,t=0){return this.listener&&this.stop(),this.listener=e,this.retryAttempt=0,this.scheduleNextRefresh(t),{dispose:()=>this.stop()}}calculateRetryDelay(){if(!this.config.retry)return 0;let{initialDelayMs:e,maxDelayMs:t,backoffMultiplier:r,jitterPercentage:i}=this.config.retry,n=e*Math.pow(r,this.retryAttempt-1);if(n=Math.min(n,t),i){let e=i/100*n;n+=Math.random()*e-e/2}return Math.max(0,Math.floor(n))}shouldRetry(e){if(!this.config.retry)return!1;let{maxAttempts:t,isRetryable:r}=this.config.retry;return!(this.retryAttempt>=t)&&!!r&&r(e,this.retryAttempt)}isRunning(){return null!==this.listener}async refresh(){if(!this.listener)throw Error("TokenManager is not running, but refresh was called");try{await this.identityProvider.requestToken().then(this.handleNewToken),this.retryAttempt=0}catch(e){if(this.shouldRetry(e)){this.retryAttempt++;let t=this.calculateRetryDelay();this.notifyError(`Token refresh failed (attempt ${this.retryAttempt}), retrying in ${t}ms: ${e}`,!0),this.scheduleNextRefresh(t)}else this.notifyError(e,!1),this.stop()}}handleNewToken=async({token:e,ttlMs:t})=>{if(!this.listener)throw Error("TokenManager is not running, but a new token was received");let r=this.wrapAndSetCurrentToken(e,t);this.listener.onNext(r),this.scheduleNextRefresh(this.calculateRefreshTime(r))};wrapAndSetCurrentToken(e,t){let r=Date.now(),n=new i.Token(e,r+t,r);return this.currentToken=n,n}scheduleNextRefresh(e){this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null),0===e?this.refresh():this.refreshTimeout=setTimeout(()=>this.refresh(),e)}calculateRefreshTime(e,t=Date.now()){return Math.floor(e.getTtlMs(t)*this.config.expirationRefreshRatio)}stop(){this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null),this.listener=null,this.currentToken=null,this.retryAttempt=0}getCurrentToken(){return this.currentToken}notifyError(e,t){let r=e instanceof Error?e.message:String(e);if(!this.listener)throw Error(`TokenManager is not running but received an error: ${r}`);this.listener.onError(new n(r,t))}}},49536,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UnableToObtainNewCredentialsError=r.CredentialsError=void 0,r.CredentialsError=class extends Error{constructor(e){super(`Re-authentication with latest credentials failed: ${e}`),this.name="CredentialsError"}},r.UnableToObtainNewCredentialsError=class extends Error{constructor(e){super(`Unable to obtain new credentials : ${e}`),this.name="UnableToObtainNewCredentialsError"}}},80762,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Token=r.CredentialsError=r.UnableToObtainNewCredentialsError=r.IDPError=r.TokenManager=void 0;var i=e.r(63826);Object.defineProperty(r,"TokenManager",{enumerable:!0,get:function(){return i.TokenManager}}),Object.defineProperty(r,"IDPError",{enumerable:!0,get:function(){return i.IDPError}});var n=e.r(49536);Object.defineProperty(r,"UnableToObtainNewCredentialsError",{enumerable:!0,get:function(){return n.UnableToObtainNewCredentialsError}}),Object.defineProperty(r,"CredentialsError",{enumerable:!0,get:function(){return n.CredentialsError}});var s=e.r(73183);Object.defineProperty(r,"Token",{enumerable:!0,get:function(){return s.Token}})},82045,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.EmptyAwareSinglyLinkedList=r.SinglyLinkedList=r.DoublyLinkedList=void 0;let n=i(e.r(27699));class s{#tV=0;get length(){return this.#tV}#tG;get head(){return this.#tG}#tH;get tail(){return this.#tH}push(e){return(++this.#tV,void 0===this.#tH)?this.#tG=this.#tH={previous:this.#tG,next:void 0,value:e}:this.#tH=this.#tH.next={previous:this.#tH,next:void 0,value:e}}unshift(e){return(++this.#tV,void 0===this.#tG)?this.#tG=this.#tH={previous:void 0,next:void 0,value:e}:this.#tG=this.#tG.previous={previous:void 0,next:this.#tG,value:e}}add(e,t=!1){return t?this.unshift(e):this.push(e)}shift(){if(void 0===this.#tG)return;--this.#tV;let e=this.#tG;return e.next?(e.next.previous=void 0,this.#tG=e.next,e.next=void 0):this.#tG=this.#tH=void 0,e.value}remove(e){0!==this.#tV&&(--this.#tV,this.#tH===e&&(this.#tH=e.previous),this.#tG===e?this.#tG=e.next:(e.previous&&(e.previous.next=e.next),e.next&&(e.next.previous=e.previous)),e.previous=void 0,e.next=void 0)}reset(){this.#tV=0,this.#tG=this.#tH=void 0}*[Symbol.iterator](){let e=this.#tG;for(;void 0!==e;)yield e.value,e=e.next}*nodes(){let e=this.#tG;for(;e;){let t=e.next;yield e,e=t}}}r.DoublyLinkedList=s;class a{#tV=0;get length(){return this.#tV}#tG;get head(){return this.#tG}#tH;get tail(){return this.#tH}push(e){++this.#tV;let t={value:e,next:void 0,removed:!1};return void 0===this.#tG?this.#tG=this.#tH=t:this.#tH.next=this.#tH=t}remove(e,t){if(e.removed)throw Error("node already removed");--this.#tV,this.#tG===e?this.#tH===e?this.#tG=this.#tH=void 0:this.#tG=e.next:this.#tH===e?(this.#tH=t,t.next=void 0):t.next=e.next,e.removed=!0}shift(){if(void 0===this.#tG)return;let e=this.#tG;return 0==--this.#tV?this.#tG=this.#tH=void 0:this.#tG=e.next,e.removed=!0,e.value}reset(){this.#tV=0,this.#tG=this.#tH=void 0}*[Symbol.iterator](){let e=this.#tG;for(;void 0!==e;)yield e.value,e=e.next}}r.SinglyLinkedList=a;class o extends a{events=new n.default;reset(){let e=this.length;super.reset(),e!==this.length&&0===this.length&&this.events.emit("empty")}shift(){let e=this.length,t=super.shift();return e!==this.length&&0===this.length&&this.events.emit("empty"),t}remove(e,t){let r=this.length;super.remove(e,t),r!==this.length&&0===this.length&&this.events.emit("empty")}}r.EmptyAwareSinglyLinkedList=o},94997,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){let t=[],r="*"+e.length+"\r\n";for(let i=0;i<e.length;i++){let n=e[i];if("string"==typeof n)r+="$"+Buffer.byteLength(n)+"\r\n"+n+"\r\n";else if(n instanceof Buffer)t.push(r+"$"+n.length.toString()+"\r\n",n),r="\r\n";else throw TypeError(`"arguments[${i}]" must be of type "string | Buffer", got ${typeof n} instead.`)}return t.push(r),t}},74788,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PubSub=r.PUBSUB_TYPE=void 0,r.PUBSUB_TYPE={CHANNELS:"CHANNELS",PATTERNS:"PATTERNS",SHARDED:"SHARDED"};let i={[r.PUBSUB_TYPE.CHANNELS]:{subscribe:Buffer.from("subscribe"),unsubscribe:Buffer.from("unsubscribe"),message:Buffer.from("message")},[r.PUBSUB_TYPE.PATTERNS]:{subscribe:Buffer.from("psubscribe"),unsubscribe:Buffer.from("punsubscribe"),message:Buffer.from("pmessage")},[r.PUBSUB_TYPE.SHARDED]:{subscribe:Buffer.from("ssubscribe"),unsubscribe:Buffer.from("sunsubscribe"),message:Buffer.from("smessage")}};class n{static isStatusReply(e){return i[r.PUBSUB_TYPE.CHANNELS].subscribe.equals(e[0])||i[r.PUBSUB_TYPE.CHANNELS].unsubscribe.equals(e[0])||i[r.PUBSUB_TYPE.PATTERNS].subscribe.equals(e[0])||i[r.PUBSUB_TYPE.PATTERNS].unsubscribe.equals(e[0])||i[r.PUBSUB_TYPE.SHARDED].subscribe.equals(e[0])}static isShardedUnsubscribe(e){return i[r.PUBSUB_TYPE.SHARDED].unsubscribe.equals(e[0])}static #tZ(e){return Array.isArray(e)?e:[e]}static #tW(e,t){return t?e.buffers:e.strings}#tQ=0;#tJ=!1;get isActive(){return this.#tJ}listeners={[r.PUBSUB_TYPE.CHANNELS]:new Map,[r.PUBSUB_TYPE.PATTERNS]:new Map,[r.PUBSUB_TYPE.SHARDED]:new Map};subscribe(e,t,r,s){let a=[i[e].subscribe],o=n.#tZ(t);for(let t of o){let r=this.listeners[e].get(t);(!r||r.unsubscribing)&&a.push(t)}if(1===a.length){for(let t of o)n.#tW(this.listeners[e].get(t),s).add(r);return}return this.#tJ=!0,this.#tQ++,{args:a,channelsCounter:a.length-1,resolve:()=>{for(let t of(this.#tQ--,o)){let i=this.listeners[e].get(t);i||(i={unsubscribing:!1,buffers:new Set,strings:new Set},this.listeners[e].set(t,i)),n.#tW(i,s).add(r)}},reject:()=>{this.#tQ--,this.#tX()}}}extendChannelListeners(e,t,r){if(this.#t0(e,t,r))return this.#tJ=!0,this.#tQ++,{args:[i[e].subscribe,t],channelsCounter:1,resolve:()=>this.#tQ--,reject:()=>{this.#tQ--,this.#tX()}}}#t0(e,t,r){let i=this.listeners[e].get(t);if(!i)return this.listeners[e].set(t,r),!0;for(let e of r.buffers)i.buffers.add(e);for(let e of r.strings)i.strings.add(e);return!1}extendTypeListeners(e,t){let r=[i[e].subscribe];for(let[i,n]of t)this.#t0(e,i,n)&&r.push(i);if(1!==r.length)return this.#tJ=!0,this.#tQ++,{args:r,channelsCounter:r.length-1,resolve:()=>this.#tQ--,reject:()=>{this.#tQ--,this.#tX()}}}unsubscribe(e,t,r,s){let a=this.listeners[e];if(!t)return this.#t1([i[e].unsubscribe],NaN,()=>a.clear());let o=n.#tZ(t);if(!r)return this.#t1([i[e].unsubscribe,...o],o.length,()=>{for(let e of o)a.delete(e)});let u=[i[e].unsubscribe];for(let e of o){let t=a.get(e);if(t){let e,i;if(s?(e=t.buffers,i=t.strings):(e=t.strings,i=t.buffers),0!==(e.has(r)?e.size-1:e.size)||0!==i.size)continue;t.unsubscribing=!0}u.push(e)}if(1===u.length){for(let e of o)n.#tW(a.get(e),s).delete(r);return}return this.#t1(u,u.length-1,()=>{for(let e of o){let t=a.get(e);t&&((s?t.buffers:t.strings).delete(r),0===t.buffers.size&&0===t.strings.size&&a.delete(e))}})}#t1(e,t,r){return{args:e,channelsCounter:t,resolve:()=>{r(),this.#tX()},reject:void 0}}#tX(){this.#tJ=0!==this.listeners[r.PUBSUB_TYPE.CHANNELS].size||0!==this.listeners[r.PUBSUB_TYPE.PATTERNS].size||0!==this.listeners[r.PUBSUB_TYPE.SHARDED].size||0!==this.#tQ}reset(){this.#tJ=!1,this.#tQ=0}resubscribe(){let e=[];for(let[t,i]of Object.entries(this.listeners))i.size&&(this.#tJ=!0,t===r.PUBSUB_TYPE.SHARDED?this.#t4(e,i):this.#t2(e,t,i));return e}#t2(e,t,r){this.#tQ++;let n=()=>this.#tQ--;e.push({args:[i[t].subscribe,...r.keys()],channelsCounter:r.size,resolve:n,reject:n})}#t4(e,t){let n=()=>this.#tQ--;for(let s of t.keys())this.#tQ++,e.push({args:[i[r.PUBSUB_TYPE.SHARDED].subscribe,s],channelsCounter:1,resolve:n,reject:n})}handleMessageReply(e){return i[r.PUBSUB_TYPE.CHANNELS].message.equals(e[0])?(this.#t6(r.PUBSUB_TYPE.CHANNELS,e[2],e[1]),!0):i[r.PUBSUB_TYPE.PATTERNS].message.equals(e[0])?(this.#t6(r.PUBSUB_TYPE.PATTERNS,e[3],e[2],e[1]),!0):!!i[r.PUBSUB_TYPE.SHARDED].message.equals(e[0])&&(this.#t6(r.PUBSUB_TYPE.SHARDED,e[2],e[1]),!0)}removeShardedListeners(e){let t=this.listeners[r.PUBSUB_TYPE.SHARDED].get(e);return this.listeners[r.PUBSUB_TYPE.SHARDED].delete(e),this.#tX(),t}removeAllListeners(){let e={[r.PUBSUB_TYPE.CHANNELS]:this.listeners[r.PUBSUB_TYPE.CHANNELS],[r.PUBSUB_TYPE.PATTERNS]:this.listeners[r.PUBSUB_TYPE.PATTERNS],[r.PUBSUB_TYPE.SHARDED]:this.listeners[r.PUBSUB_TYPE.SHARDED]};return this.#tX(),this.listeners[r.PUBSUB_TYPE.CHANNELS]=new Map,this.listeners[r.PUBSUB_TYPE.PATTERNS]=new Map,this.listeners[r.PUBSUB_TYPE.SHARDED]=new Map,e}#t6(e,t,r,i){let n=(i??r).toString(),s=this.listeners[e].get(n);if(!s)return;for(let e of s.buffers)e(t,r);if(!s.strings.size)return;let a=i?r.toString():n,o="__redis__:invalidate"===a?null===t?null:t.map(e=>e.toString()):t.toString();for(let e of s.strings)e(o,a)}}r.PubSub=n},73629,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(82045),s=i(e.r(94997)),a=e.r(79121),o=e.r(74788),u=e.r(28307),l=e.r(40468),d=Buffer.from("pong"),c=Buffer.from("RESET"),p={...a.PUSH_TYPE_MAPPING,[a.RESP_TYPES.SIMPLE_STRING]:Buffer};class f{#t3;#t5;#t8=new n.DoublyLinkedList;#t9=new n.EmptyAwareSinglyLinkedList;#t7;#re;decoder;#rt=new o.PubSub;#rr=[this.#tw.bind(this)];#ri;setMaintenanceCommandTimeout(e){if(this.#ri===e)return void(0,l.dbgMaintenance)(`Queue already set maintenanceCommandTimeout to ${e}, skipping`);if((0,l.dbgMaintenance)(`Setting maintenance command timeout to ${e}`),this.#ri=e,void 0===this.#ri)return void(0,l.dbgMaintenance)("Queue will keep maintenanceCommandTimeout for exisitng commands, just to be on the safe side. New commands will receive normal timeouts");let t=0,r=this.#t8.length;for(let e of this.#t8.nodes()){let r=e.value;f.#rn(r),t++;let i=this.#ri,n=AbortSignal.timeout(i);r.timeout={signal:n,listener:()=>{this.#t8.remove(e),r.reject(new u.CommandTimeoutDuringMaintenanceError(i))},originalTimeout:r.timeout?.originalTimeout},n.addEventListener("abort",r.timeout.listener,{once:!0})}(0,l.dbgMaintenance)(`Total of ${t} of ${r} timeouts reset to ${e}`)}get isPubSubActive(){return this.#rt.isActive}constructor(e,t,r){this.#t3=e,this.#t5=t,this.#t7=r,this.decoder=this.#rs()}#ra(e){this.#t9.shift().resolve(e)}#ro(e){this.#t9.shift().reject(e)}#tw(e){if(this.#rt.handleMessageReply(e))return!0;let t=o.PubSub.isShardedUnsubscribe(e);if(t&&!this.#t9.length){let t=e[1].toString();return this.#t7(t,this.#rt.removeShardedListeners(t)),!0}if(t||o.PubSub.isStatusReply(e)){let t=this.#t9.head.value;return(Number.isNaN(t.channelsCounter)&&0===e[2]||0==--t.channelsCounter)&&this.#t9.shift().resolve(),!0}return!1}#ru(){return this.#t9.head.value.typeMapping??{}}#rs(){return new a.Decoder({onReply:e=>this.#ra(e),onErrorReply:e=>this.#ro(e),onPush:e=>{for(let t of this.#rr)if(t(e))return},getTypeMapping:()=>this.#ru()})}addPushHandler(e){this.#rr.push(e)}async waitForInflightCommandsToComplete(){if(0!==this.#t9.length)return new Promise(e=>{this.#t9.events.on("empty",e)})}addCommand(e,t){return this.#t5&&this.#t8.length+this.#t9.length>=this.#t5?Promise.reject(Error("The queue is full")):t?.abortSignal?.aborted?Promise.reject(new u.AbortError):new Promise((r,i)=>{let n,s={args:e,chainId:t?.chainId,abort:void 0,timeout:void 0,resolve:r,reject:i,channelsCounter:void 0,typeMapping:t?.typeMapping},a=this.#ri??t?.timeout,o=void 0!==this.#ri;if(a){let e=AbortSignal.timeout(a);s.timeout={signal:e,listener:()=>{this.#t8.remove(n),s.reject(o?new u.CommandTimeoutDuringMaintenanceError(a):new u.TimeoutError)},originalTimeout:t?.timeout},e.addEventListener("abort",s.timeout.listener,{once:!0})}let l=t?.abortSignal;l&&(s.abort={signal:l,listener:()=>{this.#t8.remove(n),s.reject(new u.AbortError)}},l.addEventListener("abort",s.abort.listener,{once:!0})),n=this.#t8.add(s,t?.asap)})}#rl(e,t=!1,r){return new Promise((i,n)=>{this.#t8.add({args:e.args,chainId:r,abort:void 0,timeout:void 0,resolve(){e.resolve(),i()},reject(t){e.reject?.(),n(t)},channelsCounter:e.channelsCounter,typeMapping:a.PUSH_TYPE_MAPPING},t)})}#rd(){2===this.#t3&&(this.decoder.onReply=e=>{if(Array.isArray(e)){if(this.#tw(e))return;if(d.equals(e[0])){let{resolve:t,typeMapping:r}=this.#t9.shift(),i=0===e[1].length?e[0]:e[1];t(r?.[a.RESP_TYPES.SIMPLE_STRING]===Buffer?i:i.toString());return}}return this.#ra(e)},this.decoder.getTypeMapping=()=>p)}subscribe(e,t,r,i){let n=this.#rt.subscribe(e,t,r,i);if(n)return this.#rd(),this.#rl(n)}#rc(){this.decoder.onReply=e=>this.#ra(e),this.decoder.getTypeMapping=()=>this.#ru()}unsubscribe(e,t,r,i){let n=this.#rt.unsubscribe(e,t,r,i);if(n){if(n&&2===this.#t3){let{resolve:e}=n;n.resolve=()=>{this.#rt.isActive||this.#rc(),e()}}return this.#rl(n)}}removeAllPubSubListeners(){return this.#rt.removeAllListeners()}resubscribe(e){let t=this.#rt.resubscribe();if(t.length)return this.#rd(),Promise.all(t.map(t=>this.#rl(t,!0,e)))}extendPubSubChannelListeners(e,t,r){let i=this.#rt.extendChannelListeners(e,t,r);if(i)return this.#rd(),this.#rl(i)}extendPubSubListeners(e,t){let r=this.#rt.extendTypeListeners(e,t);if(r)return this.#rd(),this.#rl(r)}getPubSubListeners(e){return this.#rt.listeners[e]}monitor(e,t){return new Promise((r,i)=>{let n=t?.typeMapping??{};this.#t8.add({args:["MONITOR"],chainId:t?.chainId,abort:void 0,timeout:void 0,resolve:()=>{this.#rp?this.#rp=e:this.decoder.onReply=e,this.decoder.getTypeMapping=()=>n,r()},reject:i,channelsCounter:void 0,typeMapping:n},t?.asap)})}resetDecoder(){this.#rc(),this.decoder.reset()}#rp;async reset(e,t){return new Promise((r,i)=>{this.#rp=this.decoder.onReply,this.decoder.onReply=e=>{if("string"==typeof e&&"RESET"===e||e instanceof Buffer&&c.equals(e)){this.#rc(),this.#rp=void 0,this.#rt.reset(),this.#t9.shift().resolve(e);return}this.#rp(e)},this.#t8.push({args:["RESET"],chainId:e,abort:void 0,timeout:void 0,resolve:r,reject:i,channelsCounter:void 0,typeMapping:t})})}isWaitingToWrite(){return this.#t8.length>0}*commandsToWrite(){let e=this.#t8.shift();for(;e;){let t;try{t=(0,s.default)(e.args)}catch(t){e.reject(t),e=this.#t8.shift();continue}e.args=void 0,e.abort&&(f.#rf(e),e.abort=void 0),e.timeout&&(f.#rn(e),e.timeout=void 0),this.#re=e.chainId,e.chainId=void 0,this.#t9.push(e),yield t,e=this.#t8.shift()}}#rh(e){for(let t of this.#t9)t.reject(e);this.#t9.reset()}static #rf(e){e.abort.signal.removeEventListener("abort",e.abort.listener)}static #rn(e){e.timeout?.signal.removeEventListener("abort",e.timeout.listener)}static #rm(e,t){e.abort&&f.#rf(e),e.timeout&&f.#rn(e),e.reject(t)}flushWaitingForReply(e){if(this.resetDecoder(),this.#rt.reset(),this.#rh(e),this.#re){for(;this.#t8.head?.value.chainId===this.#re;)f.#rm(this.#t8.shift(),e);this.#re=void 0}}flushAll(e){for(let t of(this.resetDecoder(),this.#rt.reset(),this.#rh(e),this.#t8))f.#rm(t,e);this.#t8.reset()}isEmpty(){return 0===this.#t8.length&&0===this.#t9.length}}r.default=f},94617,(e,t,r)=>{"use strict";function i(){throw Error("Some RESP3 results for Redis Query Engine responses may change. Refer to the readme for guidance")}function n(e,t,r){Object.defineProperty(e,t,{get(){let e=Object.create(r);return e._self=this,Object.defineProperty(this,t,{value:e}),e}})}Object.defineProperty(r,"__esModule",{value:!0}),r.scriptArgumentsPrefix=r.functionArgumentsPrefix=r.getTransformReply=r.attachConfig=void 0,r.attachConfig=function({BaseClass:e,commands:t,createCommand:r,createModuleCommand:s,createFunctionCommand:a,createScriptCommand:o,config:u}){let l=u?.RESP??2,d=class extends e{};for(let[e,n]of Object.entries(t))u?.RESP==3&&n.unstableResp3&&!u.unstableResp3?d.prototype[e]=i:d.prototype[e]=r(n,l);if(u?.modules)for(let[e,t]of Object.entries(u.modules)){let r=Object.create(null);for(let[e,n]of Object.entries(t))3==u.RESP&&n.unstableResp3&&!u.unstableResp3?r[e]=i:r[e]=s(n,l);n(d.prototype,e,r)}if(u?.functions)for(let[e,t]of Object.entries(u.functions)){let r=Object.create(null);for(let[e,i]of Object.entries(t))r[e]=a(e,i,l);n(d.prototype,e,r)}if(u?.scripts)for(let[e,t]of Object.entries(u.scripts))d.prototype[e]=o(t,l);return d},r.getTransformReply=function(e,t){switch(typeof e.transformReply){case"function":return e.transformReply;case"object":return e.transformReply[t]}},r.functionArgumentsPrefix=function(e,t){let r=[t.IS_READ_ONLY?"FCALL_RO":"FCALL",e];return void 0!==t.NUMBER_OF_KEYS&&r.push(t.NUMBER_OF_KEYS.toString()),r},r.scriptArgumentsPrefix=function(e){let t=[e.IS_READ_ONLY?"EVALSHA_RO":"EVALSHA",e.SHA1];return void 0!==e.NUMBER_OF_KEYS&&t.push(e.NUMBER_OF_KEYS.toString()),t}},56480,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(28307);class n{typeMapping;constructor(e){this.typeMapping=e}queue=[];scriptsInUse=new Set;addCommand(e,t){this.queue.push({args:e,transformReply:t})}addScript(e,t,r){let i=[];i.preserve=t.preserve,this.scriptsInUse.has(e.SHA1)?i.push("EVALSHA",e.SHA1):(this.scriptsInUse.add(e.SHA1),i.push("EVAL",e.SCRIPT)),void 0!==e.NUMBER_OF_KEYS&&i.push(e.NUMBER_OF_KEYS.toString()),i.push(...t),this.addCommand(i,r)}transformReplies(e){let t=[],r=e.map((e,r)=>{if(e instanceof i.ErrorReply)return t.push(r),e;let{transformReply:n,args:s}=this.queue[r];return n?n(e,s.preserve,this.typeMapping):e});if(t.length)throw new i.MultiErrorReply(r,t);return r}}r.default=n},50932,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(8495)),s=i(e.r(56480)),a=e.r(94617),o=e.r(59369);class u{static #ry(e,t){let r=(0,a.getTransformReply)(e,t);return function(...t){let i=new o.BasicCommandParser;e.parseCommand(i,...t);let n=i.redisArgs;return n.preserve=i.preserve,this.addCommand(n,r)}}static #rg(e,t){let r=(0,a.getTransformReply)(e,t);return function(...t){let i=new o.BasicCommandParser;e.parseCommand(i,...t);let n=i.redisArgs;return n.preserve=i.preserve,this._self.addCommand(n,r)}}static #r_(e,t,r){let i=(0,a.functionArgumentsPrefix)(e,t),n=(0,a.getTransformReply)(t,r);return function(...e){let r=new o.BasicCommandParser;r.push(...i),t.parseCommand(r,...e);let s=r.redisArgs;return s.preserve=r.preserve,this._self.addCommand(s,n)}}static #rb(e,t){let r=(0,a.getTransformReply)(e,t);return function(...t){let i=new o.BasicCommandParser;e.parseCommand(i,...t);let n=i.redisArgs;return n.preserve=i.preserve,this.#rv(e,n,r)}}static extend(e){return(0,a.attachConfig)({BaseClass:u,commands:n.default,createCommand:u.#ry,createModuleCommand:u.#rg,createFunctionCommand:u.#r_,createScriptCommand:u.#rb,config:e})}#rE;#rS;#rA;#rT;constructor(e,t,r){this.#rE=new s.default(r),this.#rS=e,this.#rA=t}SELECT(e,t){return this.#rT=e,this.#rE.addCommand(["SELECT",e.toString()],t),this}select=this.SELECT;addCommand(e,t){return this.#rE.addCommand(e,t),this}#rv(e,t,r){return this.#rE.addScript(e,t,r),this}async exec(e=!1){return e?this.execAsPipeline():this.#rE.transformReplies(await this.#rS(this.#rE.queue,this.#rT))}EXEC=this.exec;execTyped(e=!1){return this.exec(e)}async execAsPipeline(){return 0===this.#rE.queue.length?[]:this.#rE.transformReplies(await this.#rA(this.#rE.queue,this.#rT))}execAsPipelineTyped(){return this.execAsPipeline()}}r.default=u},83468,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.RedisLegacyClient=void 0;let n=e.r(94617),s=i(e.r(8495)),a=i(e.r(56480));class o{static #rw(e,t){let r;return"function"==typeof t[t.length-1]&&(r=t.pop()),o.pushArguments(e,t),r}static pushArguments(e,t){for(let r=0;r<t.length;++r){let i=t[r];Array.isArray(i)?o.pushArguments(e,i):e.push("number"==typeof i||i instanceof Date?i.toString():i)}}static getTransformReply(e,t){return e.TRANSFORM_LEGACY_REPLY?(0,n.getTransformReply)(e,t):void 0}static #ry(e,t,r){let i=o.getTransformReply(t,r);return function(...t){let r=[e],n=o.#rw(r,t),s=this.#D.sendCommand(r);if(!n)return void s.catch(e=>this.#D.emit("error",e));s.then(e=>n(null,i?i(e):e)).catch(e=>n(e))}}#D;#rO;constructor(e){this.#D=e;let t=e.options?.RESP??2;for(let[e,r]of Object.entries(s.default))this[e]=o.#ry(e,r,t);this.#rO=u.factory(t)}sendCommand(...e){let t=[],r=o.#rw(t,e),i=this.#D.sendCommand(t);if(!r)return void i.catch(e=>this.#D.emit("error",e));i.then(e=>r(null,e)).catch(e=>r(e))}multi(){return this.#rO(this.#D)}}r.RedisLegacyClient=o;class u{static #ry(e,t,r){let i=o.getTransformReply(t,r);return function(...t){let r=[e];return o.pushArguments(r,t),this.#rE.addCommand(r,i),this}}static factory(e){let t=class extends u{};for(let[r,i]of Object.entries(s.default))t.prototype[r]=u.#ry(r,i,e);return e=>new t(e)}#rE=new a.default;#D;constructor(e){this.#D=e}sendCommand(...e){let t=[];return o.pushArguments(t,e),this.#rE.addCommand(t),this}exec(e){let t=this.#D._executeMulti(this.#rE.queue);if(!e)return void t.catch(e=>this.#D.emit("error",e));t.then(t=>e(null,this.#rE.transformReplies(t))).catch(t=>e?.(t))}}},20666,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PooledNoRedirectClientSideCache=r.BasicPooledClientSideCache=r.PooledClientSideCacheProvider=r.BasicClientSideCache=r.ClientSideCacheProvider=r.CacheStats=void 0;let i=e.r(88947);class n{hitCount;missCount;loadSuccessCount;loadFailureCount;totalLoadTime;evictionCount;constructor(e,t,r,i,n,s){if(this.hitCount=e,this.missCount=t,this.loadSuccessCount=r,this.loadFailureCount=i,this.totalLoadTime=n,this.evictionCount=s,e<0||t<0||r<0||i<0||n<0||s<0)throw Error("All statistics values must be non-negative")}static of(e=0,t=0,r=0,i=0,s=0,a=0){return new n(e,t,r,i,s,a)}static empty(){return n.EMPTY_STATS}static EMPTY_STATS=new n(0,0,0,0,0,0);requestCount(){return this.hitCount+this.missCount}hitRate(){let e=this.requestCount();return 0===e?1:this.hitCount/e}missRate(){let e=this.requestCount();return 0===e?0:this.missCount/e}loadCount(){return this.loadSuccessCount+this.loadFailureCount}loadFailureRate(){let e=this.loadCount();return 0===e?0:this.loadFailureCount/e}averageLoadPenalty(){let e=this.loadCount();return 0===e?0:this.totalLoadTime/e}minus(e){return n.of(Math.max(0,this.hitCount-e.hitCount),Math.max(0,this.missCount-e.missCount),Math.max(0,this.loadSuccessCount-e.loadSuccessCount),Math.max(0,this.loadFailureCount-e.loadFailureCount),Math.max(0,this.totalLoadTime-e.totalLoadTime),Math.max(0,this.evictionCount-e.evictionCount))}plus(e){return n.of(this.hitCount+e.hitCount,this.missCount+e.missCount,this.loadSuccessCount+e.loadSuccessCount,this.loadFailureCount+e.loadFailureCount,this.totalLoadTime+e.totalLoadTime,this.evictionCount+e.evictionCount)}}r.CacheStats=n;class s{static INSTANCE=new s;constructor(){}recordHits(e){}recordMisses(e){}recordLoadSuccess(e){}recordLoadFailure(e){}recordEvictions(e){}snapshot(){return n.empty()}}class a{#rR=0;#rI=0;#rC=0;#rN=0;#rP=0;#rD=0;recordHits(e){this.#rR+=e}recordMisses(e){this.#rI+=e}recordLoadSuccess(e){this.#rC++,this.#rP+=e}recordLoadFailure(e){this.#rN++,this.#rP+=e}recordEvictions(e){this.#rD+=e}snapshot(){return n.of(this.#rR,this.#rI,this.#rC,this.#rN,this.#rP,this.#rD)}static create(){return new a}}class o{#rx=!1;#rL;constructor(e){0==e?this.#rL=0:this.#rL=Date.now()+e}invalidate(){this.#rx=!0}validate(){return!this.#rx&&(0==this.#rL||Date.now()<this.#rL)}}class u extends o{#rk;get value(){return this.#rk}constructor(e,t){super(e),this.#rk=t}}class l extends o{#rM;get promise(){return this.#rM}constructor(e,t){super(e),this.#rM=t}}class d extends i.EventEmitter{}r.ClientSideCacheProvider=d;class c extends d{#r$;#rU;ttl;maxEntries;lru;#rj;recordEvictions(e){this.#rj.recordEvictions(e)}recordHits(e){this.#rj.recordHits(e)}recordMisses(e){this.#rj.recordMisses(e)}constructor(e){super(),this.#r$=new Map,this.#rU=new Map,this.ttl=e?.ttl??0,this.maxEntries=e?.maxEntries??0,this.lru=e?.evictPolicy!=="FIFO";let t=e?.recordStats!==!1;this.#rj=t?a.create():s.INSTANCE}async handleCache(e,t,r,i,n){let s,a,o=function(e){let t=Array(2*e.length);for(let r=0;r<e.length;r++)t[r]=e[r].length,t[r+e.length]=e[r];return t.join("_")}(t.redisArgs),d=this.get(o);if(d)if(d instanceof u)return this.#rj.recordHits(1),structuredClone(d.value);else if(d instanceof l)this.#rj.recordMisses(1),s=await d.promise;else throw Error("unknown cache entry type");else{this.#rj.recordMisses(1);let i=performance.now(),n=r();d=this.createPromiseEntry(e,n),this.set(o,d,t.keys);try{s=await n;let e=performance.now()-i;this.#rj.recordLoadSuccess(e)}catch(t){let e=performance.now()-i;throw this.#rj.recordLoadFailure(e),d.validate()&&this.delete(o),t}}return a=i?i(s,t.preserve,n):s,d.validate()&&(d=this.createValueEntry(e,a),this.set(o,d,t.keys),this.emit("cached-key",o)),structuredClone(a)}trackingOn(){return["CLIENT","TRACKING","ON"]}invalidate(e){if(null===e){this.clear(!1),this.emit("invalidate",e);return}let t=this.#rU.get(e.toString());if(t){for(let e of t){let t=this.#r$.get(e);t&&t.invalidate(),this.#r$.delete(e)}this.#rU.delete(e.toString())}this.emit("invalidate",e)}clear(e=!0){let t=this.#r$.size;this.#r$.clear(),this.#rU.clear(),e?this.#rj instanceof s||(this.#rj=a.create()):t>0&&this.#rj.recordEvictions(t)}get(e){let t=this.#r$.get(e);if(t&&!t.validate()){this.delete(e),this.#rj.recordEvictions(1),this.emit("cache-evict",e);return}return void 0!==t&&this.lru&&(this.#r$.delete(e),this.#r$.set(e,t)),t}delete(e){let t=this.#r$.get(e);t&&(t.invalidate(),this.#r$.delete(e))}has(e){return this.#r$.has(e)}set(e,t,r){let i=this.#r$.size,n=this.#r$.get(e);for(let s of(n&&(i--,n.invalidate()),this.maxEntries>0&&i>=this.maxEntries&&(this.deleteOldest(),this.#rj.recordEvictions(1)),this.#r$.set(e,t),r))this.#rU.has(s.toString())||this.#rU.set(s.toString(),new Set),this.#rU.get(s.toString()).add(e)}size(){return this.#r$.size}createValueEntry(e,t){return new u(this.ttl,t)}createPromiseEntry(e,t){return new l(this.ttl,t)}stats(){return this.#rj.snapshot()}onError(){this.clear()}onClose(){this.clear()}deleteOldest(){let e=this.#r$[Symbol.iterator]().next();if(!e.done){let t=e.value[0],r=this.#r$.get(t);r&&r.invalidate(),this.#r$.delete(t)}}entryEntries(){return this.#r$.entries()}keySetEntries(){return this.#rU.entries()}}r.BasicClientSideCache=c;class p extends c{#rB=!1;disable(){this.#rB=!0}enable(){this.#rB=!1}get(e){if(!this.#rB)return super.get(e)}has(e){return!this.#rB&&super.has(e)}onPoolClose(){this.clear()}}r.PooledClientSideCacheProvider=p;class f extends p{onError(){this.clear(!1)}onClose(){this.clear(!1)}}r.BasicPooledClientSideCache=f;class h extends u{#rz;constructor(e,t,r){super(e,r),this.#rz=t}validate(){let e=super.validate();return this.#rz&&(e=e&&this.#rz.client.isReady&&this.#rz.client.socketEpoch==this.#rz.epoch),e}}class m extends l{#rz;constructor(e,t,r){super(e,r),this.#rz=t}validate(){return super.validate()&&this.#rz.client.isReady&&this.#rz.client.socketEpoch==this.#rz.epoch}}r.PooledNoRedirectClientSideCache=class extends f{createValueEntry(e,t){let r={epoch:e.socketEpoch,client:e};return new h(this.ttl,r,t)}createPromiseEntry(e,t){let r={epoch:e.socketEpoch,client:e};return new m(this.ttl,r,t)}onError(){}onClose(){}}},5732,(e,t,r)=>{"use strict";function i(){let e=new WeakSet;return function(t,r){if(r&&"object"==typeof r){if(e.has(r))return"circular";e.add(r)}return r}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=class{#i;#rK;get(e){return JSON.stringify(e,i())===this.#rK?this.#i:void 0}set(e,t){this.#i=t,this.#rK=JSON.stringify(e,i())}}},73533,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.RedisClientPool=void 0;let n=i(e.r(8495)),s=i(e.r(73643)),a=e.r(87769),o=e.r(82045),u=e.r(28307),l=e.r(94617),d=i(e.r(50932)),c=e.r(20666),p=e.r(59369),f=i(e.r(5732));class h extends a.EventEmitter{static #ry(e,t){let r=(0,l.getTransformReply)(e,t);return async function(...t){let i=new p.BasicCommandParser;return e.parseCommand(i,...t),this.execute(t=>t._executeCommand(e,i,this._commandOptions,r))}}static #rg(e,t){let r=(0,l.getTransformReply)(e,t);return async function(...t){let i=new p.BasicCommandParser;return e.parseCommand(i,...t),this._self.execute(t=>t._executeCommand(e,i,this._self._commandOptions,r))}}static #r_(e,t,r){let i=(0,l.functionArgumentsPrefix)(e,t),n=(0,l.getTransformReply)(t,r);return async function(...e){let r=new p.BasicCommandParser;return r.push(...i),t.parseCommand(r,...e),this._self.execute(e=>e._executeCommand(t,r,this._self._commandOptions,n))}}static #rb(e,t){let r=(0,l.scriptArgumentsPrefix)(e),i=(0,l.getTransformReply)(e,t);return async function(...t){let n=new p.BasicCommandParser;return n.pushVariadic(r),e.parseCommand(n,...t),this.execute(t=>t._executeScript(e,n,this._commandOptions,i))}}static #rY=new f.default;static create(e,t){let r=h.#rY.get(e);return r||((r=(0,l.attachConfig)({BaseClass:h,commands:n.default,createCommand:h.#ry,createModuleCommand:h.#rg,createFunctionCommand:h.#r_,createScriptCommand:h.#rb,config:e})).prototype.Multi=d.default.extend(e),h.#rY.set(e,r)),Object.create(new r(e,t))}static #rF={minimum:1,maximum:100,acquireTimeout:3e3,cleanupDelay:3e3};#rq;#x;#rV=new o.SinglyLinkedList;get idleClients(){return this._self.#rV.length}#rG=new o.DoublyLinkedList;get clientsInUse(){return this._self.#rG.length}get totalClients(){return this._self.#rV.length+this._self.#rG.length}#rH=new o.SinglyLinkedList;get tasksQueueLength(){return this._self.#rH.length}#tM=!1;get isOpen(){return this._self.#tM}#rZ=!1;get isClosing(){return this._self.#rZ}#rW;get clientSideCache(){return this._self.#rW}constructor(e,t){if(super(),this.#x={...h.#rF,...t},t?.clientSideCache)if(void 0===e&&(e={}),t.clientSideCache instanceof c.PooledClientSideCacheProvider)this.#rW=e.clientSideCache=t.clientSideCache;else{let r=t.clientSideCache;this.#rW=e.clientSideCache=new c.BasicPooledClientSideCache(r)}this.#rq=s.default.factory(e).bind(void 0,e)}_self=this;_commandOptions;withCommandOptions(e){let t=Object.create(this._self);return t._commandOptions=e,t}#rQ(e,t){let r=Object.create(this._self);return r._commandOptions=Object.create(this._commandOptions??null),r._commandOptions[e]=t,r}withTypeMapping(e){return this._self.#rQ("typeMapping",e)}withAbortSignal(e){return this._self.#rQ("abortSignal",e)}asap(){return this._self.#rQ("asap",!0)}async connect(){if(this._self.#tM)return;this._self.#tM=!0;let e=[];for(;e.length<this._self.#x.minimum;)e.push(this._self.#rJ());try{await Promise.all(e)}catch(e){throw this.destroy(),e}return this}async #rJ(){let e=this._self.#rG.push(this._self.#rq().on("error",e=>this.emit("error",e)));try{let t=e.value;await t.connect()}catch(t){throw this._self.#rG.remove(e),t}this._self.#rX(e)}execute(e){return new Promise((t,r)=>{let i=this._self.#rV.shift(),{tail:n}=this._self.#rH;if(!i){let i;this._self.#x.acquireTimeout>0&&(i=setTimeout(()=>{this._self.#rH.remove(s,n),r(new u.TimeoutError("Timeout waiting for a client"))},this._self.#x.acquireTimeout));let s=this._self.#rH.push({timeout:i,resolve:t,reject:r,fn:e});this.totalClients<this._self.#x.maximum&&this._self.#rJ();return}let s=this._self.#rG.push(i);this._self.#r0(s,t,r,e)})}#r0(e,t,r,i){let n=i(e.value);n instanceof Promise?n.then(t,r).finally(()=>this.#rX(e)):(t(n),this.#rX(e))}#rX(e){let t=this.#rH.shift();if(t){clearTimeout(t.timeout),this.#r0(e,t.resolve,t.reject,t.fn);return}this.#rG.remove(e),this.#rV.push(e.value),this.#r1()}cleanupTimeout;#r1(){this.totalClients<=this.#x.minimum||(clearTimeout(this.cleanupTimeout),this.cleanupTimeout=setTimeout(()=>this.#r4(),this.#x.cleanupDelay))}#r4(){let e=Math.min(this.#rV.length,this.totalClients-this.#x.minimum);for(let t=0;t<e;t++)this.#rV.shift().destroy()}sendCommand(e,t){return this.execute(r=>r.sendCommand(e,t))}MULTI(){return new this.Multi((e,t)=>this.execute(r=>r._executeMulti(e,t)),e=>this.execute(t=>t._executePipeline(e)),this._commandOptions?.typeMapping)}multi=this.MULTI;async close(){if(!this._self.#rZ&&this._self.#tM){this._self.#rZ=!0;try{let e=[];for(let t of this._self.#rV)e.push(t.close());for(let t of this._self.#rG)e.push(t.close());await Promise.all(e),this.#rW?.onPoolClose(),this._self.#rV.reset(),this._self.#rG.reset()}catch(e){}finally{this._self.#rZ=!1}}}destroy(){for(let e of this._self.#rV)e.destroy();for(let e of(this._self.#rV.reset(),this._self.#rG))e.destroy();this._self.#rW?.onPoolClose(),this._self.#rG.reset(),this._self.#tM=!1}}r.RedisClientPool=h},73643,(e,t,r)=>{"use strict";var i,n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let s=n(e.r(8495)),a=n(e.r(10057)),o=e.r(80762),u=n(e.r(73629)),l=e.r(87769),d=e.r(94617),c=e.r(28307),p=e.r(57764),f=e.r(74788),h=n(e.r(50932)),m=n(e.r(33307)),y=e.r(83468),g=e.r(73533),_=e.r(52135),b=e.r(20666),v=e.r(59369),E=n(e.r(5732)),S=e.r(99615),A=n(e.r(40468));class T extends l.EventEmitter{static #ry(e,t){let r=(0,d.getTransformReply)(e,t);return async function(...t){let i=new v.BasicCommandParser;return e.parseCommand(i,...t),this._self._executeCommand(e,i,this._commandOptions,r)}}static #rg(e,t){let r=(0,d.getTransformReply)(e,t);return async function(...t){let i=new v.BasicCommandParser;return e.parseCommand(i,...t),this._self._executeCommand(e,i,this._self._commandOptions,r)}}static #r_(e,t,r){let i=(0,d.functionArgumentsPrefix)(e,t),n=(0,d.getTransformReply)(t,r);return async function(...e){let r=new v.BasicCommandParser;return r.push(...i),t.parseCommand(r,...e),this._self._executeCommand(t,r,this._self._commandOptions,n)}}static #rb(e,t){let r=(0,d.scriptArgumentsPrefix)(e),i=(0,d.getTransformReply)(e,t);return async function(...t){let n=new v.BasicCommandParser;return n.push(...r),e.parseCommand(n,...t),this._executeScript(e,n,this._commandOptions,i)}}static #rY=new E.default;static factory(e){let t=i.#rY.get(e);return t||((t=(0,d.attachConfig)({BaseClass:i,commands:s.default,createCommand:i.#ry,createModuleCommand:i.#rg,createFunctionCommand:i.#r_,createScriptCommand:i.#rb,config:e})).prototype.Multi=h.default.extend(e),i.#rY.set(e,t)),e=>Object.create(new t(e))}static create(e){return i.factory(e)(e)}static parseOptions(e){if(e?.url){let t=i.parseURL(e.url);if(e.socket){if(void 0!==e.socket.tls&&e.socket.tls!==t.socket.tls)throw TypeError(`tls socket option is set to ${e.socket.tls} which is mismatch with protocol or the URL ${e.url} passed`);t.socket=Object.assign(e.socket,t.socket)}Object.assign(e,t)}return e}static parseURL(e){let{hostname:t,port:r,protocol:i,username:n,password:s,pathname:a}=new p.URL(e),o={socket:{host:t,tls:!1}};if("redis:"!==i&&"rediss:"!==i)throw TypeError("Invalid protocol");if(o.socket.tls="rediss:"===i,r&&(o.socket.port=Number(r)),n&&(o.username=decodeURIComponent(n)),s&&(o.password=decodeURIComponent(s)),(n||s)&&(o.credentialsProvider={type:"async-credentials-provider",credentials:async()=>({username:n?decodeURIComponent(n):void 0,password:s?decodeURIComponent(s):void 0})}),a.length>1){let e=Number(a.substring(1));if(isNaN(e))throw TypeError("Invalid pathname");o.database=e}return o}#x;#tk;#r2;#rT=0;#r6;_self=this;_commandOptions;#r3;#r5;#rW;#r8=null;#r9=!1;get clientSideCache(){return this._self.#rW}get options(){return this._self.#x}get isOpen(){return this._self.#tk.isOpen}get isReady(){return this._self.#tk.isReady}get isPubSubActive(){return this._self.#r2.isPubSubActive}get socketEpoch(){return this._self.#tk.socketEpoch}get isWatching(){return void 0!==this._self.#r5}get isDirtyWatch(){return void 0!==this._self.#r3}setDirtyWatch(e){this._self.#r3=e}constructor(e){if(super(),this.#r7(e),this.#x=this.#ie(e),this.#r2=this.#it(),this.#tk=this.#ir(),"disabled"!==this.#x.maintNotifications&&new A.default(this.#r2,this,this.#x),this.#x.clientSideCache){if(this.#x.clientSideCache instanceof b.ClientSideCacheProvider)this.#rW=this.#x.clientSideCache;else{let e=this.#x.clientSideCache;this.#rW=new b.BasicClientSideCache(e)}this.#r2.addPushHandler(e=>{if("invalidate"!==e[0].toString())return!1;if(null!==e[1])for(let t of e[1])this.#rW?.invalidate(t);else this.#rW?.invalidate(null);return!0})}else e?.emitInvalidate&&this.#r2.addPushHandler(e=>{if("invalidate"!==e[0].toString())return!1;if(null!==e[1])for(let t of e[1])this.emit("invalidate",t);else this.emit("invalidate",null);return!0})}#r7(e){if(e?.clientSideCache&&e?.RESP!==3)throw Error("Client Side Caching is only supported with RESP3");if(e?.emitInvalidate&&e?.RESP!==3)throw Error("emitInvalidate is only supported with RESP3");if(e?.clientSideCache&&e?.emitInvalidate)throw Error("emitInvalidate is not supported (or necessary) when clientSideCache is enabled");if(e?.maintNotifications&&e?.maintNotifications!=="disabled"&&e?.RESP!==3)throw Error("Graceful Maintenance is only supported with RESP3")}#ie(e={}){if(!e.credentialsProvider&&(e.username||e.password)&&(e.credentialsProvider={type:"async-credentials-provider",credentials:async()=>({username:e.username,password:e.password})}),e.database&&(this._self.#rT=e.database),e.commandOptions&&(this._commandOptions=e.commandOptions),"disabled"!==e.maintNotifications&&A.default.setupDefaultMaintOptions(e),e.url){let t=i.parseOptions(e);return t?.database&&(this._self.#rT=t.database),t}return e}#it(){return new u.default(this.#x.RESP??2,this.#x.commandsQueueMaxLength,(e,t)=>this.emit("sharded-channel-moved",e,t))}reAuthenticate=async e=>{this.isPubSubActive&&!this.#x.RESP||await this.sendCommand((0,_.parseArgs)(s.default.AUTH,{username:e.username,password:e.password??""}))};#ii(e){return e.subscribe({onNext:t=>{this.reAuthenticate(t).catch(t=>{let r=t instanceof Error?t.message:String(t);e.onReAuthenticationError(new o.CredentialsError(r))})},onError:t=>{let r=`Error from streaming credentials provider: ${t.message}`;e.onReAuthenticationError(new o.UnableToObtainNewCredentialsError(r))}})}async #is(e,t){let r=[],i=await this.#ia();for(let{cmd:n,errorHandler:s}of(t&&i.reverse(),i))r.push(this.#r2.addCommand(n,{chainId:e,asap:t}).catch(s));return r}async #ia(){let e=[],t=this.#x.credentialsProvider;if(this.#x.RESP){let r={};if(t&&"async-credentials-provider"===t.type){let e=await t.credentials();e.password&&(r.AUTH={username:e.username??"default",password:e.password})}if(t&&"streaming-credentials-provider"===t.type){let[e,i]=await this.#ii(t);this.#r8=i,e.password&&(r.AUTH={username:e.username??"default",password:e.password})}this.#x.name&&(r.SETNAME=this.#x.name),e.push({cmd:(0,_.parseArgs)(m.default,this.#x.RESP,r)})}else{if(t&&"async-credentials-provider"===t.type){let r=await t.credentials();(r.username||r.password)&&e.push({cmd:(0,_.parseArgs)(s.default.AUTH,{username:r.username,password:r.password??""})})}if(t&&"streaming-credentials-provider"===t.type){let[r,i]=await this.#ii(t);this.#r8=i,(r.username||r.password)&&e.push({cmd:(0,_.parseArgs)(s.default.AUTH,{username:r.username,password:r.password??""})})}this.#x.name&&e.push({cmd:(0,_.parseArgs)(s.default.CLIENT_SETNAME,this.#x.name)})}0!==this.#rT&&e.push({cmd:["SELECT",this.#rT.toString()]}),this.#x.readonly&&e.push({cmd:(0,_.parseArgs)(s.default.READONLY)}),this.#x.disableClientInfo||(e.push({cmd:["CLIENT","SETINFO","LIB-VER",S.version],errorHandler:()=>{}}),e.push({cmd:["CLIENT","SETINFO","LIB-NAME",this.#x.clientInfoTag?`node-redis(${this.#x.clientInfoTag})`:"node-redis"],errorHandler:()=>{}})),this.#rW&&e.push({cmd:this.#rW.trackingOn()}),this.#x?.emitInvalidate&&e.push({cmd:["CLIENT","TRACKING","ON"]});let r=await A.default.getHandshakeCommand(this.#x);return r&&e.push(r),e}#q(e){e.on("data",e=>{try{this.#r2.decoder.write(e)}catch(e){this.#r2.resetDecoder(),this.emit("error",e)}}).on("error",e=>{this.emit("error",e),this.#rW?.onError(),this.#tk.isOpen&&!this.#x.disableOfflineQueue?this.#r2.flushWaitingForReply(e):this.#r2.flushAll(e)}).on("connect",()=>this.emit("connect")).on("ready",()=>{this.emit("ready"),this.#io(),this.#iu()}).on("reconnecting",()=>this.emit("reconnecting")).on("drain",()=>this.#iu()).on("end",()=>this.emit("end"))}#ir(){let e=async()=>{let e=[],t=Symbol("Socket Initiator"),r=this.#r2.resubscribe(t);if(r?.catch(e=>{e.message&&e.message.startsWith("MOVED")&&this.emit("__MOVED",this._self.#r2.removeAllPubSubListeners())}),r&&e.push(r),this.#r6&&e.push(this.#r2.monitor(this.#r6,{typeMapping:this._commandOptions?.typeMapping,chainId:t,asap:!0})),e.push(...await this.#is(t,!0)),e.length)return this.#il(),Promise.all(e)},t=new a.default(e,this.#x.socket);return this.#q(t),t}#id;#io(){this.#x.pingInterval&&this.#tk.isReady&&(clearTimeout(this.#id),this.#id=setTimeout(()=>{this.#tk.isReady&&this.sendCommand(["PING"]).then(e=>this.emit("ping-interval",e)).catch(e=>this.emit("error",e)).finally(()=>this.#io())},this.#x.pingInterval))}withCommandOptions(e){let t=Object.create(this._self);return t._commandOptions=e,t}_commandOptionsProxy(e,t){let r=Object.create(this._self);return r._commandOptions=Object.create(this._commandOptions??null),r._commandOptions[e]=t,r}withTypeMapping(e){return this._commandOptionsProxy("typeMapping",e)}withAbortSignal(e){return this._commandOptionsProxy("abortSignal",e)}asap(){return this._commandOptionsProxy("asap",!0)}legacy(){return new y.RedisLegacyClient(this)}createPool(e){return g.RedisClientPool.create(this._self.#x,e)}duplicate(e){return new(Object.getPrototypeOf(this)).constructor({...this._self.#x,commandOptions:this._commandOptions,...e})}async connect(){return await this._self.#tk.connect(),this}_ejectSocket(){let e=this._self.#tk;return this._self.#tk=null,e.removeAllListeners(),e}_insertSocket(e){this._self.#tk&&this._self._ejectSocket().destroy(),this._self.#tk=e,this._self.#q(this._self.#tk)}_maintenanceUpdate(e){this._self.#tk.setMaintenanceTimeout(e.relaxedSocketTimeout),this._self.#r2.setMaintenanceCommandTimeout(e.relaxedCommandTimeout)}_pause(){this._self.#r9=!0}_unpause(){this._self.#r9=!1,this._self.#iu()}async _executeCommand(e,t,r,i){let n=this._self.#rW,s=this._self.#x.commandOptions===r,a=()=>this.sendCommand(t.redisArgs,r);if(n&&e.CACHEABLE&&s)return await n.handleCache(this._self,t,a,i,r?.typeMapping);{let e=await a();return i?i(e,t.preserve,r?.typeMapping):e}}async _executeScript(e,t,r,i){let n,s=t.redisArgs;try{n=await this.sendCommand(s,r)}catch(t){if(!t?.message?.startsWith?.("NOSCRIPT"))throw t;s[0]="EVAL",s[1]=e.SCRIPT,n=await this.sendCommand(s,r)}return i?i(n,t.preserve,r?.typeMapping):n}sendCommand(e,t){if(!this._self.#tk.isOpen)return Promise.reject(new c.ClientClosedError);if(!this._self.#tk.isReady&&this._self.#x.disableOfflineQueue)return Promise.reject(new c.ClientOfflineError);let r={...this._self._commandOptions,...t},i=this._self.#r2.addCommand(e,r);return this._self.#ic(),i}async SELECT(e){await this.sendCommand(["SELECT",e.toString()]),this._self.#rT=e}select=this.SELECT;#ip(e){return void 0===e?Promise.resolve():(this.#ic(),e)}SUBSCRIBE(e,t,r){return this._self.#ip(this._self.#r2.subscribe(f.PUBSUB_TYPE.CHANNELS,e,t,r))}subscribe=this.SUBSCRIBE;UNSUBSCRIBE(e,t,r){return this._self.#ip(this._self.#r2.unsubscribe(f.PUBSUB_TYPE.CHANNELS,e,t,r))}unsubscribe=this.UNSUBSCRIBE;PSUBSCRIBE(e,t,r){return this._self.#ip(this._self.#r2.subscribe(f.PUBSUB_TYPE.PATTERNS,e,t,r))}pSubscribe=this.PSUBSCRIBE;PUNSUBSCRIBE(e,t,r){return this._self.#ip(this._self.#r2.unsubscribe(f.PUBSUB_TYPE.PATTERNS,e,t,r))}pUnsubscribe=this.PUNSUBSCRIBE;SSUBSCRIBE(e,t,r){return this._self.#ip(this._self.#r2.subscribe(f.PUBSUB_TYPE.SHARDED,e,t,r))}sSubscribe=this.SSUBSCRIBE;SUNSUBSCRIBE(e,t,r){return this._self.#ip(this._self.#r2.unsubscribe(f.PUBSUB_TYPE.SHARDED,e,t,r))}sUnsubscribe=this.SUNSUBSCRIBE;async WATCH(e){let t=await this._self.sendCommand((0,_.pushVariadicArguments)(["WATCH"],e));return this._self.#r5??=this._self.socketEpoch,t}watch=this.WATCH;async UNWATCH(){let e=await this._self.sendCommand(["UNWATCH"]);return this._self.#r5=void 0,e}unwatch=this.UNWATCH;getPubSubListeners(e){return this._self.#r2.getPubSubListeners(e)}extendPubSubChannelListeners(e,t,r){return this._self.#ip(this._self.#r2.extendPubSubChannelListeners(e,t,r))}extendPubSubListeners(e,t){return this._self.#ip(this._self.#r2.extendPubSubListeners(e,t))}#il(){this.#r9||this.#tk.write(this.#r2.commandsToWrite())}#ih;#ic(){this.#tk.isReady&&!this.#ih&&(this.#ih=setImmediate(()=>{this.#il(),this.#ih=void 0}))}#iu(){this.#r2.isWaitingToWrite()&&this.#ic()}async _executePipeline(e,t){if(!this._self.#tk.isOpen)return Promise.reject(new c.ClientClosedError);let r=Symbol("Pipeline Chain"),i=Promise.all(e.map(({args:e})=>this._self.#r2.addCommand(e,{chainId:r,typeMapping:this._commandOptions?.typeMapping})));this._self.#ic();let n=await i;return void 0!==t&&(this._self.#rT=t),n}async _executeMulti(e,t){let r=this._self.#r3;this._self.#r3=void 0;let i=this._self.#r5;if(this._self.#r5=void 0,!this._self.#tk.isOpen)throw new c.ClientClosedError;if(r)throw new c.WatchError(r);if(i&&i!==this._self.socketEpoch)throw new c.WatchError("Client reconnected after WATCH");let n=this._commandOptions?.typeMapping,s=Symbol("MULTI Chain"),a=[this._self.#r2.addCommand(["MULTI"],{chainId:s})];for(let{args:t}of e)a.push(this._self.#r2.addCommand(t,{chainId:s,typeMapping:n}));a.push(this._self.#r2.addCommand(["EXEC"],{chainId:s})),this._self.#ic();let o=await Promise.all(a),u=o[o.length-1];if(null===u)throw new c.WatchError;return void 0!==t&&(this._self.#rT=t),u}MULTI(){return new this.Multi(this._executeMulti.bind(this),this._executePipeline.bind(this),this._commandOptions?.typeMapping)}multi=this.MULTI;async *scanIterator(e){let t=e?.cursor??"0";do{let r=await this.scan(t,e);t=r.cursor,yield r.keys}while("0"!==t)}async *hScanIterator(e,t){let r=t?.cursor??"0";do{let i=await this.hScan(e,r,t);r=i.cursor,yield i.entries}while("0"!==r)}async *hScanValuesIterator(e,t){let r=t?.cursor??"0";do{let i=await this.hScanNoValues(e,r,t);r=i.cursor,yield i.fields}while("0"!==r)}async *hScanNoValuesIterator(e,t){let r=t?.cursor??"0";do{let i=await this.hScanNoValues(e,r,t);r=i.cursor,yield i.fields}while("0"!==r)}async *sScanIterator(e,t){let r=t?.cursor??"0";do{let i=await this.sScan(e,r,t);r=i.cursor,yield i.members}while("0"!==r)}async *zScanIterator(e,t){let r=t?.cursor??"0";do{let i=await this.zScan(e,r,t);r=i.cursor,yield i.members}while("0"!==r)}async MONITOR(e){let t=this._self.#r2.monitor(e,{typeMapping:this._commandOptions?.typeMapping});this._self.#ic(),await t,this._self.#r6=e}monitor=this.MONITOR;async reset(){let e=Symbol("Reset Chain"),t=[this._self.#r2.reset(e)],r=this._self.#x?.database??0;this._self.#r8?.dispose(),this._self.#r8=null,t.push(...await this._self.#is(e,!1)),this._self.#ic(),await Promise.all(t),this._self.#rT=r,this._self.#r6=void 0,this._self.#r3=void 0,this._self.#r5=void 0}resetIfDirty(){let e=!1;if(this._self.#rT!==(this._self.#x?.database??0)&&(console.warn("Returning a client with a different selected DB"),e=!0),this._self.#r6&&(console.warn("Returning a client with active MONITOR"),e=!0),this._self.#r2.isPubSubActive&&(console.warn("Returning a client with active PubSub"),e=!0),(this._self.#r3||this._self.#r5)&&(console.warn("Returning a client with active WATCH"),e=!0),e)return this.reset()}QUIT(){return this._self.#r8?.dispose(),this._self.#r8=null,this._self.#tk.quit(async()=>{clearTimeout(this._self.#id);let e=this._self.#r2.addCommand(["QUIT"]);return this._self.#ic(),e})}quit=this.QUIT;disconnect(){return Promise.resolve(this.destroy())}close(){return new Promise(e=>{if(clearTimeout(this._self.#id),this._self.#tk.close(),this._self.#rW?.onClose(),this._self.#r2.isEmpty())return this._self.#tk.destroySocket(),e();let t=()=>{this._self.#r2.isEmpty()&&(this._self.#tk.off("data",t),this._self.#tk.destroySocket(),e())};this._self.#tk.on("data",t),this._self.#r8?.dispose(),this._self.#r8=null})}destroy(){clearTimeout(this._self.#id),this._self.#r2.flushAll(new c.DisconnectsClientError),this._self.#tk.destroy(),this._self.#rW?.onClose(),this._self.#r8?.dispose(),this._self.#r8=null}ref(){this._self.#tk.ref()}unref(){this._self.#tk.unref()}}i=T,r.default=T},9068,(e,t,r)=>{var i=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],n=function(e){for(var t,r=0,i=0,n=[],s=e.length;r<s;r++)(t=e.charCodeAt(r))<128?n[i++]=t:(t<2048?n[i++]=t>>6|192:((64512&t)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++r)),n[i++]=t>>18|240,n[i++]=t>>12&63|128):n[i++]=t>>12|224,n[i++]=t>>6&63|128),n[i++]=63&t|128);return n},s=t.exports=function(e){for(var t,r=0,s=-1,a=0,o=0,u="string"==typeof e?n(e):e,l=u.length;r<l;){if(t=u[r++],-1===s)123===t&&(s=r);else if(125!==t)o=i[(t^o>>8)&255]^o<<8;else if(r-1!==s)return 16383&o;a=i[(t^a>>8)&255]^a<<8}return 16383&a};t.exports.generateMulti=function(e){for(var t=1,r=e.length,i=s(e[0]);t<r;)if(s(e[t++])!==i)return -1;return i}},30697,(e,t,r)=>{"use strict";var i,n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let s=e.r(28307),a=n(e.r(73643)),o=e.r(74788),u=n(e.r(9068)),l=e.r(20666);class d{static #im=16384;#x;#rq;#iy;slots=Array(i.#im);masters=[];replicas=[];nodeByAddress=new Map;pubSubNode;clientSideCache;#tM=!1;get isOpen(){return this.#tM}#r7(e){if(e?.clientSideCache&&e?.RESP!==3)throw Error("Client Side Caching is only supported with RESP3")}constructor(e,t){this.#r7(e),this.#x=e,e?.clientSideCache&&(e.clientSideCache instanceof l.PooledClientSideCacheProvider?this.clientSideCache=e.clientSideCache:this.clientSideCache=new l.BasicPooledClientSideCache(e.clientSideCache)),this.#rq=a.default.factory(this.#x),this.#iy=t}async connect(){if(this.#tM)throw Error("Cluster already open");this.#tM=!0;try{await this.#ig(),this.#iy("connect")}catch(e){throw this.#tM=!1,e}}async #ig(){let e=Math.floor(Math.random()*this.#x.rootNodes.length);for(let t=e;t<this.#x.rootNodes.length;t++){if(!this.#tM)throw Error("Cluster closed");if(await this.#i_(this.#x.rootNodes[t]))return}for(let t=0;t<e;t++){if(!this.#tM)throw Error("Cluster closed");if(await this.#i_(this.#x.rootNodes[t]))return}throw new s.RootNodesUnavailableError}#ib(){this.slots=Array(i.#im),this.masters=[],this.replicas=[],this._randomNodeIterator=void 0}async #i_(e){this.clientSideCache?.clear(),this.clientSideCache?.disable();try{let t=new Set,r=[],i=!0!==this.#x.minimizeConnections,n=await this.#iv(e);for(let{from:e,to:s,master:a,replicas:o}of(this.#ib(),n)){let n={master:this.#iE(a,!1,i,t,r)};this.#x.useReplicas&&(n.replicas=o.map(e=>this.#iE(e,!0,i,t,r)));for(let t=e;t<=s;t++)this.slots[t]=n}if(this.pubSubNode&&!t.has(this.pubSubNode.address)){let e=this.pubSubNode.client.getPubSubListeners(o.PUBSUB_TYPE.CHANNELS),t=this.pubSubNode.client.getPubSubListeners(o.PUBSUB_TYPE.PATTERNS);this.pubSubNode.client.destroy(),(e.size||t.size)&&r.push(this.#iS({[o.PUBSUB_TYPE.CHANNELS]:e,[o.PUBSUB_TYPE.PATTERNS]:t}))}for(let[e,r]of this.nodeByAddress.entries()){if(t.has(e))continue;r.client&&r.client.destroy();let{pubSub:i}=r;i&&i.client.destroy(),this.nodeByAddress.delete(e)}return await Promise.all(r),this.clientSideCache?.enable(),!0}catch(e){return this.#iy("error",e),!1}}async #iv(e){let t=this.#iA(e);t.socket??={},t.socket.reconnectStrategy=!1,t.RESP=this.#x.RESP,t.commandOptions=void 0;let r=await this.#rq(t).on("error",e=>this.#iy("error",e)).connect();try{return await r.clusterSlots()}finally{r.destroy()}}#iT(e){switch(typeof this.#x.nodeAddressMap){case"object":return this.#x.nodeAddressMap[e];case"function":return this.#x.nodeAddressMap(e)}}#iA(e){let t;return this.#x.defaults?(t=this.#x.defaults.socket?{...this.#x.defaults.socket,...e?.socket}:e?.socket,{...this.#x.defaults,...e,socket:t}):e}#iE(e,t,r,i,n){let s=`${e.host}:${e.port}`,a=this.nodeByAddress.get(s);return a||(a={...e,address:s,readonly:t,client:void 0,connectPromise:void 0},r&&n.push(this.#iw(a)),this.nodeByAddress.set(s,a)),i.has(s)||(i.add(s),(t?this.replicas:this.masters).push(a)),a}#iO(e,t=e.readonly){let r=this.#iT(e.address)??{host:e.host,port:e.port},i=Object.freeze({host:r.host,port:r.port}),n=this.#iy,s=this.#rq(this.#iA({clientSideCache:this.clientSideCache,RESP:this.#x.RESP,socket:r,readonly:t})).on("error",e=>n("node-error",e,i)).on("reconnecting",()=>n("node-reconnecting",i)).once("ready",()=>n("node-ready",i)).once("connect",()=>n("node-connect",i)).once("end",()=>n("node-disconnect",i)).on("__MOVED",async e=>{await this.rediscover(s),this.#iy("__resubscribeAllPubSubListeners",e)});return s}#iw(e,t){let r=e.client=this.#iO(e,t);return e.connectPromise=r.connect().finally(()=>e.connectPromise=void 0)}nodeClient(e){return e.connectPromise??e.client??this.#iw(e)}#iR;async rediscover(e){return this.#iR??=this.#iI(e).finally(()=>{this.#iR=void 0}),this.#iR}async #iI(e){if(!await this.#i_(e.options))return this.#ig()}quit(){return this.#iC(e=>e.quit())}disconnect(){return this.#iC(e=>e.disconnect())}close(){return this.#iC(e=>e.close())}destroy(){for(let e of(this.#tM=!1,this.#iN()))e.destroy();this.pubSubNode&&(this.pubSubNode.client.destroy(),this.pubSubNode=void 0),this.#ib(),this.nodeByAddress.clear(),this.#iy("disconnect")}*#iN(){for(let e of this.masters)e.client&&(yield e.client),e.pubSub&&(yield e.pubSub.client);for(let e of this.replicas)e.client&&(yield e.client)}async #iC(e){this.#tM=!1;let t=[];for(let r of this.#iN())t.push(e(r));this.pubSubNode&&(t.push(e(this.pubSubNode.client)),this.pubSubNode=void 0),this.#ib(),this.nodeByAddress.clear(),await Promise.allSettled(t),this.#iy("disconnect")}getClient(e,t){if(!e)return this.nodeClient(this.getRandomNode());let r=(0,u.default)(e);return t?this.nodeClient(this.getSlotRandomNode(r)):this.nodeClient(this.slots[r].master)}*#iP(){if(this.masters.length+this.replicas.length===0)return;let e=Math.floor(Math.random()*(this.masters.length+this.replicas.length));if(e<this.masters.length){do yield this.masters[e];while(++e<this.masters.length)for(let e of this.replicas)yield e}else{e-=this.masters.length;do yield this.replicas[e];while(++e<this.replicas.length)}for(;;){for(let e of this.masters)yield e;for(let e of this.replicas)yield e}}_randomNodeIterator;getRandomNode(){return this._randomNodeIterator??=this.#iP(),this._randomNodeIterator.next().value}*#iD(e){let t=Math.floor(Math.random()*(1+e.replicas.length));if(t<e.replicas.length)do yield e.replicas[t];while(++t<e.replicas.length)for(;;)for(let t of(yield e.master,e.replicas))yield t}getSlotRandomNode(e){let t=this.slots[e];return t.replicas?.length?(t.nodesIterator??=this.#iD(t),t.nodesIterator.next().value):t.master}getMasterByAddress(e){let t=this.nodeByAddress.get(e);if(t)return this.nodeClient(t)}getPubSubClient(){return this.pubSubNode?this.pubSubNode.connectPromise??this.pubSubNode.client:this.#iS()}async #iS(e){let t=Math.floor(Math.random()*(this.masters.length+this.replicas.length)),r=t<this.masters.length?this.masters[t]:this.replicas[t-this.masters.length],i=this.#iO(r,!1);return this.pubSubNode={address:r.address,client:i,connectPromise:i.connect().then(async t=>(e&&await Promise.all([t.extendPubSubListeners(o.PUBSUB_TYPE.CHANNELS,e[o.PUBSUB_TYPE.CHANNELS]),t.extendPubSubListeners(o.PUBSUB_TYPE.PATTERNS,e[o.PUBSUB_TYPE.PATTERNS])]),this.pubSubNode.connectPromise=void 0,t)).catch(e=>{throw this.pubSubNode=void 0,e})},this.pubSubNode.connectPromise}async executeUnsubscribeCommand(e){let t=await this.getPubSubClient();await e(t),t.isPubSubActive||(t.destroy(),this.pubSubNode=void 0)}getShardedPubSubClient(e){let{master:t}=this.slots[(0,u.default)(e)];return t.pubSub?t.pubSub.connectPromise??t.pubSub.client:this.#ix(t)}async #ix(e){let t=this.#iO(e,!1).on("server-sunsubscribe",async(e,r)=>{try{await this.rediscover(t);let i=await this.getShardedPubSubClient(e);await i.extendPubSubChannelListeners(o.PUBSUB_TYPE.SHARDED,e,r)}catch(t){this.#iy("sharded-shannel-moved-error",t,e,r)}});return e.pubSub={client:t,connectPromise:t.connect().then(t=>(e.pubSub.connectPromise=void 0,t)).catch(t=>{throw e.pubSub=void 0,t})},e.pubSub.connectPromise}async executeShardedUnsubscribeCommand(e,t){let{master:r}=this.slots[(0,u.default)(e)];if(!r.pubSub)return;let i=r.pubSub.connectPromise?await r.pubSub.connectPromise:r.pubSub.client;await t(i),i.isPubSubActive||(i.destroy(),r.pubSub=void 0)}}i=d,r.default=d},62932,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(8495)),s=i(e.r(56480)),a=e.r(94617),o=e.r(59369);class u{static #ry(e,t){let r=(0,a.getTransformReply)(e,t);return function(...t){let i=new o.BasicCommandParser;e.parseCommand(i,...t);let n=i.redisArgs;n.preserve=i.preserve;let s=i.firstKey;return this.addCommand(s,e.IS_READ_ONLY,n,r)}}static #rg(e,t){let r=(0,a.getTransformReply)(e,t);return function(...t){let i=new o.BasicCommandParser;e.parseCommand(i,...t);let n=i.redisArgs;n.preserve=i.preserve;let s=i.firstKey;return this._self.addCommand(s,e.IS_READ_ONLY,n,r)}}static #r_(e,t,r){let i=(0,a.functionArgumentsPrefix)(e,t),n=(0,a.getTransformReply)(t,r);return function(...e){let r=new o.BasicCommandParser;r.push(...i),t.parseCommand(r,...e);let s=r.redisArgs;s.preserve=r.preserve;let a=r.firstKey;return this._self.addCommand(a,t.IS_READ_ONLY,s,n)}}static #rb(e,t){let r=(0,a.getTransformReply)(e,t);return function(...t){let i=new o.BasicCommandParser;e.parseCommand(i,...t);let n=i.redisArgs;n.preserve=i.preserve;let s=i.firstKey;return this.#rv(s,e.IS_READ_ONLY,e,n,r)}}static extend(e){return(0,a.attachConfig)({BaseClass:u,commands:n.default,createCommand:u.#ry,createModuleCommand:u.#rg,createFunctionCommand:u.#r_,createScriptCommand:u.#rb,config:e})}#rE;#rS;#rA;#iL;#ik=!0;constructor(e,t,r,i){this.#rE=new s.default(i),this.#rS=e,this.#rA=t,this.#iL=r}#iM(e,t){this.#iL??=e,this.#ik&&=t}addCommand(e,t,r,i){return this.#iM(e,t),this.#rE.addCommand(r,i),this}#rv(e,t,r,i,n){return this.#iM(e,t),this.#rE.addScript(r,i,n),this}async exec(e=!1){return e?this.execAsPipeline():this.#rE.transformReplies(await this.#rS(this.#iL,this.#ik,this.#rE.queue))}EXEC=this.exec;execTyped(e=!1){return this.exec(e)}async execAsPipeline(){return 0===this.#rE.queue.length?[]:this.#rE.transformReplies(await this.#rA(this.#iL,this.#ik,this.#rE.queue))}execAsPipelineTyped(){return this.execAsPipeline()}}r.default=u},97940,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(8495)),s=e.r(87769),a=e.r(94617),o=i(e.r(30697)),u=i(e.r(62932)),l=e.r(28307),d=e.r(59369),c=e.r(31916),p=i(e.r(5732));class f extends s.EventEmitter{static #ry(e,t){let r=(0,a.getTransformReply)(e,t);return async function(...t){let i=new d.BasicCommandParser;return e.parseCommand(i,...t),this._self._execute(i.firstKey,e.IS_READ_ONLY,this._commandOptions,(t,n)=>t._executeCommand(e,i,n,r))}}static #rg(e,t){let r=(0,a.getTransformReply)(e,t);return async function(...t){let i=new d.BasicCommandParser;return e.parseCommand(i,...t),this._self._execute(i.firstKey,e.IS_READ_ONLY,this._self._commandOptions,(t,n)=>t._executeCommand(e,i,n,r))}}static #r_(e,t,r){let i=(0,a.functionArgumentsPrefix)(e,t),n=(0,a.getTransformReply)(t,r);return async function(...e){let r=new d.BasicCommandParser;return r.push(...i),t.parseCommand(r,...e),this._self._execute(r.firstKey,t.IS_READ_ONLY,this._self._commandOptions,(e,i)=>e._executeCommand(t,r,i,n))}}static #rb(e,t){let r=(0,a.scriptArgumentsPrefix)(e),i=(0,a.getTransformReply)(e,t);return async function(...t){let n=new d.BasicCommandParser;return n.push(...r),e.parseCommand(n,...t),this._self._execute(n.firstKey,e.IS_READ_ONLY,this._commandOptions,(t,r)=>t._executeScript(e,n,r,i))}}static #rY=new p.default;static factory(e){let t=f.#rY.get(e);return t||((t=(0,a.attachConfig)({BaseClass:f,commands:n.default,createCommand:f.#ry,createModuleCommand:f.#rg,createFunctionCommand:f.#r_,createScriptCommand:f.#rb,config:e})).prototype.Multi=u.default.extend(e),f.#rY.set(e,t)),e=>Object.create(new t(e))}static create(e){return f.factory(e)(e)}_options;_slots;_self=this;_commandOptions;get slots(){return this._self._slots.slots}get clientSideCache(){return this._self._slots.clientSideCache}get masters(){return this._self._slots.masters}get replicas(){return this._self._slots.replicas}get nodeByAddress(){return this._self._slots.nodeByAddress}get pubSubNode(){return this._self._slots.pubSubNode}get isOpen(){return this._self._slots.isOpen}constructor(e){super(),this._options=e,this._slots=new o.default(e,this.emit.bind(this)),this.on("__resubscribeAllPubSubListeners",this.resubscribeAllPubSubListeners.bind(this)),e?.commandOptions&&(this._commandOptions=e.commandOptions)}duplicate(e){return new(Object.getPrototypeOf(this)).constructor({...this._self._options,commandOptions:this._commandOptions,...e})}async connect(){return await this._self._slots.connect(),this}withCommandOptions(e){let t=Object.create(this);return t._commandOptions=e,t}_commandOptionsProxy(e,t){let r=Object.create(this);return r._commandOptions=Object.create(this._commandOptions??null),r._commandOptions[e]=t,r}withTypeMapping(e){return this._commandOptionsProxy("typeMapping",e)}_handleAsk(e){return async(t,r)=>{let i=Symbol("asking chain"),n=r?{...r}:{};return n.chainId=i,(await Promise.all([t.sendCommand([c.ASKING_CMD],{chainId:i}),e(t,n)]))[1]}}async _execute(e,t,r,i){let n=this._options.maxCommandRedirections??16,s=await this._slots.getClient(e,t),a=0,o=i;for(;;)try{return await o(s,r)}catch(r){if(o=i,++a>n||!(r instanceof Error))throw r;if(r.message.startsWith("ASK")){let e=r.message.substring(r.message.lastIndexOf(" ")+1),t=await this._slots.getMasterByAddress(e);if(t||(await this._slots.rediscover(s),t=await this._slots.getMasterByAddress(e)),!t)throw Error(`Cannot find node ${e}`);s=t,o=this._handleAsk(i);continue}if(r.message.startsWith("MOVED")){await this._slots.rediscover(s),s=await this._slots.getClient(e,t);continue}throw r}}async sendCommand(e,t,r,i){let n={...this._self._commandOptions,...i};return this._self._execute(e,t,n,(e,t)=>e.sendCommand(r,t))}MULTI(e){return new this.Multi(async(e,t,r)=>(await this._self._slots.getClient(e,t))._executeMulti(r),async(e,t,r)=>(await this._self._slots.getClient(e,t))._executePipeline(r),e,this._commandOptions?.typeMapping)}multi=this.MULTI;async SUBSCRIBE(e,t,r){return(await this._self._slots.getPubSubClient()).SUBSCRIBE(e,t,r)}subscribe=this.SUBSCRIBE;async UNSUBSCRIBE(e,t,r){return this._self._slots.executeUnsubscribeCommand(i=>i.UNSUBSCRIBE(e,t,r))}unsubscribe=this.UNSUBSCRIBE;async PSUBSCRIBE(e,t,r){return(await this._self._slots.getPubSubClient()).PSUBSCRIBE(e,t,r)}pSubscribe=this.PSUBSCRIBE;async PUNSUBSCRIBE(e,t,r){return this._self._slots.executeUnsubscribeCommand(i=>i.PUNSUBSCRIBE(e,t,r))}pUnsubscribe=this.PUNSUBSCRIBE;async SSUBSCRIBE(e,t,r){let i=this._self._options.maxCommandRedirections??16,n=Array.isArray(e)?e[0]:e,s=await this._self._slots.getShardedPubSubClient(n);for(let a=0;;a++)try{return await s.SSUBSCRIBE(e,t,r)}catch(e){if(++a>i||!(e instanceof l.ErrorReply))throw e;if(e.message.startsWith("MOVED")){await this._self._slots.rediscover(s),s=await this._self._slots.getShardedPubSubClient(n);continue}throw e}}sSubscribe=this.SSUBSCRIBE;SUNSUBSCRIBE(e,t,r){return this._self._slots.executeShardedUnsubscribeCommand(Array.isArray(e)?e[0]:e,i=>i.SUNSUBSCRIBE(e,t,r))}resubscribeAllPubSubListeners(e){for(let[t,r]of e.CHANNELS)r.buffers.forEach(e=>{this.subscribe(t,e,!0)}),r.strings.forEach(e=>{this.subscribe(t,e)});for(let[t,r]of e.PATTERNS)r.buffers.forEach(e=>{this.pSubscribe(t,e,!0)}),r.strings.forEach(e=>{this.pSubscribe(t,e)});for(let[t,r]of e.SHARDED)r.buffers.forEach(e=>{this.sSubscribe(t,e,!0)}),r.strings.forEach(e=>{this.sSubscribe(t,e)})}sUnsubscribe=this.SUNSUBSCRIBE;quit(){return this._self._slots.quit()}disconnect(){return this._self._slots.disconnect()}close(){return this._self._slots.clientSideCache?.onPoolClose(),this._self._slots.close()}destroy(){return this._self._slots.clientSideCache?.onPoolClose(),this._self._slots.destroy()}nodeClient(e){return this._self._slots.nodeClient(e)}getRandomNode(){return this._self._slots.getRandomNode()}getSlotRandomNode(e){return this._self._slots.getSlotRandomNode(e)}getMasters(){return this.masters}getSlotMaster(e){return this.slots[e].master}}r.default=f},91346,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createScriptCommand=r.createModuleCommand=r.createFunctionCommand=r.createCommand=r.clientSocketToNode=r.createNodeList=r.parseNode=void 0;let i=e.r(59369),n=e.r(94617);function s(e){if(!(e.flags.includes("s_down")||e.flags.includes("disconnected")||e.flags.includes("failover_in_progress")))return{host:e.ip,port:Number(e.port)}}r.parseNode=s,r.createNodeList=function(e){var t=[];for(let r of e){let e=s(r);void 0!==e&&t.push(e)}return t},r.clientSocketToNode=function(e){return{host:e.host,port:e.port}},r.createCommand=function(e,t){let r=(0,n.getTransformReply)(e,t);return async function(...t){let n=new i.BasicCommandParser;return e.parseCommand(n,...t),this._self._execute(e.IS_READ_ONLY,t=>t._executeCommand(e,n,this.commandOptions,r))}},r.createFunctionCommand=function(e,t,r){let s=(0,n.functionArgumentsPrefix)(e,t),a=(0,n.getTransformReply)(t,r);return async function(...e){let r=new i.BasicCommandParser;return r.push(...s),t.parseCommand(r,...e),this._self._execute(t.IS_READ_ONLY,e=>e._executeCommand(t,r,this._self.commandOptions,a))}},r.createModuleCommand=function(e,t){let r=(0,n.getTransformReply)(e,t);return async function(...t){let n=new i.BasicCommandParser;return e.parseCommand(n,...t),this._self._execute(e.IS_READ_ONLY,t=>t._executeCommand(e,n,this._self.commandOptions,r))}},r.createScriptCommand=function(e,t){let r=(0,n.scriptArgumentsPrefix)(e),s=(0,n.getTransformReply)(e,t);return async function(...t){let n=new i.BasicCommandParser;return n.push(...r),e.parseCommand(n,...t),this._self._execute(e.IS_READ_ONLY,t=>t._executeScript(e,n,this.commandOptions,s))}}},82037,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(8495)),s=i(e.r(56480)),a=e.r(94617),o=e.r(59369);class u{static _createCommand(e,t){let r=(0,a.getTransformReply)(e,t);return function(...t){let i=new o.BasicCommandParser;e.parseCommand(i,...t);let n=i.redisArgs;return n.preserve=i.preserve,this.addCommand(e.IS_READ_ONLY,n,r)}}static _createModuleCommand(e,t){let r=(0,a.getTransformReply)(e,t);return function(...t){let i=new o.BasicCommandParser;e.parseCommand(i,...t);let n=i.redisArgs;return n.preserve=i.preserve,this._self.addCommand(e.IS_READ_ONLY,n,r)}}static _createFunctionCommand(e,t,r){let i=(0,a.functionArgumentsPrefix)(e,t),n=(0,a.getTransformReply)(t,r);return function(...e){let r=new o.BasicCommandParser;r.push(...i),t.parseCommand(r,...e);let s=r.redisArgs;return s.preserve=r.preserve,this._self.addCommand(t.IS_READ_ONLY,s,n)}}static _createScriptCommand(e,t){let r=(0,a.getTransformReply)(e,t);return function(...t){let i=new o.BasicCommandParser;e.parseCommand(i,...t);let n=i.redisArgs;return n.preserve=i.preserve,this.#rv(e.IS_READ_ONLY,e,n,r)}}static extend(e){return(0,a.attachConfig)({BaseClass:u,commands:n.default,createCommand:u._createCommand,createModuleCommand:u._createModuleCommand,createFunctionCommand:u._createFunctionCommand,createScriptCommand:u._createScriptCommand,config:e})}#rE=new s.default;#i$;#ik=!0;constructor(e,t){this.#rE=new s.default(t),this.#i$=e}#iM(e){this.#ik&&=e}addCommand(e,t,r){return this.#iM(e),this.#rE.addCommand(t,r),this}#rv(e,t,r,i){return this.#iM(e),this.#rE.addScript(t,r,i),this}async exec(e=!1){return e?this.execAsPipeline():this.#rE.transformReplies(await this.#i$._executeMulti(this.#ik,this.#rE.queue))}EXEC=this.exec;execTyped(e=!1){return this.exec(e)}async execAsPipeline(){return 0===this.#rE.queue.length?[]:this.#rE.transformReplies(await this.#i$._executePipeline(this.#ik,this.#rE.queue))}execAsPipelineTyped(){return this.execAsPipeline()}}r.default=u},28325,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.PubSubProxy=void 0;let n=i(e.r(87769)),s=e.r(74788),a=i(e.r(73643));class o extends n.default{#iU;#ij;#G;#eg;#iB;constructor(e,t){super(),this.#iU=e,this.#ij=t}#iO(){if(void 0===this.#G)throw Error("pubSubProxy: didn't define node to do pubsub against");return new a.default({...this.#iU,socket:{...this.#iU.socket,host:this.#G.host,port:this.#G.port}})}async #iS(e=!1){let t=this.#iO().on("error",this.#ij),r=t.connect().then(async t=>this.#eg?.client!==t||(e&&this.#iB&&await Promise.all([t.extendPubSubListeners(s.PUBSUB_TYPE.CHANNELS,this.#iB[s.PUBSUB_TYPE.CHANNELS]),t.extendPubSubListeners(s.PUBSUB_TYPE.PATTERNS,this.#iB[s.PUBSUB_TYPE.PATTERNS])]),this.#eg.client!==t)?(t.destroy(),this.#eg?.connectPromise):(this.#eg.connectPromise=void 0,t)).catch(e=>{throw this.#eg=void 0,e});return this.#eg={client:t,connectPromise:r},r}#iz(){return this.#eg?this.#eg.connectPromise??this.#eg.client:this.#iS()}async changeNode(e){this.#G=e,this.#eg&&(void 0===this.#eg.connectPromise&&(this.#iB={[s.PUBSUB_TYPE.CHANNELS]:this.#eg.client.getPubSubListeners(s.PUBSUB_TYPE.CHANNELS),[s.PUBSUB_TYPE.PATTERNS]:this.#eg.client.getPubSubListeners(s.PUBSUB_TYPE.PATTERNS)},this.#eg.client.destroy()),await this.#iS(!0))}#iK(e){let t=this.#iz();return t instanceof a.default?e(t):t.then(t=>{if(void 0!==t)return e(t)}).catch(e=>{throw this.#eg?.client.isPubSubActive&&(this.#eg.client.destroy(),this.#eg=void 0),e})}subscribe(e,t,r){return this.#iK(i=>i.SUBSCRIBE(e,t,r))}#iY(e){return this.#iK(async t=>{let r=await e(t);return t.isPubSubActive||(t.destroy(),this.#eg=void 0),r})}async unsubscribe(e,t,r){return this.#iY(i=>i.UNSUBSCRIBE(e,t,r))}async pSubscribe(e,t,r){return this.#iK(i=>i.PSUBSCRIBE(e,t,r))}async pUnsubscribe(e,t,r){return this.#iY(i=>i.PUNSUBSCRIBE(e,t,r))}destroy(){this.#iB=void 0,void 0!==this.#eg&&(this.#eg.connectPromise||this.#eg.client.destroy(),this.#eg=void 0)}}r.PubSubProxy=o},85323,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t){e.push("SENTINEL","MASTER",t)},transformReply:{2:e.r(52135).transformTuplesReply,3:void 0}}},35927,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r,i,n){e.push("SENTINEL","MONITOR",t,r,i,n)},transformReply:void 0}},9451,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={parseCommand(e,t){e.push("SENTINEL","REPLICAS",t)},transformReply:{2:(e,t,r)=>e.reduce((e,t)=>(e.push((0,i.transformTuplesReply)(t,void 0,r)),e),[]),3:void 0}}},69965,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={parseCommand(e,t){e.push("SENTINEL","SENTINELS",t)},transformReply:{2:(e,t,r)=>e.reduce((e,t)=>(e.push((0,i.transformTuplesReply)(t,void 0,r)),e),[]),3:void 0}}},10690,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={parseCommand(e,t,r){for(let i of(e.push("SENTINEL","SET",t),r))e.push(i.option,i.value)},transformReply:void 0}},9443,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(85323)),s=i(e.r(35927)),a=i(e.r(9451)),o=i(e.r(69965)),u=i(e.r(10690));r.default={SENTINEL_SENTINELS:o.default,sentinelSentinels:o.default,SENTINEL_MASTER:n.default,sentinelMaster:n.default,SENTINEL_REPLICAS:a.default,sentinelReplicas:a.default,SENTINEL_MONITOR:s.default,sentinelMonitor:s.default,SENTINEL_SET:u.default,sentinelSet:u.default}},54001,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.default={sentinel:i(e.r(9443)).default}},5471,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WaitQueue=void 0;let i=e.r(82045);class n{#iF=new i.SinglyLinkedList;#r2=new i.SinglyLinkedList;push(e){let t=this.#r2.shift();if(void 0!==t)return void t(e);this.#iF.push(e)}shift(){return this.#iF.shift()}wait(){return new Promise(e=>this.#r2.push(e))}}r.WaitQueue=n},92994,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.RedisSentinelFactory=r.RedisSentinelClient=void 0;let n=e.r(87769),s=i(e.r(73643)),a=e.r(94617),o=i(e.r(8495)),u=e.r(91346),l=i(e.r(82037)),d=e.r(28325),c=e.r(36340),p=i(e.r(54001)),f=e.r(5471),h=e.r(20666);class m{#iq;#iV;_self;get isOpen(){return this._self.#iV.isOpen}get isReady(){return this._self.#iV.isReady}get commandOptions(){return this._self.#iG}#iG;constructor(e,t,r){this._self=this,this.#iV=e,this.#iq=t,this.#iG=r}static factory(e){let t=(0,a.attachConfig)({BaseClass:m,commands:o.default,createCommand:u.createCommand,createModuleCommand:u.createModuleCommand,createFunctionCommand:u.createFunctionCommand,createScriptCommand:u.createScriptCommand,config:e});return t.prototype.Multi=l.default.extend(e),(e,r,i)=>Object.create(new t(e,r,i))}static create(e,t,r,i){return m.factory(e)(t,r,i)}withCommandOptions(e){let t=Object.create(this);return t._commandOptions=e,t}_commandOptionsProxy(e,t){let r=Object.create(this);return r._commandOptions=Object.create(this._self.#iG??null),r._commandOptions[e]=t,r}withTypeMapping(e){return this._commandOptionsProxy("typeMapping",e)}async _execute(e,t){if(void 0===this._self.#iq)throw Error("Attempted execution on released RedisSentinelClient lease");return await this._self.#iV.execute(t,this._self.#iq)}async sendCommand(e,t,r){return this._execute(e,e=>e.sendCommand(t,r))}async _executePipeline(e,t){return this._execute(e,e=>e._executePipeline(t))}async _executeMulti(e,t){return this._execute(e,e=>e._executeMulti(t))}MULTI(){return new this.Multi(this)}multi=this.MULTI;WATCH(e){if(void 0===this._self.#iq)throw Error("Attempted execution on released RedisSentinelClient lease");return this._execute(!1,t=>t.watch(e))}watch=this.WATCH;UNWATCH(){if(void 0===this._self.#iq)throw Error("Attempted execution on released RedisSentinelClient lease");return this._execute(!1,e=>e.unwatch())}unwatch=this.UNWATCH;release(){if(void 0===this._self.#iq)throw Error("RedisSentinelClient lease already released");let e=this._self.#iV.releaseClientLease(this._self.#iq);return this._self.#iq=void 0,e}}r.RedisSentinelClient=m;class y extends n.EventEmitter{_self;#iV;#x;get isOpen(){return this._self.#iV.isOpen}get isReady(){return this._self.#iV.isReady}get commandOptions(){return this._self.#iG}#iG;#iH=()=>{};#iZ;#iW=0;#iQ;get clientSideCache(){return this._self.#iV.clientSideCache}constructor(e){super(),this._self=this,this.#x=e,e.commandOptions&&(this.#iG=e.commandOptions),this.#iV=new g(e),this.#iV.on("error",e=>this.emit("error",e)),this.#iV.on("topology-change",e=>{this.emit("topology-change",e)||this._self.#iH(`RedisSentinel: re-emit for topology-change for ${e.type} event returned false`)})}static factory(e){let t=(0,a.attachConfig)({BaseClass:y,commands:o.default,createCommand:u.createCommand,createModuleCommand:u.createModuleCommand,createFunctionCommand:u.createFunctionCommand,createScriptCommand:u.createScriptCommand,config:e});return t.prototype.Multi=l.default.extend(e),e=>Object.create(new t(e))}static create(e){return y.factory(e)(e)}withCommandOptions(e){let t=Object.create(this);return t._commandOptions=e,t}_commandOptionsProxy(e,t){let r=Object.create(this);return r._self.#iG={...this._self.#iG||{},[e]:t},r}withTypeMapping(e){return this._commandOptionsProxy("typeMapping",e)}async connect(){return await this._self.#iV.connect(),this._self.#x.reserveClient&&(this._self.#iZ=await this._self.#iV.getClientLease()),this}async _execute(e,t){let r;(!e||!this._self.#iV.useReplicas)&&(this._self.#iZ?r=this._self.#iZ:(this._self.#iQ??=await this._self.#iV.getClientLease(),r=this._self.#iQ,this._self.#iW++));try{return await this._self.#iV.execute(t,r)}finally{if(void 0!==r&&r===this._self.#iQ&&0==--this._self.#iW){let e=this._self.#iV.releaseClientLease(r);this._self.#iQ=void 0,e&&await e}}}async use(e){let t=await this._self.#iV.getClientLease();try{return await e(m.create(this._self.#x,this._self.#iV,t,this._self.#iG))}finally{let e=this._self.#iV.releaseClientLease(t);e&&await e}}async sendCommand(e,t,r){return this._execute(e,e=>e.sendCommand(t,r))}async _executePipeline(e,t){return this._execute(e,e=>e._executePipeline(t))}async _executeMulti(e,t){return this._execute(e,e=>e._executeMulti(t))}MULTI(){return new this.Multi(this)}multi=this.MULTI;async close(){return this._self.#iV.close()}destroy(){return this._self.#iV.destroy()}async SUBSCRIBE(e,t,r){return this._self.#iV.subscribe(e,t,r)}subscribe=this.SUBSCRIBE;async UNSUBSCRIBE(e,t,r){return this._self.#iV.unsubscribe(e,t,r)}unsubscribe=this.UNSUBSCRIBE;async PSUBSCRIBE(e,t,r){return this._self.#iV.pSubscribe(e,t,r)}pSubscribe=this.PSUBSCRIBE;async PUNSUBSCRIBE(e,t,r){return this._self.#iV.pUnsubscribe(e,t,r)}pUnsubscribe=this.PUNSUBSCRIBE;async acquire(){let e=await this._self.#iV.getClientLease();return m.create(this._self.#x,this._self.#iV,e,this._self.#iG)}getSentinelNode(){return this._self.#iV.getSentinelNode()}getMasterNode(){return this._self.#iV.getMasterNode()}getReplicaNodes(){return this._self.#iV.getReplicaNodes()}setTracer(e){e?this._self.#iH=t=>{e.push(t)}:this._self.#iH=()=>{},this._self.#iV.setTracer(e)}}r.default=y;class g extends n.EventEmitter{#tM=!1;get isOpen(){return this.#tM}#t$=!1;get isReady(){return this.#t$}#iJ;#iX;#i0;#i1;#i4;#i2;#i6=!1;#i3=0;#i5;#i8;#i9=[];#i7;#ne;#nt=[];#nr=0;#ni;get useReplicas(){return this.#ni>0}#nn;#ns;#na;#no;#iC=!1;#iH=()=>{};#rW;get clientSideCache(){return this.#rW}#r7(e){if(e?.clientSideCache&&e?.RESP!==3)throw Error("Client Side Caching is only supported with RESP3")}constructor(e){if(super(),this.#r7(e),this.#iJ=e.name,this.#i2=e.RESP,this.#i5=Array.from(e.sentinelRootNodes),this.#ns=e.maxCommandRediscovers??16,this.#ne=e.masterPoolSize??1,this.#ni=e.replicaPoolSize??0,this.#i1=e.scanInterval??0,this.#i4=e.passthroughClientErrorEvents??!1,this.#iX=e.nodeClientOptions?{...e.nodeClientOptions}:{},void 0!==this.#iX.url)throw Error("invalid nodeClientOptions for Sentinel");if(e.clientSideCache)if(e.clientSideCache instanceof h.PooledClientSideCacheProvider)this.#rW=this.#iX.clientSideCache=e.clientSideCache;else{let t=e.clientSideCache;this.#rW=this.#iX.clientSideCache=new h.BasicPooledClientSideCache(t)}if(this.#i0=e.sentinelClientOptions?Object.assign({},e.sentinelClientOptions):{},this.#i0.modules=p.default,void 0!==this.#i0.url)throw Error("invalid sentinelClientOptions for Sentinel");this.#i7=new f.WaitQueue;for(let e=0;e<this.#ne;e++)this.#i7.push(e);this.#na=new d.PubSubProxy(this.#iX,e=>this.emit("error",e))}#iO(e,t,r){return s.default.create({RESP:this.#i2,...t,socket:{...t.socket,host:e.host,port:e.port,...void 0!==r&&{reconnectStrategy:r}}})}getClientLease(){let e=this.#i7.shift();return void 0!==e?{id:e}:this.#i7.wait().then(e=>({id:e}))}releaseClientLease(e){let t=this.#i9[e.id];if(void 0!==t){let r=t.resetIfDirty();if(r)return r.then(()=>this.#i7.push(e.id))}this.#i7.push(e.id)}async connect(){if(this.#tM)throw Error("already attempting to open");try{this.#tM=!0,this.#nn=this.#tY(),await this.#nn,this.#t$=!0}finally{this.#nn=void 0,this.#i1>0&&(this.#no=setInterval(this.#nu.bind(this),this.#i1))}}async #tY(){let e=0;for(;;){if(this.#iH("starting connect loop"),e+=1,this.#iC)return void this.#iH("in #connect and want to destroy");try{if(this.#i6=!1,await this.transform(this.analyze(await this.observe())),this.#i6){this.#iH("#connect: anotherReset is true, so continuing");continue}this.#iH("#connect: returning");return}catch(t){if(this.#iH(`#connect: exception ${t.message}`),!this.#t$&&e>this.#ns)throw t;"no valid master node"!==t.message&&console.log(t),await (0,c.setTimeout)(1e3)}finally{this.#iH("finished connect")}}}async execute(e,t){let r=0;for(;;){void 0!==this.#nn&&await this.#nn;let i=this.#nl(t);if(!i.isReady){await this.#nu();continue}let n=i.options?.socket;this.#iH("attemping to send command to "+n?.host+":"+n?.port);try{return await e(i)}catch(e){if(++r>this.#ns||!(e instanceof Error))throw e;if(void 0!==t&&(e.message.startsWith("READONLY")||!i.isReady)){await this.#nu();continue}throw e}}}async #nd(e){return await e.pSubscribe(["switch-master","[-+]sdown","+slave","+sentinel","[-+]odown","+slave-reconf-done"],(e,t)=>{this.#nc(t,e)},!0),e}async #nc(e,t){this.#iH("pubsub control channel message on "+e),this.#nu()}#nl(e){if(void 0!==e)return this.#i9[e.id];if(this.#nr>=this.#nt.length&&(this.#nr=0),0==this.#nt.length)throw Error("no replicas available for read");return this.#nt[this.#nr++]}async #nu(){if(!1!=this.#t$&&!0!=this.#iC){if(void 0!==this.#nn)return this.#i6=!0,await this.#nn;try{return this.#nn=this.#tY(),await this.#nn}finally{this.#iH("finished reconfgure"),this.#nn=void 0}}}#np(e){let t=this.#i5.findIndex(t=>t.host===e.host&&t.port===e.port);-1!==t&&this.#i5.splice(t,1),this.#nu()}async close(){this.#iC=!0,void 0!=this.#nn&&await this.#nn,this.#t$=!1,this.#rW?.onPoolClose(),this.#no&&(clearInterval(this.#no),this.#no=void 0);let e=[];for(let t of(void 0!==this.#i8&&(this.#i8.isOpen&&e.push(this.#i8.close()),this.#i8=void 0),this.#i9))t.isOpen&&e.push(t.close());for(let t of(this.#i9=[],this.#nt))t.isOpen&&e.push(t.close());this.#nt=[],await Promise.all(e),this.#na.destroy(),this.#tM=!1}async destroy(){for(let e of(this.#iC=!0,void 0!=this.#nn&&await this.#nn,this.#t$=!1,this.#rW?.onPoolClose(),this.#no&&(clearInterval(this.#no),this.#no=void 0),void 0!==this.#i8&&(this.#i8.isOpen&&this.#i8.destroy(),this.#i8=void 0),this.#i9))e.isOpen&&e.destroy();for(let e of(this.#i9=[],this.#nt))e.isOpen&&e.destroy();this.#nt=[],this.#na.destroy(),this.#tM=!1,this.#iC=!1}async subscribe(e,t,r){return this.#na.subscribe(e,t,r)}async unsubscribe(e,t,r){return this.#na.unsubscribe(e,t,r)}async pSubscribe(e,t,r){return this.#na.pSubscribe(e,t,r)}async pUnsubscribe(e,t,r){return this.#na.pUnsubscribe(e,t,r)}async observe(){for(let e of this.#i5){let t;try{this.#iH(`observe: trying to connect to sentinel: ${e.host}:${e.port}`),(t=this.#iO(e,this.#i0,!1)).on("error",e=>this.emit("error",`obseve client error: ${e}`)),await t.connect(),this.#iH("observe: connected to sentinel");let[r,i,n]=await Promise.all([t.sentinel.sentinelSentinels(this.#iJ),t.sentinel.sentinelMaster(this.#iJ),t.sentinel.sentinelReplicas(this.#iJ)]);return this.#iH("observe: got all sentinel data"),{sentinelConnected:e,sentinelData:r,masterData:i,replicaData:n,currentMaster:this.getMasterNode(),currentReplicas:this.getReplicaNodes(),currentSentinel:this.getSentinelNode(),replicaPoolSize:this.#ni,useReplicas:this.useReplicas}}catch(e){this.#iH(`observe: error ${e}`),this.emit("error",e)}finally{void 0!==t&&t.isOpen&&(this.#iH("observe: destroying sentinel client"),t.destroy())}}throw this.#iH("observe: none of the sentinels are available"),Error("None of the sentinels are available")}analyze(e){let t=(0,u.parseNode)(e.masterData);if(void 0===t)throw this.#iH(`analyze: no valid master node because ${e.masterData.flags}`),Error("no valid master node");t.host===e.currentMaster?.host&&t.port===e.currentMaster?.port?(this.#iH(`analyze: master node hasn't changed from ${e.currentMaster?.host}:${e.currentMaster?.port}`),t=void 0):this.#iH(`analyze: master node has changed to ${t.host}:${t.port} from ${e.currentMaster?.host}:${e.currentMaster?.port}`);let r=e.sentinelConnected;r.host===e.currentSentinel?.host&&r.port===e.currentSentinel.port?(this.#iH("analyze: sentinel node hasn't changed"),r=void 0):this.#iH(`analyze: sentinel node has changed to ${r.host}:${r.port}`);let i=[],n=new Map,s=new Set,a=new Set;if(e.useReplicas){let t=(0,u.createNodeList)(e.replicaData);for(let e of t)s.add(JSON.stringify(e));for(let[t,r]of e.currentReplicas)s.has(JSON.stringify(t))?(a.add(JSON.stringify(t)),r!=e.replicaPoolSize&&(n.set(t,e.replicaPoolSize-r),this.#iH(`analyze: adding ${t.host}:${t.port} to replicsToOpen`))):(i.push(t),this.#iH(`analyze: adding ${t.host}:${t.port} to replicsToClose`));for(let r of t)a.has(JSON.stringify(r))||(n.set(r,e.replicaPoolSize),this.#iH(`analyze: adding ${r.host}:${r.port} to replicsToOpen`))}return{sentinelList:[e.sentinelConnected].concat((0,u.createNodeList)(e.sentinelData)),epoch:Number(e.masterData["config-epoch"]),sentinelToOpen:r,masterToOpen:t,replicasToClose:i,replicasToOpen:n}}async transform(e){this.#iH("transform: enter");let t=[];if(e.sentinelToOpen){this.#iH("transform: opening a new sentinel"),void 0!==this.#i8&&this.#i8.isOpen?(this.#iH("transform: destroying old sentinel as open"),this.#i8.destroy(),this.#i8=void 0):this.#iH("transform: not destroying old sentinel as not open"),this.#iH(`transform: creating new sentinel to ${e.sentinelToOpen.host}:${e.sentinelToOpen.port}`);let r=e.sentinelToOpen,i=this.#iO(e.sentinelToOpen,this.#i0,!1);i.on("error",e=>{this.#i4&&this.emit("error",Error(`Sentinel Client (${r.host}:${r.port}): ${e.message}`,{cause:e}));let t={type:"SENTINEL",node:(0,u.clientSocketToNode)(i.options.socket),error:e};this.emit("client-error",t),this.#np(r)}).on("end",()=>this.#np(r)),this.#i8=i,this.#iH("transform: adding sentinel client connect() to promise list");let n=this.#i8.connect().then(e=>this.#nd(e));t.push(n),this.#iH(`created sentinel client to ${e.sentinelToOpen.host}:${e.sentinelToOpen.port}`);let s={type:"SENTINEL_CHANGE",node:e.sentinelToOpen};this.#iH("transform: emiting topology-change event for sentinel_change"),this.emit("topology-change",s)||this.#iH("transform: emit for topology-change for sentinel_change returned false")}if(e.masterToOpen){this.#iH("transform: opening a new master");let r=[],i=[];for(let e of(this.#iH("transform: destroying old masters if open"),this.#i9))i.push(e.isWatching||e.isDirtyWatch),e.isOpen&&e.destroy();this.#i9=[],this.#iH("transform: creating all master clients and adding connect promises");for(let t=0;t<this.#ne;t++){let n=e.masterToOpen,s=this.#iO(e.masterToOpen,this.#iX);s.on("error",e=>{this.#i4&&this.emit("error",Error(`Master Client (${n.host}:${n.port}): ${e.message}`,{cause:e}));let t={type:"MASTER",node:(0,u.clientSocketToNode)(s.options.socket),error:e};this.emit("client-error",t)}),i[t]&&s.setDirtyWatch("sentinel config changed in middle of a WATCH Transaction"),this.#i9.push(s),r.push(s.connect()),this.#iH(`created master client to ${e.masterToOpen.host}:${e.masterToOpen.port}`)}this.#iH("transform: adding promise to change #pubSubProxy node"),r.push(this.#na.changeNode(e.masterToOpen)),t.push(...r);let n={type:"MASTER_CHANGE",node:e.masterToOpen};this.#iH("transform: emiting topology-change event for master_change"),this.emit("topology-change",n)||this.#iH("transform: emit for topology-change for master_change returned false"),this.#i3++}let r=new Set;for(let t of e.replicasToClose){let e=JSON.stringify(t);r.add(e)}let i=[],n=new Set;for(let e of this.#nt){let t=(0,u.clientSocketToNode)(e.options.socket),s=JSON.stringify(t);if(r.has(s)||!e.isOpen){if(e.isOpen){let t=e.options?.socket;this.#iH(`destroying replica client to ${t?.host}:${t?.port}`),e.destroy()}if(!n.has(s)){let e={type:"REPLICA_REMOVE",node:t};this.emit("topology-change",e),n.add(s)}}else i.push(e)}if(this.#nt=i,0!=e.replicasToOpen.size)for(let[r,i]of e.replicasToOpen){for(let e=0;e<i;e++){let e=this.#iO(r,this.#iX);e.on("error",t=>{this.#i4&&this.emit("error",Error(`Replica Client (${r.host}:${r.port}): ${t.message}`,{cause:t}));let i={type:"REPLICA",node:(0,u.clientSocketToNode)(e.options.socket),error:t};this.emit("client-error",i)}),this.#nt.push(e),t.push(e.connect()),this.#iH(`created replica client to ${r.host}:${r.port}`)}let e={type:"REPLICA_ADD",node:r};this.emit("topology-change",e)}if(e.sentinelList.length!=this.#i5.length){this.#i5=e.sentinelList;let t={type:"SENTINE_LIST_CHANGE",size:e.sentinelList.length};this.emit("topology-change",t)}await Promise.all(t),this.#iH("transform: exit")}getMasterNode(){if(0!=this.#i9.length){for(let e of this.#i9)if(e.isReady)return(0,u.clientSocketToNode)(e.options.socket)}}getSentinelNode(){if(void 0!==this.#i8)return(0,u.clientSocketToNode)(this.#i8.options.socket)}getReplicaNodes(){let e=new Map,t=new Map;for(let e of this.#nt){let r=JSON.stringify((0,u.clientSocketToNode)(e.options.socket));e.isReady?t.set(r,(t.get(r)??0)+1):t.has(r)||t.set(r,0)}for(let[r,i]of t)e.set(JSON.parse(r),i);return e}setTracer(e){e?this.#iH=t=>{e.push(t)}:this.#iH=()=>{}}}class _ extends n.EventEmitter{options;#i5;#nf=-1;constructor(e){super(),this.options=e,this.#i5=e.sentinelRootNodes}async updateSentinelRootNodes(){for(let e of this.#i5){let t=s.default.create({...this.options.sentinelClientOptions,socket:{...this.options.sentinelClientOptions?.socket,host:e.host,port:e.port,reconnectStrategy:!1},modules:p.default}).on("error",e=>this.emit(`updateSentinelRootNodes: ${e}`));try{await t.connect()}catch{t.isOpen&&t.destroy();continue}try{let r=await t.sentinel.sentinelSentinels(this.options.name);this.#i5=[e].concat((0,u.createNodeList)(r));return}finally{t.destroy()}}throw Error("Couldn't connect to any sentinel node")}async getMasterNode(){let e=!1;for(let t of this.#i5){let r=s.default.create({...this.options.sentinelClientOptions,socket:{...this.options.sentinelClientOptions?.socket,host:t.host,port:t.port,reconnectStrategy:!1},modules:p.default}).on("error",e=>this.emit(`getMasterNode: ${e}`));try{await r.connect()}catch{r.isOpen&&r.destroy();continue}e=!0;try{let e=await r.sentinel.sentinelMaster(this.options.name),t=(0,u.parseNode)(e);if(void 0===t)continue;return t}finally{r.destroy()}}if(e)throw Error("Master Node Not Enumerated");throw Error("couldn't connect to any sentinels")}async getMasterClient(){let e=await this.getMasterNode();return s.default.create({...this.options.nodeClientOptions,socket:{...this.options.nodeClientOptions?.socket,host:e.host,port:e.port}})}async getReplicaNodes(){let e=!1;for(let t of this.#i5){let r=s.default.create({...this.options.sentinelClientOptions,socket:{...this.options.sentinelClientOptions?.socket,host:t.host,port:t.port,reconnectStrategy:!1},modules:p.default}).on("error",e=>this.emit(`getReplicaNodes: ${e}`));try{await r.connect()}catch{r.isOpen&&r.destroy();continue}e=!0;try{let e=await r.sentinel.sentinelReplicas(this.options.name),t=(0,u.createNodeList)(e);if(0==t.length)continue;return t}finally{r.destroy()}}if(e)throw Error("No Replicas Nodes Enumerated");throw Error("couldn't connect to any sentinels")}async getReplicaClient(){let e=await this.getReplicaNodes();if(0==e.length)throw Error("no available replicas");return this.#nf++,this.#nf>=e.length&&(this.#nf=0),s.default.create({...this.options.nodeClientOptions,socket:{...this.options.nodeClientOptions?.socket,host:e[this.#nf].host,port:e[this.#nf].port}})}}r.RedisSentinelFactory=_},98989,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.BasicPooledClientSideCache=r.BasicClientSideCache=r.REDIS_FLUSH_MODES=r.COMMAND_LIST_FILTER_BY=r.CLUSTER_SLOT_STATES=r.FAILOVER_MODES=r.CLIENT_KILL_FILTERS=r.GEO_REPLY_WITH=r.createSentinel=r.createCluster=r.createClientPool=r.createClient=r.defineScript=r.VerbatimString=r.RESP_TYPES=void 0;var a=e.r(79121);Object.defineProperty(r,"RESP_TYPES",{enumerable:!0,get:function(){return a.RESP_TYPES}});var o=e.r(42836);Object.defineProperty(r,"VerbatimString",{enumerable:!0,get:function(){return o.VerbatimString}});var u=e.r(49638);Object.defineProperty(r,"defineScript",{enumerable:!0,get:function(){return u.defineScript}}),n(e.r(28307),r),r.createClient=s(e.r(73643)).default.create,r.createClientPool=e.r(73533).RedisClientPool.create,r.createCluster=s(e.r(97940)).default.create,r.createSentinel=s(e.r(92994)).default.create;var l=e.r(88462);Object.defineProperty(r,"GEO_REPLY_WITH",{enumerable:!0,get:function(){return l.GEO_REPLY_WITH}});var d=e.r(8495);Object.defineProperty(r,"CLIENT_KILL_FILTERS",{enumerable:!0,get:function(){return d.CLIENT_KILL_FILTERS}}),Object.defineProperty(r,"FAILOVER_MODES",{enumerable:!0,get:function(){return d.FAILOVER_MODES}}),Object.defineProperty(r,"CLUSTER_SLOT_STATES",{enumerable:!0,get:function(){return d.CLUSTER_SLOT_STATES}}),Object.defineProperty(r,"COMMAND_LIST_FILTER_BY",{enumerable:!0,get:function(){return d.COMMAND_LIST_FILTER_BY}}),Object.defineProperty(r,"REDIS_FLUSH_MODES",{enumerable:!0,get:function(){return d.REDIS_FLUSH_MODES}});var c=e.r(20666);Object.defineProperty(r,"BasicClientSideCache",{enumerable:!0,get:function(){return c.BasicClientSideCache}}),Object.defineProperty(r,"BasicPooledClientSideCache",{enumerable:!0,get:function(){return c.BasicPooledClientSideCache}})},18231,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("BF.ADD"),e.pushKey(t),e.push(r)},transformReply:e.r(52135).transformBooleanReply}},59331,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("BF.CARD"),e.pushKey(t)},transformReply:void 0}},77890,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("BF.EXISTS"),e.pushKey(t),e.push(r)},transformReply:e.r(52135).transformBooleanReply}},62665,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.transformInfoV2Reply=void 0;let i=e.r(98989);r.transformInfoV2Reply=function(e,t){switch(t?t[i.RESP_TYPES.MAP]:void 0){case Array:return e;case Map:{let t=new Map;for(let r=0;r<e.length;r+=2)t.set(e[r].toString(),e[r+1]);return t}default:{let t=Object.create(null);for(let r=0;r<e.length;r+=2)t[e[r].toString()]=e[r+1];return t}}}},97193,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(62665);r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("BF.INFO"),e.pushKey(t)},transformReply:{2:(e,t,r)=>(0,i.transformInfoV2Reply)(e,r),3:void 0}}},95623,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("BF.INSERT"),e.pushKey(t),i?.CAPACITY!==void 0&&e.push("CAPACITY",i.CAPACITY.toString()),i?.ERROR!==void 0&&e.push("ERROR",i.ERROR.toString()),i?.EXPANSION!==void 0&&e.push("EXPANSION",i.EXPANSION.toString()),i?.NOCREATE&&e.push("NOCREATE"),i?.NONSCALING&&e.push("NONSCALING"),e.push("ITEMS"),e.pushVariadic(r)},transformReply:e.r(52135).transformBooleanArrayReply}},83010,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("BF.LOADCHUNK"),e.pushKey(t),e.push(r.toString(),i)},transformReply:void 0}},1529,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("BF.MADD"),e.pushKey(t),e.pushVariadic(r)},transformReply:e.r(52135).transformBooleanArrayReply}},1772,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("BF.MEXISTS"),e.pushKey(t),e.pushVariadic(r)},transformReply:e.r(52135).transformBooleanArrayReply}},5560,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,i,n){e.push("BF.RESERVE"),e.pushKey(t),e.push(r.toString(),i.toString()),n?.EXPANSION&&e.push("EXPANSION",n.EXPANSION.toString()),n?.NONSCALING&&e.push("NONSCALING")},transformReply:void 0}},88456,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("BF.SCANDUMP"),e.pushKey(t),e.push(r.toString())},transformReply:e=>({iterator:e[0],chunk:e[1]})}},36813,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(18231)),o=s(e.r(59331)),u=s(e.r(77890)),l=s(e.r(97193)),d=s(e.r(95623)),c=s(e.r(83010)),p=s(e.r(1529)),f=s(e.r(1772)),h=s(e.r(5560)),m=s(e.r(88456));n(e.r(62665),r),r.default={ADD:a.default,add:a.default,CARD:o.default,card:o.default,EXISTS:u.default,exists:u.default,INFO:l.default,info:l.default,INSERT:d.default,insert:d.default,LOADCHUNK:c.default,loadChunk:c.default,MADD:p.default,mAdd:p.default,MEXISTS:f.default,mExists:f.default,RESERVE:h.default,reserve:h.default,SCANDUMP:m.default,scanDump:m.default}},22405,(e,t,r)=>{"use strict";function i(e,{item:t,incrementBy:r}){e.push(t,r.toString())}Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){if(e.push("CMS.INCRBY"),e.pushKey(t),Array.isArray(r))for(let t of r)i(e,t);else i(e,r)},transformReply:void 0}},76791,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(36813);r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("CMS.INFO"),e.pushKey(t)},transformReply:{2:(e,t,r)=>(0,i.transformInfoV2Reply)(e,r),3:void 0}}},55975,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("CMS.INITBYDIM"),e.pushKey(t),e.push(r.toString(),i.toString())},transformReply:void 0}},69348,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("CMS.INITBYPROB"),e.pushKey(t),e.push(r.toString(),i.toString())},transformReply:void 0}},12142,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){var i;if(e.push("CMS.MERGE"),e.pushKey(t),e.push(r.length.toString()),"string"==typeof(i=r)[0]||i[0]instanceof Buffer)e.pushVariadic(r);else{for(let t=0;t<r.length;t++)e.push(r[t].name);e.push("WEIGHTS");for(let t=0;t<r.length;t++)e.push(r[t].weight.toString())}},transformReply:void 0}},3969,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("CMS.QUERY"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},37506,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(22405)),s=i(e.r(76791)),a=i(e.r(55975)),o=i(e.r(69348)),u=i(e.r(12142)),l=i(e.r(3969));r.default={INCRBY:n.default,incrBy:n.default,INFO:s.default,info:s.default,INITBYDIM:a.default,initByDim:a.default,INITBYPROB:o.default,initByProb:o.default,MERGE:u.default,merge:u.default,QUERY:l.default,query:l.default}},61943,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("CF.ADD"),e.pushKey(t),e.push(r)},transformReply:e.r(52135).transformBooleanReply}},88714,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("CF.ADDNX"),e.pushKey(t),e.push(r)},transformReply:e.r(52135).transformBooleanReply}},52210,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("CF.COUNT"),e.pushKey(t),e.push(r)},transformReply:void 0}},41137,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("CF.DEL"),e.pushKey(t),e.push(r)},transformReply:e.r(52135).transformBooleanReply}},84768,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("CF.EXISTS"),e.pushKey(t),e.push(r)},transformReply:e.r(52135).transformBooleanReply}},74955,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(36813);r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("CF.INFO"),e.pushKey(t)},transformReply:{2:(e,t,r)=>(0,i.transformInfoV2Reply)(e,r),3:void 0}}},14293,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseCfInsertArguments=void 0;let i=e.r(52135);function n(e,t,r,i){e.pushKey(t),i?.CAPACITY!==void 0&&e.push("CAPACITY",i.CAPACITY.toString()),i?.NOCREATE&&e.push("NOCREATE"),e.push("ITEMS"),e.pushVariadic(r)}r.parseCfInsertArguments=n,r.default={IS_READ_ONLY:!1,parseCommand(...e){e[0].push("CF.INSERT"),n(...e)},transformReply:i.transformBooleanArrayReply}},8025,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(14293));r.default={IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand(...e){e[0].push("CF.INSERTNX"),(0,a.parseCfInsertArguments)(...e)},transformReply:a.default.transformReply}},16039,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("CF.LOADCHUNK"),e.pushKey(t),e.push(r.toString(),i)},transformReply:void 0}},47771,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("CF.RESERVE"),e.pushKey(t),e.push(r.toString()),i?.BUCKETSIZE!==void 0&&e.push("BUCKETSIZE",i.BUCKETSIZE.toString()),i?.MAXITERATIONS!==void 0&&e.push("MAXITERATIONS",i.MAXITERATIONS.toString()),i?.EXPANSION!==void 0&&e.push("EXPANSION",i.EXPANSION.toString())},transformReply:void 0}},35305,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("CF.SCANDUMP"),e.pushKey(t),e.push(r.toString())},transformReply:e=>({iterator:e[0],chunk:e[1]})}},45313,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(61943)),s=i(e.r(88714)),a=i(e.r(52210)),o=i(e.r(41137)),u=i(e.r(84768)),l=i(e.r(74955)),d=i(e.r(14293)),c=i(e.r(8025)),p=i(e.r(16039)),f=i(e.r(47771)),h=i(e.r(35305));r.default={ADD:n.default,add:n.default,ADDNX:s.default,addNX:s.default,COUNT:a.default,count:a.default,DEL:o.default,del:o.default,EXISTS:u.default,exists:u.default,INFO:l.default,info:l.default,INSERT:d.default,insert:d.default,INSERTNX:c.default,insertNX:c.default,LOADCHUNK:p.default,loadChunk:p.default,RESERVE:f.default,reserve:f.default,SCANDUMP:h.default,scanDump:h.default}},48847,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){for(let i of(e.push("TDIGEST.ADD"),e.pushKey(t),r))e.push(i.toString())},transformReply:void 0}},61976,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.transformByRankArguments=void 0;let i=e.r(52135);function n(e,t,r){for(let i of(e.pushKey(t),r))e.push(i.toString())}r.transformByRankArguments=n,r.default={IS_READ_ONLY:!0,parseCommand(...e){e[0].push("TDIGEST.BYRANK"),n(...e)},transformReply:i.transformDoubleArrayReply}},98823,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(61976));r.default={IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand(...e){e[0].push("TDIGEST.BYREVRANK"),(0,a.transformByRankArguments)(...e)},transformReply:a.default.transformReply}},10262,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){for(let i of(e.push("TDIGEST.CDF"),e.pushKey(t),r))e.push(i.toString())},transformReply:e.r(52135).transformDoubleArrayReply}},94928,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("TDIGEST.CREATE"),e.pushKey(t),r?.COMPRESSION!==void 0&&e.push("COMPRESSION",r.COMPRESSION.toString())},transformReply:void 0}},9060,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(36813);r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("TDIGEST.INFO"),e.pushKey(t)},transformReply:{2:(e,t,r)=>(0,i.transformInfoV2Reply)(e,r),3:void 0}}},76679,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("TDIGEST.MAX"),e.pushKey(t)},transformReply:e.r(52135).transformDoubleReply}},70062,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("TDIGEST.MERGE"),e.pushKey(t),e.pushKeysLength(r),i?.COMPRESSION!==void 0&&e.push("COMPRESSION",i.COMPRESSION.toString()),i?.OVERRIDE&&e.push("OVERRIDE")},transformReply:void 0}},34395,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("TDIGEST.MIN"),e.pushKey(t)},transformReply:e.r(52135).transformDoubleReply}},77466,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){for(let i of(e.push("TDIGEST.QUANTILE"),e.pushKey(t),r))e.push(i.toString())},transformReply:e.r(52135).transformDoubleArrayReply}},23070,(e,t,r)=>{"use strict";function i(e,t,r){for(let i of(e.pushKey(t),r))e.push(i.toString())}Object.defineProperty(r,"__esModule",{value:!0}),r.transformRankArguments=void 0,r.transformRankArguments=i,r.default={IS_READ_ONLY:!0,parseCommand(...e){e[0].push("TDIGEST.RANK"),i(...e)},transformReply:void 0}},80142,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("TDIGEST.RESET"),e.pushKey(t)},transformReply:void 0}},86464,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(23070));r.default={IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand(...e){e[0].push("TDIGEST.REVRANK"),(0,a.transformRankArguments)(...e)},transformReply:a.default.transformReply}},2161,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("TDIGEST.TRIMMED_MEAN"),e.pushKey(t),e.push(r.toString(),i.toString())},transformReply:e.r(52135).transformDoubleReply}},21200,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(48847)),s=i(e.r(61976)),a=i(e.r(98823)),o=i(e.r(10262)),u=i(e.r(94928)),l=i(e.r(9060)),d=i(e.r(76679)),c=i(e.r(70062)),p=i(e.r(34395)),f=i(e.r(77466)),h=i(e.r(23070)),m=i(e.r(80142)),y=i(e.r(86464)),g=i(e.r(2161));r.default={ADD:n.default,add:n.default,BYRANK:s.default,byRank:s.default,BYREVRANK:a.default,byRevRank:a.default,CDF:o.default,cdf:o.default,CREATE:u.default,create:u.default,INFO:l.default,info:l.default,MAX:d.default,max:d.default,MERGE:c.default,merge:c.default,MIN:p.default,min:p.default,QUANTILE:f.default,quantile:f.default,RANK:h.default,rank:h.default,RESET:m.default,reset:m.default,REVRANK:y.default,revRank:y.default,TRIMMED_MEAN:g.default,trimmedMean:g.default}},27620,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("TOPK.ADD"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},47630,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("TOPK.COUNT"),e.pushKey(t),e.pushVariadic(r)},transformReply:void 0}},70753,(e,t,r)=>{"use strict";function i(e,{item:t,incrementBy:r}){e.push(t,r.toString())}Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){if(e.push("TOPK.INCRBY"),e.pushKey(t),Array.isArray(r))for(let t of r)i(e,t);else i(e,r)},transformReply:void 0}},70156,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135),n=e.r(36813);r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("TOPK.INFO"),e.pushKey(t)},transformReply:{2:(e,t,r)=>(e[7]=i.transformDoubleReply[2](e[7],t,r),(0,n.transformInfoV2Reply)(e,r)),3:void 0}}},77939,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("TOPK.LIST"),e.pushKey(t),e.push("WITHCOUNT")},transformReply(e){let t=[];for(let r=0;r<e.length;r++)t.push({item:e[r],count:e[++r]});return t}}},2472,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("TOPK.LIST"),e.pushKey(t)},transformReply:void 0}},39152,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("TOPK.QUERY"),e.pushKey(t),e.pushVariadic(r)},transformReply:e.r(52135).transformBooleanArrayReply}},97125,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("TOPK.RESERVE"),e.pushKey(t),e.push(r.toString()),i&&e.push(i.width.toString(),i.depth.toString(),i.decay.toString())},transformReply:void 0}},84467,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(27620)),s=i(e.r(47630)),a=i(e.r(70753)),o=i(e.r(70156)),u=i(e.r(77939)),l=i(e.r(2472)),d=i(e.r(39152)),c=i(e.r(97125));r.default={ADD:n.default,add:n.default,COUNT:s.default,count:s.default,INCRBY:a.default,incrBy:a.default,INFO:o.default,info:o.default,LIST_WITHCOUNT:u.default,listWithCount:u.default,LIST:l.default,list:l.default,QUERY:d.default,query:d.default,RESERVE:c.default,reserve:c.default}},29067,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(36813)),s=i(e.r(37506)),a=i(e.r(45313)),o=i(e.r(21200)),u=i(e.r(84467));r.default={bf:n.default,cms:s.default,cf:a.default,tDigest:o.default,topK:u.default}},15486,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(29067);Object.defineProperty(r,"default",{enumerable:!0,get:function(){return i(n).default}})},70372,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n,...s){e.push("JSON.ARRAPPEND"),e.pushKey(t),e.push(r,(0,i.transformRedisJsonArgument)(n));for(let t=0;t<s.length;t++)e.push((0,i.transformRedisJsonArgument)(s[t]))},transformReply:void 0}},14308,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,n,s){e.push("JSON.ARRINDEX"),e.pushKey(t),e.push(r,(0,i.transformRedisJsonArgument)(n)),s?.range&&(e.push(s.range.start.toString()),void 0!==s.range.stop&&e.push(s.range.stop.toString()))},transformReply:void 0}},53679,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n,s,...a){e.push("JSON.ARRINSERT"),e.pushKey(t),e.push(r,n.toString(),(0,i.transformRedisJsonArgument)(s));for(let t=0;t<a.length;t++)e.push((0,i.transformRedisJsonArgument)(a[t]))},transformReply:void 0}},75828,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("JSON.ARRLEN"),e.pushKey(t),r?.path!==void 0&&e.push(r.path)},transformReply:void 0}},17110,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("JSON.ARRPOP"),e.pushKey(t),r&&(e.push(r.path),void 0!==r.index&&e.push(r.index.toString()))},transformReply:e=>(0,i.isArrayReply)(e)?e.map(e=>(0,i.transformRedisJsonNullReply)(e)):(0,i.transformRedisJsonNullReply)(e)}},76306,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i,n){e.push("JSON.ARRTRIM"),e.pushKey(t),e.push(r,i.toString(),n.toString())},transformReply:void 0}},70129,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("JSON.CLEAR"),e.pushKey(t),r?.path!==void 0&&e.push(r.path)},transformReply:void 0}},39466,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("JSON.DEBUG","MEMORY"),e.pushKey(t),r?.path!==void 0&&e.push(r.path)},transformReply:void 0}},37962,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("JSON.DEL"),e.pushKey(t),r?.path!==void 0&&e.push(r.path)},transformReply:void 0}},54198,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("JSON.FORGET"),e.pushKey(t),r?.path!==void 0&&e.push(r.path)},transformReply:void 0}},60652,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("JSON.GET"),e.pushKey(t),r?.path!==void 0&&e.pushVariadic(r.path)},transformReply:e.r(52135).transformRedisJsonNullReply}},39159,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n){e.push("JSON.MERGE"),e.pushKey(t),e.push(r,(0,i.transformRedisJsonArgument)(n))},transformReply:void 0}},44210,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("JSON.MGET"),e.pushKeys(t),e.push(r)},transformReply:e=>e.map(e=>(0,i.transformRedisJsonNullReply)(e))}},31346,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("JSON.MSET");for(let r=0;r<t.length;r++)e.pushKey(t[r].key),e.push(t[r].path,(0,i.transformRedisJsonArgument)(t[r].value))},transformReply:void 0}},80863,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("JSON.NUMINCRBY"),e.pushKey(t),e.push(r,i.toString())},transformReply:{2:e=>JSON.parse(e.toString()),3:void 0}}},35969,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){e.push("JSON.NUMMULTBY"),e.pushKey(t),e.push(r,i.toString())},transformReply:i(e.r(80863)).default.transformReply}},91156,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("JSON.OBJKEYS"),e.pushKey(t),r?.path!==void 0&&e.push(r.path)},transformReply:void 0}},73335,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("JSON.OBJLEN"),e.pushKey(t),r?.path!==void 0&&e.push(r.path)},transformReply:void 0}},51821,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n,s){e.push("JSON.SET"),e.pushKey(t),e.push(r,(0,i.transformRedisJsonArgument)(n)),s?.condition?e.push(s?.condition):s?.NX?e.push("NX"):s?.XX&&e.push("XX")},transformReply:void 0}},32306,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n){e.push("JSON.STRAPPEND"),e.pushKey(t),n?.path!==void 0&&e.push(n.path),e.push((0,i.transformRedisJsonArgument)(r))},transformReply:void 0}},82239,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("JSON.STRLEN"),e.pushKey(t),r?.path&&e.push(r.path)},transformReply:void 0}},32938,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("JSON.TOGGLE"),e.pushKey(t),e.push(r)},transformReply:void 0}},18987,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("JSON.TYPE"),e.pushKey(t),r?.path&&e.push(r.path)},transformReply:{2:void 0,3:e=>e[0]}}},26949,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.transformRedisJsonNullReply=r.transformRedisJsonReply=r.transformRedisJsonArgument=void 0;let n=i(e.r(70372)),s=i(e.r(14308)),a=i(e.r(53679)),o=i(e.r(75828)),u=i(e.r(17110)),l=i(e.r(76306)),d=i(e.r(70129)),c=i(e.r(39466)),p=i(e.r(37962)),f=i(e.r(54198)),h=i(e.r(60652)),m=i(e.r(39159)),y=i(e.r(44210)),g=i(e.r(31346)),_=i(e.r(80863)),b=i(e.r(35969)),v=i(e.r(91156)),E=i(e.r(73335)),S=i(e.r(51821)),A=i(e.r(32306)),T=i(e.r(82239)),w=i(e.r(32938)),O=i(e.r(18987));var R=e.r(52135);Object.defineProperty(r,"transformRedisJsonArgument",{enumerable:!0,get:function(){return R.transformRedisJsonArgument}}),Object.defineProperty(r,"transformRedisJsonReply",{enumerable:!0,get:function(){return R.transformRedisJsonReply}}),Object.defineProperty(r,"transformRedisJsonNullReply",{enumerable:!0,get:function(){return R.transformRedisJsonNullReply}}),r.default={ARRAPPEND:n.default,arrAppend:n.default,ARRINDEX:s.default,arrIndex:s.default,ARRINSERT:a.default,arrInsert:a.default,ARRLEN:o.default,arrLen:o.default,ARRPOP:u.default,arrPop:u.default,ARRTRIM:l.default,arrTrim:l.default,CLEAR:d.default,clear:d.default,DEBUG_MEMORY:c.default,debugMemory:c.default,DEL:p.default,del:p.default,FORGET:f.default,forget:f.default,GET:h.default,get:h.default,MERGE:m.default,merge:m.default,MGET:y.default,mGet:y.default,MSET:g.default,mSet:g.default,NUMINCRBY:_.default,numIncrBy:_.default,NUMMULTBY:b.default,numMultBy:b.default,OBJKEYS:v.default,objKeys:v.default,OBJLEN:E.default,objLen:E.default,SET:S.default,set:S.default,STRAPPEND:A.default,strAppend:A.default,STRLEN:T.default,strLen:T.default,TOGGLE:w.default,toggle:w.default,TYPE:O.default,type:O.default}},19620,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e.r(26949);Object.defineProperty(r,"default",{enumerable:!0,get:function(){return i(n).default}})},13581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("FT._LIST")},transformReply:{2:void 0,3:void 0}}},87730,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.REDISEARCH_LANGUAGE=r.parseSchema=r.SCHEMA_GEO_SHAPE_COORD_SYSTEM=r.VAMANA_COMPRESSION_ALGORITHM=r.SCHEMA_VECTOR_FIELD_ALGORITHM=r.SCHEMA_TEXT_FIELD_PHONETIC=r.SCHEMA_FIELD_TYPE=void 0;let i=e.r(52135);function n(e,t){t.SORTABLE&&(e.push("SORTABLE"),"UNF"===t.SORTABLE&&e.push("UNF")),t.NOINDEX&&e.push("NOINDEX")}function s(e,t){for(let[i,s]of Object.entries(t)){if(e.push(i),"string"==typeof s){e.push(s);continue}switch(s.AS&&e.push("AS",s.AS),e.push(s.type),s.INDEXMISSING&&e.push("INDEXMISSING"),s.type){case r.SCHEMA_FIELD_TYPE.TEXT:s.NOSTEM&&e.push("NOSTEM"),void 0!==s.WEIGHT&&e.push("WEIGHT",s.WEIGHT.toString()),s.PHONETIC&&e.push("PHONETIC",s.PHONETIC),s.WITHSUFFIXTRIE&&e.push("WITHSUFFIXTRIE"),s.INDEXEMPTY&&e.push("INDEXEMPTY"),n(e,s);break;case r.SCHEMA_FIELD_TYPE.NUMERIC:case r.SCHEMA_FIELD_TYPE.GEO:n(e,s);break;case r.SCHEMA_FIELD_TYPE.TAG:s.SEPARATOR&&e.push("SEPARATOR",s.SEPARATOR),s.CASESENSITIVE&&e.push("CASESENSITIVE"),s.WITHSUFFIXTRIE&&e.push("WITHSUFFIXTRIE"),s.INDEXEMPTY&&e.push("INDEXEMPTY"),n(e,s);break;case r.SCHEMA_FIELD_TYPE.VECTOR:e.push(s.ALGORITHM);let t=[];switch(t.push("TYPE",s.TYPE,"DIM",s.DIM.toString(),"DISTANCE_METRIC",s.DISTANCE_METRIC),void 0!==s.INITIAL_CAP&&t.push("INITIAL_CAP",s.INITIAL_CAP.toString()),s.ALGORITHM){case r.SCHEMA_VECTOR_FIELD_ALGORITHM.FLAT:void 0!==s.BLOCK_SIZE&&t.push("BLOCK_SIZE",s.BLOCK_SIZE.toString());break;case r.SCHEMA_VECTOR_FIELD_ALGORITHM.HNSW:void 0!==s.M&&t.push("M",s.M.toString()),void 0!==s.EF_CONSTRUCTION&&t.push("EF_CONSTRUCTION",s.EF_CONSTRUCTION.toString()),void 0!==s.EF_RUNTIME&&t.push("EF_RUNTIME",s.EF_RUNTIME.toString());break;case r.SCHEMA_VECTOR_FIELD_ALGORITHM.VAMANA:s.COMPRESSION&&t.push("COMPRESSION",s.COMPRESSION),void 0!==s.CONSTRUCTION_WINDOW_SIZE&&t.push("CONSTRUCTION_WINDOW_SIZE",s.CONSTRUCTION_WINDOW_SIZE.toString()),void 0!==s.GRAPH_MAX_DEGREE&&t.push("GRAPH_MAX_DEGREE",s.GRAPH_MAX_DEGREE.toString()),void 0!==s.SEARCH_WINDOW_SIZE&&t.push("SEARCH_WINDOW_SIZE",s.SEARCH_WINDOW_SIZE.toString()),void 0!==s.EPSILON&&t.push("EPSILON",s.EPSILON.toString()),void 0!==s.TRAINING_THRESHOLD&&t.push("TRAINING_THRESHOLD",s.TRAINING_THRESHOLD.toString()),void 0!==s.REDUCE&&t.push("REDUCE",s.REDUCE.toString())}e.pushVariadicWithLength(t);break;case r.SCHEMA_FIELD_TYPE.GEOSHAPE:void 0!==s.COORD_SYSTEM&&e.push("COORD_SYSTEM",s.COORD_SYSTEM)}}}r.SCHEMA_FIELD_TYPE={TEXT:"TEXT",NUMERIC:"NUMERIC",GEO:"GEO",TAG:"TAG",VECTOR:"VECTOR",GEOSHAPE:"GEOSHAPE"},r.SCHEMA_TEXT_FIELD_PHONETIC={DM_EN:"dm:en",DM_FR:"dm:fr",FM_PT:"dm:pt",DM_ES:"dm:es"},r.SCHEMA_VECTOR_FIELD_ALGORITHM={FLAT:"FLAT",HNSW:"HNSW",VAMANA:"SVS-VAMANA"},r.VAMANA_COMPRESSION_ALGORITHM={LVQ4:"LVQ4",LVQ8:"LVQ8",LVQ4x4:"LVQ4x4",LVQ4x8:"LVQ4x8",LeanVec4x8:"LeanVec4x8",LeanVec8x8:"LeanVec8x8"},r.SCHEMA_GEO_SHAPE_COORD_SYSTEM={SPHERICAL:"SPHERICAL",FLAT:"FLAT"},r.parseSchema=s,r.REDISEARCH_LANGUAGE={ARABIC:"Arabic",BASQUE:"Basque",CATALANA:"Catalan",DANISH:"Danish",DUTCH:"Dutch",ENGLISH:"English",FINNISH:"Finnish",FRENCH:"French",GERMAN:"German",GREEK:"Greek",HUNGARIAN:"Hungarian",INDONESAIN:"Indonesian",IRISH:"Irish",ITALIAN:"Italian",LITHUANIAN:"Lithuanian",NEPALI:"Nepali",NORWEIGAN:"Norwegian",PORTUGUESE:"Portuguese",ROMANIAN:"Romanian",RUSSIAN:"Russian",SPANISH:"Spanish",SWEDISH:"Swedish",TAMIL:"Tamil",TURKISH:"Turkish",CHINESE:"Chinese"},r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,n){e.push("FT.CREATE",t),n?.ON&&e.push("ON",n.ON),(0,i.parseOptionalVariadicArgument)(e,"PREFIX",n?.PREFIX),n?.FILTER&&e.push("FILTER",n.FILTER),n?.LANGUAGE&&e.push("LANGUAGE",n.LANGUAGE),n?.LANGUAGE_FIELD&&e.push("LANGUAGE_FIELD",n.LANGUAGE_FIELD),n?.SCORE&&e.push("SCORE",n.SCORE.toString()),n?.SCORE_FIELD&&e.push("SCORE_FIELD",n.SCORE_FIELD),n?.MAXTEXTFIELDS&&e.push("MAXTEXTFIELDS"),n?.TEMPORARY&&e.push("TEMPORARY",n.TEMPORARY.toString()),n?.NOOFFSETS&&e.push("NOOFFSETS"),n?.NOHL&&e.push("NOHL"),n?.NOFIELDS&&e.push("NOFIELDS"),n?.NOFREQS&&e.push("NOFREQS"),n?.SKIPINITIALSCAN&&e.push("SKIPINITIALSCAN"),(0,i.parseOptionalVariadicArgument)(e,"STOPWORDS",n?.STOPWORDS),e.push("SCHEMA"),s(e,r)},transformReply:void 0}},33526,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(87730);r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("FT.ALTER",t,"SCHEMA","ADD"),(0,i.parseSchema)(e,r)},transformReply:void 0}},10026,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_DIALECT=void 0,r.DEFAULT_DIALECT="2"},13559,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseSearchOptions=r.parseParamsArgument=void 0;let i=e.r(52135),n=e.r(10026);function s(e,t){if(t){e.push("PARAMS");let r=[];for(let e in t){if(!Object.hasOwn(t,e))continue;let i=t[e];r.push(e,"number"==typeof i?i.toString():i)}e.pushVariadicWithLength(r)}}function a(e,t){t?.VERBATIM&&e.push("VERBATIM"),t?.NOSTOPWORDS&&e.push("NOSTOPWORDS"),(0,i.parseOptionalVariadicArgument)(e,"INKEYS",t?.INKEYS),(0,i.parseOptionalVariadicArgument)(e,"INFIELDS",t?.INFIELDS),(0,i.parseOptionalVariadicArgument)(e,"RETURN",t?.RETURN),t?.SUMMARIZE&&(e.push("SUMMARIZE"),"object"==typeof t.SUMMARIZE&&((0,i.parseOptionalVariadicArgument)(e,"FIELDS",t.SUMMARIZE.FIELDS),void 0!==t.SUMMARIZE.FRAGS&&e.push("FRAGS",t.SUMMARIZE.FRAGS.toString()),void 0!==t.SUMMARIZE.LEN&&e.push("LEN",t.SUMMARIZE.LEN.toString()),void 0!==t.SUMMARIZE.SEPARATOR&&e.push("SEPARATOR",t.SUMMARIZE.SEPARATOR))),t?.HIGHLIGHT&&(e.push("HIGHLIGHT"),"object"==typeof t.HIGHLIGHT&&((0,i.parseOptionalVariadicArgument)(e,"FIELDS",t.HIGHLIGHT.FIELDS),t.HIGHLIGHT.TAGS&&e.push("TAGS",t.HIGHLIGHT.TAGS.open,t.HIGHLIGHT.TAGS.close))),t?.SLOP!==void 0&&e.push("SLOP",t.SLOP.toString()),t?.TIMEOUT!==void 0&&e.push("TIMEOUT",t.TIMEOUT.toString()),t?.INORDER&&e.push("INORDER"),t?.LANGUAGE&&e.push("LANGUAGE",t.LANGUAGE),t?.EXPANDER&&e.push("EXPANDER",t.EXPANDER),t?.SCORER&&e.push("SCORER",t.SCORER),t?.SORTBY&&(e.push("SORTBY"),"string"==typeof t.SORTBY||t.SORTBY instanceof Buffer?e.push(t.SORTBY):(e.push(t.SORTBY.BY),t.SORTBY.DIRECTION&&e.push(t.SORTBY.DIRECTION))),t?.LIMIT&&e.push("LIMIT",t.LIMIT.from.toString(),t.LIMIT.size.toString()),s(e,t?.PARAMS),t?.DIALECT?e.push("DIALECT",t.DIALECT.toString()):e.push("DIALECT",n.DEFAULT_DIALECT)}r.parseParamsArgument=s,r.parseSearchOptions=a,r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("FT.SEARCH",t,r),a(e,i)},transformReply:{2:e=>{let t=e.length>2&&!Array.isArray(e[2]),r=[],i=1;for(;i<e.length;)r.push({id:e[i++],value:t?Object.create(null):function(e){let t=Object.create(null);if(!e)return t;let r=0;for(;r<e.length;){let i=e[r++],n=e[r++];if("$"===i)try{Object.assign(t,JSON.parse(n));continue}catch{}t[i]=n}return t}(e[i++])});return{total:e[0],documents:r}},3:void 0},unstableResp3:!0}},62862,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseAggregateOptions=r.FT_AGGREGATE_GROUP_BY_REDUCERS=r.FT_AGGREGATE_STEPS=void 0;let i=e.r(13559),n=e.r(52135),s=e.r(10026);function a(e,t){if(t?.VERBATIM&&e.push("VERBATIM"),t?.ADDSCORES&&e.push("ADDSCORES"),t?.LOAD){let r=[];if(Array.isArray(t.LOAD))for(let e of t.LOAD)o(r,e);else o(r,t.LOAD);e.push("LOAD"),e.pushVariadicWithLength(r)}if(t?.TIMEOUT!==void 0&&e.push("TIMEOUT",t.TIMEOUT.toString()),t?.STEPS)for(let i of t.STEPS)switch(e.push(i.type),i.type){case r.FT_AGGREGATE_STEPS.GROUPBY:if(i.properties?e.pushVariadicWithLength(i.properties):e.push("0"),Array.isArray(i.REDUCE))for(let t of i.REDUCE)u(e,t);else u(e,i.REDUCE);break;case r.FT_AGGREGATE_STEPS.SORTBY:let t=[];if(Array.isArray(i.BY))for(let e of i.BY)l(t,e);else l(t,i.BY);i.MAX&&t.push("MAX",i.MAX.toString()),e.pushVariadicWithLength(t);break;case r.FT_AGGREGATE_STEPS.APPLY:e.push(i.expression,"AS",i.AS);break;case r.FT_AGGREGATE_STEPS.LIMIT:e.push(i.from.toString(),i.size.toString());break;case r.FT_AGGREGATE_STEPS.FILTER:e.push(i.expression)}(0,i.parseParamsArgument)(e,t?.PARAMS),t?.DIALECT?e.push("DIALECT",t.DIALECT.toString()):e.push("DIALECT",s.DEFAULT_DIALECT)}function o(e,t){"string"==typeof t||t instanceof Buffer?e.push(t):(e.push(t.identifier),t.AS&&e.push("AS",t.AS))}function u(e,t){switch(e.push("REDUCE",t.type),t.type){case r.FT_AGGREGATE_GROUP_BY_REDUCERS.COUNT:e.push("0");break;case r.FT_AGGREGATE_GROUP_BY_REDUCERS.COUNT_DISTINCT:case r.FT_AGGREGATE_GROUP_BY_REDUCERS.COUNT_DISTINCTISH:case r.FT_AGGREGATE_GROUP_BY_REDUCERS.SUM:case r.FT_AGGREGATE_GROUP_BY_REDUCERS.MIN:case r.FT_AGGREGATE_GROUP_BY_REDUCERS.MAX:case r.FT_AGGREGATE_GROUP_BY_REDUCERS.AVG:case r.FT_AGGREGATE_GROUP_BY_REDUCERS.STDDEV:case r.FT_AGGREGATE_GROUP_BY_REDUCERS.TOLIST:e.push("1",t.property);break;case r.FT_AGGREGATE_GROUP_BY_REDUCERS.QUANTILE:e.push("2",t.property,t.quantile.toString());break;case r.FT_AGGREGATE_GROUP_BY_REDUCERS.FIRST_VALUE:{let r=[t.property];t.BY&&(r.push("BY"),"string"==typeof t.BY||t.BY instanceof Buffer?r.push(t.BY):(r.push(t.BY.property),t.BY.direction&&r.push(t.BY.direction))),e.pushVariadicWithLength(r);break}case r.FT_AGGREGATE_GROUP_BY_REDUCERS.RANDOM_SAMPLE:e.push("2",t.property,t.sampleSize.toString())}t.AS&&e.push("AS",t.AS)}function l(e,t){"string"==typeof t||t instanceof Buffer?e.push(t):(e.push(t.BY),t.DIRECTION&&e.push(t.DIRECTION))}r.FT_AGGREGATE_STEPS={GROUPBY:"GROUPBY",SORTBY:"SORTBY",APPLY:"APPLY",LIMIT:"LIMIT",FILTER:"FILTER"},r.FT_AGGREGATE_GROUP_BY_REDUCERS={COUNT:"COUNT",COUNT_DISTINCT:"COUNT_DISTINCT",COUNT_DISTINCTISH:"COUNT_DISTINCTISH",SUM:"SUM",MIN:"MIN",MAX:"MAX",AVG:"AVG",STDDEV:"STDDEV",QUANTILE:"QUANTILE",TOLIST:"TOLIST",FIRST_VALUE:"FIRST_VALUE",RANDOM_SAMPLE:"RANDOM_SAMPLE"},r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand:(e,t,r,i)=>(e.push("FT.AGGREGATE",t,r),a(e,i)),transformReply:{2:(e,t,r)=>{let i=[];for(let s=1;s<e.length;s++)i.push((0,n.transformTuplesReply)(e[s],t,r));return{total:Number(e[0]),results:i}},3:void 0},unstableResp3:!0},r.parseAggregateOptions=a},69711,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(62862));r.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(e,t,r,i){n.default.parseCommand(e,t,r,i),e.push("WITHCURSOR"),i?.COUNT!==void 0&&e.push("COUNT",i.COUNT.toString()),i?.MAXIDLE!==void 0&&e.push("MAXIDLE",i.MAXIDLE.toString())},transformReply:{2:e=>({...n.default.transformReply[2](e[0]),cursor:e[1]}),3:void 0},unstableResp3:!0}},2743,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("FT.ALIASADD",t,r)},transformReply:void 0}},94537,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("FT.ALIASDEL",t)},transformReply:void 0}},9083,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("FT.ALIASUPDATE",t,r)},transformReply:void 0}},66112,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("FT.CONFIG","GET",t)},transformReply(e){let t=Object.create(null);for(let r of e){let[e,i]=r;t[e.toString()]=i}return t}}},597,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("FT.CONFIG","SET",t,r)},transformReply:void 0}},48591,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("FT.CURSOR","DEL",t,r.toString())},transformReply:void 0}},8149,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("FT.CURSOR","READ",t,r.toString()),i?.COUNT!==void 0&&e.push("COUNT",i.COUNT.toString())},transformReply:i(e.r(69711)).default.transformReply,unstableResp3:!0}},6858,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("FT.DICTADD",t),e.pushVariadic(r)},transformReply:void 0}},72625,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("FT.DICTDEL",t),e.pushVariadic(r)},transformReply:void 0}},89201,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("FT.DICTDUMP",t)},transformReply:{2:void 0,3:void 0}}},8875,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("FT.DROPINDEX",t),r?.DD&&e.push("DD")},transformReply:{2:void 0,3:void 0}}},90914,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(13559),n=e.r(10026);r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,s){e.push("FT.EXPLAIN",t,r),(0,i.parseParamsArgument)(e,s?.PARAMS),s?.DIALECT?e.push("DIALECT",s.DIALECT.toString()):e.push("DIALECT",n.DEFAULT_DIALECT)},transformReply:void 0}},89337,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(10026);r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,n){e.push("FT.EXPLAINCLI",t,r),n?.DIALECT?e.push("DIALECT",n.DIALECT.toString()):e.push("DIALECT",i.DEFAULT_DIALECT)},transformReply:void 0}},62928,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("FT.INFO",t)},transformReply:{2:function(e,t,r){let n=(0,i.createTransformTuplesReplyFunc)(t,r),s={};for(let t=0;t<e.length;t+=2){let a=e[t].toString();switch(a){case"index_name":case"index_options":case"num_docs":case"max_doc_id":case"num_terms":case"num_records":case"total_inverted_index_blocks":case"hash_indexing_failures":case"indexing":case"number_of_uses":case"cleaning":case"stopwords_list":s[a]=e[t+1];break;case"inverted_sz_mb":case"vector_index_sz_mb":case"offset_vectors_sz_mb":case"doc_table_size_mb":case"sortable_values_size_mb":case"key_table_size_mb":case"text_overhead_sz_mb":case"tag_overhead_sz_mb":case"total_index_memory_sz_mb":case"geoshapes_sz_mb":case"records_per_doc_avg":case"bytes_per_record_avg":case"offsets_per_term_avg":case"offset_bits_per_record_avg":case"total_indexing_time":case"percent_indexed":s[a]=i.transformDoubleReply[2](e[t+1],void 0,r);break;case"index_definition":s[a]=n(e[t+1]);break;case"attributes":s[a]=e[t+1].map(e=>n(e));break;case"gc_stats":{let n={},o=e[t+1];for(let e=0;e<o.length;e+=2){let t=o[e].toString();switch(t){case"bytes_collected":case"total_ms_run":case"total_cycles":case"average_cycle_time_ms":case"last_run_time_ms":case"gc_numeric_trees_missed":case"gc_blocks_denied":n[t]=i.transformDoubleReply[2](o[e+1],void 0,r)}}s[a]=n;break}case"cursor_stats":{let r={},i=e[t+1];for(let e=0;e<i.length;e+=2){let t=i[e].toString();switch(t){case"global_idle":case"global_total":case"index_capacity":case"index_total":r[t]=i[e+1]}}s[a]=r}}}return s},3:void 0},unstableResp3:!0}},3970,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(13559));r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("FT.PROFILE",t,"SEARCH"),i?.LIMITED&&e.push("LIMITED"),e.push("QUERY",r),(0,a.parseSearchOptions)(e,i)},transformReply:{2:e=>({results:a.default.transformReply[2](e[0]),profile:e[1]}),3:e=>e},unstableResp3:!0}},847,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(62862));r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("FT.PROFILE",t,"AGGREGATE"),i?.LIMITED&&e.push("LIMITED"),e.push("QUERY",r),(0,a.parseAggregateOptions)(e,i)},transformReply:{2:e=>({results:a.default.transformReply[2](e[0]),profile:e[1]}),3:e=>e},unstableResp3:!0}},56790,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(13559));r.default={NOT_KEYED_COMMAND:n.default.NOT_KEYED_COMMAND,IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(...e){n.default.parseCommand(...e),e[0].push("NOCONTENT")},transformReply:{2:e=>({total:e[0],documents:e.slice(1)}),3:void 0},unstableResp3:!0}},9841,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(10026);function n(e,{mode:t,dictionary:r}){e.push("TERMS",t,r)}r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,s){if(e.push("FT.SPELLCHECK",t,r),s?.DISTANCE&&e.push("DISTANCE",s.DISTANCE.toString()),s?.TERMS)if(Array.isArray(s.TERMS))for(let t of s.TERMS)n(e,t);else n(e,s.TERMS);s?.DIALECT?e.push("DIALECT",s.DIALECT.toString()):e.push("DIALECT",i.DEFAULT_DIALECT)},transformReply:{2:e=>e.map(([,e,t])=>({term:e,suggestions:t.map(([e,t])=>({score:Number(e),suggestion:t}))})),3:void 0},unstableResp3:!0}},6843,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,i,n){e.push("FT.SUGADD"),e.pushKey(t),e.push(r,i.toString()),n?.INCR&&e.push("INCR"),n?.PAYLOAD&&e.push("PAYLOAD",n.PAYLOAD)},transformReply:void 0}},87527,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("FT.SUGDEL"),e.pushKey(t),e.push(r)},transformReply:void 0}},12108,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,i){e.push("FT.SUGGET"),e.pushKey(t),e.push(r),i?.FUZZY&&e.push("FUZZY"),i?.MAX!==void 0&&e.push("MAX",i.MAX.toString())},transformReply:void 0}},90566,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(52135),s=i(e.r(12108));r.default={IS_READ_ONLY:s.default.IS_READ_ONLY,parseCommand(...e){s.default.parseCommand(...e),e[0].push("WITHPAYLOADS")},transformReply(e){if((0,n.isNullReply)(e))return null;let t=Array(e.length/2),r=0,i=0;for(;r<e.length;)t[i++]={suggestion:e[r++],payload:e[r++]};return t}}},85849,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(52135),s=i(e.r(12108));r.default={IS_READ_ONLY:s.default.IS_READ_ONLY,parseCommand(...e){s.default.parseCommand(...e),e[0].push("WITHSCORES","WITHPAYLOADS")},transformReply:{2:(e,t,r)=>{if((0,n.isNullReply)(e))return null;let i=Array(e.length/3),s=0,a=0;for(;s<e.length;)i[a++]={suggestion:e[s++],score:n.transformDoubleReply[2](e[s++],t,r),payload:e[s++]};return i},3:e=>{if((0,n.isNullReply)(e))return null;let t=Array(e.length/3),r=0,i=0;for(;r<e.length;)t[i++]={suggestion:e[r++],score:e[r++],payload:e[r++]};return t}}}},23394,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(52135),s=i(e.r(12108));r.default={IS_READ_ONLY:s.default.IS_READ_ONLY,parseCommand(...e){s.default.parseCommand(...e),e[0].push("WITHSCORES")},transformReply:{2:(e,t,r)=>{if((0,n.isNullReply)(e))return null;let i=Array(e.length/2),s=0,a=0;for(;s<e.length;)i[a++]={suggestion:e[s++],score:n.transformDoubleReply[2](e[s++],t,r)};return i},3:e=>{if((0,n.isNullReply)(e))return null;let t=Array(e.length/2),r=0,i=0;for(;r<e.length;)t[i++]={suggestion:e[r++],score:e[r++]};return t}}}},87109,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("FT.SUGLEN",t)},transformReply:void 0}},13736,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("FT.SYNDUMP",t)},transformReply:{2:e=>{let t={},r=0;for(;r<e.length;){let i=e[r++].toString(),n=e[r++];t[i]=n}return t},3:void 0}}},90998,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r,i,n){e.push("FT.SYNUPDATE",t,r),n?.SKIPINITIALSCAN&&e.push("SKIPINITIALSCAN"),e.pushVariadic(i)},transformReply:void 0}},42064,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("FT.TAGVALS",t,r)},transformReply:{2:void 0,3:void 0}}},86525,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(13581)),s=i(e.r(33526)),a=i(e.r(69711)),o=i(e.r(62862)),u=i(e.r(2743)),l=i(e.r(94537)),d=i(e.r(9083)),c=i(e.r(66112)),p=i(e.r(597)),f=i(e.r(87730)),h=i(e.r(48591)),m=i(e.r(8149)),y=i(e.r(6858)),g=i(e.r(72625)),_=i(e.r(89201)),b=i(e.r(8875)),v=i(e.r(90914)),E=i(e.r(89337)),S=i(e.r(62928)),A=i(e.r(3970)),T=i(e.r(847)),w=i(e.r(56790)),O=i(e.r(13559)),R=i(e.r(9841)),I=i(e.r(6843)),C=i(e.r(87527)),N=i(e.r(90566)),P=i(e.r(85849)),D=i(e.r(23394)),x=i(e.r(12108)),L=i(e.r(87109)),k=i(e.r(13736)),M=i(e.r(90998)),$=i(e.r(42064));r.default={_LIST:n.default,_list:n.default,ALTER:s.default,alter:s.default,AGGREGATE_WITHCURSOR:a.default,aggregateWithCursor:a.default,AGGREGATE:o.default,aggregate:o.default,ALIASADD:u.default,aliasAdd:u.default,ALIASDEL:l.default,aliasDel:l.default,ALIASUPDATE:d.default,aliasUpdate:d.default,CONFIG_GET:c.default,configGet:c.default,CONFIG_SET:p.default,configSet:p.default,CREATE:f.default,create:f.default,CURSOR_DEL:h.default,cursorDel:h.default,CURSOR_READ:m.default,cursorRead:m.default,DICTADD:y.default,dictAdd:y.default,DICTDEL:g.default,dictDel:g.default,DICTDUMP:_.default,dictDump:_.default,DROPINDEX:b.default,dropIndex:b.default,EXPLAIN:v.default,explain:v.default,EXPLAINCLI:E.default,explainCli:E.default,INFO:S.default,info:S.default,PROFILESEARCH:A.default,profileSearch:A.default,PROFILEAGGREGATE:T.default,profileAggregate:T.default,SEARCH_NOCONTENT:w.default,searchNoContent:w.default,SEARCH:O.default,search:O.default,SPELLCHECK:R.default,spellCheck:R.default,SUGADD:I.default,sugAdd:I.default,SUGDEL:C.default,sugDel:C.default,SUGGET_WITHPAYLOADS:N.default,sugGetWithPayloads:N.default,SUGGET_WITHSCORES_WITHPAYLOADS:P.default,sugGetWithScoresWithPayloads:P.default,SUGGET_WITHSCORES:D.default,sugGetWithScores:D.default,SUGGET:x.default,sugGet:x.default,SUGLEN:L.default,sugLen:L.default,SYNDUMP:k.default,synDump:k.default,SYNUPDATE:M.default,synUpdate:M.default,TAGVALS:$.default,tagVals:$.default}},12038,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.FT_AGGREGATE_STEPS=r.FT_AGGREGATE_GROUP_BY_REDUCERS=r.SCHEMA_VECTOR_FIELD_ALGORITHM=r.SCHEMA_TEXT_FIELD_PHONETIC=r.SCHEMA_FIELD_TYPE=r.REDISEARCH_LANGUAGE=r.default=void 0;var n=e.r(86525);Object.defineProperty(r,"default",{enumerable:!0,get:function(){return i(n).default}});var s=e.r(87730);Object.defineProperty(r,"REDISEARCH_LANGUAGE",{enumerable:!0,get:function(){return s.REDISEARCH_LANGUAGE}}),Object.defineProperty(r,"SCHEMA_FIELD_TYPE",{enumerable:!0,get:function(){return s.SCHEMA_FIELD_TYPE}}),Object.defineProperty(r,"SCHEMA_TEXT_FIELD_PHONETIC",{enumerable:!0,get:function(){return s.SCHEMA_TEXT_FIELD_PHONETIC}}),Object.defineProperty(r,"SCHEMA_VECTOR_FIELD_ALGORITHM",{enumerable:!0,get:function(){return s.SCHEMA_VECTOR_FIELD_ALGORITHM}});var a=e.r(62862);Object.defineProperty(r,"FT_AGGREGATE_GROUP_BY_REDUCERS",{enumerable:!0,get:function(){return a.FT_AGGREGATE_GROUP_BY_REDUCERS}}),Object.defineProperty(r,"FT_AGGREGATE_STEPS",{enumerable:!0,get:function(){return a.FT_AGGREGATE_STEPS}})},54925,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.transformRESP2LabelsWithSources=r.transformRESP2Labels=r.parseSelectedLabelsArguments=r.resp3MapToValue=r.resp2MapToValue=r.transformSamplesReply=r.transformSampleReply=r.parseLabelsArgument=r.transformTimestampArgument=r.parseDuplicatePolicy=r.TIME_SERIES_DUPLICATE_POLICIES=r.parseChunkSizeArgument=r.parseEncodingArgument=r.TIME_SERIES_ENCODING=r.parseRetentionArgument=r.parseIgnoreArgument=void 0;let i=e.r(98989);r.parseIgnoreArgument=function(e,t){void 0!==t&&e.push("IGNORE",t.maxTimeDiff.toString(),t.maxValDiff.toString())},r.parseRetentionArgument=function(e,t){void 0!==t&&e.push("RETENTION",t.toString())},r.TIME_SERIES_ENCODING={COMPRESSED:"COMPRESSED",UNCOMPRESSED:"UNCOMPRESSED"},r.parseEncodingArgument=function(e,t){void 0!==t&&e.push("ENCODING",t)},r.parseChunkSizeArgument=function(e,t){void 0!==t&&e.push("CHUNK_SIZE",t.toString())},r.TIME_SERIES_DUPLICATE_POLICIES={BLOCK:"BLOCK",FIRST:"FIRST",LAST:"LAST",MIN:"MIN",MAX:"MAX",SUM:"SUM"},r.parseDuplicatePolicy=function(e,t){void 0!==t&&e.push("DUPLICATE_POLICY",t)},r.transformTimestampArgument=function(e){return"string"==typeof e?e:("number"==typeof e?e:e.getTime()).toString()},r.parseLabelsArgument=function(e,t){if(t)for(let[r,i]of(e.push("LABELS"),Object.entries(t)))e.push(r,i)},r.transformSampleReply={2(e){let[t,r]=e;return{timestamp:t,value:Number(r)}},3(e){let[t,r]=e;return{timestamp:t,value:r}}},r.transformSamplesReply={2:e=>e.map(e=>r.transformSampleReply[2](e)),3:e=>e.map(e=>r.transformSampleReply[3](e))},r.resp2MapToValue=function(e,t,r){switch(r?.[i.RESP_TYPES.MAP]){case Map:{let r=new Map;for(let i of e){let e=i[0];r.set(e.toString(),t(i))}return r}case Array:for(let r of e)r[1]=t(r);return e;default:{let r=Object.create(null);for(let i of e)r[i[0].toString()]=t(i);return r}}},r.resp3MapToValue=function(e,t){if(e instanceof Array)for(let r=1;r<e.length;r+=2)e[r]=t(e[r]);else if(e instanceof Map)for(let[r,i]of e.entries())e.set(r,t(i));else for(let[r,i]of Object.entries(e))e[r]=t(i);return e},r.parseSelectedLabelsArguments=function(e,t){e.push("SELECTED_LABELS"),e.pushVariadic(t)},r.transformRESP2Labels=function(e,t){switch(t?.[i.RESP_TYPES.MAP]){case Map:let r=new Map;for(let t of e){let[e,i]=t;r.set(e.toString(),i)}return r;case Array:return e.flat();default:let n=Object.create(null);for(let t of e){let[e,r]=t;n[e.toString()]=r}return n}},r.transformRESP2LabelsWithSources=function(e,t){let r,n=e.length-2;switch(t?.[i.RESP_TYPES.MAP]){case Map:let s=new Map;for(let t=0;t<n;t++){let[r,i]=e[t];s.set(r.toString(),i)}r=s;break;case Array:r=e.slice(0,n).flat();break;default:let a=Object.create(null);for(let t=0;t<n;t++){let[r,i]=e[t];a[r.toString()]=i}r=a}return{labels:r,sources:function(e){if("string"==typeof e)return e.split(",");let t=e.indexOf(",");if(-1===t)return[e];let r=[e.subarray(0,t)],i=t+1;for(;;){let t=e.indexOf(",",i);if(-1===t){r.push(e.subarray(i));break}let n=e.subarray(i,t);r.push(n),i=t+1}return r}(e[e.length-1][1])}}},66369,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(54925);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n,s){e.push("TS.ADD"),e.pushKey(t),e.push((0,i.transformTimestampArgument)(r),n.toString()),(0,i.parseRetentionArgument)(e,s?.RETENTION),(0,i.parseEncodingArgument)(e,s?.ENCODING),(0,i.parseChunkSizeArgument)(e,s?.CHUNK_SIZE),s?.ON_DUPLICATE&&e.push("ON_DUPLICATE",s.ON_DUPLICATE),(0,i.parseLabelsArgument)(e,s?.LABELS),(0,i.parseIgnoreArgument)(e,s?.IGNORE)},transformReply:void 0}},87457,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(54925);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("TS.ALTER"),e.pushKey(t),(0,i.parseRetentionArgument)(e,r?.RETENTION),(0,i.parseChunkSizeArgument)(e,r?.CHUNK_SIZE),(0,i.parseDuplicatePolicy)(e,r?.DUPLICATE_POLICY),(0,i.parseLabelsArgument)(e,r?.LABELS),(0,i.parseIgnoreArgument)(e,r?.IGNORE)},transformReply:void 0}},31412,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(54925);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("TS.CREATE"),e.pushKey(t),(0,i.parseRetentionArgument)(e,r?.RETENTION),(0,i.parseEncodingArgument)(e,r?.ENCODING),(0,i.parseChunkSizeArgument)(e,r?.CHUNK_SIZE),(0,i.parseDuplicatePolicy)(e,r?.DUPLICATE_POLICY),(0,i.parseLabelsArgument)(e,r?.LABELS),(0,i.parseIgnoreArgument)(e,r?.IGNORE)},transformReply:void 0}},22373,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TIME_SERIES_AGGREGATION_TYPE=void 0,r.TIME_SERIES_AGGREGATION_TYPE={AVG:"AVG",FIRST:"FIRST",LAST:"LAST",MIN:"MIN",MAX:"MAX",SUM:"SUM",RANGE:"RANGE",COUNT:"COUNT",STD_P:"STD.P",STD_S:"STD.S",VAR_P:"VAR.P",VAR_S:"VAR.S",TWA:"TWA"},r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i,n,s){e.push("TS.CREATERULE"),e.pushKeys([t,r]),e.push("AGGREGATION",i,n.toString()),void 0!==s&&e.push(s.toString())},transformReply:void 0}},96161,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIncrByArguments=void 0;let i=e.r(54925);function n(e,t,r,n){e.pushKey(t),e.push(r.toString()),n?.TIMESTAMP!==void 0&&n?.TIMESTAMP!==null&&e.push("TIMESTAMP",(0,i.transformTimestampArgument)(n.TIMESTAMP)),(0,i.parseRetentionArgument)(e,n?.RETENTION),n?.UNCOMPRESSED&&e.push("UNCOMPRESSED"),(0,i.parseChunkSizeArgument)(e,n?.CHUNK_SIZE),(0,i.parseLabelsArgument)(e,n?.LABELS),(0,i.parseIgnoreArgument)(e,n?.IGNORE)}r.parseIncrByArguments=n,r.default={IS_READ_ONLY:!1,parseCommand(...e){e[0].push("TS.INCRBY"),n(...e)},transformReply:void 0}},56448,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(96161));r.default={IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand(...e){e[0].push("TS.DECRBY"),(0,a.parseIncrByArguments)(...e)},transformReply:a.default.transformReply}},33288,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(54925);r.default={IS_READ_ONLY:!1,parseCommand(e,t,r,n){e.push("TS.DEL"),e.pushKey(t),e.push((0,i.transformTimestampArgument)(r),(0,i.transformTimestampArgument)(n))},transformReply:void 0}},47846,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!1,parseCommand(e,t,r){e.push("TS.DELETERULE"),e.pushKeys([t,r])},transformReply:void 0}},62024,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("TS.GET"),e.pushKey(t),r?.LATEST&&e.push("LATEST")},transformReply:{2:e=>0===e.length?null:{timestamp:e[0],value:Number(e[1])},3:e=>0===e.length?null:{timestamp:e[0],value:e[1]}}}},14991,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(52135);r.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("TS.INFO"),e.pushKey(t)},transformReply:{2:(e,t,r)=>{let n={};for(let t=0;t<e.length;t+=2){let s=e[t].toString();switch(s){case"totalSamples":case"memoryUsage":case"firstTimestamp":case"lastTimestamp":case"retentionTime":case"chunkCount":case"chunkSize":case"chunkType":case"duplicatePolicy":case"sourceKey":case"ignoreMaxTimeDiff":n[s]=e[t+1];break;case"labels":n[s]=e[t+1].map(([e,t])=>({name:e,value:t}));break;case"rules":n[s]=e[t+1].map(([e,t,r])=>({key:e,timeBucket:t,aggregationType:r}));break;case"ignoreMaxValDiff":n[s]=i.transformDoubleReply[2](e[27],void 0,r)}}return n},3:void 0},unstableResp3:!0}},73003,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let n=i(e.r(14991));r.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(e,t){n.default.parseCommand(e,t),e.push("DEBUG")},transformReply:{2:(e,t,r)=>{let i=n.default.transformReply[2](e,t,r);for(let t=0;t<e.length;t+=2){let r=e[t].toString();switch(r){case"keySelfName":i[r]=e[t+1];break;case"Chunks":i.chunks=e[t+1].map(e=>({startTimestamp:e[1],endTimestamp:e[3],samples:e[5],size:e[7],bytesPerSample:e[9]}))}}return i},3:void 0},unstableResp3:!0}},96526,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(54925);r.default={IS_READ_ONLY:!1,parseCommand(e,t){for(let{key:r,timestamp:n,value:s}of(e.push("TS.MADD"),t))e.pushKey(r),e.push((0,i.transformTimestampArgument)(n),s.toString())},transformReply:void 0}},55348,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseFilterArgument=r.parseLatestArgument=void 0;let i=e.r(54925);function n(e,t){t&&e.push("LATEST")}function s(e,t){e.push("FILTER"),e.pushVariadic(t)}r.parseLatestArgument=n,r.parseFilterArgument=s,r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("TS.MGET"),n(e,r?.LATEST),s(e,t)},transformReply:{2:(e,t,r)=>(0,i.resp2MapToValue)(e,([,,e])=>({sample:i.transformSampleReply[2](e)}),r),3:e=>(0,i.resp3MapToValue)(e,([,e])=>({sample:i.transformSampleReply[3](e)}))}}},26392,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createTransformMGetLabelsReply=void 0;let i=e.r(55348),n=e.r(54925);function s(){return{2:(e,t,r)=>(0,n.resp2MapToValue)(e,([,e,t])=>({labels:(0,n.transformRESP2Labels)(e),sample:n.transformSampleReply[2](t)}),r),3:e=>(0,n.resp3MapToValue)(e,([e,t])=>({labels:e,sample:n.transformSampleReply[3](t)}))}}r.createTransformMGetLabelsReply=s,r.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("TS.MGET"),(0,i.parseLatestArgument)(e,r?.LATEST),e.push("WITHLABELS"),(0,i.parseFilterArgument)(e,t)},transformReply:s()}},37814,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(55348),n=e.r(54925);r.default={IS_READ_ONLY:!0,parseCommand(e,t,r,s){e.push("TS.MGET"),(0,i.parseLatestArgument)(e,s?.LATEST),(0,n.parseSelectedLabelsArguments)(e,r),(0,i.parseFilterArgument)(e,t)},transformReply:(0,e.r(26392).createTransformMGetLabelsReply)()}},96929,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.transformRangeArguments=r.parseRangeArguments=r.TIME_SERIES_BUCKET_TIMESTAMP=void 0;let i=e.r(54925);function n(e,t,r,n){if(e.push((0,i.transformTimestampArgument)(t),(0,i.transformTimestampArgument)(r)),n?.LATEST&&e.push("LATEST"),n?.FILTER_BY_TS)for(let t of(e.push("FILTER_BY_TS"),n.FILTER_BY_TS))e.push((0,i.transformTimestampArgument)(t));n?.FILTER_BY_VALUE&&e.push("FILTER_BY_VALUE",n.FILTER_BY_VALUE.min.toString(),n.FILTER_BY_VALUE.max.toString()),n?.COUNT!==void 0&&e.push("COUNT",n.COUNT.toString()),n?.AGGREGATION&&(n?.ALIGN!==void 0&&e.push("ALIGN",(0,i.transformTimestampArgument)(n.ALIGN)),e.push("AGGREGATION",n.AGGREGATION.type,(0,i.transformTimestampArgument)(n.AGGREGATION.timeBucket)),n.AGGREGATION.BUCKETTIMESTAMP&&e.push("BUCKETTIMESTAMP",n.AGGREGATION.BUCKETTIMESTAMP),n.AGGREGATION.EMPTY&&e.push("EMPTY"))}function s(e,t,r,i,s){e.pushKey(t),n(e,r,i,s)}r.TIME_SERIES_BUCKET_TIMESTAMP={LOW:"-",MIDDLE:"~",END:"+"},r.parseRangeArguments=n,r.transformRangeArguments=s,r.default={IS_READ_ONLY:!0,parseCommand(...e){e[0].push("TS.RANGE"),s(...e)},transformReply:{2:e=>i.transformSamplesReply[2](e),3:e=>i.transformSamplesReply[3](e)}}},40969,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.extractResp3MRangeSources=r.createTransformMRangeGroupByArguments=r.parseGroupByArguments=r.TIME_SERIES_REDUCERS=void 0;let i=e.r(54925),n=e.r(96929),s=e.r(55348);function a(e,t){e.push("GROUPBY",t.label,"REDUCE",t.REDUCE)}function o(e){return(t,r,i,o,u,l)=>{t.push(e),(0,n.parseRangeArguments)(t,r,i,l),(0,s.parseFilterArgument)(t,o),a(t,u)}}function u(e){return e instanceof Map?e.get("sources"):e instanceof Array?e[1]:e.sources}r.TIME_SERIES_REDUCERS={AVG:"AVG",SUM:"SUM",MIN:"MIN",MAX:"MAX",RANGE:"RANGE",COUNT:"COUNT",STD_P:"STD.P",STD_S:"STD.S",VAR_P:"VAR.P",VAR_S:"VAR.S"},r.parseGroupByArguments=a,r.createTransformMRangeGroupByArguments=o,r.extractResp3MRangeSources=u,r.default={IS_READ_ONLY:!0,parseCommand:o("TS.MRANGE"),transformReply:{2:(e,t,r)=>(0,i.resp2MapToValue)(e,([e,t,r])=>({samples:i.transformSamplesReply[2](r)}),r),3:e=>(0,i.resp3MapToValue)(e,([e,t,r,n])=>({sources:u(r),samples:i.transformSamplesReply[3](n)}))}}},62725,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createTransformMRangeSelectedLabelsArguments=void 0;let i=e.r(54925),n=e.r(96929),s=e.r(55348);function a(e){return(t,r,a,o,u,l)=>{t.push(e),(0,n.parseRangeArguments)(t,r,a,l),(0,i.parseSelectedLabelsArguments)(t,o),(0,s.parseFilterArgument)(t,u)}}r.createTransformMRangeSelectedLabelsArguments=a,r.default={IS_READ_ONLY:!0,parseCommand:a("TS.MRANGE"),transformReply:{2:(e,t,r)=>(0,i.resp2MapToValue)(e,([e,t,n])=>({labels:(0,i.transformRESP2Labels)(t,r),samples:i.transformSamplesReply[2](n)}),r),3:e=>(0,i.resp3MapToValue)(e,([e,t,r])=>({labels:t,samples:i.transformSamplesReply[3](r)}))}}},47727,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createMRangeSelectedLabelsGroupByTransformArguments=void 0;let n=e.r(54925),s=e.r(96929),a=e.r(40969),o=e.r(55348),u=i(e.r(62725));function l(e){return(t,r,i,u,l,d,c)=>{t.push(e),(0,s.parseRangeArguments)(t,r,i,c),(0,n.parseSelectedLabelsArguments)(t,u),(0,o.parseFilterArgument)(t,l),(0,a.parseGroupByArguments)(t,d)}}r.createMRangeSelectedLabelsGroupByTransformArguments=l,r.default={IS_READ_ONLY:!0,parseCommand:l("TS.MRANGE"),transformReply:{2:u.default.transformReply[2],3:e=>(0,n.resp3MapToValue)(e,([e,t,r,i])=>({labels:e,sources:(0,a.extractResp3MRangeSources)(r),samples:n.transformSamplesReply[3](i)}))}}},34756,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createMRangeWithLabelsGroupByTransformArguments=void 0;let i=e.r(54925),n=e.r(96929),s=e.r(40969),a=e.r(55348);function o(e){return(t,r,i,o,u,l)=>{t.push(e),(0,n.parseRangeArguments)(t,r,i,l),t.push("WITHLABELS"),(0,a.parseFilterArgument)(t,o),(0,s.parseGroupByArguments)(t,u)}}r.createMRangeWithLabelsGroupByTransformArguments=o,r.default={IS_READ_ONLY:!0,parseCommand:o("TS.MRANGE"),transformReply:{2:(e,t,r)=>(0,i.resp2MapToValue)(e,([e,t,r])=>{let n=(0,i.transformRESP2LabelsWithSources)(t);return{labels:n.labels,sources:n.sources,samples:i.transformSamplesReply[2](r)}},r),3:e=>(0,i.resp3MapToValue)(e,([e,t,r,n])=>({labels:e,sources:(0,s.extractResp3MRangeSources)(r),samples:i.transformSamplesReply[3](n)}))}}},3453,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createTransformMRangeWithLabelsArguments=void 0;let i=e.r(54925),n=e.r(96929),s=e.r(55348);function a(e){return(t,r,i,a,o)=>{t.push(e),(0,n.parseRangeArguments)(t,r,i,o),t.push("WITHLABELS"),(0,s.parseFilterArgument)(t,a)}}r.createTransformMRangeWithLabelsArguments=a,r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand:a("TS.MRANGE"),transformReply:{2:(e,t,r)=>(0,i.resp2MapToValue)(e,([e,t,r])=>{let n=Object.create(null);for(let e of t){let[t,r]=e;n[t.toString()]=r}return{labels:n,samples:i.transformSamplesReply[2](r)}},r),3:e=>(0,i.resp3MapToValue)(e,([e,t,r])=>({labels:e,samples:i.transformSamplesReply[3](r)}))}}},2565,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createTransformMRangeArguments=void 0;let i=e.r(54925),n=e.r(96929),s=e.r(55348);function a(e){return(t,r,i,a,o)=>{t.push(e),(0,n.parseRangeArguments)(t,r,i,o),(0,s.parseFilterArgument)(t,a)}}r.createTransformMRangeArguments=a,r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand:a("TS.MRANGE"),transformReply:{2:(e,t,r)=>(0,i.resp2MapToValue)(e,([e,t,r])=>i.transformSamplesReply[2](r),r),3:e=>(0,i.resp3MapToValue)(e,([e,t,r])=>i.transformSamplesReply[3](r))}}},85948,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(40969));r.default={IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand:(0,a.createTransformMRangeGroupByArguments)("TS.MREVRANGE"),transformReply:a.default.transformReply}},31082,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(47727));r.default={IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand:(0,a.createMRangeSelectedLabelsGroupByTransformArguments)("TS.MREVRANGE"),transformReply:a.default.transformReply}},89044,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(62725));r.default={IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand:(0,a.createTransformMRangeSelectedLabelsArguments)("TS.MREVRANGE"),transformReply:a.default.transformReply}},77170,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(34756));r.default={IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand:(0,a.createMRangeWithLabelsGroupByTransformArguments)("TS.MREVRANGE"),transformReply:a.default.transformReply}},18672,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(3453));r.default={NOT_KEYED_COMMAND:a.default.NOT_KEYED_COMMAND,IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand:(0,a.createTransformMRangeWithLabelsArguments)("TS.MREVRANGE"),transformReply:a.default.transformReply}},49150,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(2565));r.default={NOT_KEYED_COMMAND:a.default.NOT_KEYED_COMMAND,IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand:(0,a.createTransformMRangeArguments)("TS.MREVRANGE"),transformReply:a.default.transformReply}},17490,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("TS.QUERYINDEX"),e.pushVariadic(t)},transformReply:{2:void 0,3:void 0}}},68941,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(96929));r.default={IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand(...e){e[0].push("TS.REVRANGE"),(0,a.transformRangeArguments)(...e)},transformReply:a.default.transformReply}},77389,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});let a=s(e.r(66369)),o=s(e.r(87457)),u=s(e.r(31412)),l=s(e.r(22373)),d=s(e.r(56448)),c=s(e.r(33288)),p=s(e.r(47846)),f=s(e.r(62024)),h=s(e.r(96161)),m=s(e.r(73003)),y=s(e.r(14991)),g=s(e.r(96526)),_=s(e.r(37814)),b=s(e.r(26392)),v=s(e.r(55348)),E=s(e.r(40969)),S=s(e.r(47727)),A=s(e.r(62725)),T=s(e.r(34756)),w=s(e.r(3453)),O=s(e.r(2565)),R=s(e.r(85948)),I=s(e.r(31082)),C=s(e.r(89044)),N=s(e.r(77170)),P=s(e.r(18672)),D=s(e.r(49150)),x=s(e.r(17490)),L=s(e.r(96929)),k=s(e.r(68941));n(e.r(54925),r),r.default={ADD:a.default,add:a.default,ALTER:o.default,alter:o.default,CREATE:u.default,create:u.default,CREATERULE:l.default,createRule:l.default,DECRBY:d.default,decrBy:d.default,DEL:c.default,del:c.default,DELETERULE:p.default,deleteRule:p.default,GET:f.default,get:f.default,INCRBY:h.default,incrBy:h.default,INFO_DEBUG:m.default,infoDebug:m.default,INFO:y.default,info:y.default,MADD:g.default,mAdd:g.default,MGET_SELECTED_LABELS:_.default,mGetSelectedLabels:_.default,MGET_WITHLABELS:b.default,mGetWithLabels:b.default,MGET:v.default,mGet:v.default,MRANGE_GROUPBY:E.default,mRangeGroupBy:E.default,MRANGE_SELECTED_LABELS_GROUPBY:S.default,mRangeSelectedLabelsGroupBy:S.default,MRANGE_SELECTED_LABELS:A.default,mRangeSelectedLabels:A.default,MRANGE_WITHLABELS_GROUPBY:T.default,mRangeWithLabelsGroupBy:T.default,MRANGE_WITHLABELS:w.default,mRangeWithLabels:w.default,MRANGE:O.default,mRange:O.default,MREVRANGE_GROUPBY:R.default,mRevRangeGroupBy:R.default,MREVRANGE_SELECTED_LABELS_GROUPBY:I.default,mRevRangeSelectedLabelsGroupBy:I.default,MREVRANGE_SELECTED_LABELS:C.default,mRevRangeSelectedLabels:C.default,MREVRANGE_WITHLABELS_GROUPBY:N.default,mRevRangeWithLabelsGroupBy:N.default,MREVRANGE_WITHLABELS:P.default,mRevRangeWithLabels:P.default,MREVRANGE:D.default,mRevRange:D.default,QUERYINDEX:x.default,queryIndex:x.default,RANGE:L.default,range:L.default,REVRANGE:k.default,revRange:k.default}},94341,(e,t,r)=>{"use strict";var i=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.TIME_SERIES_REDUCERS=r.TIME_SERIES_BUCKET_TIMESTAMP=r.TIME_SERIES_AGGREGATION_TYPE=r.TIME_SERIES_DUPLICATE_POLICIES=r.TIME_SERIES_ENCODING=r.default=void 0;var n=e.r(77389);Object.defineProperty(r,"default",{enumerable:!0,get:function(){return i(n).default}}),Object.defineProperty(r,"TIME_SERIES_ENCODING",{enumerable:!0,get:function(){return n.TIME_SERIES_ENCODING}}),Object.defineProperty(r,"TIME_SERIES_DUPLICATE_POLICIES",{enumerable:!0,get:function(){return n.TIME_SERIES_DUPLICATE_POLICIES}});var s=e.r(22373);Object.defineProperty(r,"TIME_SERIES_AGGREGATION_TYPE",{enumerable:!0,get:function(){return s.TIME_SERIES_AGGREGATION_TYPE}});var a=e.r(96929);Object.defineProperty(r,"TIME_SERIES_BUCKET_TIMESTAMP",{enumerable:!0,get:function(){return a.TIME_SERIES_BUCKET_TIMESTAMP}});var o=e.r(40969);Object.defineProperty(r,"TIME_SERIES_REDUCERS",{enumerable:!0,get:function(){return o.TIME_SERIES_REDUCERS}})},86400,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createSentinel=r.createCluster=r.createClientPool=r.createClient=void 0;let a=e.r(98989),o=s(e.r(15486)),u=s(e.r(19620)),l=s(e.r(12038)),d=s(e.r(94341));n(e.r(98989),r),n(e.r(15486),r),n(e.r(19620),r),n(e.r(12038),r),n(e.r(94341),r);let c={...o.default,json:u.default,ft:l.default,ts:d.default};r.createClient=function(e){return(0,a.createClient)({...e,modules:{...c,...e?.modules}})},r.createClientPool=function(e,t){return(0,a.createClientPool)({...e,modules:{...c,...e?.modules}},t)},r.createCluster=function(e){return(0,a.createCluster)({...e,modules:{...c,...e?.modules}})},r.createSentinel=function(e){return(0,a.createSentinel)({...e,modules:{...c,...e?.modules}})}},2572,e=>e.a(async(t,r)=>{try{e.s(["cache",()=>t]);var i=e.i(86400);let t=(0,i.createClient)({socket:{host:process.env.CACHE_HOST,port:Number(process.env.CACHE_PORT)}});await t.connect(),r()}catch(e){r(e)}},!0),68105,e=>e.a(async(t,r)=>{try{e.s(["auth",()=>l]);var i=e.i(77035),n=e.i(18612);e.i(49436);var s=e.i(51374),a=e.i(88501),o=e.i(2572),u=t([i,o]);[i,o]=u.then?(await u)():u;let l=(0,s.betterAuth)({database:(0,a.drizzleAdapter)(i.db,{provider:"pg",schema:n}),advanced:{database:{generateId:!1,useNumberId:!1}},schema:{user:n.user,session:n.session,account:n.account,verification:n.verification},secondaryStorage:{get:async e=>await o.cache.get(e),set:async(e,t)=>{await o.cache.set(e,t)},delete:async e=>{await o.cache.del(e)}},secret:process.env.BETTER_AUTH_SECRET,baseURL:process.env.BETTER_AUTH_URL,emailAndPassword:{enabled:!1},session:{expiresIn:604800,updateAge:86400,cookieCache:{enabled:!0,maxAge:300}},socialProviders:{github:{clientId:process.env.GITHUB_CLIENT_ID,clientSecret:process.env.GITHUB_CLIENT_SECRET},google:{clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}}});r()}catch(e){r(e)}},!1),49599,e=>{"use strict";function t(e){let t=async t=>"handler"in e?e.handler(t):e(t);return{GET:t,POST:t}}e.s(["toNextJsHandler",()=>t]),e.i(12700),e.i(9662),e.i(30501),e.i(35972),e.i(23770),e.i(91488),e.i(36870)},42687,e=>e.a(async(t,r)=>{try{e.s(["GET",()=>o,"POST",()=>a]);var i=e.i(68105),n=e.i(49599),s=t([i]);[i]=s.then?(await s)():s;let{POST:a,GET:o}=(0,n.toNextJsHandler)(i.auth);r()}catch(e){r(e)}},!1),57132,e=>e.a(async(t,r)=>{try{e.s(["handler",()=>S,"patchFetch",()=>E,"routeModule",()=>A,"serverHooks",()=>O,"workAsyncStorage",()=>T,"workUnitAsyncStorage",()=>w]);var i=e.i(47909),n=e.i(74017),s=e.i(96250),a=e.i(59756),o=e.i(61916),u=e.i(69741),l=e.i(16795),d=e.i(87718),c=e.i(95169),p=e.i(32084),f=e.i(66012),h=e.i(70101),m=e.i(26937),y=e.i(10372),g=e.i(93695);e.i(52474);var _=e.i(220),b=e.i(42687),v=t([b]);[b]=v.then?(await v)():v;let A=new i.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/auth/[...all]/route",pathname:"/api/auth/[...all]",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/auth/[...all]/route.ts",nextConfigOutput:"",userland:b}),{workAsyncStorage:T,workUnitAsyncStorage:w,serverHooks:O}=A;function E(){return(0,s.patchFetch)({workAsyncStorage:T,workUnitAsyncStorage:w})}async function S(e,t,r){var i;let s="/api/auth/[...all]/route";s=s.replace(/\/index$/,"")||"/";let b=await A.prepare(e,t,{srcPage:s,multiZoneDraftMode:!1});if(!b)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:v,params:E,nextConfig:S,isDraftMode:T,prerenderManifest:w,routerServerContext:O,isOnDemandRevalidate:R,revalidateOnlyGenerated:I,resolvedPathname:C}=b,N=(0,u.normalizeAppPath)(s),P=!!(w.dynamicRoutes[N]||w.routes[C]);if(P&&!T){let e=!!w.routes[C],t=w.dynamicRoutes[N];if(t&&!1===t.fallback&&!e)throw new g.NoFallbackError}let D=null;!P||A.isDev||T||(D=C,D="/index"===D?"/":D);let x=!0===A.isDev||!P,L=P&&!x,k=e.method||"GET",M=(0,o.getTracer)(),$=M.getActiveScopeSpan(),U={params:E,prerenderManifest:w,renderOpts:{experimental:{cacheComponents:!!S.experimental.cacheComponents,authInterrupts:!!S.experimental.authInterrupts},supportsDynamicResponse:x,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:null==(i=S.experimental)?void 0:i.cacheLife,isRevalidate:L,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,i)=>A.onRequestError(e,t,i,O)},sharedContext:{buildId:v}},j=new l.NodeNextRequest(e),B=new l.NodeNextResponse(t),z=d.NextRequestAdapter.fromNodeNextRequest(j,(0,d.signalFromNodeResponse)(t));try{let i=async r=>A.handle(z,U).finally(()=>{if(!r)return;r.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let i=M.getRootSpanAttributes();if(!i)return;if(i.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${i.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=i.get("next.route");if(n){let e=`${k} ${n}`;r.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),r.updateName(e)}else r.updateName(`${k} ${e.url}`)}),u=async o=>{var u,l;let d=async({previousCacheEntry:n})=>{try{if(!(0,a.getRequestMeta)(e,"minimalMode")&&R&&I&&!n)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await i(o);e.fetchMetrics=U.renderOpts.fetchMetrics;let u=U.renderOpts.pendingWaitUntil;u&&r.waitUntil&&(r.waitUntil(u),u=void 0);let l=U.renderOpts.collectedTags;if(!P)return await (0,f.sendResponse)(j,B,s,U.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(s.headers);l&&(t[y.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==U.renderOpts.collectedRevalidate&&!(U.renderOpts.collectedRevalidate>=y.INFINITE_CACHE)&&U.renderOpts.collectedRevalidate,i=void 0===U.renderOpts.collectedExpire||U.renderOpts.collectedExpire>=y.INFINITE_CACHE?void 0:U.renderOpts.collectedExpire;return{value:{kind:_.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:i}}}}catch(t){throw(null==n?void 0:n.isStale)&&await A.onRequestError(e,t,{routerKind:"App Router",routePath:s,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isRevalidate:L,isOnDemandRevalidate:R})},O),t}},c=await A.handleResponse({req:e,nextConfig:S,cacheKey:D,routeKind:n.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:w,isRoutePPREnabled:!1,isOnDemandRevalidate:R,revalidateOnlyGenerated:I,responseGenerator:d,waitUntil:r.waitUntil});if(!P)return null;if((null==c||null==(u=c.value)?void 0:u.kind)!==_.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(l=c.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,a.getRequestMeta)(e,"minimalMode")||t.setHeader("x-nextjs-cache",R?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),T&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let g=(0,h.fromNodeOutgoingHttpHeaders)(c.value.headers);return(0,a.getRequestMeta)(e,"minimalMode")&&P||g.delete(y.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||g.get("Cache-Control")||g.set("Cache-Control",(0,m.getCacheControlHeader)(c.cacheControl)),await (0,f.sendResponse)(j,B,new Response(c.value.body,{headers:g,status:c.value.status||200})),null};$?await u($):await M.withPropagatedContext(e.headers,()=>M.trace(c.BaseServerSpan.handleRequest,{spanName:`${k} ${e.url}`,kind:o.SpanKind.SERVER,attributes:{"http.method":k,"http.target":e.url}},u))}catch(t){if(t instanceof g.NoFallbackError||await A.onRequestError(e,t,{routerKind:"App Router",routePath:N,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isRevalidate:L,isOnDemandRevalidate:R})}),P)throw t;return await (0,f.sendResponse)(j,B,new Response(null,{status:500})),null}}r()}catch(e){r(e)}},!1)];

//# sourceMappingURL=_f4d6422e._.js.map