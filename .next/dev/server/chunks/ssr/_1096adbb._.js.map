{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/components/ui/dialog.tsx"],"sourcesContent":["\"use client\";\n\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\nimport { XIcon } from \"lucide-react\";\nimport type * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Border } from \"./border\";\n\nconst Body = ({\n\t...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) => {\n\treturn <DialogPrimitive.Root data-slot=\"dialog\" {...props} />;\n};\n\nconst Trigger = ({\n\t...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) => {\n\treturn <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />;\n};\n\nconst Portal = ({\n\t...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) => {\n\treturn <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />;\n};\n\nconst Close = ({\n\t...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) => {\n\treturn <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />;\n};\n\nconst Overlay = ({\n\tclassName,\n\t...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) => {\n\treturn (\n\t\t<DialogPrimitive.Overlay\n\t\t\tdata-slot=\"dialog-overlay\"\n\t\t\tclassName={cn(\n\t\t\t\t\"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\t{...props}\n\t\t/>\n\t);\n};\n\nconst Content = ({\n\tclassName,\n\tchildren,\n\tshowCloseButton = true,\n\t...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n\tshowCloseButton?: boolean;\n}) => {\n\treturn (\n\t\t<Portal data-slot=\"dialog-portal\">\n\t\t\t<Overlay />\n\t\t\t<DialogPrimitive.Content\n\t\t\t\tdata-slot=\"dialog-content\"\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"bg-card data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-none border-none p-6 shadow-lg duration-200 sm:max-w-lg\",\n\t\t\t\t\tclassName,\n\t\t\t\t)}\n\t\t\t\t{...props}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t\t{showCloseButton && (\n\t\t\t\t\t<DialogPrimitive.Close\n\t\t\t\t\t\tdata-slot=\"dialog-close\"\n\t\t\t\t\t\tclassName=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<XIcon />\n\t\t\t\t\t\t<span className=\"sr-only\">Close</span>\n\t\t\t\t\t</DialogPrimitive.Close>\n\t\t\t\t)}\n\t\t\t\t<Border />\n\t\t\t</DialogPrimitive.Content>\n\t\t</Portal>\n\t);\n};\n\nconst Header = ({ className, ...props }: React.ComponentProps<\"div\">) => {\n\treturn (\n\t\t<div\n\t\t\tdata-slot=\"dialog-header\"\n\t\t\tclassName={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n\t\t\t{...props}\n\t\t/>\n\t);\n};\n\nconst Footer = ({ className, ...props }: React.ComponentProps<\"div\">) => {\n\treturn (\n\t\t<div\n\t\t\tdata-slot=\"dialog-footer\"\n\t\t\tclassName={cn(\n\t\t\t\t\"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\t{...props}\n\t\t/>\n\t);\n};\n\nconst Title = ({\n\tclassName,\n\t...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) => {\n\treturn (\n\t\t<DialogPrimitive.Title\n\t\t\tdata-slot=\"dialog-title\"\n\t\t\tclassName={cn(\"text-lg leading-none font-semibold\", className)}\n\t\t\t{...props}\n\t\t/>\n\t);\n};\n\nconst Description = ({\n\tclassName,\n\t...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) => {\n\treturn (\n\t\t<DialogPrimitive.Description\n\t\t\tdata-slot=\"dialog-description\"\n\t\t\tclassName={cn(\"text-muted-foreground text-sm\", className)}\n\t\t\t{...props}\n\t\t/>\n\t);\n};\n\nconst Dialog = Object.assign(Body, {\n\tClose,\n\tContent,\n\tDescription,\n\tFooter,\n\tHeader,\n\tOverlay,\n\tPortal,\n\tTitle,\n\tTrigger,\n});\n\nexport default Dialog;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAGA;AACA;AAPA;;;;;;AASA,MAAM,OAAO,CAAC,EACb,GAAG,OACgD;IACnD,qBAAO,8OAAC,0KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC1D;AAEA,MAAM,UAAU,CAAC,EAChB,GAAG,OACmD;IACtD,qBAAO,8OAAC,6KAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACrE;AAEA,MAAM,SAAS,CAAC,EACf,GAAG,OACkD;IACrD,qBAAO,8OAAC,4KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACnE;AAEA,MAAM,QAAQ,CAAC,EACd,GAAG,OACiD;IACpD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AACjE;AAEA,MAAM,UAAU,CAAC,EAChB,SAAS,EACT,GAAG,OACmD;IACtD,qBACC,8OAAC,6KAAuB;QACvB,aAAU;QACV,WAAW,IAAA,kHAAE,EACZ,0JACA;QAEA,GAAG,KAAK;;;;;;AAGZ;AAEA,MAAM,UAAU,CAAC,EAChB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGH;IACA,qBACC,8OAAC;QAAO,aAAU;;0BACjB,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACvB,aAAU;gBACV,WAAW,IAAA,kHAAE,EACZ,gXACA;gBAEA,GAAG,KAAK;;oBAER;oBACA,iCACA,8OAAC,2KAAqB;wBACrB,aAAU;wBACV,WAAU;;0CAEV,8OAAC,yMAAK;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;kCAG5B,8OAAC,qIAAM;;;;;;;;;;;;;;;;;AAIX;AAEA,MAAM,SAAS,CAAC,EAAE,SAAS,EAAE,GAAG,OAAoC;IACnE,qBACC,8OAAC;QACA,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGZ;AAEA,MAAM,SAAS,CAAC,EAAE,SAAS,EAAE,GAAG,OAAoC;IACnE,qBACC,8OAAC;QACA,aAAU;QACV,WAAW,IAAA,kHAAE,EACZ,0DACA;QAEA,GAAG,KAAK;;;;;;AAGZ;AAEA,MAAM,QAAQ,CAAC,EACd,SAAS,EACT,GAAG,OACiD;IACpD,qBACC,8OAAC,2KAAqB;QACrB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGZ;AAEA,MAAM,cAAc,CAAC,EACpB,SAAS,EACT,GAAG,OACuD;IAC1D,qBACC,8OAAC,iLAA2B;QAC3B,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGZ;AAEA,MAAM,SAAS,OAAO,MAAM,CAAC,MAAM;IAClC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;AACD;uCAEe","debugId":null}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/lib/friend.ts"],"sourcesContent":["\"use server\";\n\nimport { and, eq, ilike, ne, or } from \"drizzle-orm\";\nimport { validate as isUuid } from \"uuid\";\nimport { db } from \"@/db\";\nimport { friend, user } from \"@/db/schema\";\nimport { cache } from \"@/lib/cache\";\n\nconst getCacheKey = (prefix: string, userId: string) =>\n\t`friend-${prefix}:${userId}`;\n\nexport const searchUsers = async (query: string, currentUserId: string) => {\n\tconst cacheKey = getCacheKey(\"search\", `${currentUserId}:${query}`);\n\ttry {\n\t\tconst cached = await cache.get(cacheKey);\n\t\tif (cached) return JSON.parse(cached);\n\t} catch (error) {\n\t\tconsole.error(\"cache get error:\", error);\n\t}\n\tconst conditions = [\n\t\tilike(user.name, `%${query}%`),\n\t\tilike(user.email, `%${query}%`),\n\t];\n\tif (isUuid(query)) conditions.push(eq(user.id, query));\n\tconst results = await db\n\t\t.select({\n\t\t\tid: user.id,\n\t\t\tname: user.name,\n\t\t\temail: user.email,\n\t\t\timage: user.image,\n\t\t})\n\t\t.from(user)\n\t\t.where(and(or(...conditions), ne(user.id, currentUserId)))\n\t\t.limit(10);\n\tconst filteredResults = results.filter((u) => u.id !== currentUserId);\n\ttry {\n\t\tawait cache.set(cacheKey, JSON.stringify(filteredResults), {\n\t\t\tEX: Number(process.env.CACHE_TTL),\n\t\t});\n\t} catch (error) {\n\t\tconsole.error(\"cache set error:\", error);\n\t}\n\treturn filteredResults;\n};\n\nexport const sendRequest = async (\n\tsender: string,\n\treceiver: string,\n): Promise<void> => {\n\tawait db.insert(friend).values({ sender, receiver, status: false });\n\ttry {\n\t\tawait Promise.all([\n\t\t\tcache.del(getCacheKey(\"friends\", sender)),\n\t\t\tcache.del(getCacheKey(\"friends\", receiver)),\n\t\t\tcache.del(getCacheKey(\"requests_for_me\", receiver)),\n\t\t\tcache.del(getCacheKey(\"requests_from_me\", sender)),\n\t\t]);\n\t} catch (error) {\n\t\tconsole.error(\"cache cache invalidation error:\", error);\n\t}\n};\n\nexport const acceptRequest = async (\n\tsender: string,\n\treceiver: string,\n): Promise<void> => {\n\tawait db\n\t\t.update(friend)\n\t\t.set({ status: true })\n\t\t.where(\n\t\t\tor(\n\t\t\t\tand(eq(friend.sender, sender), eq(friend.receiver, receiver)),\n\t\t\t\tand(eq(friend.sender, receiver), eq(friend.receiver, sender)),\n\t\t\t),\n\t\t);\n\ttry {\n\t\tawait Promise.all([\n\t\t\tcache.del(getCacheKey(\"friends\", sender)),\n\t\t\tcache.del(getCacheKey(\"friends\", receiver)),\n\t\t\tcache.del(getCacheKey(\"requests_for_me\", receiver)),\n\t\t\tcache.del(getCacheKey(\"requests_from_me\", sender)),\n\t\t]);\n\t} catch (error) {\n\t\tconsole.error(\"cache cache invalidation error:\", error);\n\t}\n};\n\nexport const denyRequest = async (\n\tsender: string,\n\treceiver: string,\n): Promise<void> => {\n\tawait db\n\t\t.delete(friend)\n\t\t.where(\n\t\t\tor(\n\t\t\t\tand(eq(friend.sender, sender), eq(friend.receiver, receiver)),\n\t\t\t\tand(eq(friend.sender, receiver), eq(friend.receiver, sender)),\n\t\t\t),\n\t\t);\n\ttry {\n\t\tawait Promise.all([\n\t\t\tcache.del(getCacheKey(\"friends\", sender)),\n\t\t\tcache.del(getCacheKey(\"friends\", receiver)),\n\t\t\tcache.del(getCacheKey(\"requests_for_me\", receiver)),\n\t\t\tcache.del(getCacheKey(\"requests_from_me\", sender)),\n\t\t]);\n\t} catch (error) {\n\t\tconsole.error(\"cache cache invalidation error:\", error);\n\t}\n};\n\nexport const getFromMeRequests = async (userId: string) => {\n\tconst cacheKey = getCacheKey(\"requests_from_me\", userId);\n\n\ttry {\n\t\tconst cached = await cache.get(cacheKey);\n\t\tif (cached) return JSON.parse(cached);\n\t} catch (error) {\n\t\tconsole.error(\"cache get error:\", error);\n\t}\n\n\tconst results = await db\n\t\t.select({\n\t\t\tfriendshipId: friend.id,\n\t\t\tid: user.id,\n\t\t\temail: user.email,\n\t\t\tname: user.name,\n\t\t\timage: user.image,\n\t\t\tsender: friend.sender,\n\t\t\treceiver: friend.receiver,\n\t\t})\n\t\t.from(friend)\n\t\t.innerJoin(user, eq(friend.receiver, user.id))\n\t\t.where(and(eq(friend.status, false), eq(friend.sender, userId)));\n\n\ttry {\n\t\tawait cache.set(cacheKey, JSON.stringify(results), {\n\t\t\tEX: Number(process.env.CACHE_TTL),\n\t\t});\n\t} catch (error) {\n\t\tconsole.error(\"Redis set error:\", error);\n\t}\n\n\treturn results;\n};\n\nexport const getForMeRequests = async (userId: string) => {\n\tconst cacheKey = getCacheKey(\"requests_for_me\", userId);\n\n\ttry {\n\t\tconst cached = await cache.get(cacheKey);\n\t\tif (cached) {\n\t\t\treturn JSON.parse(cached);\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(\"cache get error:\", error);\n\t}\n\n\tconst results = await db\n\t\t.select({\n\t\t\tfriendshipId: friend.id,\n\t\t\tid: user.id,\n\t\t\temail: user.email,\n\t\t\tname: user.name,\n\t\t\timage: user.image,\n\t\t\tsender: friend.sender,\n\t\t\treceiver: friend.receiver,\n\t\t})\n\t\t.from(friend)\n\t\t.innerJoin(user, eq(friend.sender, user.id))\n\t\t.where(and(eq(friend.status, false), eq(friend.receiver, userId)));\n\n\ttry {\n\t\tawait cache.set(cacheKey, JSON.stringify(results), {\n\t\t\tEX: Number(process.env.CACHE_TTL),\n\t\t});\n\t} catch (error) {\n\t\tconsole.error(\"cache set error:\", error);\n\t}\n\treturn results;\n};\n\nexport const getFriends = async (userId: string) => {\n\tconst cacheKey = getCacheKey(\"friends\", userId);\n\n\ttry {\n\t\tconst cached = await cache.get(cacheKey);\n\t\tif (cached) return JSON.parse(cached);\n\t} catch (error) {\n\t\tconsole.error(\"cache get error:\", error);\n\t}\n\n\tconst results = await db\n\t\t.select({\n\t\t\tfriendshipId: friend.id,\n\t\t\tid: user.id,\n\t\t\temail: user.email,\n\t\t\tname: user.name,\n\t\t\timage: user.image,\n\t\t\tsender: friend.sender,\n\t\t\treceiver: friend.receiver,\n\t\t})\n\t\t.from(friend)\n\t\t.innerJoin(\n\t\t\tuser,\n\t\t\tor(eq(friend.sender, user.id), eq(friend.receiver, user.id)),\n\t\t)\n\t\t.where(\n\t\t\tand(\n\t\t\t\teq(friend.status, true),\n\t\t\t\tor(eq(friend.sender, userId), eq(friend.receiver, userId)),\n\t\t\t),\n\t\t)\n\t\t.then((friends) => friends.filter((f) => f.id !== userId));\n\n\ttry {\n\t\tawait cache.set(cacheKey, JSON.stringify(results), {\n\t\t\tEX: Number(process.env.CACHE_TTL),\n\t\t});\n\t} catch (error) {\n\t\tconsole.error(\"cache set error:\", error);\n\t}\n\n\treturn results;\n};\n"],"names":[],"mappings":";;;;;;;IAWa,cAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/components/friends/addFriend.tsx"],"sourcesContent":["\"use client\";\n\nimport type { User } from \"better-auth\";\nimport { Search, UserPlus } from \"lucide-react\";\nimport React from \"react\";\nimport { useFriends } from \"@/components/friends/friends-provider\";\nimport Dialog from \"@/components/ui/dialog\";\nimport { searchUsers } from \"@/lib/friend\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"../ui/avatar\";\nimport { Button } from \"../ui/button\";\nimport { Input } from \"../ui/input\";\n\ntype SearchResult = {\n\tid: string;\n\tname: string;\n\temail: string;\n\timage: string | null;\n\tbio: string | null;\n};\n\nexport default ({ user }: { user: User }) => {\n\tconst [query, setQuery] = React.useState<string>(\"\");\n\tconst [open, setOpen] = React.useState<boolean>(false);\n\tconst [loading, setLoading] = React.useState<boolean>(false);\n\tconst [searching, setSearching] = React.useState<boolean>(false);\n\tconst [searchResults, setSearchResults] = React.useState<SearchResult[]>([]);\n\n\tconst { sendRequest } = useFriends();\n\n\tReact.useEffect(() => {\n\t\tif (query.length < 4) {\n\t\t\tsetSearchResults([]);\n\t\t\treturn;\n\t\t}\n\n\t\tconst timeoutId = setTimeout(async () => {\n\t\t\tsetSearching(true);\n\t\t\ttry {\n\t\t\t\tconst results = await searchUsers(query, user.id);\n\t\t\t\tsetSearchResults(results);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"Search error:\", error);\n\t\t\t\tsetSearchResults([]);\n\t\t\t}\n\t\t\tsetSearching(false);\n\t\t}, 300);\n\n\t\treturn () => clearTimeout(timeoutId);\n\t}, [query, user.id]);\n\n\tconst handleSendRequest = (receiverId: string) => {\n\t\tsetLoading(true);\n\t\tsendRequest(receiverId);\n\t\tsetQuery(\"\");\n\t\tsetSearchResults([]);\n\t\tsetOpen(false);\n\t\tsetLoading(false);\n\t};\n\n\tconst handleReset = () => {\n\t\tsetQuery(\"\");\n\t\tsetSearchResults([]);\n\t\tsetLoading(false);\n\t\tsetSearching(false);\n\t};\n\n\treturn (\n\t\t<Dialog\n\t\t\topen={open}\n\t\t\tonOpenChange={(newOpen) => {\n\t\t\t\tsetOpen(newOpen);\n\t\t\t\tif (!newOpen) {\n\t\t\t\t\thandleReset();\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t<Dialog.Trigger asChild>\n\t\t\t\t<Button>\n\t\t\t\t\t<UserPlus className=\"mr-2 h-4 w-4\" />\n\t\t\t\t\tAdd Friend\n\t\t\t\t</Button>\n\t\t\t</Dialog.Trigger>\n\t\t\t<Dialog.Content className=\"max-w-md\">\n\t\t\t\t<Dialog.Header>\n\t\t\t\t\t<Dialog.Title>Add New Friend</Dialog.Title>\n\t\t\t\t\t<Dialog.Description>\n\t\t\t\t\t\tSearch by name, email, or ID to find and add friends\n\t\t\t\t\t</Dialog.Description>\n\t\t\t\t</Dialog.Header>\n\n\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t<Search className=\"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform\" />\n\t\t\t\t\t<Input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Search by name, email, or ID..\"\n\t\t\t\t\t\tvalue={query}\n\t\t\t\t\t\tonChange={(e) => setQuery(e.target.value)}\n\t\t\t\t\t\tclassName=\"pl-10\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{searching && (\n\t\t\t\t\t<div className=\"text-muted-foreground py-4 text-center\">\n\t\t\t\t\t\tSearching...\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{searchResults.length > 0 && (\n\t\t\t\t\t<div className=\"max-h-60 space-y-2 overflow-y-auto\">\n\t\t\t\t\t\t{searchResults.map((result) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={result.id}\n\t\t\t\t\t\t\t\tclassName=\"hover:bg-muted/50 flex items-center justify-between rounded-lg border p-3 transition-colors\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t\t\t\t\t<Avatar>\n\t\t\t\t\t\t\t\t\t\t<AvatarImage\n\t\t\t\t\t\t\t\t\t\t\tsrc={result.image || \"\"}\n\t\t\t\t\t\t\t\t\t\t\talt={`${result.name}'s profile`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<AvatarFallback>\n\t\t\t\t\t\t\t\t\t\t\t{result.name?.charAt(0)?.toUpperCase() || \"?\"}\n\t\t\t\t\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t<div className=\"min-w-0 flex-1\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"truncate font-medium\">{result.name}</p>\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground truncate text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t{result.email}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t{result.bio && (\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-muted-foreground mt-1 truncate text-xs\">\n\t\t\t\t\t\t\t\t\t\t\t\t{result.bio}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tonClick={() => handleSendRequest(result.id)}\n\t\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{loading ? \"Sending...\" : \"Add\"}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{query.length >= 4 && !searching && searchResults.length === 0 && (\n\t\t\t\t\t<div className=\"text-muted-foreground py-4 text-center\">\n\t\t\t\t\t\tNo users found matching \"{query}\"\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t{query.length < 4 && (\n\t\t\t\t\t<div className=\"text-muted-foreground py-4 text-center\">\n\t\t\t\t\t\tType at least 4 characters to search\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</Dialog.Content>\n\t\t</Dialog>\n\t);\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 484, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/components/ui/textarea.tsx"],"sourcesContent":["import type * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Border } from \"./border\";\n\nconst Textarea = ({\n\tclassName,\n\t...props\n}: React.ComponentProps<\"textarea\">) => {\n\treturn (\n\t\t<div className={cn(\"relative inline-flex w-full\", className)}>\n\t\t\t<textarea\n\t\t\t\tdata-slot=\"textarea\"\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full! rounded-none border bg-transparent px-3 py-2 text-base shadow-xs ring-0 transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n\t\t\t\t\tclassName,\n\t\t\t\t)}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t\t<Border />\n\t\t</div>\n\t);\n};\n\nexport { Textarea };\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;AAEA,MAAM,WAAW,CAAC,EACjB,SAAS,EACT,GAAG,OAC+B;IAClC,qBACC,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,+BAA+B;;0BACjD,8OAAC;gBACA,aAAU;gBACV,WAAW,IAAA,kHAAE,EACZ,idACA;gBAEA,GAAG,KAAK;;;;;;0BAEV,8OAAC,qIAAM;;;;;;;;;;;AAGV","debugId":null}},
    {"offset": {"line": 524, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/components/friends/chat.tsx"],"sourcesContent":["\"use client\";\n\nimport type { User } from \"better-auth\";\nimport { Send } from \"lucide-react\";\nimport React, { useEffect, useRef } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"../ui/button\";\nimport { Input } from \"../ui/input\";\nimport { Textarea } from \"../ui/textarea\";\nimport type { FriendData } from \"./friends-provider\";\nimport { useMessages } from \"./message-provider\";\n\nexport default ({\n\tuser,\n\tfriends,\n\tclassName,\n}: {\n\tuser: User;\n\tfriends: { id: FriendData[\"id\"]; name: FriendData[\"name\"] }[];\n\tclassName?: string;\n}) => {\n\tconst { messages, sendMessage } = useMessages();\n\tconst [text, setText] = React.useState(\"\");\n\tconst textareaRef = useRef<HTMLTextAreaElement | null>(null);\n\n\tconst data = messages.filter(\n\t\t(m) =>\n\t\t\tm.users.includes(user.id) &&\n\t\t\tm.users.every(\n\t\t\t\t(uid) => uid === user.id || friends.map((f) => f.id).includes(uid),\n\t\t\t),\n\t);\n\n\tuseEffect(() => {\n\t\tif (textareaRef.current)\n\t\t\ttextareaRef.current.scrollTop = textareaRef.current.scrollHeight;\n\t}, []);\n\n\treturn (\n\t\t<section className={cn(\"flex w-full flex-col gap-4\", className)}>\n\t\t\t<Textarea\n\t\t\t\tref={textareaRef}\n\t\t\t\tclassName=\"max-h-52 min-h-32 resize-y\"\n\t\t\t\tdisabled\n\t\t\t\treadOnly\n\t\t\t\tvalue={data\n\t\t\t\t\t.map((m) => `${m.data.sender.name}: ${m.data.text}`)\n\t\t\t\t\t.join(\"\\n\")}\n\t\t\t/>\n\t\t\t<div className=\"flex flex-wrap gap-4\">\n\t\t\t\t<Input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Type a message...\"\n\t\t\t\t\tvalue={text}\n\t\t\t\t\tonChange={(e) => setText(e.target.value)}\n\t\t\t\t\tclassName=\"min-w-24 grow\"\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={!text}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (!text) return;\n\t\t\t\t\t\tsendMessage({\n\t\t\t\t\t\t\tsender: { id: user.id, name: user.name },\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t\tusers: [user.id, ...friends.map((f) => f.id)],\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetText(\"\");\n\t\t\t\t\t}}\n\t\t\t\t\tclassName=\"w-auto grow-0\"\n\t\t\t\t>\n\t\t\t\t\t<Send />\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AAVA;;;;;;;;;uCAYe,CAAC,EACf,IAAI,EACJ,OAAO,EACP,SAAS,EAKT;IACA,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,GAAG,IAAA,4JAAW;IAC7C,MAAM,CAAC,MAAM,QAAQ,GAAG,gNAAK,CAAC,QAAQ,CAAC;IACvC,MAAM,cAAc,IAAA,+MAAM,EAA6B;IAEvD,MAAM,OAAO,SAAS,MAAM,CAC3B,CAAC,IACA,EAAE,KAAK,CAAC,QAAQ,CAAC,KAAK,EAAE,KACxB,EAAE,KAAK,CAAC,KAAK,CACZ,CAAC,MAAQ,QAAQ,KAAK,EAAE,IAAI,QAAQ,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE,EAAE,QAAQ,CAAC;IAIjE,IAAA,kNAAS,EAAC;QACT,IAAI,YAAY,OAAO,EACtB,YAAY,OAAO,CAAC,SAAS,GAAG,YAAY,OAAO,CAAC,YAAY;IAClE,GAAG,EAAE;IAEL,qBACC,8OAAC;QAAQ,WAAW,IAAA,kHAAE,EAAC,8BAA8B;;0BACpD,8OAAC,yIAAQ;gBACR,KAAK;gBACL,WAAU;gBACV,QAAQ;gBACR,QAAQ;gBACR,OAAO,KACL,GAAG,CAAC,CAAC,IAAM,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE,EAClD,IAAI,CAAC;;;;;;0BAER,8OAAC;gBAAI,WAAU;;kCACd,8OAAC,mIAAK;wBACL,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wBACvC,WAAU;;;;;;kCAEX,8OAAC,qIAAM;wBACN,UAAU,CAAC;wBACX,SAAS;4BACR,IAAI,CAAC,MAAM;4BACX,YAAY;gCACX,QAAQ;oCAAE,IAAI,KAAK,EAAE;oCAAE,MAAM,KAAK,IAAI;gCAAC;gCACvC;gCACA,OAAO;oCAAC,KAAK,EAAE;uCAAK,QAAQ,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE;iCAAE;4BAC9C;4BACA,QAAQ;wBACT;wBACA,WAAU;kCAEV,cAAA,8OAAC,0MAAI;;;;;;;;;;;;;;;;;;;;;;AAKV","debugId":null}},
    {"offset": {"line": 626, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/components/friends/friends.tsx"],"sourcesContent":["\"use client\";\n\nimport type { User } from \"better-auth\";\nimport { LucideMessageCircle, MessageCircleOff, Trash } from \"lucide-react\";\nimport React from \"react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"../ui/avatar\";\nimport { Button } from \"../ui/button\";\nimport Dialog from \"../ui/dialog\";\nimport Chat from \"./chat\";\nimport { useFriends } from \"./friends-provider\";\n\nexport default ({ user }: { user: User }) => {\n\tconst [openDialog, setOpenDialog] = React.useState<Record<string, boolean>>(\n\t\t{},\n\t);\n\tconst [showChat, setShowChat] = React.useState<Record<string, boolean>>({});\n\tconst { friends, loading, denyRequest } = useFriends();\n\n\tconst handleDialogChange = (id: string, value: boolean) => {\n\t\tsetOpenDialog((prev) => ({ ...prev, [id]: value }));\n\t\tif (!value) {\n\t\t\t// Reset chat view when dialog closes\n\t\t\tsetShowChat((prev) => ({ ...prev, [id]: false }));\n\t\t}\n\t};\n\n\tconst handleChatToggle = (id: string) => {\n\t\tsetShowChat((prev) => ({ ...prev, [id]: !prev[id] }));\n\t};\n\n\tif (loading)\n\t\treturn (\n\t\t\t<div className=\"text-muted-foreground text-center\">\n\t\t\t\tLoading friends...\n\t\t\t</div>\n\t\t);\n\tif (friends.length === 0)\n\t\treturn (\n\t\t\t<div className=\"text-muted-foreground text-center\">\n\t\t\t\tNo friends yet. Add some friends to get started!\n\t\t\t</div>\n\t\t);\n\n\treturn (\n\t\t<ul className=\"flex w-full flex-col gap-6\">\n\t\t\t{friends.map((f) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\tkey={f.id}\n\t\t\t\t\t\topen={openDialog[f.id]}\n\t\t\t\t\t\tonOpenChange={(value) => handleDialogChange(f.id, value)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Dialog.Trigger asChild>\n\t\t\t\t\t\t\t<Button variant=\"default\" size={\"lg\"} className=\"w-full\">\n\t\t\t\t\t\t\t\t<Avatar>\n\t\t\t\t\t\t\t\t\t<AvatarImage src={f.image || undefined} />\n\t\t\t\t\t\t\t\t\t<AvatarFallback>\n\t\t\t\t\t\t\t\t\t\t{f.name?.charAt(0).toUpperCase() || \"?\"}\n\t\t\t\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t<span className=\"ml-2 truncate text-lg font-medium\">\n\t\t\t\t\t\t\t\t\t{f.name}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Dialog.Trigger>\n\t\t\t\t\t\t<Dialog.Content className=\"sm:max-w-[500px]\">\n\t\t\t\t\t\t\t<Dialog.Header>\n\t\t\t\t\t\t\t\t<Dialog.Title>{f.name}</Dialog.Title>\n\t\t\t\t\t\t\t</Dialog.Header>\n\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={`flex w-full flex-row flex-wrap items-center justify-start gap-4 ${showChat[f.id] ? \"hidden\" : \"\"}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Avatar>\n\t\t\t\t\t\t\t\t\t<AvatarImage src={f.image || undefined} />\n\t\t\t\t\t\t\t\t\t<AvatarFallback>\n\t\t\t\t\t\t\t\t\t\t{f.name?.charAt(0).toUpperCase() || \"?\"}\n\t\t\t\t\t\t\t\t\t</AvatarFallback>\n\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t<div className=\"w-auto overflow-hidden\">\n\t\t\t\t\t\t\t\t\t<div className=\"xs:min-w-[60px] min-w-[50px] truncate text-sm font-semibold select-none\">\n\t\t\t\t\t\t\t\t\t\tName:\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclassName={`xs:text-sm xs:w-auto ml-1 w-full truncate text-xs font-medium wrap-break-word select-all`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{f.name}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"xs:min-w-[60px] min-w-[50px] text-sm font-semibold select-none\">\n\t\t\t\t\t\t\t\t\t\tEmail:\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclassName={`xs:text-sm xs:w-auto ml-1 w-full truncate text-xs font-medium wrap-break-word select-all`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{f.email}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"xs:min-w-[60px] min-w-[50px] text-sm font-semibold select-none\">\n\t\t\t\t\t\t\t\t\t\tBio:\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclassName={`xs:text-sm xs:w-auto ml-1 w-full text-xs font-medium wrap-break-word select-all ${f.bio?.length === 0 ? \"text-muted-foreground\" : \"\"}`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{f.bio?.length === 0 ? \"User has no bio\" : f.bio}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Chat\n\t\t\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\t\t\tfriends={[f]}\n\t\t\t\t\t\t\t\tclassName={showChat[f.id] ? \"\" : \"hidden\"}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div className=\"grid w-full grid-cols-[repeat(auto-fill,minmax(36px,1fr))] gap-6\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\t\t\tonClick={() => handleChatToggle(f.id)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{showChat[f.id] ? (\n\t\t\t\t\t\t\t\t\t\t<MessageCircleOff />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<LucideMessageCircle />\n\t\t\t\t\t\t\t\t\t)}{\" \"}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\t\t\tvariant={\"destructive\"}\n\t\t\t\t\t\t\t\t\tonClick={() => denyRequest(f.id)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Trash />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Dialog.Content>\n\t\t\t\t\t</Dialog>\n\t\t\t\t);\n\t\t\t})}\n\t\t</ul>\n\t);\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 932, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/components/friends/getId.tsx"],"sourcesContent":["\"use client\";\n\nimport type { User } from \"better-auth\";\nimport { toast } from \"../layout/toast\";\nimport { Button } from \"../ui/button\";\n\nexport default ({ user }: { user: User }) => {\n\treturn (\n\t\t<Button\n\t\t\tonClick={async () => {\n\t\t\t\tawait navigator.clipboard.writeText(user.id);\n\t\t\t\ttoast(\"User id was copied to clipboard\");\n\t\t\t}}\n\t\t>\n\t\t\tCopy ID\n\t\t</Button>\n\t);\n};\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;uCAMe,CAAC,EAAE,IAAI,EAAkB;IACvC,qBACC,8OAAC,qIAAM;QACN,SAAS;YACR,MAAM,UAAU,SAAS,CAAC,SAAS,CAAC,KAAK,EAAE;YAC3C,IAAA,uIAAK,EAAC;QACP;kBACA;;;;;;AAIH","debugId":null}},
    {"offset": {"line": 960, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/components/ui/popover.tsx"],"sourcesContent":["\"use client\";\n\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\";\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Border } from \"./border\";\n\nconst Context = React.createContext<{\n\ttriggerWidth: number | null;\n\tsetTriggerWidth: (width: number) => void;\n}>({ triggerWidth: null, setTriggerWidth: () => {} });\n\nconst Body = ({\n\tchildren,\n\t...props\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) => {\n\tconst [triggerWidth, setTriggerWidth] = React.useState<number | null>(null);\n\treturn (\n\t\t<Context.Provider value={{ triggerWidth, setTriggerWidth }}>\n\t\t\t<PopoverPrimitive.Root data-slot=\"popover\" {...props}>\n\t\t\t\t{children}\n\t\t\t</PopoverPrimitive.Root>\n\t\t</Context.Provider>\n\t);\n};\n\nconst Trigger = React.forwardRef<\n\tReact.ComponentRef<typeof PopoverPrimitive.Trigger>,\n\tReact.ComponentProps<typeof PopoverPrimitive.Trigger>\n>(({ ...props }, ref) => {\n\tconst { setTriggerWidth } = React.useContext(Context);\n\tconst triggerRef = React.useRef<HTMLButtonElement>(null);\n\tReact.useEffect(() => {\n\t\tconst updateWidth = () => {\n\t\t\tif (triggerRef.current) setTriggerWidth(triggerRef.current.offsetWidth);\n\t\t};\n\t\tupdateWidth();\n\t\tconst resizeObserver = new ResizeObserver(updateWidth);\n\t\tif (triggerRef.current) resizeObserver.observe(triggerRef.current);\n\t\treturn () => {\n\t\t\tresizeObserver.disconnect();\n\t\t};\n\t}, [setTriggerWidth]);\n\n\treturn (\n\t\t<PopoverPrimitive.Trigger\n\t\t\tref={(node) => {\n\t\t\t\ttriggerRef.current = node;\n\t\t\t\tif (typeof ref === \"function\") {\n\t\t\t\t\tref(node);\n\t\t\t\t} else if (ref) {\n\t\t\t\t\tref.current = node;\n\t\t\t\t}\n\t\t\t}}\n\t\t\tdata-slot=\"popover-trigger\"\n\t\t\t{...props}\n\t\t/>\n\t);\n});\n\nconst Content = ({\n\tclassName,\n\talign = \"center\",\n\tsideOffset = 4,\n\tchildren,\n\tstyle,\n\t...props\n}: React.ComponentProps<typeof PopoverPrimitive.Content>) => {\n\tconst { triggerWidth } = React.useContext(Context);\n\n\treturn (\n\t\t<PopoverPrimitive.Portal>\n\t\t\t<PopoverPrimitive.Content\n\t\t\t\tdata-slot=\"popover-content\"\n\t\t\t\talign={align}\n\t\t\t\tsideOffset={sideOffset}\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: triggerWidth ? `${triggerWidth}px` : undefined,\n\t\t\t\t\t...style,\n\t\t\t\t}}\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"bg-card text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 origin-(--radix-popover-content-transform-origin) rounded-none p-6 shadow-md outline-hidden\",\n\t\t\t\t\tclassName,\n\t\t\t\t)}\n\t\t\t\t{...props}\n\t\t\t>\n\t\t\t\t{children}\n\n\t\t\t\t<Border />\n\t\t\t</PopoverPrimitive.Content>\n\t\t</PopoverPrimitive.Portal>\n\t);\n};\n\nconst Anchor = ({\n\t...props\n}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) => {\n\treturn <PopoverPrimitive.Anchor data-slot=\"popover-anchor\" {...props} />;\n};\n\nconst Popover = Object.assign(Body, { Content, Trigger, Context, Anchor });\n\nexport default Popover;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,wBAAU,sNAAmB,CAGhC;IAAE,cAAc;IAAM,iBAAiB,KAAO;AAAE;AAEnD,MAAM,OAAO,CAAC,EACb,QAAQ,EACR,GAAG,OACiD;IACpD,MAAM,CAAC,cAAc,gBAAgB,GAAG,iNAAc,CAAgB;IACtE,qBACC,8OAAC,QAAQ,QAAQ;QAAC,OAAO;YAAE;YAAc;QAAgB;kBACxD,cAAA,8OAAC,2KAAqB;YAAC,aAAU;YAAW,GAAG,KAAK;sBAClD;;;;;;;;;;;AAIL;AAEA,MAAM,wBAAU,mNAAgB,CAG9B,CAAC,EAAE,GAAG,OAAO,EAAE;IAChB,MAAM,EAAE,eAAe,EAAE,GAAG,mNAAgB,CAAC;IAC7C,MAAM,aAAa,+MAAY,CAAoB;IACnD,kNAAe,CAAC;QACf,MAAM,cAAc;YACnB,IAAI,WAAW,OAAO,EAAE,gBAAgB,WAAW,OAAO,CAAC,WAAW;QACvE;QACA;QACA,MAAM,iBAAiB,IAAI,eAAe;QAC1C,IAAI,WAAW,OAAO,EAAE,eAAe,OAAO,CAAC,WAAW,OAAO;QACjE,OAAO;YACN,eAAe,UAAU;QAC1B;IACD,GAAG;QAAC;KAAgB;IAEpB,qBACC,8OAAC,8KAAwB;QACxB,KAAK,CAAC;YACL,WAAW,OAAO,GAAG;YACrB,IAAI,OAAO,QAAQ,YAAY;gBAC9B,IAAI;YACL,OAAO,IAAI,KAAK;gBACf,IAAI,OAAO,GAAG;YACf;QACD;QACA,aAAU;QACT,GAAG,KAAK;;;;;;AAGZ;AAEA,MAAM,UAAU,CAAC,EAChB,SAAS,EACT,QAAQ,QAAQ,EAChB,aAAa,CAAC,EACd,QAAQ,EACR,KAAK,EACL,GAAG,OACoD;IACvD,MAAM,EAAE,YAAY,EAAE,GAAG,mNAAgB,CAAC;IAE1C,qBACC,8OAAC,6KAAuB;kBACvB,cAAA,8OAAC,8KAAwB;YACxB,aAAU;YACV,OAAO;YACP,YAAY;YACZ,OAAO;gBACN,OAAO,eAAe,GAAG,aAAa,EAAE,CAAC,GAAG;gBAC5C,GAAG,KAAK;YACT;YACA,WAAW,IAAA,kHAAE,EACZ,qdACA;YAEA,GAAG,KAAK;;gBAER;8BAED,8OAAC,qIAAM;;;;;;;;;;;;;;;;AAIX;AAEA,MAAM,SAAS,CAAC,EACf,GAAG,OACmD;IACtD,qBAAO,8OAAC,6KAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACrE;AAEA,MAAM,UAAU,OAAO,MAAM,CAAC,MAAM;IAAE;IAAS;IAAS;IAAS;AAAO;uCAEzD","debugId":null}},
    {"offset": {"line": 1087, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/components/friends/requests.tsx"],"sourcesContent":["\"use client\";\n\nimport type { User } from \"better-auth\";\nimport { Check, Trash, X } from \"lucide-react\";\nimport { Button } from \"../ui/button\";\nimport Popover from \"../ui/popover\";\nimport { useFriends } from \"./friends-provider\";\n\nexport default ({ user, forMe }: { user: User; forMe: boolean }) => {\n\tconst { loading, requestsForMe, requestsFromMe, acceptRequest, denyRequest } =\n\t\tuseFriends();\n\tif (loading)\n\t\treturn <div className=\"text-muted-foreground text-center\">Loading...</div>;\n\tconst requests = forMe ? requestsForMe : requestsFromMe;\n\tif (requests.length === 0)\n\t\treturn (\n\t\t\t<div className=\"text-muted-foreground text-center\">\n\t\t\t\t{forMe ? \"No pending requests\" : \"No sent requests\"}\n\t\t\t</div>\n\t\t);\n\treturn (\n\t\t<div className=\"flex w-full flex-col gap-6\">\n\t\t\t{requests.map((f) => (\n\t\t\t\t<Popover key={f.id}>\n\t\t\t\t\t<Popover.Trigger asChild>\n\t\t\t\t\t\t<Button variant=\"default\" size={\"lg\"}>\n\t\t\t\t\t\t\t<span className=\"ml-2 truncate text-lg font-medium\">\n\t\t\t\t\t\t\t\t{f.name}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Popover.Trigger>\n\t\t\t\t\t<Popover.Content\n\t\t\t\t\t\talign=\"center\"\n\t\t\t\t\t\tsideOffset={16}\n\t\t\t\t\t\tside=\"bottom\"\n\t\t\t\t\t\tclassName=\"flex w-full flex-row gap-6\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{forMe && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\tacceptRequest(f.id);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Check />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant={\"destructive\"}\n\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tif (forMe) await denyRequest(f.id);\n\t\t\t\t\t\t\t\telse await denyRequest(user.id);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{forMe ? <X /> : <Trash />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Popover.Content>\n\t\t\t\t</Popover>\n\t\t\t))}\n\t\t</div>\n\t);\n};\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;AACA;AACA;AACA;AANA;;;;;;uCAQe,CAAC,EAAE,IAAI,EAAE,KAAK,EAAkC;IAC9D,MAAM,EAAE,OAAO,EAAE,aAAa,EAAE,cAAc,EAAE,aAAa,EAAE,WAAW,EAAE,GAC3E,IAAA,2JAAU;IACX,IAAI,SACH,qBAAO,8OAAC;QAAI,WAAU;kBAAoC;;;;;;IAC3D,MAAM,WAAW,QAAQ,gBAAgB;IACzC,IAAI,SAAS,MAAM,KAAK,GACvB,qBACC,8OAAC;QAAI,WAAU;kBACb,QAAQ,wBAAwB;;;;;;IAGpC,qBACC,8OAAC;QAAI,WAAU;kBACb,SAAS,GAAG,CAAC,CAAC,kBACd,8OAAC,uIAAO;;kCACP,8OAAC,uIAAO,CAAC,OAAO;wBAAC,OAAO;kCACvB,cAAA,8OAAC,qIAAM;4BAAC,SAAQ;4BAAU,MAAM;sCAC/B,cAAA,8OAAC;gCAAK,WAAU;0CACd,EAAE,IAAI;;;;;;;;;;;;;;;;kCAIV,8OAAC,uIAAO,CAAC,OAAO;wBACf,OAAM;wBACN,YAAY;wBACZ,MAAK;wBACL,WAAU;;4BAET,uBACA,8OAAC,qIAAM;gCACN,WAAU;gCACV,SAAS;oCACR,cAAc,EAAE,EAAE;gCACnB;0CAEA,cAAA,8OAAC,6MAAK;;;;;;;;;;0CAGR,8OAAC,qIAAM;gCACN,SAAS;gCACT,WAAU;gCACV,SAAS;oCACR,IAAI,OAAO,MAAM,YAAY,EAAE,EAAE;yCAC5B,MAAM,YAAY,KAAK,EAAE;gCAC/B;0CAEC,sBAAQ,8OAAC,iMAAC;;;;6FAAM,8OAAC,6MAAK;;;;;;;;;;;;;;;;;eAhCZ,EAAE,EAAE;;;;;;;;;;AAuCtB","debugId":null}},
    {"offset": {"line": 1214, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/components/friends/friends-client.tsx"],"sourcesContent":["\"use client\";\nimport type { User } from \"better-auth\";\nimport { Button } from \"../ui/button\";\nimport AddFriend from \"./addFriend\";\nimport Friends from \"./friends\";\nimport { useFriends } from \"./friends-provider\";\nimport GetId from \"./getId\";\nimport Requests from \"./requests\";\n\nexport default ({ user }: { user: User }) => {\n\tconst { refresh } = useFriends();\n\n\treturn (\n\t\t<div className=\"grid grid-cols-1 gap-6 md:grid-cols-3\">\n\t\t\t<GetId user={user} />\n\t\t\t<AddFriend user={user} />\n\t\t\t<Button onClick={refresh}>Refresh</Button>\n\t\t\t<section>\n\t\t\t\t<h1 className=\"mb-2 text-center text-xl font-semibold\">Friends</h1>\n\t\t\t\t<Friends user={user} />\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<h1 className=\"mb-2 text-center text-xl font-semibold\">My requests</h1>\n\t\t\t\t<Requests user={user} forMe={true} />\n\t\t\t</section>\n\t\t\t<section>\n\t\t\t\t<h1 className=\"mb-2 text-center text-xl font-semibold\">\n\t\t\t\t\tPending requests\n\t\t\t\t</h1>\n\t\t\t\t<Requests user={user} forMe={false} />\n\t\t\t</section>\n\t\t</div>\n\t);\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;uCASe,CAAC,EAAE,IAAI,EAAkB;IACvC,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,2JAAU;IAE9B,qBACC,8OAAC;QAAI,WAAU;;0BACd,8OAAC,0IAAK;gBAAC,MAAM;;;;;;0BACb,8OAAC,8IAAS;gBAAC,MAAM;;;;;;0BACjB,8OAAC,qIAAM;gBAAC,SAAS;0BAAS;;;;;;0BAC1B,8OAAC;;kCACA,8OAAC;wBAAG,WAAU;kCAAyC;;;;;;kCACvD,8OAAC,4IAAO;wBAAC,MAAM;;;;;;;;;;;;0BAEhB,8OAAC;;kCACA,8OAAC;wBAAG,WAAU;kCAAyC;;;;;;kCACvD,8OAAC,6IAAQ;wBAAC,MAAM;wBAAM,OAAO;;;;;;;;;;;;0BAE9B,8OAAC;;kCACA,8OAAC;wBAAG,WAAU;kCAAyC;;;;;;kCAGvD,8OAAC,6IAAQ;wBAAC,MAAM;wBAAM,OAAO;;;;;;;;;;;;;;;;;;AAIjC","debugId":null}}]
}