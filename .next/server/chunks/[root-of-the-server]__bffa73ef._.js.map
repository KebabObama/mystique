{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/db/index.ts"],"sourcesContent":["import { drizzle } from \"drizzle-orm/node-postgres\";\n\nexport const db = drizzle({\n\tconnection: {\n\t\thost: process.env.DATABASE_HOST as string,\n\t\tport: Number(process.env.DATABASE_PORT as string),\n\t\tdatabase: process.env.DATABASE_DB as string,\n\t\tuser: process.env.DATABASE_USER as string,\n\t\tpassword: process.env.DATABASE_PASSWORD as string,\n\t\tssl: false,\n\t},\n});\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAEO,MAAM,KAAK,IAAA,uKAAO,EAAC;IACzB,YAAY;QACX,MAAM,QAAQ,GAAG,CAAC,aAAa;QAC/B,MAAM,OAAO,QAAQ,GAAG,CAAC,aAAa;QACtC,UAAU,QAAQ,GAAG,CAAC,WAAW;QACjC,MAAM,QAAQ,GAAG,CAAC,aAAa;QAC/B,UAAU,QAAQ,GAAG,CAAC,iBAAiB;QACvC,KAAK;IACN;AACD","debugId":null}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/db/schema.ts"],"sourcesContent":["import {\n\tboolean,\n\tinteger,\n\tpgTable,\n\ttext,\n\ttimestamp,\n\tuuid,\n} from \"drizzle-orm/pg-core\";\n\nexport const user = pgTable(\"user\", {\n\tid: uuid(\"id\").unique().defaultRandom().notNull(),\n\tname: text(\"name\").notNull(),\n\temail: text(\"email\").notNull().unique(),\n\temailVerified: boolean(\"email_verified\").default(false).notNull(),\n\timage: text(\"image\"),\n\tcreatedAt: timestamp(\"created_at\").defaultNow().notNull(),\n\tupdatedAt: timestamp(\"updated_at\")\n\t\t.$defaultFn(() => new Date())\n\t\t.$onUpdate(() => new Date())\n\t\t.notNull(),\n});\n\nexport const account = pgTable(\"account\", {\n\tid: uuid(\"id\").unique().defaultRandom().notNull(),\n\taccountId: text(\"account_id\").notNull(),\n\tproviderId: text(\"provider_id\").notNull(),\n\tuserId: uuid(\"user_id\")\n\t\t.notNull()\n\t\t.references(() => user.id, { onDelete: \"cascade\" }),\n\taccessToken: text(\"access_token\"),\n\trefreshToken: text(\"refresh_token\"),\n\tidToken: text(\"id_token\"),\n\taccessTokenExpiresAt: timestamp(\"access_token_expires_at\"),\n\trefreshTokenExpiresAt: timestamp(\"refresh_token_expires_at\"),\n\tscope: text(\"scope\"),\n\tpassword: text(\"password\"),\n\tcreatedAt: timestamp(\"created_at\").defaultNow().notNull(),\n\tupdatedAt: timestamp(\"updated_at\")\n\t\t.$onUpdate(() => new Date())\n\t\t.notNull(),\n});\n\nexport const verification = pgTable(\"verification\", {\n\tid: uuid(\"id\").unique().defaultRandom().notNull(),\n\tidentifier: text(\"identifier\").notNull(),\n\tvalue: text(\"value\").notNull(),\n\texpiresAt: timestamp(\"expires_at\").notNull(),\n\tcreatedAt: timestamp(\"created_at\").defaultNow().notNull(),\n\tupdatedAt: timestamp(\"updated_at\")\n\t\t.$defaultFn(() => new Date())\n\t\t.$onUpdate(() => new Date())\n\t\t.notNull(),\n});\n\nexport const friendship = pgTable(\"friendship\", {\n\tid: uuid(\"id\").unique().defaultRandom().notNull(),\n\tsender: uuid(\"sender\")\n\t\t.notNull()\n\t\t.references(() => user.id, { onDelete: \"cascade\" }),\n\treceiver: uuid(\"receiver\")\n\t\t.notNull()\n\t\t.references(() => user.id, { onDelete: \"cascade\" }),\n\tstate: integer(\"state\").notNull().default(0),\n});\n\nexport const message = pgTable(\"message\", {\n\tid: uuid(\"id\").unique().defaultRandom().notNull(),\n\ttext: text(\"text\").notNull(),\n\tsender: uuid(\"sender\")\n\t\t.notNull()\n\t\t.references(() => user.id),\n\treceivers: uuid(\"receivers\").array().notNull(),\n\tcreatedAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AASO,MAAM,OAAO,IAAA,gKAAO,EAAC,QAAQ;IACnC,IAAI,IAAA,uKAAI,EAAC,MAAM,MAAM,GAAG,aAAa,GAAG,OAAO;IAC/C,MAAM,IAAA,uKAAI,EAAC,QAAQ,OAAO;IAC1B,OAAO,IAAA,uKAAI,EAAC,SAAS,OAAO,GAAG,MAAM;IACrC,eAAe,IAAA,6KAAO,EAAC,kBAAkB,OAAO,CAAC,OAAO,OAAO;IAC/D,OAAO,IAAA,uKAAI,EAAC;IACZ,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,iLAAS,EAAC,cACnB,UAAU,CAAC,IAAM,IAAI,QACrB,SAAS,CAAC,IAAM,IAAI,QACpB,OAAO;AACV;AAEO,MAAM,UAAU,IAAA,gKAAO,EAAC,WAAW;IACzC,IAAI,IAAA,uKAAI,EAAC,MAAM,MAAM,GAAG,aAAa,GAAG,OAAO;IAC/C,WAAW,IAAA,uKAAI,EAAC,cAAc,OAAO;IACrC,YAAY,IAAA,uKAAI,EAAC,eAAe,OAAO;IACvC,QAAQ,IAAA,uKAAI,EAAC,WACX,OAAO,GACP,UAAU,CAAC,IAAM,KAAK,EAAE,EAAE;QAAE,UAAU;IAAU;IAClD,aAAa,IAAA,uKAAI,EAAC;IAClB,cAAc,IAAA,uKAAI,EAAC;IACnB,SAAS,IAAA,uKAAI,EAAC;IACd,sBAAsB,IAAA,iLAAS,EAAC;IAChC,uBAAuB,IAAA,iLAAS,EAAC;IACjC,OAAO,IAAA,uKAAI,EAAC;IACZ,UAAU,IAAA,uKAAI,EAAC;IACf,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,iLAAS,EAAC,cACnB,SAAS,CAAC,IAAM,IAAI,QACpB,OAAO;AACV;AAEO,MAAM,eAAe,IAAA,gKAAO,EAAC,gBAAgB;IACnD,IAAI,IAAA,uKAAI,EAAC,MAAM,MAAM,GAAG,aAAa,GAAG,OAAO;IAC/C,YAAY,IAAA,uKAAI,EAAC,cAAc,OAAO;IACtC,OAAO,IAAA,uKAAI,EAAC,SAAS,OAAO;IAC5B,WAAW,IAAA,iLAAS,EAAC,cAAc,OAAO;IAC1C,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;IACvD,WAAW,IAAA,iLAAS,EAAC,cACnB,UAAU,CAAC,IAAM,IAAI,QACrB,SAAS,CAAC,IAAM,IAAI,QACpB,OAAO;AACV;AAEO,MAAM,aAAa,IAAA,gKAAO,EAAC,cAAc;IAC/C,IAAI,IAAA,uKAAI,EAAC,MAAM,MAAM,GAAG,aAAa,GAAG,OAAO;IAC/C,QAAQ,IAAA,uKAAI,EAAC,UACX,OAAO,GACP,UAAU,CAAC,IAAM,KAAK,EAAE,EAAE;QAAE,UAAU;IAAU;IAClD,UAAU,IAAA,uKAAI,EAAC,YACb,OAAO,GACP,UAAU,CAAC,IAAM,KAAK,EAAE,EAAE;QAAE,UAAU;IAAU;IAClD,OAAO,IAAA,6KAAO,EAAC,SAAS,OAAO,GAAG,OAAO,CAAC;AAC3C;AAEO,MAAM,UAAU,IAAA,gKAAO,EAAC,WAAW;IACzC,IAAI,IAAA,uKAAI,EAAC,MAAM,MAAM,GAAG,aAAa,GAAG,OAAO;IAC/C,MAAM,IAAA,uKAAI,EAAC,QAAQ,OAAO;IAC1B,QAAQ,IAAA,uKAAI,EAAC,UACX,OAAO,GACP,UAAU,CAAC,IAAM,KAAK,EAAE;IAC1B,WAAW,IAAA,uKAAI,EAAC,aAAa,KAAK,GAAG,OAAO;IAC5C,WAAW,IAAA,iLAAS,EAAC,cAAc,UAAU,GAAG,OAAO;AACxD","debugId":null}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/lib/cache.ts"],"sourcesContent":["import { createClient } from \"redis\";\n\nconst cache = createClient({\n\tsocket: {\n\t\thost: process.env.CACHE_HOST as string,\n\t\tport: Number(process.env.CACHE_PORT as string),\n\t},\n});\nawait cache.connect();\nexport { cache };\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,QAAQ,IAAA,sJAAY,EAAC;IAC1B,QAAQ;QACP,MAAM,QAAQ,GAAG,CAAC,UAAU;QAC5B,MAAM,OAAO,QAAQ,GAAG,CAAC,UAAU;IACpC;AACD;AACA,MAAM,MAAM,OAAO","debugId":null}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/lib/auth.ts"],"sourcesContent":["import { betterAuth } from \"better-auth\";\nimport { drizzleAdapter } from \"better-auth/adapters/drizzle\";\nimport { db } from \"@/db\";\nimport * as schema from \"@/db/schema\";\nimport { cache } from \"./cache\";\n\nexport const auth = betterAuth({\n\tdatabase: drizzleAdapter(db, { provider: \"pg\", schema: schema }),\n\tadvanced: { database: { generateId: false, useNumberId: false } },\n\tsecondaryStorage: {\n\t\tget: async (key) => {\n\t\t\treturn await cache.get(key);\n\t\t},\n\t\tset: async (key, value) => {\n\t\t\tawait cache.set(key, value);\n\t\t},\n\t\tdelete: async (key) => {\n\t\t\tawait cache.del(key);\n\t\t},\n\t},\n\tsecret: process.env.BETTER_AUTH_SECRET as string,\n\tbaseURL: process.env.BETTER_AUTH_URL as string,\n\temailAndPassword: { enabled: true },\n\tsession: {\n\t\texpiresIn: 60 * 60 * 24 * 7,\n\t\tupdateAge: 60 * 60 * 24,\n\t\tcookieCache: { enabled: true, maxAge: 60 * 5 },\n\t},\n\tsocialProviders: {\n\t\tgithub: {\n\t\t\tclientId: process.env.GITHUB_CLIENT_ID as string,\n\t\t\tclientSecret: process.env.GITHUB_CLIENT_SECRET as string,\n\t\t},\n\t\tgoogle: {\n\t\t\tclientId: process.env.GOOGLE_CLIENT_ID as string,\n\t\t\tclientSecret: process.env.GOOGLE_CLIENT_SECRET as string,\n\t\t},\n\t},\n});\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAEO,MAAM,OAAO,IAAA,gOAAU,EAAC;IAC9B,UAAU,IAAA,oNAAc,EAAC,iHAAE,EAAE;QAAE,UAAU;QAAM,QAAQ;IAAO;IAC9D,UAAU;QAAE,UAAU;YAAE,YAAY;YAAO,aAAa;QAAM;IAAE;IAChE,kBAAkB;QACjB,KAAK,OAAO;YACX,OAAO,MAAM,qHAAK,CAAC,GAAG,CAAC;QACxB;QACA,KAAK,OAAO,KAAK;YAChB,MAAM,qHAAK,CAAC,GAAG,CAAC,KAAK;QACtB;QACA,QAAQ,OAAO;YACd,MAAM,qHAAK,CAAC,GAAG,CAAC;QACjB;IACD;IACA,QAAQ,QAAQ,GAAG,CAAC,kBAAkB;IACtC,SAAS,QAAQ,GAAG,CAAC,eAAe;IACpC,kBAAkB;QAAE,SAAS;IAAK;IAClC,SAAS;QACR,WAAW,KAAK,KAAK,KAAK;QAC1B,WAAW,KAAK,KAAK;QACrB,aAAa;YAAE,SAAS;YAAM,QAAQ,KAAK;QAAE;IAC9C;IACA,iBAAiB;QAChB,QAAQ;YACP,UAAU,QAAQ,GAAG,CAAC,gBAAgB;YACtC,cAAc,QAAQ,GAAG,CAAC,oBAAoB;QAC/C;QACA,QAAQ;YACP,UAAU,QAAQ,GAAG,CAAC,gBAAgB;YACtC,cAAc,QAAQ,GAAG,CAAC,oBAAoB;QAC/C;IACD;AACD","debugId":null}},
    {"offset": {"line": 331, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/mystique/middleware.ts"],"sourcesContent":["import { headers } from \"next/headers\";\nimport { type NextRequest, NextResponse } from \"next/server\";\nimport { auth } from \"./lib/auth\";\n\nexport const middleware = async (request: NextRequest) => {\n\tif (request.nextUrl.pathname.startsWith(\"/api/auth\"))\n\t\treturn NextResponse.next();\n\tconst session = await auth.api.getSession({ headers: await headers() });\n\tif (request.nextUrl.pathname.startsWith(\"/auth\")) {\n\t\tif (session)\n\t\t\treturn NextResponse.redirect(new URL(\"/dashboard\", request.url));\n\t\treturn NextResponse.next();\n\t}\n\tif (!session) return NextResponse.redirect(new URL(\"/auth\", request.url));\n\treturn NextResponse.next();\n};\n\nexport const config = {\n\truntime: \"nodejs\",\n\tmatcher: [\"/dashboard\", \"/auth\", \"/settings\", \"/friends\"],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;;;;;AAEO,MAAM,aAAa,OAAO;IAChC,IAAI,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,cACvC,OAAO,8IAAY,CAAC,IAAI;IACzB,MAAM,UAAU,MAAM,mHAAI,CAAC,GAAG,CAAC,UAAU,CAAC;QAAE,SAAS,MAAM,IAAA,0IAAO;IAAG;IACrE,IAAI,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU;QACjD,IAAI,SACH,OAAO,8IAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,QAAQ,GAAG;QAC/D,OAAO,8IAAY,CAAC,IAAI;IACzB;IACA,IAAI,CAAC,SAAS,OAAO,8IAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,SAAS,QAAQ,GAAG;IACvE,OAAO,8IAAY,CAAC,IAAI;AACzB;AAEO,MAAM,SAAS;IACrB,SAAS;IACT,SAAS;QAAC;QAAc;QAAS;QAAa;KAAW;AAC1D","debugId":null}}]
}