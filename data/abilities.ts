import { Game } from "@/types/game";

type AbilityInput = Omit<Game.Ability, "name" | "effects" | "size" | "range"> & {
  effects?: Partial<Record<Game.Effect, number>>;
  size?: number;
  range?: number;
};

type AbilityOutput<T extends string> = Game.Ability & {
  name: T;
  effects: Record<Game.Effect, number>;
  size: number;
  range: number;
};

const createAbilities = <T extends string>(
  map: Record<T, AbilityInput>
): Record<T, AbilityOutput<T>> => {
  return Object.entries(map).reduce((acc, [key, value]) => {
    const input = value as AbilityInput;

    const fullEffects = {} as Record<Game.Effect, number>;
    Game.KEYS.EFFECTS.forEach((effect) => {
      fullEffects[effect] = input.effects?.[effect] ?? 0;
    });

    acc[key as T] = {
      ...input,
      name: key as T,
      effects: fullEffects,
      size: input.size ?? 1,
      range: input.range ?? 1,
    } as AbilityOutput<T>;

    return acc;
  }, {} as any);
};

export const ABILITIES = createAbilities({
  // --- FIRE ---
  "firebolt": {
    variant: "direct",
    range: 10,
    effects: { burning: 1 },
    cost: 1,
    type: "mystical",
    amount: [10],
  },
  "flame throw": {
    variant: "direct",
    range: 5,
    effects: { burning: 4 },
    cost: 1,
    type: "mystical",
    amount: [8],
  },
  "flame burst": {
    variant: "aoe",
    range: 10,
    effects: { burning: 1 },
    cost: 2,
    type: "mystical",
    amount: [4, 4, 4],
  },
  "flame hand": {
    variant: "direct",
    range: 1,
    effects: { burning: 4 },
    cost: 2,
    type: "mystical",
    amount: [6],
    size: 1,
  },
  "fireball": {
    variant: "aoe",
    range: 10,
    effects: { burning: 1 },
    cost: 3,
    type: "mystical",
    amount: [4, 4, 4, 4, 4, 4],
    size: 3,
  },
  "melting touch": {
    variant: "direct",
    range: 1,
    effects: { burning: 2 },
    cost: 3,
    type: "mystical",
    amount: [6, 6, 6, 6, 6],
  },
  "eternal flame": {
    variant: "aoe",
    range: 10,
    effects: { burning: 10 },
    cost: 3,
    type: "mystical",
    amount: [4],
  },
  "flame strike": {
    variant: "aoe",
    range: 5,
    effects: { burning: 3 },
    cost: 3,
    type: "mystical",
    amount: [6, 6, 6, 8, 8],
  },
  "true flame": {
    variant: "direct",
    range: 5,
    effects: { burning: 5 },
    cost: 4,
    type: "mystical",
    amount: [10, 10, 10, 10],
  },
  "molten realm": {
    variant: "aoe",
    range: 0,
    effects: { burning: 10 },
    cost: 4,
    type: "mystical",
    amount: [],
    size: 5,
  },
  "hug of infernum": {
    variant: "direct",
    effects: { burning: 2, weakened: 2 },
    cost: 4,
    type: "mystical",
    amount: [4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4],
  },

  // --- PHYSICAL (STRENGTH/DEXTERITY THEMED) ---
  "heavy slam": {
    variant: "direct",
    range: 1,
    cost: 2,
    type: "physical",
    amount: [12, 12],
    effects: { stunned: 1, weakened: 1 },
  },
  "bleeding gash": {
    variant: "direct",
    range: 1,
    cost: 1,
    type: "physical",
    amount: [8],
    effects: { bleeding: 3 },
  },
  "whirlwind": {
    variant: "aoe",
    range: 0,
    size: 2,
    cost: 3,
    type: "physical",
    amount: [6, 6, 6],
    effects: { bleeding: 1 },
  },
  "shield bash": {
    variant: "direct",
    range: 1,
    cost: 1,
    type: "physical",
    amount: [4],
    effects: { stunned: 1, fortified: 2 },
  },
  "leg trip": {
    variant: "direct",
    range: 1,
    cost: 1,
    type: "physical",
    amount: [4],
    effects: { slowed: 2, stunned: 1 },
  },
  "precise stab": {
    variant: "direct",
    range: 1,
    cost: 2,
    type: "physical",
    amount: [10, 10],
    effects: { focused: 2 },
  },
  "battle cry": {
    variant: "aoe",
    range: 0,
    size: 4,
    cost: 2,
    type: "physical",
    amount: [],
    effects: { enraged: 3, fortified: 1 },
  },
  "poisoned dagger": {
    variant: "direct",
    range: 1,
    cost: 1,
    type: "physical",
    amount: [4],
    effects: { toxin: 4 },
  },
  "crushing blow": {
    variant: "direct",
    range: 1,
    cost: 3,
    type: "physical",
    amount: [20, 20],
    effects: { weakened: 3 },
  },
  "volley": {
    variant: "aoe",
    range: 12,
    size: 3,
    cost: 3,
    type: "physical",
    amount: [8, 8],
    effects: { bleeding: 1 },
  },
  "vault kick": {
    variant: "direct",
    range: 2,
    cost: 2,
    type: "physical",
    amount: [6, 6],
    effects: { hastened: 2, slowed: 1 },
  },
  "bone breaker": {
    variant: "direct",
    range: 1,
    cost: 4,
    type: "physical",
    amount: [12, 12, 12],
    effects: { stunned: 2, weakened: 4 },
  },
  "intimidate": {
    variant: "aoe",
    range: 4,
    size: 2,
    cost: 1,
    type: "physical",
    amount: [],
    effects: { weakened: 2, confused: 1 },
  },
  "parry stance": {
    variant: "direct",
    range: 0,
    cost: 1,
    type: "physical",
    amount: [],
    effects: { shielded: 10, fortified: 2 },
  },
  "berserker rage": {
    variant: "direct",
    range: 0,
    cost: 2,
    type: "physical",
    amount: [],
    effects: { enraged: 8, bleeding: -2 },
  },
  "rapid fire": {
    variant: "direct",
    range: 15,
    cost: 3,
    type: "physical",
    amount: [6, 6, 6, 6],
    effects: { focused: 1 },
  },

  // --- MYSTICAL (INT/WIS/ELEMENTAL THEMED) ---
  "frost bolt": {
    variant: "direct",
    range: 10,
    cost: 1,
    type: "mystical",
    amount: [8],
    effects: { frostbite: 2, slowed: 1 },
  },
  "arcane spark": {
    variant: "direct",
    range: 12,
    cost: 1,
    type: "mystical",
    amount: [4, 4],
    effects: { energized: 1 },
  },
  "acid splash": {
    variant: "aoe",
    range: 6,
    size: 2,
    cost: 1,
    type: "mystical",
    amount: [6],
    effects: { corroding: 3 },
  },
  "lightning strike": {
    variant: "direct",
    range: 10,
    cost: 2,
    type: "mystical",
    amount: [20],
    effects: { shocked: 3 },
  },
  "static field": {
    variant: "aoe",
    range: 5,
    size: 3,
    cost: 2,
    type: "mystical",
    amount: [4],
    effects: { shocked: 2, stunned: 1 },
  },
  "mind haze": {
    variant: "direct",
    range: 8,
    cost: 2,
    type: "mystical",
    amount: [6],
    effects: { confused: 4, slowed: 2 },
  },
  "telekinetic shove": {
    variant: "direct",
    range: 6,
    cost: 1,
    type: "mystical",
    amount: [4],
    effects: { stunned: 1, slowed: 1 },
  },
  "blizzard": {
    variant: "aoe",
    range: 8,
    size: 4,
    cost: 4,
    type: "mystical",
    amount: [6, 6, 6, 6],
    effects: { frostbite: 5, slowed: 4 },
  },
  "chain lightning": {
    variant: "aoe",
    range: 10,
    size: 2,
    cost: 3,
    type: "mystical",
    amount: [12, 12],
    effects: { shocked: 4 },
  },
  "venom bolt": {
    variant: "direct",
    range: 10,
    cost: 2,
    type: "mystical",
    amount: [8],
    effects: { toxin: 6 },
  },
  "shadow step": {
    variant: "direct",
    range: 6,
    cost: 2,
    type: "mystical",
    amount: [],
    effects: { hastened: 4, fastened: 2 },
  },
  "mana surge": {
    variant: "direct",
    range: 0,
    cost: 1,
    type: "mystical",
    amount: [],
    effects: { energized: 5, focused: 2 },
  },
  "corrosive cloud": {
    variant: "aoe",
    range: 8,
    size: 3,
    cost: 3,
    type: "mystical",
    amount: [10],
    effects: { corroding: 8, toxin: 2 },
  },
  "astral gate": {
    variant: "aoe",
    range: 12,
    size: 2,
    cost: 4,
    type: "mystical",
    amount: [20, 20],
    effects: { stunned: 1, confused: 3 },
  },
  "ice shield": {
    variant: "direct",
    range: 5,
    cost: 2,
    type: "mystical",
    amount: [],
    effects: { shielded: 15, frostbite: 1 },
  },
  "entropic touch": {
    variant: "direct",
    range: 1,
    cost: 3,
    type: "mystical",
    amount: [12, 12, 12],
    effects: { weakened: 5, corroding: 5 },
  },
  "thunderclap": {
    variant: "aoe",
    range: 0,
    size: 3,
    cost: 2,
    type: "mystical",
    amount: [10],
    effects: { shocked: 2, stunned: 1 },
  },

  // --- HEALING & HOLY (WISDOM THEMED) ---
  "minor mend": {
    variant: "direct",
    range: 8,
    cost: 1,
    type: "healing",
    amount: [6],
    effects: { regenerating: 2 },
  },
  "holy flash": {
    variant: "direct",
    range: 10,
    cost: 2,
    type: "healing",
    amount: [12, 12],
    effects: { smitten: -2 },
  },
  "purifying mist": {
    variant: "aoe",
    range: 0,
    size: 3,
    cost: 2,
    type: "healing",
    amount: [8],
    effects: { toxin: -5, bleeding: -5 },
  },
  "bless": {
    variant: "direct",
    range: 10,
    cost: 1,
    type: "healing",
    amount: [],
    effects: { focused: 4, energized: 2 },
  },
  "divine shield": {
    variant: "direct",
    range: 8,
    cost: 3,
    type: "healing",
    amount: [],
    effects: { shielded: 25, fortified: 5 },
  },
  "regrowth": {
    variant: "direct",
    range: 6,
    cost: 2,
    type: "healing",
    amount: [4],
    effects: { regenerating: 8 },
  },
  "smite": {
    variant: "direct",
    range: 8,
    cost: 2,
    type: "mystical",
    amount: [10, 10],
    effects: { smitten: 5 },
  },
  "holy ground": {
    variant: "aoe",
    range: 0,
    size: 4,
    cost: 4,
    type: "healing",
    amount: [10],
    effects: { regenerating: 5, smitten: -10 },
  },
  "soothe mind": {
    variant: "direct",
    range: 8,
    cost: 1,
    type: "healing",
    amount: [],
    effects: { confused: -10, focused: 5 },
  },
  "martyr light": {
    variant: "aoe",
    range: 0,
    size: 10,
    cost: 4,
    type: "healing",
    amount: [20, 20, 20],
    effects: { energized: 10 },
  },
  "angelic haste": {
    variant: "direct",
    range: 12,
    cost: 2,
    type: "healing",
    amount: [],
    effects: { hastened: 6, fastened: 4 },
  },
  "sacred bind": {
    variant: "direct",
    range: 6,
    cost: 2,
    type: "mystical",
    amount: [8],
    effects: { stunned: 1, smitten: 3 },
  },
  "cleansing rain": {
    variant: "aoe",
    range: 8,
    size: 5,
    cost: 3,
    type: "healing",
    amount: [6, 6],
    effects: { burning: -10, corroding: -10 },
  },
  "valor aura": {
    variant: "aoe",
    range: 0,
    size: 3,
    cost: 3,
    type: "healing",
    amount: [],
    effects: { enraged: 5, fortified: 5 },
  },
  "rejuvenate": {
    variant: "direct",
    range: 6,
    cost: 3,
    type: "healing",
    amount: [20],
    effects: { regenerating: 4, energized: 4 },
  },
  "judgement": {
    variant: "direct",
    range: 12,
    cost: 4,
    type: "mystical",
    amount: [20, 20, 20, 20],
    effects: { smitten: 10 },
  },
  "spirit link": {
    variant: "direct",
    range: 10,
    cost: 2,
    type: "healing",
    amount: [],
    effects: { shielded: 10, energized: 3 },
  },

  // --- TIME & MOTION (Hasten, Fasten, Slowed) ---
  "quickstep": {
    variant: "direct",
    range: 0,
    cost: 1,
    type: "physical",
    amount: [],
    effects: { hastened: 3, fastened: 2 },
  },
  "chronoshift": {
    variant: "direct",
    range: 10,
    cost: 2,
    type: "mystical",
    amount: [4],
    effects: { hastened: 5, slowed: 3 },
  },
  "gravity well": {
    variant: "aoe",
    range: 8,
    size: 3,
    cost: 3,
    type: "mystical",
    amount: [8, 8],
    effects: { slowed: 4, stunned: 1 },
  },
  "temporal haste": {
    variant: "aoe",
    range: 0,
    size: 4,
    cost: 4,
    type: "mystical",
    amount: [],
    effects: { hastened: 8, energized: 4 },
  },
  "anchor curse": {
    variant: "direct",
    range: 6,
    cost: 2,
    type: "mystical",
    amount: [12],
    effects: { fastened: 6, slowed: 2 },
  },

  // --- MENTAL STATES (Focused, Confused, Enraged) ---
  "meditate": {
    variant: "direct",
    range: 0,
    cost: 1,
    type: "healing",
    amount: [],
    effects: { focused: 6, confused: -5 },
  },
  "bloodlust": {
    variant: "direct",
    range: 0,
    cost: 1,
    type: "physical",
    amount: [],
    effects: { enraged: 8, weakened: -2 },
  },
  "mind scramble": {
    variant: "direct",
    range: 10,
    cost: 2,
    type: "mystical",
    amount: [6, 6],
    effects: { confused: 5 },
  },
  "battle trance": {
    variant: "direct",
    range: 0,
    cost: 2,
    type: "physical",
    amount: [],
    effects: { focused: 4, enraged: 4, fortified: 2 },
  },
  "hallucination": {
    variant: "aoe",
    range: 8,
    size: 3,
    cost: 3,
    type: "mystical",
    amount: [4, 4],
    effects: { confused: 8, shocked: 2 },
  },
  "primal roar": {
    variant: "aoe",
    range: 0,
    size: 5,
    cost: 3,
    type: "physical",
    amount: [],
    effects: { enraged: 6, stunned: 1 },
  },

  // --- DEFENSIVE & UTILITY (Fortified, Shielded, Energized) ---
  "iron skin": {
    variant: "direct",
    range: 0,
    cost: 1,
    type: "physical",
    amount: [],
    effects: { fortified: 5, slowed: 1 },
  },
  "arcane battery": {
    variant: "direct",
    range: 5,
    cost: 2,
    type: "mystical",
    amount: [],
    effects: { energized: 10, focused: 2 },
  },
  "bulwark of light": {
    variant: "aoe",
    range: 0,
    size: 3,
    cost: 3,
    type: "healing",
    amount: [],
    effects: { shielded: 20, fortified: 4 },
  },
  "overload": {
    variant: "direct",
    range: 0,
    cost: 2,
    type: "mystical",
    amount: [],
    effects: { energized: 15, burning: 2 },
  },
  "diamond soul": {
    variant: "direct",
    range: 0,
    cost: 4,
    type: "mystical",
    amount: [],
    effects: { fortified: 15, focused: 10, shielded: 30 },
  },

  // --- STATUS OVERLOAD (Multiple Dots & Debuffs) ---
  "septic strike": {
    variant: "direct",
    range: 1,
    cost: 2,
    type: "physical",
    amount: [10],
    effects: { toxin: 5, bleeding: 5 },
  },
  "coldsnap burst": {
    variant: "aoe",
    range: 6,
    size: 2,
    cost: 2,
    type: "mystical",
    amount: [8],
    effects: { frostbite: 4, slowed: 2 },
  },
  "shrapnel bomb": {
    variant: "aoe",
    range: 10,
    size: 2,
    cost: 2,
    type: "physical",
    amount: [4, 4, 4, 4],
    effects: { bleeding: 4, shocked: 1 },
  },
  "witch's brew": {
    variant: "direct",
    range: 8,
    cost: 3,
    type: "mystical",
    amount: [6],
    effects: { toxin: 4, confused: 4, weakened: 4 },
  },
  "volcanic eruption": {
    variant: "aoe",
    range: 10,
    size: 4,
    cost: 4,
    type: "mystical",
    amount: [20, 20],
    effects: { burning: 6, stunned: 1, corroding: 3 },
  },

  // --- UNIQUE COMBO ABILITIES ---
  "flicker jab": {
    variant: "direct",
    range: 1,
    cost: 1,
    type: "physical",
    amount: [4, 4],
    effects: { hastened: 2 },
  },
  "nerve strike": {
    variant: "direct",
    range: 1,
    cost: 3,
    type: "physical",
    amount: [12],
    effects: { stunned: 2, weakened: 5, fastened: 5 },
  },
  "radiant Nova": {
    variant: "aoe",
    range: 0,
    size: 6,
    cost: 4,
    type: "healing",
    amount: [12, 12, 12],
    effects: { smitten: 10, energized: 5 },
  },
  "corrupted grasp": {
    variant: "direct",
    range: 4,
    cost: 2,
    type: "mystical",
    amount: [10],
    effects: { corroding: 5, bleeding: 2, toxin: 2 },
  },
  "equilibrium": {
    variant: "direct",
    range: 0,
    cost: 3,
    type: "healing",
    amount: [],
    effects: { regenerating: 5, focused: 5, energized: 5 },
  },
  "phantom pain": {
    variant: "direct",
    range: 12,
    cost: 2,
    type: "mystical",
    amount: [20],
    effects: { confused: 2, smitten: 2 },
  },
  "earthquake": {
    variant: "aoe",
    range: 0,
    size: 8,
    cost: 4,
    type: "physical",
    amount: [12, 12, 12, 12],
    effects: { stunned: 1, slowed: 10 },
  },
  "serpent's kiss": {
    variant: "direct",
    range: 1,
    cost: 1,
    type: "physical",
    amount: [6],
    effects: { toxin: 10, bleeding: 2 },
  },
  "eye of the storm": {
    variant: "aoe",
    range: 0,
    size: 3,
    cost: 3,
    type: "mystical",
    amount: [10, 10],
    effects: { shocked: 5, focused: 5 },
  },
  "vampiric touch": {
    variant: "direct",
    range: 1,
    cost: 2,
    type: "mystical",
    amount: [12],
    effects: { regenerating: 5, weakened: 2 },
  },
  "concussive shot": {
    variant: "direct",
    range: 15,
    cost: 2,
    type: "physical",
    amount: [8],
    effects: { stunned: 1, confused: 2 },
  },
  "acidic rain": {
    variant: "aoe",
    range: 10,
    size: 5,
    cost: 3,
    type: "mystical",
    amount: [6, 6],
    effects: { corroding: 10 },
  },
  "divine inspiration": {
    variant: "direct",
    range: 10,
    cost: 2,
    type: "healing",
    amount: [],
    effects: { energized: 8, focused: 8 },
  },
  "blood tribute": {
    variant: "direct",
    range: 0,
    cost: 1,
    type: "physical",
    amount: [],
    effects: { enraged: 15, bleeding: 5 },
  },
  "frost armor": {
    variant: "direct",
    range: 0,
    cost: 2,
    type: "mystical",
    amount: [],
    effects: { fortified: 5, frostbite: 2, shielded: 10 },
  },
  "silence": {
    variant: "direct",
    range: 10,
    cost: 2,
    type: "mystical",
    amount: [],
    effects: { confused: 5, focused: -10 },
  },
  "reckless charge": {
    variant: "direct",
    range: 4,
    cost: 2,
    type: "physical",
    amount: [20],
    effects: { enraged: 5, weakened: 2 },
  },
  "mending wave": {
    variant: "aoe",
    range: 0,
    size: 4,
    cost: 3,
    type: "healing",
    amount: [12, 12],
    effects: { regenerating: 3 },
  },
  "lightning tether": {
    variant: "direct",
    range: 8,
    cost: 2,
    type: "mystical",
    amount: [10],
    effects: { shocked: 4, fastened: 4 },
  },
  "disorienting flurry": {
    variant: "direct",
    range: 1,
    cost: 2,
    type: "physical",
    amount: [4, 4, 4, 4],
    effects: { confused: 3 },
  },
  "holy fire": {
    variant: "aoe",
    range: 8,
    size: 2,
    cost: 3,
    type: "mystical",
    amount: [8, 8, 8],
    effects: { smitten: 5, burning: 3 },
  },
  "adrenaline rush": {
    variant: "direct",
    range: 0,
    cost: 1,
    type: "physical",
    amount: [],
    effects: { hastened: 5, energized: 2 },
  },
  "decaying touch": {
    variant: "direct",
    range: 1,
    cost: 2,
    type: "mystical",
    amount: [12],
    effects: { corroding: 5, weakened: 3 },
  },
  "solar flare": {
    variant: "aoe",
    range: 5,
    size: 3,
    cost: 3,
    type: "mystical",
    amount: [20],
    effects: { stunned: 1, burning: 5 },
  },
  "stone wall": {
    variant: "aoe",
    range: 5,
    size: 3,
    cost: 2,
    type: "physical",
    amount: [],
    effects: { fortified: 10, shielded: 5 },
  },
  "poison cloud": {
    variant: "aoe",
    range: 6,
    size: 4,
    cost: 3,
    type: "mystical",
    amount: [4],
    effects: { toxin: 12 },
  },
  "iron will": {
    variant: "direct",
    range: 0,
    cost: 2,
    type: "physical",
    amount: [],
    effects: { focused: 10, fortified: 5, stunned: -1 },
  },
  "arcane storm": {
    variant: "aoe",
    range: 10,
    size: 5,
    cost: 4,
    type: "mystical",
    amount: [10, 10, 10, 10, 10],
    effects: { shocked: 5, energized: 2 },
  },
  "death's door": {
    variant: "direct",
    range: 1,
    cost: 4,
    type: "physical",
    amount: [20, 20, 20, 20],
    effects: { bleeding: 10, weakened: 10 },
  },
});

export const ABILITY_ARRAY = Object.values(ABILITIES);

